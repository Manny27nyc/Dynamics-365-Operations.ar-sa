---
title: توزيع الموجة
description: يوضح هذا الموضوع كيفيه إعداد خطوه توزيع الموجه، بما في ذلك كيفيه تمكين المعالجة المتوازية له.
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: 10.0.18
ms.openlocfilehash: 541e6c42ae1fa7d803b5becc1b52e34860777594
ms.sourcegitcommit: 008779c530798f563fe216810d34b2d56f2c8d3c
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 12/14/2021
ms.locfileid: "7920588"
---
# <a name="wave-allocation"></a>توزيع الموجة

[!include [banner](../includes/banner.md)]

يمكن ان تكون معالجه الموجه مضيعه للوقت، ويتم قضاء معظم وقت المعالجة في خطوه التوزيع وفي خطوه إنشاء العمل.

يمكنك الآن تشغيل كل من هذه الخطوات بالتوازي، والتي يمكنها تحسين أداء معالجه الموجه، والسماح بإنتاجيه أكبر من الامواجات في نفس المستودع. يوضح هذا الموضوع كيفيه إعداد أسلوب توزيع الموجه للتشغيل بالتوازي. لمزيد من المعلومات حول كيفيه إعداد إنشاء العمل لتشغيله بشكل متواز، راجع [جدوله إنشاء العمل اثناء الموجه](configure-wave-schedule-work-creation.md).

من الممكن مسبقا تخصيص موجه واحد في المستودع في المرة الواحدة. تمت أزاله هذا القيد واستبداله بقيد جديد يقوم فقط بتامين الصنف والابعاد الموجودة اعلي الموقع في التدرج الهرمي للحجز. تتضمن الابعاد الموجودة باعلي الموقع دائما ابعاد المنتج. على سبيل المثال، إذا تم تكوين عنصر باستخدام *اللون*، فإنه يمكن معالجة متغيرات *الأحمر*، و *الأزرق*، و *الأصفر* بالتوازي.

وهذا يعني انه في حاله تخصيص نفس العنصر بنفس الابعاد الموجودة اعلي الموقع بواسطة موجه واحد، سيتعين علي موجات أخرى الانتظار للحصول علي تامين علي نفس الصنف والابعاد. في حاله تعذر الحصول علي التامين بطريقه في الوقت المناسب، سيحدث خطا ستفشل معالجه الموجه.

من أجل استخدام المعالجة المتوازية، يجب تشغيل الموجه في المجموعة.

## <a name="performance-improvements"></a>تحسينات الأداء

وتقع فوائد أداء المعالجة المتوازية في فئتين:

- **الإنتاجية المحسنة** - سيقوم إنتاجيه الانتاجيه عاده بالتحسين حتى في حاله عدم تكوين المعالجة المتوازية، خاصه للسيناريوهات حيث لا يوجد تراكب للعناصر داخل موجات.
- **تحسين التخصيص لموجة واحدة** - أظهر الاختبار على بيانات العملاء تحسنًا في الأداء يقارب 50٪ بعد التبديل إلى التخصيص المتوازي. يتم اجراء المعالجة المتوازية لكل أصناف وابعاد اعلي الموقع، ولذلك تعتمد التحسينات علي عدد الأصناف المختلفة التي يحتويها الموجه والبنية التحتية المتوفرة ومده التخصيص مقابل مده إنشاء العمل.

## <a name="configure-parallel-allocation"></a>تكوين التوزيع المتوازي

### <a name="warehouse-management-parameters"></a>محددات إدارة المستودعات

لاستخدام معالجه التوزيع المتوازي، انتقل إلى **إدارة المستودع > إعداد > إعداد معلمات إدارة المستودع**، افتح علامة التبويب **معالجة الموجات**، ثم قم باجراء الإعدادات التالية:

- **مجموعه دفعات معالجة الموجات** - حدد مجموعه الدفعات التي يجب ان تستخدمها المعالجة الاوليه للموجات. يمكن إجراء المعالجة اللاحقة للتوزيع باستخدام مجموعات دُفعات مختلفة.
- **أمواج المعالجة في الدفعة** - قم بتعيين هذا إلى *نعم* لاستخدام المعالجة المتوازية.
- **انتظار التأمين (بالمللي ثانية)** - أدخل الوقت بالمللي ثانية الذي ستنتظر خطوة توزيع خلالها مورد النظام المؤمن بواسطة خطوة توزيع أخرى. عند تجاوز هذا الوقت، لن تتم معالجة الموجة ويتم عرض رسالة إعلام بخطأ. نوصي بالسماح بعدد قليل من الثواني علي الأقل للسماح بتخصيص وحده منطقيه واحده للانتهاء.

للحصول علي معلومات حول خيارات معالجه الموجات الأخرى الموجودة في صفحة **معلمات إدارة المستودع**، راجع [معلمات المستودع لمعالجه الموجات](wave-warehouse-parameters.md).

## <a name="wave-process-methods"></a>طرق معالجة الموجة

لإعداد المعالجة المتوازية:

1. انتقل إلى **إدارة المستودع > إعداد > موجات > أساليب معالجة الموجات**.
1. حدد أسلوب `allocateWave` في الشبكة.
1. في جزء الإجراء، حدد **تكوين المهمة**.
1. يتم فتح صفحة **تكوين مهمة أسلوب ترحيل الموجة**. تسرد هذه الشبكة كل مستودع حيث قمت بتكوين أسلوب `allocateWave`. سيتم استخدام المعالجة المتوازية فقط للمستودعات المسرده. استخدم أزرار جزء الإجراءات لأضافه أو أزاله المستودعات من الشبكة حسب الحاجة. 
1. لكل مستودع، قم بالإعدادات التالية:
    - **الحد الأقصى لعدد مهام الدفعات** - تحديد عدد مهام الدفعات التي ينبغي استخدامها للتوزيع الخاص بالمستودع المحدد. يعتمد العدد الأمثل لمهام الدفعات علي البنية الاساسيه المتاحة والمهام المجموعة الأخرى التي يتم معالجتها علي الخادم. يتم القيام بالاختبارات في بيئة أربعه مراكز التي تم تخصيصها لمعالجه الموجه المعروضة باستخدام ثمانيه مهام تنتج نتائج جيده.
    - **مجموعة دفعات معالجة الموجات** - يمكن استخدام مجموعات دُفعات محددة لمستودعات مختلفة للسماح بتوسيع معالجة التخصيص حسب المستودع.

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a>تمكين التوازي عبر جميع الكيانات القانونية أو تعطيله

ونوصيك بتعيين أسلوب `allocateWave` لتشغيله بالتوازي عبر كافة الكيانات القانونية وذلك لان ذلك يساعد علي تحسين أداء معالجه الموجه. بدءًا من الإصدار 10.0.17 من Supply Chain Management، تم تمكين ميزة *توازي الموجات لأسلوب توزيع الموجة* بشكل افتراضي لجميع عمليات التثبيت الجديدة والمحدثة، ولا يمكن إيقاف تشغيلها مرة أخرى. بعد تمكين هذه الميزة، يحدث ما يلي:

- يتم تحديث أسلوب `allocateWave` ليتضمن إعداد تكوين المهمة الذي يتيح لك امكانيه استخدام صفحة **أساليب معالجة الموجات** لتحديد عدد المهام التي سيتم تشغيلها في وقت واحد، مكافئ لعدد العمليات المتوازية. نتيجة لذلك، يتم تقليل الوقت المستخدم في خطوة موجة التخصيص (التي تكون عادةً من 30٪ إلى 60٪ من إجمالي وقت المعالجة) بعامل يعادل تقريبًا عدد المهام. من الممكن أيضا تحديد المجموعة التي سيتم تعيينها لمعالجه هذه المهام. من المهم ملاحظة أنه سيتم تكوين جميع الكيانات القانونية الخاصة بك لمعالجة الموجات دفعة واحدة. بالنسبة للمستودعات التي تم تكوينها بالفعل لمعالجة الموجات دفعة واحدة، وللمستودعات التي تم تكوينها بالفعل لاستخدام أسلوب `allocateWave` بالتوازي، سيتم الاحتفاظ بالتكوين الموجود.
- بشكل افتراضي، يتم تكوين كافة الكيانات القانونية الجديدة لمعالجه الموجات في المجموعة. لكافة المستودعات الجديدة التي تمكين خيار **عمليات إدارة المستودعات** لها سيتم تكوين أسلوب `allocateWave` لها لتشغيلها بالتوازي بشكل افتراضي.
- في صفحة **معلمات إدارة المستودع**، يتم تعيين **حفظ العملية في دفعة** إلى *نعم* ويتم تعيين **انتظار التأمين (بالملي ثانية)** إلى 15 ثانية افتراضيًا. وهذا يعني ان كافة موجات سيتم تنفيذها في الدفعة. عند تشغيل الموجة، تكتسب قفلًا على العنصر والأبعاد أعلى الموقع أثناء خطوة التوزيع. عندما تحاول مهمة معالجة موجة أخرى الحصول على نفس القفل للسجل نفسه، يتم حظره حتى تنتهي العملية الحالية. تحدد إعدادات **انتظار التأمين (بالملي ثانية)** الحد الأقصى للوقت الذي سينتظره النظام قبل إصدار التأمين.

تتطلب معالجة التوزيع المتوازي معالجة موجات لتشغيلها في دفعة. لذلك، ستقوم بتقليل أداء معالجه الموجه إذا قمت بإيقاف إعداد **حفظ العملية في الدفعة**، خاصةً إذا كانت معالجه الموجه تستخدم عمليه متوازية كما هو محدد من قبل تكوين المهمة لأساليب الموجه ذات الصلة.

إذا لزم الأمر، يمكنك التراجع عن كل من الإعدادات التي تم اجراؤها بشكل افتراضي عندما يتم تمكين ميزة *موازة الموجات لأسلوب توزيع الموجة* للمثيل الخاص بك تلقائيًا. وللقيام بهذا:

- انتقل إلى **إدارة المستودعات‬\> إعداد‬ \> محددات إدارة المستودعات**. في علامة التبويب **معالجة الموجة**، طبق قيمك المفضلة لـ **معالجة الموجات في دفعة** و **انتظار التأمين (بالملي ثانية).**.
- انتقل إلى **إدارة المستودعات \> إعداد \> الموجات \> أساليب عملي الموجة**. حدد أسلوب `allocateWave`. في جزء الإجراء، حدد **تكوين المهمة** لفتح صفحه تسرد كل مستودع يتم فيه تعيين الطريقة لتعمل بالتوازي. قم بتعديل أو حذف عدد مهام الدفعات ومجموعه الموجات المعينة لكل مستودع مدرج بالقائمة حسب الحاجة.

## <a name="troubleshooting"></a>استكشاف الأخطاء وإصلاحها

### <a name="troubleshoot-using-the-infolog"></a>استكشاف أخطاء استخدام سجل المعلومات وإصلاحها

نظرًا لاستخدام إطار عمل الدُفعة، سيتم تسجيل الأخطاء التي تحدث أثناء معالجة الموجة كجزء من سجلات معلومات وظائف الدُفعة. لقراءه وظائف الدفعات المرتبطة بموجة:

1. انتقل إلى **إدارة المستودعات \> الموجات الصادرة‬ \> موجات الشحنة‬ \> كافة الموجات‬**.
1. حدد الموجة التي تريد فحصها.
1. في جزء الإجراء، افتح علامة التبويب **موجة**، ومن مجموعة **الموجة**، حدد **وظائف الدفعات**.

تُعد معالجة الموجة ذاتية التصحيح، لذا يجب الإبلاغ عن أي خطأ يتم اكتشافه أثناء المعالجة باستخدام سجل المعلومات.

يمكن أن يكون الخطأ النموذجي المتعلق بالمعالجة المتوازية هو أن موجتين تحاولان تخصيص نفس العنصر في نفس الوقت وأخرى لا تكتمل بحيث لا تتمكن الموجة الأخرى من الحصول على قفل خلال الوقت المحدد. في حاله حدوث هذا الموقف، فسوف يحتوي سجل مهام المجموعة علي معلومات توضح انه تعذر الحصول علي تامين الصنف، وفي هذه الحالة يجب معالجه الموجه الذي تعرض للفشل مره أخرى.

ونظرا لحدوث المعالجة بالتوازي، يجب ان يتم الاحتفاظ بالبيانات في جداول مختلفه لتعقب حاله المعالجة. وهذا يعني ان السجلات الخاصة بوظائف المجموعة قد تحتوي علي أخطاء مثل أخطاء المفاتيح المكررة.

كما تعد الأخطاء الواردة من مهام المجموعة جزءا من سجل الوظائف الدفعيه. تكون أهم المعلومات عاده في الجزء السفلي.

في حالات نادره، علي سبيل المثال، إذا تم إنهاء اتصال SQL، فمن الممكن ان تنتهي معالجه الموجه في حاله غير متناسقة حيث تظهر مهمة المجموعة ولكن يتم إيقاف المعالجة. لا يمكن للموجه معالجه الأخطاء مثل هذا، لذلك يتم القيام بمحاولة لتنظيف موجات فاشله عند تشغيل الموجه التالي. بدلا من ذلك، إذا كان الموجه الحالي في حاله غير متناسقة، قم باجراء الخطوات التالية:

1. انتقل إلى **إدارة المستودعات \> الموجات الصادرة‬ \> موجات الشحنة‬ \> كافة الموجات‬**.
1. حدد الموجه التي تحتاج إلى تنظيفها.
1. في جزء الإجراء، افتح علامة التبويب **موجة**، وفي مجموعة **الموجة**، حدد **تنظيف بيانات الموجة**.

### <a name="troubleshoot-using-the-wave-progress-log"></a>استكشاف الأخطاء وإصلاحها باستخدام سجل تقدم الموجه

إذا تم تمكين خيار **إنشاء سجل تقدم الموجات** في صفحة **معلمات إدارة المستودعات**، فإنه يتم إنشاء سجل سجل في كل مرة يبدأ فيها تخصيص عنصر ما وأبعاده وينتهي. يجب ان تقوم بتمكين هذا السجل فقط عندما تحتاجه، علي سبيل المثال، اثناء الاختبار الاولي أو لاستكشاف الأخطاء وإصلاحها. عند تمكين هذا الخيار، يمكنك عرض السجل عن طريق الأخذ في الخطوات التالية:

1. انتقل إلى **إدارة المستودعات \> الموجات الصادرة‬ \> موجات الشحنة‬ \> كافة الموجات‬**.
1. حدد الموجة التي تريد فحصها.
1. في جزء الإجراءات، افتح علامة تبويب **الموجة** في مجموعة **الموجة‏‎‬**، حدد **تقدم**.
