---
title: جدولة تنظيف بيانات محفوظات المبيعات‬
description: يصف هذا المقال كيف يمكنك المساعدة في تحسين أداء النظام من خلال جدولة المهمة الدورية لتنظيف محفوظات تحديث المبيعات للتشغيل على فترات منتظمة.
author: myvakalo
ms.date: 03/21/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: myvakalo
ms.search.validFrom: 2021-09-29
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: 1b2c9436fbb5020065f8f6ec30eedeca342d8aa9
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8900814"
---
# <a name="schedule-sales-history-data-cleanup"></a>جدولة تنظيف بيانات محفوظات المبيعات‬

[!include [banner](../includes/banner.md)]

كجزء من العملية القياسية، يقوم Microsoft Dynamics 365 Supply Chain Management بإنشاء وتخزين بيانات تحديث سجل المبيعات بشكل مستمر. بمرور الوقت، قد تتراكم كمية كبيرة من بيانات سجل المبيعات القديمة في نظامك. يمكن أن تتسبب هذه البيانات المتراكمة في حدوث مشكلات في الأداء والوظيفية عند ترحيل المستندات المتعلقة بأوامر المبيعات. (تتضمن هذه المستندات تأكيدات أوامر المبيعات وإيصالات تعبئة المبيعات وقوائم انتقاء المبيعات والفواتير). لذلك، يجب عليك إعداد المهمة الدورية  *تنظيف محفوظات تحديث المبيعات* وجدولتها للتشغيل في فاصل زمني منتظم. ستعمل هذه المهمة على إزالة كل بيانات تحديث محفوظات المبيعات التي لم تعد مطلوبة.

إذا كنت تستخدم المهمة الدورية *تنظيف محفوظات تحديث المبيعات*، فإننا نوصي بتمكين ميزة *تحسينات أداء تنظيف سجل المبيعات*، مما يجعل المهمة تعمل بشكل أكثر فعالية. (ومع ذلك، يمكنك أيضًا تشغيل المهمة دون تمكين هذه الميزة.)

## <a name="turn-on-the-sales-history-cleanup-features"></a>قم بتشغيل ميزات تنظيف سجل المبيعات

لإعداد واستخدام المهمة الدورية *تنظيف محفوظات تحديث المبيعات* جنبًا إلى جنب مع جميع الميزات الموضحة في هذا المقال، يجب عليك تمكين ميزتي *تحسينات أداء تنظيف سجل المبيعات* و *تنظيف محفوظات تحديث المبيعات استنادًا إلى على الميزات العمرية* في إدارة الميزات، كما هو موضح في الأقسام الفرعية التالية.

### <a name="sales-history-cleanup-performance-improvements"></a>تحسينات في أداء تنظيف محفوظات المبيعات

قد يستغرق **تنظيف سجل المبيعات** وقتًا طويلاً في حالة التشغيل بشكل غير متكرر على بيئات تحتوي على كمية كبيرة من تحديثات المبيعات. في هذه الحالات ، يمكن لميزه *تحسينات أداء تنظيف محفوظات المبيعات* للمساعدة في تقليل مده التشغيل وتحسين الوثوقيه.

تعمل هذه الميزة علي تحسين مهمة التنظيف الموجودة بالطرق التالية:

- تقوم بتقسيم التنظيف إلى مجموعات (يمكنك تغيير حجم المجموعة من خلال التخصيصات).
- سيتم تشغيله لمده تصل إلى 2 ساعة (يمكنك تغيير المدة من خلال التخصيصات).
- وكلما أمكن، سيتم جمع قدرات قاعدة البيانات لتقليل التعارضات وتجنب ربط جداول المعاملات أثناء التنظيف.

بعد تمكين الميزة ، سيتم تشغيل وظيفة مجموعه  **تنظيف محفوظات تحديث المبيعات** (**المبيعات والتسويق \>مهام فتره \>تنظيف \>محفوظات تحديث المبيعات**) كما كانت سابقا ، ولكن مع أداء أفضل وبحد اقصي يبلغ عدد الساعات 2. وهذا يعني انه قد يحتاج لتشغيل عده مرات لتنظيف كافة البيانات الخاصة بإطار زمني لاحتجاز محدد.

قبل أن تتمكن من استخدام هذه الميزة، يجب تشغيلها في النظام. بإمكان المسؤولين استخدام إعدادات [دارة الميزات](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) للتحقق من حالة الميزة وتشغيلها. في مساحة عمل **إدارة الميزات**، تكون هذه الميزة مدرجة بالطريقة التالية:

- **الوحدة النمطية:** *المبيعات والتسويق‎*
- **اسم الميزة:** *تحسينات في أداء تنظيف محفوظات المبيعات*

### <a name="clean-up-sales-update-history-based-on-age"></a>تنظيف محفوظات تحديث المبيعات بناءً على العمر

تتيح لك ميزة *تنظيف محفوظات تحديث المبيعات استنادًا إلى العمر* تحديد الحد الأقصى لعمر السجلات التي يجب الاحتفاظ بها عند تشغيل المهمة الدورية *تنظيف محفوظات تحديث المبيعات*. سيتم حذف السجلات القديمة. هذه الميزة مفيدة عندما تقوم بإعداد المهمة للتشغيل بشكل دوري، لأنه يتم احتساب العمر دائمًا بالنسبة للتاريخ الذي يتم فيه تشغيل المهمة. إذا كنت لا تستخدم هذه الميزة، يمكنك فقط تعيين تاريخ محدد لحفظ السجلات الأقدم.

قبل أن تتمكن من استخدام هذه الميزة، يجب تشغيلها في النظام. بإمكان المسؤولين استخدام إعدادات [دارة الميزات](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) للتحقق من حالة الميزة وتشغيلها. في مساحة عمل **إدارة الميزات**، تكون هذه الميزة مدرجة بالطريقة التالية:

- **الوحدة النمطية:** *المبيعات والتسويق‎*
- **اسم الميزة:** *تنظيف محفوظات تحديث المبيعات بناءً على العمر*

## <a name="set-up-and-schedule-the-sales-history-cleanup-periodic-task"></a>إعداد وجدولة المهمة الدورية لتنظيف سجل المبيعات

لإعداد وجدولة المهمة الدورية *تنظيف سجل المبيعات*، اتبع هذه الخطوات.

1. قم بتحليل احتياجات عملك لتحديد عدد أيام بيانات ترحيل أوامر المبيعات التاريخية التي يجب عليك الاحتفاظ بها. نوصي عادةً بتشغيل مهمة التنظيف كل ثلاثة أشهر وبحد أقصى كل ستة أشهر.
1. انتقل إلى **المبيعات والتسويق \> المهام الدورية \> تنظيف \> تنظيف محفوظات تحديث المبيعات**.
1. في مربع الحوار **تنظيف محفوظات تحديث المبيعات**، في علامة التبويب السريعة **المعلمات**، عيّن الحقول التالية:

    - **تنظيف** – حدد إحدى القيم التالية لتحديد نوع السجلات لتنظيفها:

        - **تم التنفيذ** – احذف فقط السجلات التي تمت معالجتها بالكامل. نظرًا لأنه من غير المحتمل أن يكون لديك أي استخدام آخر لهذه السجلات، فإن هذا الخيار هو الأكثر أمانًا.
        - **تم التنفيذ والخطأ** – احذف كلاً من السجلات والسجلات التي تمت معالجتها بالكامل حيث حدث خطأ. هذا الخيار هو الأكثر استخدامًا. قد ترغب في فحص السجلات الخاطئة وحتى إصلاحها بدلاً من تنظيفها تلقائيًا. ومع ذلك، تختار العديد من الشركات تنظيف هذه السجلات أيضًا بعد حوالي شهر، لأنها ربما لم تعد ذات صلة بحلول ذلك الوقت.
        - **الكل** – حذف السجلات المنفذة والخاطئة والمنتظرة. سجلات الانتظار صالحة ولكن لم تتم معالجتها بالكامل حتى الآن. في معظم الحالات، ربما لا تريد حذفها تلقائيًا. ومع ذلك، في بعض المواقف، قد تختار حذفها تلقائيًا بعد مرور فترة زمنية محددة.

    - **الاحتفاظ بالسجلات بناءً على العمر** – حدد ما إذا كنت تريد تنظيف السجلات بناءً على عمرها في اليوم الذي تكون فيه المهمة يتم تشغيل أو حذف السجلات التي تم إنشاؤها قبل تاريخ محدد. إذا كنت تقوم بجدولة التنظيف كمهمة متكررة، فيجب عليك تعيين هذا الخيار إلى *نعم*،، لأنه يتم احتساب العمر دائمًا بالنسبة إلى تاريخ تشغيل المهمة.

        - قم بتعيين هذا الخيار إلى *نعم* لتمكين حقل **الحد الأقصى للعمر**. يمكنك استخدام هذا الحقل لتحديد الحد الأقصى لعمر السجلات للاحتفاظ بها في كل مرة يتم فيها تشغيل المهمة. يتم تجاهل حقل **تاريخ الإنشاء حتى**.
        - قم بتعيين هذا الخيار إلى *لا* لتمكين حقل **تاريخ الإنشاء حتى**. يمكنك استخدام هذا الحقل لتحديد أقدم تاريخ إنشاء للسجلات للاحتفاظ به عند تشغيل المهمة. يتم تجاهل حقل **الحد الأقصى للعمر**.

    - **تاريخ الإنشاء حتى** – ينطبق هذا الإعداد فقط عند تعيين الخيار **الاحتفاظ بالسجلات بناءً على العمر** إلى *لا*. حدد أقدم تاريخ إنشاء للسجلات للاحتفاظ به عند تشغيل المهمة. سيتم حذف السجلات التي تم إنشاؤها قبل هذا التاريخ.
    - **الحد الأقصى للعمر** – ينطبق هذا الإعداد فقط عند تعيين الخيار **الاحتفاظ بالسجلات بناءً على العمر** إلى *نعم*. حدد الحد الأقصى لعمر السجلات (بالأيام) للاحتفاظ بها في كل مرة يتم فيها تشغيل المهمة. سيتم حذف السجلات القديمة.

1. في علامة التبويب السريعة **تشغيل في الخلفية**، حدد كيف ومتى وعدد المرات التي يتم فيها تشغيل المهمة. استخدم هذه الإعدادات لتنفيذ الجدول الذي حددته في الخطوة 1. تعمل الحقول بنفس الطريقة التي تعمل بها لأنواع [وظائف الدفعات الأخرى](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) في Supply Chain Management.
1. حدد **موافق** لتطبيق إعداداتك وإغلاق مربع الحوار.
