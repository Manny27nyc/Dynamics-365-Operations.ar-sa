---
title: إعداد سيناريو لذكاء IoT
description: يوضح هذا الموضوع كيفية تكوين سيناريو في Supply Chain Management لذكاء IoT.
author: robinarh
manager: tfehr
ms.date: 08/16/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: ''
ms.search.scope: Core, Operations
ms.custom: ''
ms.search.region: Global
ms.author: ''
ms.search.validFrom: 2020-04-04
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 5633741fcd9c04b68e5b174447d7ead3c521ccd7
ms.sourcegitcommit: f64fce03ec52f844b05a9e8cac286cb201385002
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 07/16/2020
ms.locfileid: "3597158"
---
# <a name="scenario-setup-for-iot-intelligence"></a>إعداد سيناريو لذكاء IoT

[!include [banner](../../includes/banner.md)]

يوضح هذا الموضوع كيفية تكوين سيناريو في Supply Chain Management لذكاء IoT. قبل أن تتمكن من إعداد السيناريوهات، يجب [إعداد LCS](iot-lcs-setup.md).

في هذا الموضوع، ستقوم بتكوين سيناريو **تعطل المعدات** لإنشاء إخطار في Supply Chain Management عند تعطل إحدى الماكينات.

## <a name="configure-the-equipment-downtime-scenario-in-supply-chain-management"></a>تكوين سيناريو **تعطل المعدات** في Supply Chain Management

يقوم سيناريو **تعطل المعدات** بتعيين إشارة خروج الجزء إلى حد التنبيه الخاص بالماكينة. وتجري مراقبة الماكينة فقط عندما تكون الماكينة محددة للسيناريو وتم تعيينها للتشغيل في Supply Chain Management. إذا كان الوقت منذ آخر مرت تم فيها استلام إشارة خروج الجزء للماكينة أكبر من حد التنبيه، عندها يتم تشغيل إخطار **الجهاز معطل**. إذا كان الجهاز لا يزال قيد التشغيل، عند تلقي إشارة **خروج الجزء** التالية يتم تشغيل إخطار **الجهاز قيد التشغيل**. إذا ظل الجهاز معطلا لمدة تزيد عن 30 دقيقة يتم تشغيل إخطار **الجهاز معطل** جديد.

يحتوي سيناريو **تعطل المعدات** على التبعيات التالية:

+ يجب أن يتم تشغيل أمر الإنتاج على ماكينة معينة لكي يتم تشغيل تنبيه.
+ يجب إرسال إشارة تمثل إشارة خروج الجزء للماكينة المعينة إلى مركز IoT باستخدام اسم خاصية فريد.
+ يجب أن تكون خاصية الطابع الزمني Unix بالملي ثانية موجودة في رسالة مركز IoT.

لتكوين السيناريو، اتبع هذه الخطوات.

1. سجل الدخول إلى Supply Chain Management.
2. قم بتمكين علامة ميزة ذكاء IoT. لمزيد من المعلومات، راجع [‏‫نظرة عامة على إدارة الميزات](https://docs.microsoft.com/dynamics365/fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md).
3. تكوين المقاييس. لمزيد من المعلومات، راجع [كيفية تكوين المقاييس](iot-metrics-setup.md#configure-metrics).
4. انتقل إلى **التحكم في الإنتاج**.
5. انتقل إلى **الإعداد \> ذكاء IoT \> إدارة السيناريوهات**.
6. انقر فوق **تكوين** في تجانب **تعطل المعدات**. يبدأ معالج التكوين مع صفحة **تعريف مخطط مستشعر المعدات**. الهدف هنا هو إعداد المخطط في Supply Chain Management لمطابقة تنسيق JSON الخاص برسائل IoT. يمكن تعريف العديد من مخططات الرسائل. لمزيد من المعلومات، راجع [تنسيقات مخطط الرسائل لمركز IoT](iot-schema-format.md). في هذا المثال، تحتوي حمولة الرسائل على مجموعة من الرسائل بهذا التنسيق:

    ```json
    {
        "timestamp": 1576016821614,
        "payload": [
            {
                "id": "IoTInt.Machine1225.PartOut",
                "timestamp": 1576016821614,
                "value": True
            },
            {
                "id": "IoTInt.Machine1226.PartOut",
                "timestamp": 1576016991616,
                "value": True
            }
        ]
    }
    ```

7. إضافة صف إلى الجدول.

    1. قم بتعيين **اسم المخطط** إلى **المعرف**.
    2. قم بتعيين **مسار المخطط** إلى **/payload[\*]/id**.
    3. قم بعيين **الوصف** إلى **معرف الرسالة**.

8. إضافة صف إلى الجدول.

    1. قم بتعيين **اسم المخطط** إلى **الطابع الزمني**.
    2. قم بتعيين **مسار المخطط** إلى **/payload[\*]/timestamp**.
    3. قم بتعيين**الوصف** إلى **الطابع الزمني للرسالة**.

9. إضافة صف إلى الجدول.

    1. قم بتعيين **اسم المخطط** إلى **القيمة**.
    2. قم بتعيين **مسار المخطط** إلى **/payload[\*]/value**.
    3. قم بتعيين **الوصف** إلى **قيمة الرسالة**.

    لا يلزمك تعريف كافة الخصائص في الرسالة، بل فقط التي تحتاج إليها. في هذا المثال، لم تقم بإنشاء صف **للطابع الزمني الجذري**. مسار **الطابع الزمني الجذر** سيكون **/timestamp**.
  
10. انقر فوق **التالي** للانتقال إلى صفحة **خريطة مخططات مستشعرات المعدات**.
11. في صف **معرف مورد المعدات** قم بتعيين **اسم المخطط** إلى **المعرف**. يتم عرض القيم الصالحة في جدول منسدل.
12. في الصف الخاص **بوقت UTC** قم بتعيين **اسم المخطط** إلى **الطابع الزمني**. يتم عرض القيم الصالحة في جدول منسدل.
13. في صف **الإشارة الناتجة عن الصف** قم بتعيين **اسم المخطط** إلى **القيمة**. يتم عرض القيم الصالحة في جدول منسدل.
14. انقر فوق **التالي** لصفحة **تكوين معرف مورد المعدات**.
15. في هذه الخطوة، ستقوم بتعيين قيم الرسائل لمركز IoT إلى موارد Supply Chain Management.

    1. في جدول **قيم بيانات الإشارات**، أضف صفًا جديدًا، وأدخل **IoTInt.Machine1225.PartOut** في عمود **القيمة**. تأتي القيمة **IoTInt.Machine1225.PartOut** من خاصية **معرف** JSON في رسائل مركز IoT.
    2. انقر فوق **حفظ**.
    3. في جدول **تعيين سجل الأعمال**، انقر فوق **جديد**. يتم تلقائيًا ملء القيمة الافتراضية لـ **نوع سجل الأعمال**، ولا تحتاج إلى تغييرها.
    4. في عمود **سجل الأعمال**، حدد مورد جهاز Supple Chain Managementالذي يتم إرسال قيمة الإشارة هذه منه.
    5. انقر فوق **حفظ**.
    6. كرر هذه الخطوات، مع إضافة تعيين سجل أعمال جديد لـ **Machine1226**. يمكنك تعيين قيم بيانات متعددة الإشارات لسجل مفرد في Supply Chain Management.

16. استخدم عمود **المحدد** لاختيار الأجهزة التي تريد معالجتها. ليس عليك تحديد كافة قيم الإشارات وليس عليك تحديد كافة الماكينات.
17. انقر فوق **التالي** للانتقال إلى صفحة **تكوين الإشارات الناتجة عن الجزء**.
18. في جدول **قيم بيانات الإشارات**، قم بإضافة صف، وقم بتعيين **القيمة** على **صحيح**. تأتي القيمة **صحيح** من خاصية **قيمة** JSON في رسائل مركز IoT. يمكنك إضافة العديد من القيم التي تحتاج إليها للسيناريو الخاص بك.
19. انقر فوق **حفظ**.
20. انقر فوق **التالي** للانتقال إلى صفحة **حد تعطل المعدات**. الماكينات المدرجة هي الماكينات التي تم تعيينها سابقًا إلى قيم الإشارة. في هذه الخطوة، عليك تحديد الحد الخاص بمعرفة ما إذا كانت الماكينة معطلة أم لا. على سبيل المثال، إذا قمت بتعيين الحد إلى 10، فان Supply Chain Management تقوم بإنشاء إخطار إذا لم يكن هناك رسالة خروج الجزء من الماكينة لمدة 10 دقائق.
21. انقر فوق **التالي** للانتقال إلى صفحة **تمكين السيناريو**. قم بتبديل شريط التمرير لتمكين السيناريو.
22. انقر فوق **إنهاء**.

تم إكمال إعداد السيناريو. ستقوم ذكاء IoT تلقائيا ببدء معالجة رسائل مركز IoT.

## <a name="configure-the-product-quality-scenario-in-supply-chain-management"></a>تكوين سيناريو **جودة المنتج** في Supply Chain Management

يقوم سيناريو **جودة المنتج** بإنشاء إخطار إذا كان هناك سمة لأحد الأصناف خارج النطاق المحدد. على سبيل المثال، قد يرسل المستشعر وزن كل عنصر إلى مركز IoT. في Supply Chain Management، سيتم إنشاء إخطار إذا كان الصنف كبيرًا جدًا أو خفيفًا جدًا.

يتضمن السيناريو التبعيات التالية:

+ يجب تشغيل أمر الإنتاج على ماكينة معينة وإنتاج منتج باستخدام سمة دفعة معينة لكي يتم إطلاق التنبيه.
+ يجب إرسال إشارة تمثل سمة الدفعة إلى مركز IoT باستخدام اسم خاصية فريد.
+ يجب أن تكون خاصية الطابع الزمني Unix بالملي ثانية موجودة في رسالة مركز IoT.

## <a name="configure-the-production-delays-scenario-in-supply-chain-management"></a>تكوين سيناريو **تأخيرات الإنتاج** في Supply Chain Management

يقوم سيناريو **تأخيرات الإنتاج** بإنشاء إخطار إذا كان صافي الإنتاج أقل من قيمة الحد. في هذا السيناريو، يتم إرسال إشارة **خروج الجزء** إلى مركز IoT لكل صنف تم إنتاجه. في Supply Chain Management ، يتم حساب تأخير الأمر استنادًا إلى مقدار المدة المقرر أن يستغرقها تشغيل أمر الإنتاج، وعدد الأصناف التي يجب إنتاجها، والمدة التي تم فيها تشغيل المهمة، وعدد إشارات **خروج الجزء** المستلمة. سيتم إنشاء إخطار بالتأخير إذا كان عدد إشارات **خروج الجزء** للمهمة أقل من قيمة الحد للقيمة المتوقعة.

يتضمن السيناريو التبعيات التالية:

+ يجب أن يتم تشغيل أمر الإنتاج على ماكينة معينة لكي يتم تشغيل تنبيه.
+ يجب إرسال إشارة تمثل إشارة خروج الجزء للماكينة المعينة إلى مركز IoT باستخدام اسم خاصية فريد.
+ يجب أن تكون خاصية الطابع الزمني Unix بالملي ثانية موجودة في رسالة مركز IoT.

## <a name="how-to-disable-a-scenario"></a>كيفية تعطيل سيناريو

اتبع هذه الخطوات لتعطيل سيناريو.

1. في Supply Chain Management، انتقل إلى **التحكم في الإنتاج \> الإعداد \> ذكاء IoT\>**.
2. انقر فوق **تكوين** في السيناريو.
3. انقر فوق **التالي** للوصول إلى آخر علامة تبويب للمعالج.
4. قم بتبديل شريط التمرير لتعطيل السيناريو.
