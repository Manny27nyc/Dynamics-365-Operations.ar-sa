---
title: الشروع في العمل باستخدام الوظيفة الإضافية لحساب الضريبة
description: يشرح هذا الموضوع كيفية إعداد الوظيفة الإضافية لحساب الضريبة.
author: wangchen
ms.date: 03/10/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application user
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: ''
ms.search.region: Global
ms.author: wangchen
ms.search.validFrom: 2021-04-01
ms.dyn365.ops.version: 10.0.18
ms.openlocfilehash: 835ae33fba31d4bccb218969aa9aa61eaa7a3061
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/01/2021
ms.locfileid: "5832583"
---
# <a name="get-started-with-the-tax-calculation-add-in-preview"></a>الشروع في العمل باستخدام الوظيفة الإضافية لحساب الضريبة (إصدار أولي)

[!include [banner](../includes/banner.md)]

[!include [banner](../includes/preview-banner.md)]

يوفر هذا الموضوع معلومات حول كيفيه البدء في الوظيفة الاضافيه لحساب الضريبة. يرشدك أولاً خلال خطوات التكوين في Microsoft Dynamics Lifecycle Services (LCS)، وRegulatory Configuration Service (RCS)، وDynamics 365 Finance، وDynamics 365 Supply Chain Management. ثم تقوم بمراجعة العملية الشائعة لاستخدام الوظيفة الإضافية لحساب الضريبة في حركات Finance وSupply Chain Management.

يتكون برنامج الاعداد من أربع خطوات أساسيه:

1. في LCS، قم بتثبيت الوظيفة الإضافية لحساب الضريبة.
2. في RCS، قم بإعداد ميزة حساب الضريبة. هذا الإعداد ليس خاصًا بكيان قانوني. يمكن مشاركتها عبر الكيانات القانونية في Finance وSupply Chain Management.
3. في Finance وSupply Chain Management، قم بإعداد معلمات الوظيفة الإضافية لحساب الضريبة حسب الكيان القانوني.
4. في Finance وSupply Chain Management، أنشئ حركات مثل أوامر المبيعات، واستخدم الوظيفة الإضافية لحساب الضريبة لتحديد الضرائب وحسابها.

## <a name="prerequisites"></a>المتطلبات الأساسية

قبل أن تتمكن من استكمال الإجراءات في هذا الموضوع، يجب إتمام المهام المتطلبات التالية:

- لديك حق الوصول إلى حساب LCS الخاص بك، وقمت بنشر مشروع LCS مع بيئة المستوى 2 (أو أعلى) التي تشغل Dynamics 365 الإصدار 10.0.18 أو أحدث.
- لديك حق الوصول إلى حساب RCS الخاص بك.
- لقد اتصلت بشركة Microsoft لتمكين الطيران في بيئة Finance أو Supply Chain Management التي تم نشرها.

## <a name="set-up-the-tax-calculation-add-in-in-lcs"></a>إعداد الوظيفة الإضافية لحساب الضريبة في LCS

1. تسجيل الدخول إلى [LCS](https://lcs.dynamics.com)
2. قم بإكمال الإعداد لتكامل Microsoft Power Platform. لمزيد من المعلومات، راجع [نظرة عامة على الوظائف الإضافية](../../fin-ops-core/dev-itpro/power-platform/add-ins-overview.md).
3. حدد إحدى البيئات غير الإنتاجية المنشورة، ثم حدد **تثبيت وظيفة إضافية جديدة**.
4. حدد **حساب الضرائب (إصدار أولي)**.
5. اقرأ البنود والشروط ووافق عليها، ثم حدد **تثبيت**.

## <a name="set-up-the-tax-calculation-add-in-in-rcs"></a>إعداد الوظيفة الإضافية لحساب الضريبة في RCS

لا تتعلق الخطوات الواردة في هذا القسم بكيان قانوني معين. يجب إكمال هذا الإجراء مرة واحدة فقط، ويمكنك إكماله في أي كيان قانوني في RCS.

1. سجل الدخول إلى [RCS](https://marketing.configure.global.dynamics.com/).
2. في Finance، في مساحة عمل **التقارير الإلكترونية**، أضف موفر تكوين جديدًا. استخدم اسم شركتك كاسم الموفر. لمزيد من المعلومات، راجع [إنشاء موفري التكوين ووضع علامة عليهم كنشطين](../../fin-ops-core/dev-itpro/analytics/tasks/er-configuration-provider-mark-it-active-2016-11.md).
3. حدد موفر التكوين الذي قمت بإنشائه للتو، ثم حدد **تعيين كنشط**.
4. حدد موفر التكوينات من **Microsoft**، ثم حدد **المستودعات**.
5. في حقل **النوع**، حدد **عمومي**.
6. حدد **فتح**.
7. انتقل إلى **نموذج بيانات الضريبة**، ثم قم بتوسيع شجره الملفات، ثم حدد **تكوين الضريبة - أوروبا**.
8. حدد أحدث إصدار، ثم حدد **استيراد**.
9. عد إلى مساحة العمل **ميزات العولمة (إصدار أولي)**، وحدد **الميزات**، وحدد الإطار المتجانب **حساب الضرائب**، ثم حدد **إضافة**.
10. حدد أحد أنواع الميزات التالية:

    - **الميزة الجديدة** – إنشاء اعداد ميزة تحتوي على محتوى فارغ.
    - **استنادا إلى الميزة الموجودة** - إنشاء ميزه من ميزة موجودة، ونسخ المحتوى من إعداد الميزة الموجودة.

11. أدخل اسمًا ووصفًا للميزة، ثم حدد **إنشاء ميزة**.

    بعد إنشاء الميزة، يتم إنشاء نسخة تمهيدية منه تلقائيًا.

12. حدد الإصدار التمهيدي للميزة، ثم حدد **تحرير**. يتم ملء صفحة **إعداد حساب الضرائب**.
13. حدد **إصدار التكوين**. يجب أن ترى إصدار التكوين الذي قمت باستيراده في الخطوة 8.

    توفر Microsoft تكوينًا افتراضيًا للضريبة للوظيفة الإضافية لحساب الضريبة. يغطي هذا التكوين معظم متطلبات سلوكيات حساب الضريبة. سيتم تحديثه بناءً على تعليقات السوق. إذا كان يجب عليك توسيع التكوين لاستيفاء متطلبات محددة، فراجع [كيفيه إنشاء ملحق في خدمة الضرائب](https://go.microsoft.com/fwlink/?linkid=2138483) للحصول على معلومات حول كيفية إنشاء وتحديد تكوين الضريبة الخاصة بك.

    بعد تحديد **إصدار التكوين**، تظهر العديد من علامات التبويب الإضافية:

    - **الأكواد الضريبية** – علامة التبويب هذه إلزامية بالنسبة لخدمة حساب الضريبة. يتم استخدامها للحفاظ على البيانات الرئيسية لأكواد الضرائب. تتم مزامنة جميع أكواد الضرائب التي تم إنشاؤها في علامة التبويب هذه تلقائيًا مع Finance عندما تقوم بتمكين الإصدار الحالي من إعداد ميزة الضريبة في الكيان القانوني.
    - **إمكانية استخدام الأكواد الضريبية** – علامة التبويب هذه إلزامية بالنسبة للوظيفة الإضافية لحساب الضريبة. يتم استخدامها لتعريف مصفوفة تحدد كود الضريبة ومجموعة الضرائب ومجموعة ضريبة الصنف. يتم استخدام كود الضريبة الذي تم تحديده لحساب مبلغ الضريبة. يتم إرجاع قيم **كود الضريبة** و **مجموعة الضريبة** و **مجموعة ضريبة الصنف** لتطبيق Finance.
    - **إمكانية استخدام رقم تسجيل ضريبة العميل** – علامة التبويب هذه اختيارية للوظيفة الإضافية لحساب الضريبة. إذا كان لديك عدة أرقام تسجيل ضرائب لعميل واحد، يمكن للوظيفة الإضافية لحساب الضريبة تحديد رقم التسجيل الضريبي الصحيح تلقائيًا. في المصفوفة الموجودة في علامة التبويب هذه، تقوم بتعريف القواعد التي تستخدمها الوظيفة الإضافية لإجراء التحديد. وبخلاف ذلك، ستستمر Finance وSupply Chain Management في استخدام رقم التسجيل الضريبي الافتراضي في المستندات الخاضعة للضريبة لحركات المبيعات.
    - **إمكانية استخدام رقم تسجيل ضريبة المورد** – علامة التبويب هذه اختيارية للوظيفة الإضافية لحساب الضريبة. إذا كان لديك عدة أرقام تسجيل ضرائب لمورد واحد، يمكن للوظيفة الإضافية لحساب الضريبة تحديد رقم التسجيل الضريبي الصحيح تلقائيًا. في المصفوفة الموجودة في علامة التبويب هذه، تقوم بتعريف القواعد التي تستخدمها الوظيفة الإضافية لإجراء التحديد. وبخلاف ذلك، ستستمر Finance وSupply Chain Management في استخدام رقم التسجيل الضريبي الافتراضي في المستندات الخاضعة للضريبة لحركات الشراء.
    - **إمكانية استخدام كود القائمة** – علامة التبويب هذه اختيارية بالنسبة للوظيفة الإضافية لحساب الضريبة. يمكن أن يساعد تلقائيًا في تحديد قيمة حقل **كود القائمة** من خلال قواعد أكثر مرونة وقابله للتكوين. في المصفوفة الموجودة في علامة التبويب هذه، يمكنك تحديد القواعد التي تستخدمها الوظيفة الإضافية لإجراء التحديد. وبخلاف ذلك، سيستمر Finance وSupply Chain Management في استخدام الرمز الافتراضي في المستندات الخاضعة للضريبة.

14. في علامة التبويب **أكواد الضريبة**، حدد **إضافة** وأدخل كود الضريبة ووصفًا له.
15. حدد **مكون الضريبة**. مكون الضريبة عبارة عن مجموعة من طرق حساب الضريبة التي تم تحديدها في الإصدار السابق لتكوين الضريبة المحدد. تتوفر مكونات الضرائب التالية:

    - حسب المبلغ الصافي
    - حسب المبلغ الإجمالي
    - حسب الكمية
    - حسب الهامش
    - ضريبة على الضريبة

16. حدد **حفظ**. تصبح المزيد من الحقول متاحة، بناءً على مكون الضريبة الذي حددته.
17. استخدم الخيارات التالية لتحديد طبيعة كود الضريبة:

    - معفى
    - ضريبة انتفاع
    - رسوم عكسية
    - استبعاد في حساب المبلغ الأساسي

    بالنسبة لسيناريو ضريبة الاستخدام، قم بإعداد رمز ضريبة واحد له معدل ضريبة موجب، وقم بتمييزه كـ **ضريبة الانتفاع**.

    بالنسبة لسيناريو الرسوم العكسية، قم بإعداد أكواد ضريبية، أحدهما له معدل ضريبة موجب، والآخر له معدل ضرائب سالب ولكن نفس قيمة المعدل. قم بتمييز كود الضريبة كـ **رسوم عكسية**. لمزيد من المعلومات حول حل الرسوم العكسية في Finance، راجع [آلية الرسوم العكسية لمخطط ضريبة القيمة المضافة/‏‫ضريبة السلع والخدمات](emea-reverse-charge.md).
    
    بالنسبة لبعض أنواع الضرائب التي يجب استبعادها في حساب مبلغ الأساس الضريبي للمعاملات التي تشمل السعر، مثل الرسوم الجمركية في بعض البلدان، حدد مربع الاختيار **استبعاد في حساب المبلغ الأساسي**.

    حافظ على معدلات الضرائب وحدود مبلغ الضريبة لكود الضريبة هذا.

18. كرر الخطوات من 14 إلى 17 لإضافة كافة أكواد الضرائب الأخرى المطلوبة.
19. في علامة التبويب **إمكانية استخدام أكواد الضريبة**، حدد الأعمدة المطلوبة لتحديد كود الضريبة الصحيح، ثم حدد **إضافة**.
20. أدخل قيمًا لكل عمود أو قم بتحديدها. ستكون حقول **كود الضريبة** و **مجموعة الضريبة** و **مجموعة ضريبة الصنف** ناتج هذه المصفوفة.
21. كرر الخطوات من 19 إلى 20 لإعداد إمكانية تطبيق أرقام تسجيل ضريبة العملاء وأرقام تسجيل ضريبة البائع وأكواد القائمة.
22. حدد **حفظ** ثم قم بإغلاق الصفحة.
23. حدد **تغيير الحالة** \> **مكتمل‏‎**. بعد تغيير الحالة إلى **مكتمل**، لا يمكن تحرير الإصدار بعد ذلك.
24. حدد **تغيير الحالة** \> **نشر**. سيتم دفع هذا الإصدار من إعداد ميزة الضرائب إلى المستودع العالمي وسيكون مرئيًا لكل كيان قانوني في Finance.

## <a name="dynamics-365-setup"></a>إعداد Dynamics 365

بعد إكمال الإعداد في RCS، كما هو موضح في القسم السابق، سيكون لديك نسخة منشورة من ميزة الضرائب. اتبع هذه الخطوات لإعداد الوظيفة الإضافية لحساب الضريبة في Finance.

يتم الإعداد في هذا القسم بواسطة كيان قانوني. يجب عليك تكوينه لكل كيان قانوني تريد تمكين الوظيفة الإضافية لحساب الضريبة له في Finance.

1. في Finance، انتقل إلى **الضريبة** \> **الإعداد** \> **تكوين الضريبة** \> **إعداد الوظيفة الإضافية لحساب الضرائب (إصدار أولي)**.
2. على علامة التبويب **عام**، عيّن الحقول التالية:

    - **تمكين وظيفة حساب الضريبة الإضافية** - حدد خانة الاختيار هذه لتمكين الوظيفة الإضافية لحساب الضريبة للكيان القانوني. إذا لم يتم تمكين الوظيفة الإضافية لحساب الضريبة للكيان القانوني الحالي، فسيستمر الكيان القانوني في استخدام محرك الضرائب الحالي لتحديد الضريبة وحسابها.
    - **إعداد الميزة** – حدد إصدار وإعداد ميزه الضريبة التي تم نشرها للكيان القانوني. لمزيد من المعلومات حول كيفية إعداد وإكمال ميزة ضريبية منشورة، راجع القسم السابق من هذا الموضوع.
    - **عملية الأعمال** – حدد عمليات الأعمال المطلوب تمكينها للوظيفة الاضافيه لحساب الضريبة.
    - **تمكين تسوية كود الضريبة** – قم بتعيين هذا الخيار إلى **نعم** لتمكين تسويات كود الضريبة على صفحة ضريبة المبيعات.

3. في علامة التبويب **الحساب**، حدد قاعدة التقريب المتوقعة للكيان القانوني.
4. في علامة التبويب **معالجة الخطأ**، حدد أسلوب معالجة الخطأ المتوقع للكيان القانوني. تتوفر ثلاثة خيارات لكل رمز نتيجة من الوظيفة الإضافية لحساب الضريبة:

    - لا
    - تحذير
    - ‏‏خطأ

5. احفظ إعداد الوظيفة الإضافية لحساب الضريبة.
6. كرر الخطوات من 1 إلى 5 لكل كيان قانوني إضافي.

## <a name="transaction-processing"></a>معالجة الحركات

بعد إكمال جميع إجراءات الإعداد، يمكنك استخدام الوظيفة الإضافية لحساب الضريبة لتحديد الضريبة وحسابها في Finance. تظل خطوات معالجة الحركات كما هي. الحركات التالية مدعومة في الإصدار 10.0.18 من Finance:

- عملية المبيعات

    - عرض أسعار المبيعات
    - أمر مبيعات
    - التأكيد
    - قائمة الانتقاء
    - إيصال التعبئة
    - فاتورة المبيعات
    - إشعار دائن
    - أمر الإرجاع
    - تكلفة الرأس
    - رسوم البند

- عمليه الشراء

    - أمر شراء
    - التأكيد
    - قائمة الإيصالات
    - إيصال استلام المنتج
    - فاتورة الشراء
    - تكلفة الرأس
    - رسوم البند
    - إشعار دائن
    - أمر الإرجاع
    - طلب الشراء
    - مصاريف بند طلب الشراء
    - طلب عرض الأسعار
    - طلب مصاريف رأس عرض أسعار
    - طلب مصاريف بند عرض أسعار

- عملية المخزون

    - أمر التحويل - الشحن
    - أمر التحويل - الاستلام
