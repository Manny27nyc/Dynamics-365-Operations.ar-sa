---
title: إعداد التكامل المباشر لـ FatturaPA الإيطالية مع SDI
description: يوفر هذا الموضوع معلومات ستساعدك على البدء في استخدام الفواتير الإلكترونية لإيطاليا وإعداد التكامل المباشر لـ FatturaPA الإيطالية مع نظام Exchange (SDI).
author: abaryshnikov
ms.date: 12/14/2021
ms.topic: article
audience: Application User, Developer
ms.reviewer: kfend
ms.search.region: Global
ms.author: abaryshnikov
ms.search.validFrom: 2021-10-18
ms.dyn365.ops.version: AX 10.0.20
ms.openlocfilehash: 0ccc9f04e42e748b4531622a1c90559d4ca17196
ms.sourcegitcommit: b1c758ec4abfcf3bf9e50f18c1102d4a9c1316d0
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 12/15/2021
ms.locfileid: "7922442"
---
# <a name="set-up-direct-integration-of-italian-fatturapa-with-sdi"></a>إعداد التكامل المباشر لـ FatturaPA الإيطالية مع SDI

[!include [banner](../includes/banner.md)]

[!include [banner](../includes/preview-banner.md)]

> [!IMPORTANT]
> قد لا تدعم الفوترة الإلكترونية في إيطاليا في الوقت الحالي جميع الوظائف المتوفرة للفواتير الإلكترونية في Microsoft Dynamics 365 Finance وفي Dynamics 365 Supply Chain Management.

يوفر هذا الموضوع معلومات من شأنها أن تساعدك على بدء استخدام الفواتير الإلكترونية لإيطاليا في Finance وSupply Chain Management. وهو يرشدك عبر خطوات التكوين التي تعتمد على البلد/المنطقة في Regulatory Configuration Services (RCS). تقوم هذه الخطوات بتكملة الخطوات الموضحة في [بدء العمل مع الفوترة الإلكترونيه](e-invoicing-get-started.md).

## <a name="prerequisites"></a>المتطلبات الأساسية

قبل إكمال الخطوات الواردة في هذا الموضوع، يجب استيفاء المتطلبات الأساسية التالية:

- أكمل الخطوات الواردة في [بدء استخدام الفواتير الإلكترونية](e-invoicing-get-started.md).
- قم باستيراد ميزة الفوترة الإلكترونية **Italian FatturaPA (IT)** إلى RCS من المستودع العالمي. لمزيد من المعلومات، راجع قسم [يمكنك استيراد ميزة الفوترة الإلكترونية من موفر تكوين Microsoft‬](e-invoicing-get-started.md#import-an-electronic-invoicing-feature-from-the-microsoft-configuration-provider) في الموضوع المذكور سابقًا "بدء استخدام الفواتير الإلكترونية".
- أضف روابط من الشهادات المطلوبة إلى بيئة الخدمة. تتضمن الشهادات المطلوبة شهادة التوقيع الرقمي وشهادة المرجع المصدق (CA) وشهادة العملاء. لمزيد من المعلومات، راجع القسم [إنشاء سر الشهادة الرقمية](e-invoicing-get-started-service-administration.md#create-a-digital-certificate-secret) في موضوع "البدء في إدارة خدمة الفواتير الإلكترونية".

## <a name="country-specific-configuration-for-the-italian-fatturapa-it-electronic-invoicing-feature"></a>التكوين الخاص بكل بلد لميزة الفوترة الإلكترونية الإيطالية FatturaPA (IT)

أكمل الإجراءات التالية قبل نشر إعداد التطبيق في تطبيق Finance أو Supply Chain Management المتصل لديك.

يكمل هذا القسم قسم [التكوين الخاص بكل بلد لإعداد التطبيق](e-invoicing-get-started.md#country-specific-configuration-of-application-setup) في موضوع "البدء في الفواتير الإلكترونية".

### <a name="create-a-new-feature"></a>إنشاء ميزة جديدة

1. سجل الدخول إلى RCS.
2. في مساحة عمل **التقارير الإلكترونية**، في قسم **موفري التكوين**، ضع علامة على موفر التكوين الخاص بشركتك على أنه نشط.
3. في مساحة العمل **ميزة العولمة**، في قسم **الميزات**، حدد الإطار المتجانب **الفوترة الإلكترونية**.
4. في صفحة **ميزات الفوترة الإلكترونية**، حدد **إضافة** \> **استنادًا إلى الميزة الموجودة**.
5. ضمن **موفر تكوين Microsoft**، حدد **Italian FatturaPA (IT)** كميزة أساسية، وأدخل اسمًا، ثم حدد **إنشاء ميزة**.

### <a name="set-up-application-specific-parameters"></a>إعداد معلمات خاصة بالتطبيق

1. في صفحة **ميزات الفوترة الإلكترونية**، حدد الميزة المراد تحريرها.
2. في علامة تبويب **الإصدارات**، تحقق من تحديد إصدار **المسودة**.
3. في علامة التبويب **تكوينات**، حدد تكوينًا، ثم حدد **المعلمات الخاصة بالتطبيق**.
4. في قسم **عمليات البحث**، تأكد من تحديد بحث **قائمة الفئات الفرعية للرسوم العكسية Natura‬‏‫**.
5. في قسم **الشروط**، حدد **إضافة**.
6. أضف شروطًا محددة لكل فئة فرعية تم تحديدها في النظام، ثم احفظ التغييرات.

    > [!NOTE]
    > في العمود **الاسم**، يمكنك تحديد قيمة العنصر النائب **\*فارغة\*** أو **\*غير فارغة\*** بدلاً من قيمة محددة.

### <a name="configure-a-processing-pipeline-for-export"></a>تكوين مسار معالجه للتصدير

1. في صفحة **ميزات الفوترة الإلكترونية**، حدد الميزة المراد تحريرها.
2. في علامة التبويب **إعدادات**، حدد **فواتير المبيعات**، ثم حدد **تحرير**.
3. في قسم **مسار المعالجة**، انتقل من خلال الإجراءات، وقم بتعيين جميع الحقول المطلوبة:

    - بالنسبة إلى إجراء **توقيع المستند**، في حقل **اسم الشهادة**، حدد شهادة التوقيع الرقمي.
    - بالتسبة إلى إجراء **الإرسال**، قم بتعيين حقلي **عنوان URL** و **الشهادات**. قيمة حقل **الشهادات** هي سلسلة من الشهادات، أولها شهادة CA الجذر (caentrate.cer)، والثاني هو شهادة العملاء.

4. حدد **التحقق من الصحة** للتأكد من أنه قد تم تعيين جميع الحقول المطلوبة.
5. احفظ التغييرات وأغلق الصفحة.
6. في علامة التبويب **إعدادات**، حدد **فواتير المشروع**، ثم حدد **تحرير**.
7. كرر الخطوات من 3 إلى 5 لفواتير المشروع.

### <a name="configure-the-processing-pipeline-for-import"></a>تكوين مسار معالجة للاستيراد

1. في صفحة **ميزات الفوترة الإلكترونية**، حدد الميزة المراد تحريرها.
2. في علامة التبويب **إعدادات**، حدد **استيراد الفواتير**، ثم حدد **تحرير**.
3. في قسم **قناة البيانات** في علامة التبويب **المعلمات**، في حقل **قناة البيانات**، أدخل قيمة سلسلة.
4. في علامة التبويب **قواعد التطبيق**، قم بتعيين الحقول للإعداد. يمكنك استخدام جملة **القناة** الافتراضية بتمرير القيمة التي قمت بتعيينها لحقل **قناة البيانات** في الخطوة السابقة إلى حقل **القيمة**.

    ![قم بإعداد قواعد قابلية التطبيق.](media/e-invoicing-ita-fatturapa-get-started-apprules-setup.png)

5. حدد **التحقق من الصحة** للتأكد من أنه قد تم تعيين جميع الحقول المطلوبة.

### <a name="deploy-the-feature"></a>نشر الميزة

1. أكمل الميزة وانشرها ووزعها في بيئة الخدمة. لمزيد من المعلومات، راجع القسم [نشر ميزه الفوترة الكترونيه إلى بيئة الخدمة](e-invoicing-get-started.md#deploy-the-electronic-invoicing-feature-to-service-environment) في الموضوع "الشروع في العمل بالفوترة الإلكترونيه".
2. انشر الميزة للتطبيق المتصل. لمزيد من المعلومات، راجع القسم [نشر ميزه الفوترة الإلكترونيه إلى التطبيق المتصل](e-invoicing-get-started.md#deploy-the-electronic-invoicing-feature-to-connected-application) في الموضوع "الشروع في العمل بالفوترة الإلكترونية".

### <a name="set-up-finance"></a>إعداد Finance

1. قم بتسجيل الدخول إلى بيئة Finance الخاصة بك.
2. في مساحة عمل **إعداد التقارير الإلكترونية**، في قسم **موفرو التكوين**، حدد اللوحة **Microsoft**.
3. حدد **المستودعات** \> **عمومي** \> **فتح**.
4. حدد واستورد تكوينات **نموذج سياق فاتورة العميل** و **استيراد فاتورة المورد (IT)**.
5. انتقل إلى **إدارة المؤسسة** \> **الإعداد** \> **معلمات المستندات الإلكترونية**.
6. في علامة التبويب **الميزات**، ابحث عن وحدد ميزة **الفاتورة الإلكترونية الإيطالية**، ثم حدد خانة الاختيار **تمكين**.
7. في علامة التبويب **المستند الإلكتروني**، تأكد من تعيين حقول **دفتر يومية فاتورة العميل** و **فاتورة المشروع** وفقًا للمعلومات الواردة في [تكوين إعداد التطبيق](e-invoicing-get-started.md#configure-the-application-setup).

### <a name="set-up-vendor-invoice-import"></a>إعداد استيراد فواتير المورِّدين 

1. في Finance، في **التقارير الإلكترونية**، في قسم **موفري التكوين**، ضع علامة على موفر التكوين الخاص بشركتك على أنه نشط.
2. حدد **تكوينات إعداد التقارير‬**.
3. حدد **نموذج سياق فاتورة العميل**، ثم حدد **إنشاء التكوين**.
4. حدد **اشتقاق من الاسم: سياق فاتورة العميل، Microsoft** لإنشاء تكوين مشتق.
5. في إصدار **مسودة**، حدد **مصمم**.
6. في شجرة **نموذج البيانات**، حدد **تعيين النموذج لمصدر البيانات**.
7. في شجرة **التعريفات**، حدد **DataChannel** ثم حدد **مصمم**.
8. في شجرة **مصادر البيانات**، قم بتوسيع حاوية **\$Context\_Channel**.
9. في حقل **القيمة**، حدد قيمة **تحرير**. 
10. أدخل اسم قناة البيانات. يجب ألا يزيد الاسم عن 10 أحرف. يجب أن يتطابق مع قيمة معلمة **قناة البيانات** لقناة البيانات لميزة الفوترة الإلكترونية في RCS.
11. احفظ التغييرات، ثم انتقل إلى **تكوينات إعداد التقارير** \> **إصدار التكوين الكامل**.
12. في علامة التبويب **قنوات خارجية**، في قسم **القنوات**، حدد **إضافة**.
13. في حقل **القناة**، أدخل قيمة **\$قناة السياق**.
14. أدخل قيمًا في حقلي **الوصف** و **الشركة**.
15. في حقل **سياق المستند**، حدد التكوين الجديد الذي قم باشتقاقه من **نموذج سياق فاتورة العميل**. يجب أن يكون وصف التعيين هو **سياق قناة بيانات**.
16. في علامة التبويب **استيراد المصادر**، حدد **إضافة**، ثم قم بتعيين القيم التالية:

    - **الاسم:** ‏OutputFile
    - **اسم كيان البيانات:** رأس فاتورة المورد (**كيان البيانات:** ‏VendorInvoiceHeaderEntity)
    - **تعيين النموذج:** استيراد فاتورة المورد (IT)

> [!NOTE]
> إذا كان لديك فواتير مورِّد مستوردة من مصادر مختلفة، يمكنك إنشاء عدة قنوات خارجية والعديد من التكوينات المشتقة التي تشتمل على قيم **\$قناة السياق** المختلفة. على سبيل المثال، قد ترغب في استيراد فواتير المورّد لكيانات قانونية مختلفة.

## <a name="proxy-server-setup"></a>إعداد الخادم الوكيل

يوفر هذا القسم المعلومات التي ستساعدك في إعداد وتكوين خدمة الوكيل للاتصال بين نظام Exchange (SDI) وخدمة الفواتير الإلكترونية.

### <a name="create-an-app-registration"></a>إنشاء تسجيل التطبيق

1. استخدم برنامج Windows PowerShell النصي التالي لإنشاء شهادة موقعة ذاتيًا لمصادقة خدمة إلى خدمة (S2S).

    ```powershell
    $certOutputLocation = "C:\certs\proxytest"
    $certName = "sdiProxyClientS2SCert"
    $certPassword = "123"

    $certCerFile = Join-Path $certOutputLocation "$certName.cer"
    $certPfxFile = Join-Path $certOutputLocation "$certName.pfx"

    $securePassword = ConvertTo-SecureString $certPassword -AsPlainText -Force

    $cert = New-SelfSignedCertificate -KeyLength 2048 -KeyExportPolicy Exportable -FriendlyName "CN=$certName" -CertStoreLocation Cert:\CurrentUser\My -Subject $certName -Provider "Microsoft Enhanced RSA and AES Cryptographic Provider"

    Export-Certificate -Cert $cert -FilePath $certCerFile -type CERT | Out-Null
    Export-PfxCertificate -Cert $cert -FilePath $certPfxFile -Password $securePassword | Out-Null
    ```

2. احفظ ملف شهادة pfx. في خزنة المفاتيح، ثم احذف النسخة المحلية.
3. سجل الدخول إلى [مدخل Azure](https://portal.azure.com) كمسؤول.
4. قم بإنشاء تسجيل تطبيق لخدمة وكيل SDI.

    1. انتقل إلى **عمليات تسجيل التطبيقات**، وأنشئ تسجيلًا، ثم قم بتعيين القيم التالية له:

        - **الاسم:** عميل وكيل SDI
        - **أنواع الحسابات المدعومة:** الحسابات في هذا الدليل التنظيمي فقط (مستأجر واحد)

    2. حدد **تسجيل**، ثم حدد تسجيل التطبيق الذي أنشأته للتو.
    3. انتقل إلى **أذونات API**، وحدد **منح موافقة المسؤول**.
    4. انتقل إلى **الشهادات والأسرار**، وحدد **تحميل الشهادة**، وقم بتحميل ملف شهادة cer. لمصادقة S2S.
    5. انتقل إلى **تطبيقات المؤسسة**، وحدد التطبيق الذي قمت بإنشائه.
    6. احفظ قيم **معرف التطبيق** (معرف العميل) و **معرف الكائن** للتطبيق.
    7. يجب أن يمنح فريق خدمة الفواتير التطبيق حق الوصول إلى الخدمة. أرسل قيم المعلمات التالية إلى <D365EInvoiceSupport@microsoft.com>:

        - معرف مستأجر AAD
        - معرف بيئة LCS
        - مُعرِّف التطبيق
        - معرف الكائن

5. في RCS، أضف التطبيق إلى قائمة التطبيقات لبيئة الخدمة الخاصة بك.

    1. انتقل إلى **ميزات العولمة** \> **البيئات** \> **الفوتةر الإلكترونية** \> **بيئات الخدمة**، وحدد بيئتك.
    2. في قسم **التطبيقات**، أضف صفًا إلى الشبكة، وأدخل الاسم ومعرف الكائن للتطبيق.

        ![إضافة التطبيق إلى بيئة الخدمة.](media/e-invoicing-ita-fatturapa-get-started-add-app-to-env.png)

    3. حدد **حفظ**، ثم حدد **نشر**.

### <a name="create-an-azure-virtual-machine"></a>إنشاء جهاز Azure ظاهري

1. في [مدخل Azure](https://portal.azure.com)، انتقل إلى **الأجهزة الظاهرية**، وحدد **إنشاء جديد**.
2. في علامة التبويب **أساسيات**، حدد اشتراكك ومجموعة الموارد. يجب أن تكون القيم عبارة عن مجموعة الاشتراك والموارد حيث يوجد مخزن المفاتيح الخاص بك وتخزين الكائن الثنائي كبير الحجم.
3. حدد المنطقة. يجب أن تكون هذه القيمة هي المنطقة التي يتم فيها نشر بيئة التمويل الخاصة بك.
4. أضف اسم المستخدم وكلمة المرور الخاصين بالمسؤول، واحفظهما في مخزن المفاتيح.
5. في حقل **تحديد المنافذ الواردة**، حدد **HTTPS (443)** و **RPD (3389)**.

    > [!NOTE]
    > نوصي بتعطيل منفذ **RDP (3389)** عندما ينتقل النظام إلى الإنتاج. يمكنك إعادة تمكينه إذا كان يجب عليك الاتصال بالجهاز الظاهري (VM) لأغراض استكشاف الأخطاء وإصلاحها.

    ![تعيين الحقول في علامة التبويب الأساسيات لإنشاء Azure VM.](media/e-invoicing-ita-fatturapa-get-started-create-vm-1.png)

6. في علامة التبويب **الأقراص**، في علامة التبويب السريعة **خيارات متقدمة**، حدد خانة الاختيار **استخدام الأقراص المُدارة**. اترك خانة الاختيار **قرص نظام التشغيل المؤقت** ممسوحًا.

    ![تعيين الحقول في علامة التبويب الأقراص لإنشاء Azure VM.](media/e-invoicing-ita-fatturapa-get-started-create-vm-2.png)

7. في علامة التبويب **الشبكات**، ضمن حقل **IP العام**، حدد **إنشاء جديد**.

    ![تعيين الحقول في علامة التبويب "الشبكات" لإنشاء Azure VM.](media/e-invoicing-ita-fatturapa-get-started-create-vm-3.png)

8. في مربع الحوار **إنشاء عنوان IP عام**، في مجموعة حقول **SKU**، حدد الخيار **قياسي**. في مجموعة حقول **التعيين**، حدد الخيار **ثابت**.

    ![إنشاء عنوان IP عام.](media/e-invoicing-ita-fatturapa-get-started-create-vm-4.png)

9. في علامة التبويب **إدارة**، امسح خانة الاختيار **إيقاف التشغيل التلقائي** لتعطيل إيقاف التشغيل التلقائي.
10. قم بتعيين حقل **تحديثات نظام التشغيل Guest** إلى **يدوي**، ثم قم بتعيين أي سياسات أخرى.
11. مراجعة وإنشاء الجهاز الظاهري (VM).
12. في الجهاز الظاهري الجديد، انتقل إلى **الكيان** \> **النظام المعيَّن**، وقم بتعيين خيار **الحالة** إلى **تشغيل**.
13. امنح الجهاز الظاهري حق الوصول إلى المخزن الرئيسي.

    1. في المخزن الرئيسي، انتقل إلى **التحكم في الوصول (IAM)** \> **تعيينات الأدوار**.
    2. حدد **إضافة تعيين الدور**، ثم قم بتعيين الحقول التالية:

        1. في حقل **الدور**، حدد **مستخدم أسرار المخزن الرئيسي**.
        2. في حقل **تعيين الوصول إلى**، حدد **الجهاز الظاهري**.
        3. في حقل **الاشتراك**، حدد اشتراكك.
        4. في حقل **تحديد**، حدد جهازك الظاهري.

    3. انتقل إلى **سياسات الوصول**.
    4. حدد **إضافة سياسة الوصول**، ثم قم بتعيين الحقول التالية:

        1. في حقل **الرئيسي المحدد**، حدد جهازك الظاهري.
        2. في قسم **الشهادة**، حدد أذونات **القائمة** و **الحصول**.

14. في [مدخل Azure](https://portal.azure.com)، انتقل إلى **عناوين IP العمومية**، وحدد عنوان IP الذي تم إنشاؤه في الجهاز الظاهري.
15. انتقل إلى **التكوين**، وقم بتعيين اسم نظام اسم المجال (DNS).

### <a name="prepare-the-proxy-service-environment"></a>إعداد بيئة خدمة الوكيل

اتبع هذه الخطوات على الجهاز حيث تتم استضافة خدمة الوكيل.

1. اتصل بالجهاز الظاهري باستخدام الاتصال بسطح المكتب البعيد.
2. افتح الأداة الإضافية "شهادة الجهاز المحلي". لمزيد من المعلومات، راجع [الكيفية: عرض الشهادات باستخدام الأداة الإضافية MMC](/dotnet/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in).
3. قم باستيراد شهادة **caentrate.cer** للإنتاج و **CAEntratetest.cer** للاختبار في [مخزن الشهادات الجذر الموثوقة](/dotnet/framework/wcf/feature-details/working-with-certificates#certificate-stores). (**CAEntratetest.cer** هي شهادة المرجع المصدق (CA) الجذر التي تم توفيرها من قبل المرجع.)
4. في لوحة التحكم، افتح **تشغيل ميزات Windows أو إيقاف تشغيلها** أو انتقل إلى **مدير الخادم** \> **إضافة الأدوار والميزات** لنظام تشغيل الخادم (OS)، وقم بتشغيل ميزات خدمات معلومات الإنترنت (IIS):

    - أدوات إدارة الويب
        - وحدة تحكم إدارة IIS
    - خدمات الويب العالمية
        - ميزات تطوير التطبيقات
            - .NET Extensibility 4.7 (أو 4.8)
            - ASP
            - ASP.NET 4.7 (أو 4.8)
            - CGI
            - ملحقات ISAPI
            - عوامل تصفية ISAPI
        - ميزات HTTP الشائعة
            - المستند الافتراضي
            - تصفح الدليل
            - أخطاء HTTP
            - المحتوي الثابت
        - السلامة والتشخيصات
            - تسجيل HTTP
            - قيد التتبع
        - ميزات الأداء
            - ضغط محتوي ثابت
        - الأمان
            - تصفيه الطلب

    ![تشغيل ميزات IIS.](media/e-invoicing-ita-fatturapa-get-started-turnon-features.png)

### <a name="set-up-the-sdi-proxy-service-in-iis"></a>إعداد خدمة وكيل SDI في IIS

1. في Microsoft Dynamics Lifecycle Services (LCS)، انتقل إلى مكتبة الأصول المشتركة، وحدد **حزمة البيانات** باعتبارها الأصل.
2. ابحث عن **وكيل Sdi لخدمة الفواتير الإلكترونية**، وقم بتنزيله إلى الجهاز الظاهري.
3. قم بتكوين الخدمة.

    1. قم بفك ضغط مجلد أرشيف **وكيل Sdi لخدمة الفواتير الإلكترونية** الذي قمت بتنزيله.
    2. في مجلد **src\\FattureService**، افتح ملف **appsettings.json**، وقم بتعيين المعلمات التالية:

        - **KeyVaultUri** – حدد عنوان المخزن الرئيسي الذي يخزن شهادة العميل لخدمة الفواتير.
        - **TenantId** – حدد المعرف الفريد العام (GUID) لمستأجر العميل.
        - **EnvironmentId** – حدد معرف بيئة LCS.
        - **ClientId** – حدد معرّف التطبيق لتسجيل تطبيق الخدمات الوسيطة في مستأجر العميل.
        - **ClientCertificateName** – حدد اسم شهادة S2S في المخزن الرئيسي.
        - **SecurityServiceClientOptions.Endpoint** – حدد عنوان URL لخدمة الأمان.
        - **SecurityServiceClientOptions.Resource** – حدد النطاق المطلوب الحصول على الرمز المميز له.
        - **InvoicingServiceClientOptions.Endpoint** – حدد نقطة نهاية خدمة الفواتير. يجب أن تكون هذه القيمة هي نفس نقطة النهاية المستخدمة لـ RCS وFinance.
        - **InvoicingServiceClientOptions.ServiceEnvironmentId** – حدد اسم بيئة الخدمة. يجب أن تكون هذه القيمة اسم بيئة Finance الخاصة بك.
        - **NotificationsFolder** – حدد المجلد الذي تريد حفظ ملفات الإشعارات الواردة فيه.

    3. في ملف **web.config**، ابحث عن السطر التالي، وأضف بصمة الإبهام لشهادة الخادم الوكيل.

        `<serviceCertificate findValue="[certificate thumbprint]" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint">`

        > [!TIP]
        > عندما ينتقل النظام إلى الإنتاج، يمكنك تغيير بعض القيم في ملف web.config للمساعدة في تقليل كمية معلومات السجل التي يتم تجميعها والمساعدة في توفير مساحة القرص. في عقدة **\<system.diagnostics\>\<source\>**، قم بتغيير قيمة **switchValue** إلى **Critical,Error**. لمزيد من المعلومات، راجع [عارض تتبع خدمة MS](/dotnet/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe).

4. افتح مدير IIS. في الشجرة الموجودة على اليسار، ابق في عقدة الجذر. في الجانب الأيسر، حدد **شهادات الخادم**.

    ![تحديد شهادات الخدمة في مدير IIS.](media/e-invoicing-ita-fatturapa-get-started-proxy-cert-1.png)

5. افتح القائمة، وحدد **استيراد**.
6. في مربع الحوار **استيراد الشهادة**، في حقل **ملف الشهادة (.pfx)**، حدد مسار ملف .pfx لشهادة الخادم الوكيل.

    ![تحديد ملف شهادة خدمه الوكيل.](media/e-invoicing-ita-fatturapa-get-started-proxy-cert-2.png)

7. حدد ثم اضغط (أو انقر بزر الماوس الأيمن) فوق **المواقع**، ثم حدد **إضافة موقع الويب**.
8. في مربع الحوار **إضافة موقع ويب**، في حقل **اسم الموقع** أدخل اسماً للموقع.
9. في حقل **المسار الفعلي**، أشر إلى مجلد **src\\FattureService**.
10. في حقل **نوع الربط**، حدد **https**.
11. في حقل **اسم المضيف**، حدد اسم المضيف.
12. اترك حقلي **عنوان IP** و **المنفذ** معينين إلى القيم الافتراضية.
13. تاكد من إلغاء تحديد خانة الاختيار **طلب اشاره اسم الخادم**، لان SDI لا يدعم هذه التقنية.
14. في حقل **شهادة SSL**، حدد شهادة الخادم الوكيل التي قمت باستيرادها.
15. في حقل **تجمع التطبيقات**، حدد وعاءا للموقع، وقم بتدوين الاسم الخاص به (علي سبيل المثال، **SdiAppPool**).

    ![إضافة موقع ويب.](media/e-invoicing-ita-fatturapa-get-started-proxy-iis-setup-1.png)

16. بعد الانتهاء من إنشاء موقع ويب، قم بفتح القائمة الخاصة بـ **إعدادات SSL**.

    ![فتح قائمة إعدادات SSL.](media/e-invoicing-ita-fatturapa-get-started-proxy-iis-setup-2.png)

17. حدد خانه اختيار **تطلب وجود SSL**، ثم في مجموعة حقول **شهادات العميل**، حدد الخيار **تطلب**.

    ![تكوين إعدادات SSL.](media/e-invoicing-ita-fatturapa-get-started-proxy-iis-setup-3.png)

18. افتح **استعراض الدليل**، وحدد **تمكين**.
19. في اي مستعرض ويب، انتقل إلى **serverDNS/TrasmissioneFatture.svc**. ويجب ان تظهر صفحه قياسيه حول الخدمة.

    ![فحص الخدمة في مستعرض.](media/e-invoicing-ita-fatturapa-get-started-proxy-open-browser.png)

20. قم بإنشاء المجلدات التالية لتخزين السجلات والملفات:

    - **C:\\Logs\\** – تخزين ملفات السجل هنا. يمكن ان يتم عرض هذه الملفات بواسطة [عارض تتبع خدمة MS](/dotnet/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe).
    - **C:\\Files\\** – تخزين كافة ملفات الاستجابة هنا.

21. في مستكشف الملفات، امنح **خدمة الشبكة** و **IIS AppPool\\SdiAppPool** (أو **IIS AppPool\\DefaultAppPool** إذا كنت تستخدم التجمع الافتراضي) حق الوصول إلى مجلدي **السجلات** و **الملفات**.

    1. حدد ثم اضغط (أو انقر بزر الماوس الأيمن) فوق أحد المجلدات، ثم حدد **خصائص**.
    2. في مربع حوار **الخصائص**، في علامة التبويب **أمان**، حدد **تحرير**.
    3. قم باضافه المستخدمين إذا لم يتم سردهم.
    4. كرر الخطوات من 1 إلى 3 للمجلد الآخر.

    ![إضافة أذونات لمستخدم الخدمة.](media/e-invoicing-ita-fatturapa-get-started-proxy-add-user.png)

## <a name="privacy-notice"></a>إشعار الخصوصية 

قد يتطلب تمكين ميزة **الفاتورة الإلكترونية الإيطالية** إرسال بيانات محدودة. تتضمن هذه البيانات معرّف التسجيل الضريبي للمؤسسة. يمكن للمسؤول تمكين ميزه الفاتورة الكترونيه الايطاليه وتعطيلها. لتعطيل الميزة، اتبع الخطوات التالية.

1. انتقل إلى **إدارة المؤسسة** \> **الإعداد** \> **معلمات المستندات الإلكترونية**.
2. في علامة التبويب **الميزات**، حدد الصفوف التي تحتوي على ميزة **الفاتورة الإلكترونية الإيطالية**، ثم حدد **تعطيل الآن**.

تخضع البيانات المستوردة من هذه الأنظمة الخارجية في خدمة Dynamics 365 عبر الإنترنت [لبيان الخصوصية](https://go.microsoft.com/fwlink/?LinkId=512132). لمزيد من المعلومات، راجع قسم "إشعار الخصوصية" في وثائق الميزة الخاصة بالبلد/المنطقة.

## <a name="additional-resources"></a>الموارد الإضافية

- [نظرة عامة على الفوترة الإلكترونية](e-invoicing-service-overview.md)
- [البدء باستخدام إدارة خدمة الفوترة الإلكترونية](e-invoicing-get-started-service-administration.md)
- [الشروع في العمل باستخدام الفوترة الإلكترونية](e-invoicing-get-started.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
