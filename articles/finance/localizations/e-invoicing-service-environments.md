---
title: بيئات الخدمة
description: يوفر هذا الموضوع معلومات حول بيئات الخدمة الخاصة بالفوترة الإلكترونية ويشرح كيفية إعدادها.
author: dkalyuzh
ms.date: 02/28/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: dkalyuzh
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: a8a135098f71e1413cd20ff8ad4003f090ae3407
ms.sourcegitcommit: ffdb6794746ffe5461f9dcf34ed8e64976d22d2d
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/02/2022
ms.locfileid: "8371482"
---
# <a name="service-environments"></a>بيئات الخدمة

[!include [banner](../includes/banner.md)]

بيئات الخدمة عبارة عن أقسام منطقية تم إنشاؤها لدعم ميزات العولمة والمستندات المقابلة التي تتم معالجتها في خدمة الفوترة الإلكترونية. يجب تكوين أسرار الأمان والشهادات الرقمية وأذونات الوصول (الحوكمة) على مستوى بيئة الخدمة.

يمكنك إنشاء أي عدد تريده من بيئات الخدمة. جميع بيئات الخدمة التي تقوم بإنشائها مستقلة عن بعضها البعض. كأفضل ممارسة، نوصي بإنشاء بيئتي خدمة على الأقل:

- بيئة واحدة لأغراض التطوير والتحقق الرئيسية. هذه البيئة هي عادة بيئة اختبار قبول المستخدم (UAT).
- بيئة واحدة لأغراض الإنتاج. عادة ما تكون هذه البيئة بيئة إنتاج.

يساعد هذا النوع من التقسيم في ضمان التحقق من صحة عمليات الفوترة الإلكترونية وتخصيصها في وضع الحماية قبل انتقالها إلى الإنتاج.

يجب إنشاء بيئات الخدمة وصيانتها في Regulatory Configuration Service (RCS). وبعد ذلك، عندما تكون جاهزة، يجب نشرها في خدمة الفوترة الإلكترونية. ترسل عملية النشر معلمات بيئة الخدمة من مثيل RCS إلى خدمة الفوترة الإلكترونية.

إذا لم تكمل عملية النشر بعد إنشاء بيئة خدمة جديدة أو ضبط بيئة الخدمة الحالية (على سبيل المثال، عن طريق إضافة أو إزالة المستخدمين أو أسرار المخزن الرئيسي في Microsoft Azure)، لن تكون التغييرات فعالة. يمكن الوصول إلى البيئات المنشورة فقط بواسطة Dynamics 365 Finance أو Dynamics 365 Supply Chain Management.

## <a name="service-environment-statuses"></a>حالات بيئات الخدمات

يمكن إدارة بيئات الخدمة من خلال حالتها. يمكنك عرض حالة البيئة في صفحة **بيئات الخدمة**. تتوفر الحالات التالية:

- **غير منشورة** – تم إنشاء البيئة، ولكن لم يتم نشرها بعد.
- **منشورة** – تم نشر البيئة إلى خدمة الفوترة الإلكترونية.
- **تم تغييرها** – تم تغيير سمات البيئة التي تم نشرها، ولكن لم يتم نشر التغييرات بعد.

## <a name="users"></a>المستخدمون

يجب أن تسرد كل بيئة خدمة المستخدمين الذين يمكنهم الاتصال بالفوترة الإلكترونية من Finance أو Supply Chain Management.

## <a name="applications"></a>التطبيقات

في بعض السيناريوهات، قد تضطر التطبيقات الأخرى بخلاف Finance أو Supply Chain Management إلى الاتصال بخدمة الفوترة الإلكترونية لإرسال مستندات إلكترونية لمزيد من المعالجة، أو لاسترداد معلومات مثل حالة إرسال مستند. في هذه السيناريوهات، يجب ان يتم تعريف التطبيق في قائمه التطبيقات. وبهذه الطريقة، سيكون له حق الوصول إلى خدمه الفوترة الكترونيه. يجب أيضا تسجيل التطبيق كتطبيق في Azure Active Directory (Azure AD)، ويجب استخدام معرف الكائن لتعريفه. 

نظرًا لأن Microsoft تتطلب مستوى عالٍ من التحكم الأمني في التطبيقات التي يمكنها الاتصال بخدمة الفواتير الإلكترونية، يجب عليك الاتصال بـ Microsoft على <DGXRegulatoryservicesengineering@service.microsoft.com> وتقديم ما يلي تفاصيل التطبيق الخاص بك:

- معرف مستأجر Azure AD
- معرف بيئة Microsoft Dynamics ‏Lifecycle Services ‏(LCS)
- معرف التطبيق (معرف العميل)
- معرف الكائن
- تبرير ووصف عالي المستوى للتطبيق

ستقوم Microsoft بتقييم الطلب وتسجيل التطبيق في سجل الأمان للتأكد من أنه يمكن أن يعمل مع الفواتير الإلكترونية.

## <a name="number-sequences"></a>التسلسلات الرقمية

إذا كانت السيناريوهات الخاصة بك تتطلب تسلسلات رقمية (على سبيل المثال، في أسماء الملفات)، فيمكنك استخدام التسلسلات الرقمية المحددة لبيئة معينة، ولكن يمكن استخدامها إما عبر ميزات العولمة أو لميزة عولمة معينة. بعد تحديد التسلسل الرقمي، يمكنك استخدامه في المتغيرات ومسارات المعالجة. لتعقب استخدامه، في صفحة **التسلسلات الرقمية**، ابحث عن قيمة **الحالي** لمعلمة **قيد الاستخدام**.

### <a name="working-with-number-sequences"></a>التعامل مع التسلسلات الرقمية
في صفحة **التسلسلات الرقمية**: 

- حدد **جديد** لإنشاء تسلسل رقمي. بعد ذلك، قم بإدخال اسم ووصف. 
- حدد **حذف** لحذف تسلسل رقمي إذا لم يعد مستخدما.
- لست بحاجة إلى تحديد **نشر** في جزء الإجراءات لنشر التغييرات لتسلسل رقمي. يتم إجراء التحديث تلقائيًا.

## <a name="create-a-key-vault-reference"></a>إنشاء مرجع مخزن رئيسي

1. سجل دخولك إلى حساب RCS.
2. في مساحة عمل **ميزات العولمة**، في قسم **البيئة**، حدد الإطار المتجانب **الفوترة الإلكترونية**.
3. في صفحة **إعداد البيئة**، في جزء الإجراءات، حدد **بيئات الخدمة**.
4. في صفحة **بيئات الخدمة**، في جزء الإجراءات، حدد **معلمات المخزن الرئيسي**.
5. في صفحة **معلمات المخزن الرئيسي**، حدد **جديد** لإنشاء مرجع مخزن رئيسي.
6. في حقل **الاسم**، أدخل اسم مرجع المخزن الرئيسي.
7. في الحقل **الوصف**، أدخل وصفًا.
8. في حقل **عنوان URI للمخزن الرئيسي**، قم بلصق عنوان URI للمخزن الرئيسي من المخزن الرئيسي (`https://<your key vault>.vault.azure.net/`). لمزيد من المعلومات، راجع [إنشاء مخزن رئيسي في Azure في مدخل Azure](e-invoicing-create-azure-key-vault-azure-portal.md).
9. حدد **حفظ**.
    
## <a name="create-a-secret-for-the-storage-account-secret-token"></a>إنشاء سر للرمز المميز لسر حساب التخزين

1. في صفحة **معلمات المخزن الرئيسي**، حدد مرجع المخزن الرئيسي الذي أنشأته في الإجراء السابق، ثم في قسم **الشهادات**، حدد **إضافة**.
2. في حقل **الاسم**، أدخل اسم سر حساب التخزين. يجب أن يتطابق هذا الاسم مع اسم سر المخزن الرئيسي الذي يحمل الرمز المميز لتوقيع الوصول المشترك للتخزين (SAS). لمزيد من المعلومات، راجع [إنشاء حساب تخزين Azure في مدخل Azure](e-invoicing-create-azure-storage-account-azure-portal.md). 
3. في الحقل **الوصف**، أدخل وصفًا.
4. في حقل **النوع**، حدد **سر**.
5. حدد **حفظ**.
    
## <a name="create-a-service-environment"></a>إنشاء بيئة خدمة

1. في صفحة **بيئات الخدمات**، حدد **جديد** لإنشاء بيئة خدمة.
2. في حقل **الاسم**، أدخل اسم بيئة الفوترة الإلكترونية.
3. في الحقل **الوصف**، أدخل وصفًا.
4. في حقل **سر رمز SAS المميز للتخزين**، حدد اسم حساب التخزين الذي يجب استخدامه لمصادقة الوصول إلى حساب التخزين.
5. في قسم **المستخدمون**، حدد **إضافة** لإضافة مستخدم يسمح له بإرسال الفواتير الإلكترونية من خلال البيئة والاتصال بحساب التخزين.
6. في حقل **معرف المستخدم**، ادخل الاسم المستعار للمستخدم. 
7. ثم، في حقل **‏‫البريد الإلكتروني**، أدخل عنوان البريد الإلكتروني للمستخدم.
8. حدد **حفظ**.
9. في جزء الإجراءات، حدد **نشر** لنشر البيئة إلى خدمة الفوترة الإلكترونية. تحقق من قيمة حقل **الحالة** إلى **منشور**.
