---
title: الرسائل الإلكترونية
description: يوفر هذا الموضوع نظرة عامة حول المراسلات الإلكترونية في Microsoft Dynamics 365 Finance بالإضافة إلى معلومات الإعداد.
author: ShylaThompson
manager: AnnBe
ms.date: 11/16/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: roschlom
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: roschlom
ms.search.validFrom: 2018-10-28
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: b5887efc32c71759e4cb3c31e1b18c4c8b64f173
ms.sourcegitcommit: 708ca25687a4e48271cdcd6d2d22d99fb94cf140
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/10/2020
ms.locfileid: "3977181"
---
# <a name="electronic-messaging"></a>المراسلة الإلكترونية

[!include [banner](../includes/banner.md)]

يوفر هذا الموضوع نظرة عامة حول المراسلات الإلكترونية بالإضافة إلى معلومات الإعداد.

مؤخرًا، طبقت الحكومات والسلطات التشريعية للعديد من البلدان والمناطق في جميع أنحاء العالم متطلبات إعداد التقارير للشركات المٌسجّلة في تلك البلدان أو المناطق. ويتمثل الغرض من هذه المتطلبات في تمكين البيانات التي يتم الحصول عليها من تلك الشركات في تنسيق إلكتروني، مباشرةً من النظم التي يتم فيها حساب هذه البيانات وتخزينها ومعالجتها.

تدعم وظيفة الرسائل الإلكترونية في Finance العمليات المختلفة للتشغيل الإلكتروني المتبادل بين Finance والنظم التي تقدمها الحكومات والسلطات التشريعية لإعداد التقارير وإرسالها واستلام المعلومات الرسمية.

تتكامل وظيفة الرسائل الإلكترونية مع وحدة **إعداد التقارير الإلكترونية** (ER). وبالتالي، يمكنك إعداد تنسيقات ER للرسائل الإلكترونية. للحصول على مزيد من التفاصيل، راجع [إعداد التقارير الإلكترونية (ER)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting).

تستند الرسائل الإلكترونية على الكيانات التالية:

- **الرسالة الإلكترونية** -تقرير أو إقرار يتعين الإبلاغ عنه أو إرساله داخليًا. على سبيل المثال، تقرير يتم إرساله إلى مكتب الضرائب.
- **عناصر الرسائل الإلكترونية** -السجلات التي يجب تضمينها في الرسالة التي يتم الإبلاغ عنها.
- **معالجة الرسائل الإلكترونية** – سلسلة من الإجراءات يجب تشغيلها لجمع البيانات المطلوبة وإنشاء التقارير وتخزين البيانات في مخزن البيانات الثنائية كبيرة الحجم في Microsoft Azure وإرسال تقارير من خارج النظام والحصول على الاستجابات من خارج النظام وتحديث قاعدة البيانات بناءً على المعلومات المستلمة. بإمكان الإجراءات الموجودة في السلسلة أن تكون مرتبطة أو غير مرتبطة

يوضح الرسم التوضيحي التالي تدفق البيانات للرسائل الإلكترونية.

![تدفق بيانات الرسائل الإلكترونية](media/electronic-messaging-data-flow.png)

تدعم وظيفة الرسائل الإلكترونية السيناريوهات التالية:

- الإنشاء اليدوي لرسائل وتقارير تستند إلى تنسيقات تصدير تقارير إلكترونية مرتبطة من مختلف الأنواع: Microsoft Excel وXML وJavaScript Object Notation (JSON) وPDF ونص وMicrosoft Word.
- الإنشاء والمعالجة التلقائية للرسائل التي تستند إلى المعلومات المطلوبة والتي تم استلامها من هيئة ما عن طريق تنسيق مقترن لاستيراد التقارير الإلكترونية.
- تجميع المعلومات ومعالجتها من مصدر بيانات كعناصر للرسالة. مصدر البيانات هو جدول Finance.
- تخزين معلومات إضافية وتقييم قيم مختلفة عن طريق استدعاء فئات قابلة للتنفيذ مُعرفة بشكل خاص فيما يتعلق بالرسائل أو عناصر الرسائل.
- تجميع المعلومات المُجمّعة في عناصر الرسالة، وتقسيم هذه المعلومات بالرسالة وإنشاء تقارير في تنسيقات تصدير ER مقترنة.
- إرسال التقارير التي تم إنشاؤها إلى خدمة ويب باستخدام معلومات الأمان المُخزنة في Azure Key Vault.
- تلقي استجابة من خدمة الويب وتفسير الاستجابة وتحديث البيانات في Finance حسب الحاجة.
- تخزين جميع التقارير التي تم إنشاؤها ومراجعتها.
- تخزين ومراجعة جميع معلومات السجل المرتبطة بالإجراءات التي يتم تشغيلها لرسالة أو عنصر رسالة.
- التحكم في المعالجة من خلال العديد من حالات الرسائل المختلفة وحالات عناصر الرسالة

## <a name="set-up-electronic-messaging"></a>إعداد رسالة إلكترونية

تُساعدك الرسائل الإلكترونية في الاحتفاظ بعمليات تقارير الكترونية مختلفة لأنواع مستندات مختلفة. في بعض السيناريوهات المعقدة، يتم إعداد الرسائل الإلكترونية بحيث تتضمن مجموعة من عدة حالات رسائل وحالات عناصر رسائل وإجراءات وحقول إضافية وفئات قابلة للتنفيذ. بالنسبة لهذا السيناريو، تتوفر حزم كيانات البيانات هذه للاستيراد. إذا كنت تستخدم حزم كيان البيانات هذه، يجب عليك استيرادهم إلى كيان قانوني باستخدام أداة إدارة البيانات. للحصول على مزيد من المعلومات حول كيفية استخدام أداة إدارة البيانات، راجع [إدارة البيانات](../../dev-itpro/data-entities/data-entities-data-packages.md).

إذا لم تقم باستيراد حزمة كيان البيانات، يمكنك إعداد وظيفة الرسائل الإلكترونية يدويًا. وفي هذه الحالة، يجب عليك إعداد العناصر التالية:

- [التسلسلات الرقمية](#number-sequences)
- [أنواع أصناف الرسائل والحالات](#message-item-types-and-statuses)
- [حالات الرسائل](#message-statuses)
- [حقول إضافية](#additional-fields)
- [إعدادات الدرجة القابلة للتنفيذ](#executable-class-settings)
- [إجراءات تعبئة السجلات](#populate-records-actions)
- [تطبيقات الويب](#web-applications)
- [إعدادات خدمة الويب](#web-service-settings)
- [إجراءات معالجة الرسالة](#message-processing-actions)
- [معالجة الرسائل الإلكترونية](#electronic-message-processing)

توفر الأقسام التالية معلومات إضافية حول كل عنصر من هذه العناصر.

### <a name="number-sequences"></a>التسلسلات الرقمية

إعداد التسلسلات الرقمية لكل من الرسئل وعناصر الرسائل. يتم استخدام التسلسلات الرقمية لترقيم الرسائل وعناصر الرسائل بشكل تلقائي. وسيتم استخدام الأرقام التي تم تعيينها كمعرفات فريدة للرسائل وعناصر الرسائل في النظام. يمكنك إعداد التسلسلات الرقمية للرسائل الإلكترونية على صفحة **محددات دفتر الأستاذ العام** ( **دفتر الأستاذ العام**\>**إعداد دفتر الأستاذ**\>**محددات دفتر الأستاذ العام** ).

### <a name="message-item-types-and-statuses"></a>أنواع أصناف الرسائل والحالات

تُحدد أنواع عناصر الرسائل أنواع السجلات التي سوف تستخدم في الرسائل الإلكترونية. يمكنك إعداد أنواع عناصر الرسالة في صفحة **أنواع أصناف الرسائل** ( **الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**أنواع عناصر الرسائل** ).

تُحدد حالات أصناف الرسائل الحالات التي سوف يتم تطبيقها على عناصر الرسالة في المعالجة التي تقوم بإعدادها. يمكنك إعداد أنواع عناصر الرسالة في صفحة **حالات أصناف الرسائل** ( **الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**حالات أصناف الرسائل** ).

تحدد معلمة **السماح بالحذف** لحالة عنصر الرسالة ما إذا كان باستطاعة المستخدمين حذف عناصر الرسائل التي لديها هذه الحالة في صفحة **الرسائل الإلكترونية** أو صفحة **عناصر الرسائل الإلكترونية** .

### <a name="message-statuses"></a>حالات الرسائل

قم بإعداد حالات الرسائل التي يتعين توافرها في معالجة الرسالة. يمكنك إعداد حالات الرسائل في صفحة **حالات الرسائل** ( **الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**حالات الرسائل** ).

يصف الجدول التالي الحقول في صفحة **حالات الرسائل‬** .

| اسم الحقل          | الوصف |
|---------------------|-------------|
| حالة الرسالة      | أدخل اسمًا فريدًا لحالة الرسالة. تُستخدم حالات الرسائل لتمييز حالة رسالة إلكترونية في كل لحظة. ويظهر الاسم الذي تدخله في صفحة **الرسائل الإلكترونية** وفي سجل يرتبط بالرسائل الإلكترونية. |
| الوصف         | أدخل وصفًا لحالة الرسالة. |
| نوع الاستجابة       | حدد نوع الاستجابة لحالة الرسالة. بإمكان بعض الإجراءات في عملية المعالجة إنتاج أكثر من نوع استجابة واحد. على سبيل المثال، قد تؤدي إجراءات من نوع **خدمة ويب** إلى إنتاج استجابات إما من النوع **‏‫تم التنفيذ بنجاح‬** أو من النوع **خطأ فني** استنادًا إلى نتيجة التنفيذ. وفي هذه الحالة، يجب تحديد حالات الرسائل لنوعي الاستجابة. لمزيد من المعلومات حول أنواع الإجراءات وأنواع الاستجابات ذات الصلة بها، راجع [أنواع إجراءات معالجة الرسائل](#message-processing-action-types). |
| حالة صنف الرسالة | في بعض الأحيان، يجب أن تؤثر حالة رسالة إلكترونية على حالة عناصر الرسالة ذات الصلة. حدد حالة عنصر رسالة في هذا الحقل لربطه بحالة الرسالة. |
| السماح بالحذف        | حدد خانة الاختيار هذه إذا كان يجب على المستخدمين أن يكونوا قادرين على حذف الرسائل الإلكترونية التي لديها هذه الحالة في صفحة **الرسائل الإلكترونية** . |

### <a name="additional-fields"></a>حقول إضافية

تسمح لك وظيفة الرسائل الإلكترونية بتعبئة السجلات من جدول تعاملي‬. بهذه الطريقة، يمكنك إعداد السجلات لإعداد التقارير والإبلاغ عنها. ومع ذلك، لا تتوفر لدى الجداول التعاملية في بعض الأحيان معلومات كافية لملء السجلات على نحو يتوافق مع متطلبات إعداد التقارير. لتعبئة جميع المعلومات التي يتعين الإبلاغ عنها لسجل، يمكنك إعداد حقول إضافية. يمكن إقران الحقول الإضافية بكل من الرسائل وعناصر الرسائل. يمكنك إعداد حقول إضافية في صفحة **الحقول الإضافية** ( **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية**\> **الحقول الإضافية** ).

يصف الجدول التالي الحقول العامة في صفحة **الحقول الإضافية** .

| الحقل       | الوصف |
|-------------|-------------|
| اسم الحقل  | أدخل اسم سمة إضافية لعناصر الرسائل لمتعلقة بالعملية. يظهر هذا الاسم في واجهة المستخدم أثناء عملك على العملية. يمكن أيضًا استخدامه في تكوينات ER المرتبطة بالعملية. |
| الوصف | أدخل وصفًا للحقل الإضافي. |
| تحرير المستخدم   | عيّن هذا الخيار إلى **نعم** إذا كان يجب على المستخدمون أن يكونوا قادرين على تغيير قيمة الحقل الإضافي من واجهة المستخدم. |
| العداد     | عيّن هذا الخيار إلى **نعم** إذا كان يجب على الحقل الإضافي أن يحتوي على تسلسل رقمي في رسالة إلكترونية. ستتم تعبئة قيمة الحقل الإضافية بشكل تلقائي أثناء تشغيل إجراء من النوع **تصدير التقارير الإلكترونية‬** . |
| مخفي      | عيّن هذا الخيار إلى **نعم** إذا كان يجب إخفاء الحقل الإضافي في واجهة المستخدم. |

بإمكان كل حقل إضافي أن يتضمن قيمًا مختلفة للمعالجة. يمكنك تعريف هذه القيم على علامة التبويب السريعة **القيم** . يصف الجدول التالي الحقول.

| الحقل                | الوصف |
|----------------------|-------------|
| قيمة الحقل          | أدخل قيمة الحقل التي يجب استخدامها لرسالة أو عنصر الرسالة أثناء إعداد التقارير. |
| الوصف          | أدخل وصفًا لقيمة الحقل. |
| نوع الحساب         | قد تكون بعض قيم الحقول مقتصرة على أنواع حسابات معينة. حدد إحدى القيم التالية: **الكل** ، **العميل** ، أو **المورد** . |
| كود الحساب         | إذا حددت **العميل** أو **المورّد** في حقل **نوع الحساب** ، فيمكنك تقييد استخدام قيمة الحقل بحيث تقتصر على مجموعة معينة أو جدول معين. |
| رقم الحساب/المجموعة | إذا قمت بتحديد **العميل** أو **المورد** في حقل **نوع الحساب** ، وإذا قمت بإدخال مجموعة أو جدول في حقل **كود الحساب** ، يمكنك إدخال مجموعة معينة أو وكيل تخليص في هذا الحقل. |
| السريان            | حدد تاريخ بدء اعتبار القيمة. |
| انتهاء الصلاحية           | حدد تاريخ انتهاء اعتبار القيمة. |

بشكل افتراضي، لا تؤثر مجموعات المعايير التي تم تعريفها بواسطة الحقول **رقم الحساب/المجموعة** و **كود الحساب** و **ساري‬** ، و **انتهاء صلاحية** على اختيار قيم لحقول إضافية. ومع ذلك، يمكن استخدام هذه المجموعات في فئة قابلة للتنفيذ لتطبيق منطق معين يحسب قيم حقول إضافية.

### <a name="executable-class-settings"></a>إعدادات الدرجة القابلة للتنفيذ

تمثل الدرجة القابلة للتنفيذ أسلوب X ++ أو الدرجة التي يمكن فيها استدعاء معالجة الرسائل الإلكترونية فيما يتعلق بإجراء إذا كان بعض التقييم مطلوبًا للعملية.

يمكنك تعيين الدرجة القابلة للتنفيذ يدويًا في صفحة **إعدادات الفئة القابلة للتنفيذ** ( **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات الدرجة القابلة للتنفيذ** ). إنشاء خط، وتعيين الحقول التالية.

| الحقل                 | الوصف |
|-----------------------|-------------|
| الفئة القابلة للتنفيذ      | أدخل الاسم الذي سيتم استخدامه خلال إعداد إجراء معالجة الرسالة الذي يتم استدعاء هذه الدرجة بالنسبة لها. |
| الوصف           | أدخل وصفًا للدرجة القابلة للتنفيذ. |
| اسم الدرجة القابلة للتنفيذ | حدد درجة X++ القابلة للتنفيذ. |
| مستوى التنفيذ       | تم تعيين هذا الحقل تلقائيًا لأنه يتعين إعادة تعريف القيمة مسبقًا للدرجة القابلة للتنفيذ المُحددة. يحد هذا الحقل المستوى الذي يعمل عليه التقييم ذو الصلة. |
| وصف الفئة     | تم تعيين هذا الحقل تلقائيًا لأنه يتعين إعادة تعريف القيمة مسبقًا للدرجة القابلة للتنفيذ المُحددة. |

قد تتضمن بعض الفئات القابلة للتنفيذ معلمات إلزامية يجب تحديدها قبل تشغيل الفئة القابلة للتنفيذ لأول مرة. لتحديد هذه المعلمات‬، حدد **المعلمات** في جزء "الإجراءات"، وعيّن الحقول في مربع الحوار الذي يظهر، ثم حدد **موافق** . من الضروري أن تحدد **موافق** . وإلا، فلن يتم حفظ المعلمات في قاعدة البيانات، وسيتعذر استدعاء الفئة القابلة للتنفيذ بشكل صحيح.

### <a name="populate-records-actions"></a>إجراءات تعبئة السجلات

يمكنك استخدام إجراءات تعبئة السجلات لإعداد الإجراءات التي تقوم بإضافة السجلات إلى جدول عناصر الرسائل بحيث يمكن إضافتها إلى رسالة إلكترونية. على سبيل المثال، إذا كان من الضروري أن تقوم رسالتك الإلكترونية بالإبلاغ عن فواتير العملاء، فيجب عليك تعيين إجراء تعبئة السجلات الذي يرتبط بحقل **مصدر البيانات** في جدول "دفتر يومية فواتير العميل‬". يمكنك إعداد إجراءات تعبئة السجلات في صفحة **إجراء تعبئة السجل** ( **الضريبة** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إجراءات تعبئة السجلات** ). قم بإنشاء سجل جديد لكل إجراء يجب أن يقوم بإضافة السجلات إلى الجدول، وقم بتعيين الحقول التالية.

| الحقل       | الوصف |
|-------------|-------------|
| الاسم        | أدخل اسمًا للإجراء الذي يقوم بتعبئة السجلات في عمليتك. |
| الوصف | أدخل وصفًا لإجراء تعبئة السجلات. |

على علامة التبويب السريعة **إعداد مصادر البيانات** ، قم بإضافة سطر لكل مصدر بيانات مستخدم للعملية، وقم بتعيين الحقول التالية.

| الحقل                  | الوصف |
|------------------------|-------------|
| الاسم                   | أدخل اسمًا لمصدر البيانات. |
| نوع صنف الرسالة      | حدد نوع عنصر الرسالة الذي يتعين استخدامه عند إنشاء سجلات لمصدر البيانات. |
| نوع الحساب           | حدد نوع الحساب الذي يجب إقرانه بسجلات من مصدر البيانات. |
| اسم الجدول الرئيسي      | حدد الجدول الذي يجب أن يكون مصدر بيانات. |
| حقل رقم المستند  | حدد الحقل الذي يمكنك الحصول على رقم المستند منه في الجدول المحدد. |
| حقل تاريخ المستند    | حدد الحقل الذي يمكنك الحصول على بيانات المستند منه في الجدول المحدد. |
| حقل حساب المستند | حدد الحقل الذي يمكنك الحصول على حساب المستند منه في الجدول المحدد. |
| استعلام المستخدم             | إذا تم تحديد خانة الاختيار هذه، يمكنك إعداد استعلام عن طريق تحديد **تحرير الاستعلام** فوق الشبكة. وإلا، ستتم تعبئة كافة السجلات من مصدر البيانات المحدد. |

### <a name="web-applications"></a>تطبيقات الويب

إنك تستخدم إعدادات تطبيق ويب لإعداد تطبيق ويب بحيث يدعم Open Authorization (OAuth) 2.0. إن OAuth هو المعيار المفتوح الذي يسمح للمستخدمين بمنح "تفويض الوصول الأمن" إلى التطبيق بالنيابة عنهم، من دون مشاركة بيانات اعتماد الوصول الخاصة بهم. يمكنك أيضًا الانتقال عبر عملية التفويض عن طريق الحصول على كود التفويض والرمز المميز للوصول. يمكنك تعيين إعدادات تطبيق الويب في صفحة **تطبيقات الويب** ( **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **تطبيقات الويب** ).

يصف الجدول التالي الحقول في صفحة **تطبيقات الويب** .

| الحقل                        | الوصف |
|------------------------------|-------------|
| اسم التطبيق             | أدخل اسمًا لتطبيق الويب. |
| الوصف                  | أدخل وصفًا لتطبيق الويب. |
| عنوان URL الأساسي                     | أدخل عنوان الإنترنت الأساسي لتطبيق الويب. |
| مسار عنوان URL للتفويض       | حدد المسار المستخدم لإنشاء عنوان URL للتفويض. |
| مسار عنوان URL للرمز المميز               | حدد المسار المستخدم لإنشاء عنوان URL للرمز المميز. |
| عنوان URL لإعادة التوجيه                 | إدخال عنوان URL لإعادة التوجيه. |
| معرّف العميل                    | أدخل معرّف العميل لتطبيق ويب. |
| سر العميل                | أدخل سر العميل لتطبيق ويب. |
| الرمز المميز للخادم                 | أدخل الرمز المميز للخادم لتطبيق ويب. |
| تعيين تنسيق التفويض | حدد تنسيق التقارير الإلكترونية المستخدم لإنشاء طلب التفويض. |
| استيراد تعيين نموذج الرمز المميز   | حدد تعيين نموذج استيراد التقارير الإلكترونية الذي يجب استخدامه لتخزين الرمز المميز للوصول. |
| النطاق الممنوح                | يُمنح النطاق للطلبات الخاصة بالوصول إلى التطبيق. ويتم تحديث الحقل بشكل تلقائي. |
| ستنتهي صلاحية الرمز المميز للوصول في  | الوقت المتبقي قبل انتهاء صلاحية الرمز المميز للوصول. | 
| قبول                       | حدد خاصية **القبول** لطلب الويب. على سبيل المثال، أدخل **application/vnd.hmrc.1.0+json** . |
| نوع المحتوى                 | حدد نوع المحتوى. على سبيل المثال، أدخل **application/json** . |

بالإضافة إلى ذلك، تتوفر الأزرار التالية في "جزء الإجراءات" في صفحة **تطبيقات ويب** لدعم عملية التفويض:

- **الحصول على كود التفويض** - بدء تفويض تطبيق الويب.
- **الحصول على الرمز المميز للوصول** - تهيئة الحصول على الرمز المميز للوصول.
- **تحديث الرمز المميز للوصول** - تحديث الرمز مميز للوصول.

عند تخزين رمز مميز للوصول إلى تطبيق الويب في قاعدة بيانات النظام بتنسيق مشفر، يمكن استخدامه للطلبات المرسلة إلى خدمة الويب. ولأغراض أمنية، يجب أن يقتصر الوصول إلى الرمز المميز للوصول على أدوار الأمان التي لديها الإذن الذي يخولها معالجة هذه الطلبات. إذا حاول مستخدم من خارج مجموعة الأمان معالجة طلب ما، فسيتلقى رسالة خطأ تفيد بأنه لا يُسمح له بالعمل مع الآخرين عبر تطبيق الويب المحدد.‬ لإعداد أدوار الأمان التي تتطلب الوصول إلى الرمز المميز للوصول، استخدم علامة التبويب السريعة **أدوار الأمان**  في صفحة **تطبيقات الويب** . إذا لم يتم تعريف أدوار أمان لتطبيق الويب، فسيكون باستطاعة مسؤول النظام فقط العمل مع الآخرين عبر تطبيق الويب هذا.

### <a name="web-service-settings"></a>إعدادات خدمة الويب

يمكنك استخدام إعدادات خدمة ويب لإعداد إرسال مباشر للبيانات إلى خدمة ويب. يمكنك إعداد إعدادات خدمة ويب في صفحة **إعدادات خدمة الويب** ( **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات خدمة الويب** ) .

يوضح الجدول التالي الحقول في صفحة **إعدادات خدمة الويب** .

| الحقل                          | الوصف |
|--------------------------------|-------------|
| خدمة الويب                    | أدخل اسمًا لخدمة الويب. |
| الوصف                    | أدخل وصفًا لخدمة الويب. |
| عنوان الإنترنت               | أدخل عنوان البريد الإلكتروني لخدمة الويب. إذا تم تحديد تطبيق ويب لخدمة الويب وكان من المفترض أن يكون عنوان الإنترنت لخدمة الويب هو نفسه عنوان الإنترنت المحدد لتطبيق الويب هذا، فحدد **نسخ عنوان URL الأساسي** لنسخ عنوان URL الأساسي لتطبيق الويب إلى هذا الحقل. |
| الشهادة                    | حدد شهادة Key Vault التي تم إعدادها مسبقًا. |
| تطبيق الويب                | حدد شهادة Key Vault التي تم إعدادها مسبقًا. |
| نوع الاستجابة - XML        | قم بتعيين هذا الخيار إلى **نعم** إذا كان نوع الاستجابة XML. |
| طريقة الطلب                 | حدد أسلوب الطلب. تقوم HTTP بتعريف مجموعة من أساليب الطلب التي تشير إلى الإجراء الذي يتعين تنفيذه لمورد مُعين. بإمكان أسلوب الطلب أن يكون  **GET** أو **POST** ، أو أسلوب HTTP آخر. |
| رؤوس الطلبات                | حدد رؤوس الطلبات. يمثل عنوان الطلب عنوان HTTP يمكن استخدامه في طلب HTTP، والذي لا يتعلق بمحتوى الرسالة. |
| قبول                         | حدد خاصية **القبول** لطلب الويب. |
| ترميز القبول                | تحديد القيمة **ترميز القبول** . يُعلن عنوان HTTP لطلب ترميز القبول عن ترميز المحتوى الذي يمكن للعميل فهمه. عادةً ما يكون ترميز المحتوى هذا خوارزمية ضغط. |
| نوع المحتوى                   | حدد نوع المحتوى. يُشير رأس HTTP لكيان نوع المحتوى إلى نوع الوسائط للمورد. |
| كود الاستجابة الناجحة       | تحديد كود حالة HTTP الذي يشير إلى نجاح الطلب. |
| طلب تعيين تنسيق الرؤوس | حدد تنسيق التقارير الإلكترونية المستخدم لإنشاء رؤوس طلبات الويب. |

### <a name="message-processing-actions"></a>إجراءات معالجة الرسالة

يمكنك استخدام إجراءات معالجة الرسالة لإنشاء إجراءات للعمليات الخاصة بك وإعداد المحددات الخاصة بها. يمكنك إعداد إجراءات معالجة الرسائل في صفحة **إجراءات معالجة الرسائل** ( **الضرائب** \> **إعداد** \> **الرسائل الإلكترونية** \> **إجراءات معالجة الرسائل** ).

توضح الجداول التالية الحقول في صفحة **إجراءات معالجة الرسائل** .

#### <a name="general-fasttab"></a>علامة التبويب السريعة عام

| الحقل                       | الوصف |
|-----------------------------|-------------|
| نوع الإجراء                 | حدد نوع الإجراء. لمزيد من المعلومات حول الخيارات المتوفرة، راجع قسم [أنواع إجراء معالجة الرسائل](#message-processing-action-types). |
| تعيين تنسيق              | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتوفر هذا الحقل فقط للإجراءات الخاصة بأنواع **تصدير التقارير الإلكترونية** ، **استيراد التقارير الإلكترونية** ، و **رسالة تصدير التقارير الإلكترونية** . |
| تعيين التنسيق لمسار عنوان URL | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب** . ويُستخدم لإنشاء مسار إلى عنوان URL الذي سيضاف إلى عنوان إنترنت الأساسي المحدد لخادم الويب المحدد. |
| نوع صنف الرسالة           | حدد أنواع السجلات التي يجب تقييم الإجراء بالنسبة لها. يتوفر هذا الحقل للإجراءات من الأنواع **مستوى تنفيذ عنصر الرسالة‬** و **تصدير التقارير الإلكترونية** و **استيراد التقارير الإلكترونية‬** و **خدمة الويب** وبعض الأنواع الأخرى أيضًا. إذا تركت هذا الحقل فارغًا، يتم تقييم كافة أنواع عناصر الرسائل المُحددة لمعالجة الرسائل. |
| الفئة القابلة للتنفيذ            | حدد إعدادات الدرجة القابلة للتنفيذ التي تم إنشاؤها مسبقًا. يتوافر هذا الحقل فقط للإجراءات الخاصة بأنواع **مستوى تنفيذ صنف الرسالة** و **مستوى تنفيذ صنف الرسالة** . |
| إجراء تعبئة السجل     | حدد إجراء تعبئة السجلات الذي تم إعداده مسبقًا. يتوفر هذا الحقل فقط للإجراءات الخاصة بالنوع **تعبئة السجلات** . |
| خدمة الويب                 | حدد خدمة ويب تم إعدادها في وقت سابق. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب** . |
| اسم الملف                   | حدد اسم الملف الذي سيكون نتيجة الإجراء. بإمكان هذا الملف أن يكون استجابة من خادم الويب أو التقرير الذي تم إنشاؤه. يتوفر هذا الحقل فقط للإجراءات من النوعين **خدمة الويب** و **رسالة تصدير التقارير الإلكترونية‬** . |
| إظهار مربع حوار                 | عيّن هذا الخيار إلى **نعم** إذا كان يجب عرض مربع حوار للمستخدمين قبل إنشاء التقرير. يتوفر هذا الحقل فقط للإجراءات من النوع **رسالة تصدير التقارير الإلكترونية** . |

##### <a name="message-processing-action-types"></a>أنواع إجراء معالجة الرسائل

تتوفر الخيارات التالية ف حقل **نوع الإجراء** :

- **إنشاء رسالة** -استخدم نوع الإجراء هذا للسماح للمستخدمين بإنشاء الرسائل يدويًا في صفحة **الرسائل الإلكترونية** . يتعذر إعداد الحالة الأولية لإجراء من هذا النوع.
- **تعبئة السجلات** – يجب إعداد إجراء من النوع **تعبئة السجلات** بشكل مسبق. يمكنك ربط نوع الإجراء هذا بإجراء تعبئة السجلات لتمكين تضمين الإجراء في المعالجة. من المفترض أن يتم استخدام نوع الإجراء هذا إما للإجراء الأول في معالجة الرسالة (عند عدم إنشاء أية رسالة إلكترونية بشكل مسبق) أو كإجراء يضيف عناصر رسالة إلى رسالة تم إنشاؤها في وقت سابق بواسطة إجراء من النوع **إنشاء رسالة** . وبالتالي، فيما يتعلق بإجراءات من هذا النوع، يمكن إعداد حالة النتيجة لعناصر الرسالة فقط. يمكن إعداد حالة أولية للرسائل فقط.
- **مستوى تنفيذ الرسالة** - استخدم نوع الإجراء هذا لإعداد فئة قابلة للتنفيذ يتعين تقييمها على مستوى الرسالة.
- **مستوى تنفيذ عنصر الرسالة** - استخدم نوع الإجراء هذا لإعداد فئة قابلة للتنفيذ يتعين تقييمها على مستوى عنصر الرسالة.
- **تصدير التقارير الإلكترونية** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن تنشئ تقريرًا يستند إلى تكوين تصدير التقارير الإلكترونية على مستوى عنصر الرسالة.
- **رسالة تصدير التقارير الإلكترونية** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن تنشئ تقريرًا يستند إلى تكوين تصدير التقارير الإلكترونية على مستوى عنصر الرسالة (على سبيل المثال، عندما لا تحتوي رسالة على أي عناصر رسالة).
- **استيراد التقارير الإلكترونية** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن تنشئ تقريرًا يستند إلى تكوين استيراد التقارير الإلكترونية.
- **معالجة المستخدم على مستوى الرسالة** - استخدم نوع الإجراء هذا للإجراءات التي تفترض تنفيذ إجراء يدوي معين بواسطة المستخدم على مستوى الرسالة. على سبيل المثال، قد يقوم المستخدم بتحديث حالة الرسائل.
- **معالجة المستخدم** - استخدم نوع الإجراء هذا للإجراءات التي تفترض تنفيذ إجراء يدوي معين بواسطة المستخدم على مستوى عنصر الرسالة. على سبيل المثال، قد يقوم المستخدم بتحديث حالة أصناف الرسائل.
- **خدمة الويب** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن ترسل تقريرًا تم إنشاؤه إلى خدمة ويب. لم يتم استخدام نوع الإجراء هذا لتقارير اتصالات فواتير المبيعات والشراء الإيطالية. بالنسبة إلى الإجراءات من النوع **خدمة الويب** ، تتضمن الصفحة **إجراءات معالجة الرسالة** علامة التبويب السريعة **تفاصيل متنوعة** ، حيث يمكنك تحديد نص التأكيد. سيظهر نص التأكيد هذا للمستخدمين قبل توجيه الطلبات إلى خدمة الويب المحددة.
- **التحقق من صحة الطلب** - استخدم نوع الإجراء هذا النوع لطلب التحقق من الصحة من خادم.

#### <a name="initial-statuses-fasttab"></a>علامة التبويب السريعة الحالات الأولية

> [!NOTE]
> لا تتوفر علامة التبويب السريعة **الحالات الأولية** للإجراءات ذات نوع الإجراء الأولي **إنشاء رسالة** .

| الحقل               | الوصف |
|---------------------|-------------|
| حالة صنف الرسالة | حدد حالة صنف رسالة يجب تقييم إجراء معالجة الرسالة المحدد له. |
| الوصف         | وصف لحالة عنصر الرسالة المُحدد. |

#### <a name="result-statuses-fasttab"></a>علامة تبويب حالات النتائج

| الحقل               | الوصف |
|---------------------|-------------|
| حالة الرسالة      | حدد حالات الرسائل التي يجب تقييم إجراء معالجة الرسالة المحدد لها. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة. على سبيل المثال، يتوفر للإجراءات من النوع **تصدير التقارير الإلكترونية** و **استيراد التقارير الإلكترونية** ، ولكنه لا يتوفر للإجراءات من النوع **معالجة المستخدم** و **مستوى تنفيذ عنصر الرسالة‬** . |
| الوصف         | وصف لحالة الرسالة المُحددة. |
| نوع الاستجابة       | نوع الاستجابة لحالة الرسالة المُحددة. |
| حالة صنف الرسالة | حدد حالات النتائج التي يجب توافرها بعد أن يتم تقييم إجراء معالجة الرسالة المُحدد. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى صنف الرسالة. على سبيل المثال، تتوافر للإجراءات من النوع **معالجة المستخدمين** و **مستوى تنفيذ عنصر الرسالة** . بالنسبة لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة، يوضح هذا الحقل حالة عنصر الرسالة المُعدة لحالة الرسالة المُحددة. |

يعرض الجدول التالي حالات النتائج التي يجب إعدادها لمختلف أنواع الإجراءات وأنواع الاستجابات.

| نوع إجراء/نوع استجابة الرسالة الإلكترونية | تم التنفيذ بنجاح | حدث خطأ أثناء العمل | خطأ فني | مُعرف من قِبل المستخدم | إلغاء الأمر |
|----------------------------------------------|-----------------------|----------------|-----------------|--------------|--------|
| إنشاء رسالة                               | س                     |                |                 |              |        |
| تصدير التقارير الإلكترونية                  | س                     |                |                 |              |        |
| استيراد التقارير الإلكترونية                  |                       |                |                 |              |        |
| خدمة الويب                                  | س                     |                | س               |              |        |
| معالجة المستخدمين                              |                       |                |                 |              |        |
| مستوى تنفيذ الرسالة                      |                       |                |                 |              |        |
| تعبئة السجلات                             |                       |                |                 |              |        |
| مستوى تنفيذ صنف الرسالة                 |                       |                |                 |              |        |
| التحقق من صحة الطلب                         | س                     | س              | س               |              |        |
| رسالة تصدير التقارير الإلكترونية          | س                     |                |                 |              |        |
| معالجة مستخدم مستوى الرسالة                |                       |                |                 |              |        |

### <a name="electronic-message-processing"></a>معالجة الرسائل الإلكترونية

يمثل معالجة الرسائل الإلكترونية مفهومًا أساسيًا لوظيفة الرسائل الإلكترونية. يقوم ذلك بتجميع الإجراءات التي يتعين تقييمها للرسالة الإلكترونية. يمكن ربط الإجرايات من خلال حالة أولية وحالة نتيجة. بدلًا من ذلك، يمكن بدء الإجراءات من النوع **معالجة المستخدم** بشكل مستقل. في صفحة **معالجة الرسائل الإلكترونية** ( **الضريبة‬** \> **الإعداد** \> **الرسائل الإلكترونية** \> **معالجة الرسائل الإلكترونية** )، يمكنك أيضًا تحديد حقول إضافية يتعين دعمها للمعالجة إما على مستوى الرسالة أو على مستوى عناصر الرسالة.

تسمح لك علامة التبويب السريعة **إجراء** بإضافة الإجراءات المُعرفة مسبقًا إلى المعالجة. يمكنك تحديد ما إذا كان يجب تشغيل إجراء بشكل منفصل، أو ما إذا كان يجب أن يبدأ بواسطة المعالجة. لتحديد بدء إجراء في المعالجة فقط بواسطة المستخدم، عيّن الحقل **تشغيل بشكل منفصل** إلى **نعم** لهذا الإجراء. إذا كان يجب بدء الإجراء بواسطة معالجة الرسائل أو عناصر الرسائل التي لديها الحالة المحددة كحالة أولية للإجراء، عيّن الحقل **تشغيل بشكل منفصل** إلى **لا** . يجب تشغيل الإجراءات من النوع **إجراء المستخدم** بشكل منفصل في كل الأوقات.

في بعض الأحيان، يجب تجميع عدة إجراءات في تسلسل، على الرغم من إعداد الإجراء الأول بحيث يتم تشغيله بشكل منفصل. على سبيل المثال، يجب على المستخدم تهيئة إنشاء التقارير، ولكن يجب إرسال التقرير فور إنشائه إلى خدمة ويب، ويجب أن تنعكس الاستجابة من خدمة الويب في النظام. وفي هذه الحالة، يمكنك إنشاء تسلسل غير منفصل للإجراءات التي يجب تشغيلها معًا دائمًا. على علامة التبويب السريعة **الإجراء** ، حدد **تسلسلات غير منفصلة** فوق الشبكة، ثم أنشئ تسلسلاً. بعد ذلك، حدد الحقل **تسلسل غير منفصل** لكافة الإجراءات التي يجب تشغيلها معًا. في هذه الحالة، يمكن تعيين الحقل **تشغيل بشكل منفصل** إلى **نعم** للإجراء الأول في التسلسل، ولكن يجب تعيينه إلى **لا** للإجراء الآخر.

تسمح لك علامة التبويب السريعة **الحقول الإضافية لأصناف الرسائل** بإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بأصناف الرسائل. يجب عليك إضافة حقول إضافية لكل نوع من أصناف الرسائل المرتبطة بالحقول.

تسمح لك علامة التبويب السريعة **الحقول الإضافية للرسالة** بإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بالرسائل.

تسمح لك علامة التبويب السريعة **أدوار الأمان** بإعداد أدوار الأمان المُعرفة مسبقًا في النظام لمُعالجة معينة. سوف يرى المستخدمون الذين لديهم دور معين المُعالجة المُحددة لهذا الدور فقط.

تسمح لك علامة التبويب السريعة **الدُفعة** بإعداد المعالجة للعمل في نظام الدُفعة.

## <a name="work-with-the-electronic-messages-functionality"></a>العمل باستخدام وظيفة الرسائل الإلكترونية

إذا كنت تعمل على مستوى الرسالة، فإن صفحة **الرسائل الإلكترونية** ( **الضرائب** \> **الاستعلامات والتقارير**\> **الرسائل الإلكترونية** \> **الرسائل الإلكترونية** ) أكثر إفادة بالنسبة لك. إذا كنت تعمل على مستوى مجموعة بيانات (صنف الرسالة)، فإن صفحة **أصناف الرسائل الإلكترونية** ( **الضرائب** \> **الاستعلامات والتقارير**\> **الرسائل الإلكترونية** \> **الرسائل الإلكترونية** ) أكثر إفادة بالنسبة لك.

### <a name="electronic-messages"></a>الرسائل الإلكترونية

تقدم صفحة **الرسائل الإلكترونية** المعالجة المتوفرة لك، استنادًا إلى دورك. يتم إقران أدوار الأمان بالمعالجة في إعداد هذه المعالجة. بالنسبة لكل معالجة متوفرة لك، تظهر الصفحة الرسائل الإلكترونية والمعلومات المتعلقة بها.

توضح علامة التبويب السريعة **الرسائل** الرسائل للمعالجة المحددة. استنادًا إلى حالة الرسالة المُحددة والمعالجة المُعرفة مسبقًا، يمكنك تشغيل بعض الإجراءات باستخدام الأزرار الواقعة أعلى الشبكة:

- **جديد** -هذا الزر مقترن بالإجراءات من النوع **إنشاء رسالة** .
- **حذف** -يتوفر هذا الزر إذا تم تحديد خانة الاختيار **السماح بالحذف** للحالة الحالية للرسالة المُحددة.
- **جمع البيانات** - يقترن هذا الزر بإجراءات من النوع **تعبئة السجلات** .
- **إنشاء تقرير** -يقترن هذا الزر بالإجراءات من النوع **رسالة تصدير الرسائل الإلكترونية** .
- **إرسال تقرير** -هذا الزر مقترن بالإجراءات من النوع **خدمة الويب** .
- **استيراد الاستجابة** - يقترن هذا الزر بإجراءات من النوع **استيراد الرسائل الإلكترونية** .
- **تحديث الحالة** -هذا الزر غير مقترن بالإجراءات من النوع **معالجة مستخدم مستوى الرسالة** .
- **أصناف الرسائل** – افتح صفحة **أصناف الرسائل الإلكترونية** .

توضح علامة التبويب السريعة **سجل الإجراءات** معلومات حول كافة الإجراءات التي يتم تشغيلها للرسالة المحددة. إذا تسبب أحد الإجراءات في صدور رسالة خطأ، فستكون المعلومات حول الخطأ مرفقة بالبند ذي الصلة في الشبكة. لمراجعة المعلومات حول الخطأ، حدد بندًا في الشبكة، ثم حدد زر **المرفق** (رمز مشبك الورق) في الزاوية العلوية اليسرى من الصفحة.

توضح علامة التبويب السريعة **الحقول الإضافية للرسالة** كافة الحقول الإضافية المُعرفة للرسائل في إعداد المعالجة. ويُظهر أيضًا قيم هذه الحقول الإضافية.

توضح علامة التبويب السريعة **أصناف الرسائل** كافة أصناف الرسائل المتعلقة بالرسالة المُحددة. استنادًا إلى حالة عنصر الرسالة المحدد، يمكنك تشغيل بعض الإجراءات باستخدام الأزرار الواقعة أعلى الشبكة:

- **حذف** - يتوفر هذا الزر إذا تم تحديد خانة الاختيار **السماح بالحذف** للحالة الحالية لعنصر الرسالة المحدد.
- **تحديث الحالة** - يقترن هذا بالإجراءات من النوع **معالجة المستخدم** .
- **المستند الأصلي** – يفتح صفحة تُظهر المستند الأصلي لعنصر الرسالة المحدد.

تكون كافة التقارير التي تم إنشاؤها واستلامها لرسالة مرفقة بهذه الرسالة. لمراجعة الملحقات المتعلقة برسالة، حدد الرسالة، ثم حدد زر **المرفق** (رمز مشبك الورق) في الزاوية العلوية اليسرى من الصفحة.

![زر المرفقات](media/attachment-icon.png)

تُظهر صفحة **المرفقات** كافة المرفقات المتعلقة بالرسالة المحددة. لعرض أحد الملفات، قم بتحديده في القائمة على اليسار، ثم حدد **فتح** في جزء الإجراءات.

![زر فتح](media/open-button.png)

يمكنك أيضًا مراجعة المرفقات التي ترتبط بإجراء معين تم تشغيله في وقت سابق لرسالة. في صفحة **الرسائل الإلكترونية** ، حدد الرسالة على علامة التبويب السريعة **الرسائل** ، وحدد الإجراء على علامة التبويب السريعة **سجل الإجراءات** ، ثم حدد زر **المرفق** في الزاوية العلوية اليسرى من الصفحة.

يمكنك أيضًا إما تشغيل المعالجة بالكامل أو إجراء مُعيّن عن طريق تحديد **تشغيل المعالجة** في جزء الإجراءات.

### <a name="electronic-message-items"></a>أصناف الرسائل الإلكترونية

تعرض صفحة **أصناف الرسائل الإلكترونية** كافة أصناف الرسائل وسجل للإجراءات التي تم تشغيلها لكل صنف رسالة. ويُظهر أيضًا الحقول الإضافية المُعرفة لأصناف الرسائل، وقيم هذه الحقول الإضافية.

يصف الجدول التالي الحقول في علامة التبويب **أصناف الرسائل** .

<table>
<thead>
<tr>
<th>الحقل</th>
<th>الوصف</th>
</tr>
</thead>
<tbody>
<tr>
<td>المعالجة</td>
<td>اسم المعالجة المستخدمة لإنشاء صنف الرسالة.</td>
</tr>
<tr>
<td>صنف الرسالة</td>
<td>مُعرف صنف الرسالة. يتم تعيين هذا المعرف تلقائيًا، استنادًا إلى التسلسل الرقمي لـ<strong>صنف الرسالة </strong> المُحدد في صفحة <strong>محددات دفتر الأستاذ العام</strong>.</td>
</tr>
<tr>
<td>تاريخ صنف الرسالة</td>
<td>تاريخ إنشاء صنف الرسالة.</td>
</tr>
<tr>
<td>نوع صنف الرسالة</td>
<td>نوع صنف الرسالة. يمكن إعداد أنواع متعددة من أصناف الرسائل لنفس المعالجة (على سبيل المثال، <strong>الفواتير الواردة</strong> و <strong>الفواتير الصادرة</strong>). يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>حالة صنف الرسالة</td>
<td>الحالة الفعلية لصنف الرسالة. تختلف الحالة المتوفرة اعتمادًا على نوع صنف الرسالة. فيما يلي بعض الأمثلة:
<ul>
<li><strong>تمت التعبئة</strong> -تمت إضافة سجل إلى جدول أصناف الرسالة.</li>
<li><strong>تم التقييم</strong> -تم حساب سمات إضافية لصنف الرسالة.</li>
<li><strong>تم الإبلاغ</strong> -تمت إضافة صنف الرسالة بنجاح إلى التقرير.</li>
<li><strong>تم الاستبعاد</strong> -يمكن أن تكون هذه الحالة مفيدة إذا كان يجب عليك استبعاد بعض أصناف الرسائل من التقرير قبل تصديره.</li>
</ul>
</td>
</tr>
<tr>
<td>تاريخ الإرسال</td>
<td>بالنسبة للمعالجة التي تقوم بإرسال تاريخ تم إنشاؤه خارج النظام تلقائيًا، يكون التاريخ هو تاريخ إرسال صنف الرسالة.</td>
</tr>
<tr>
<td>رقم المستند</td>
<td>يتم ملء هذا الحقل تلقائيًا، استنادًا إلى إعداد إجراء تعبئة السجلات. يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>رقم الحساب</td>
<td>رقم حساب عميل أو مورّد (أو قيمة حقل آخر، استنادًا إلى الحقل المُحدد في إجراء تعبئة السجلات). يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>رسالة</td>
<td>الرقم الخاص بالرسالة. يتم تعيين هذا الرقم تلقائيًا، استنادًا إلى التسلسل الرقمي لـ<strong>الرسالة </strong> المُحدد في صفحة <strong>محددات دفتر الأستاذ العام</strong>.</td>
</tr>
<tr>
<td>حالة الرسالة</td>
<td>الحالة الفعلية للرسالة الإلكترونية.</td>
</tr>
<tr>
<td>الإجراء التالي</td>
<td>الإجراءات التالية التي يمكن بدء تشغيلها للحالة الحالية لعنصر الرسالة.</td>
</tr>
</tbody>
</table>

تعرض علامة تبويب **الحقول الإضافية** الحقول الإضافية لصنف الرسالة المُحددة والقيم الخاص بها.

#### <a name="run-processing"></a>تشغيل المعالجة

حدد **تشغيل المعالجة** في جزء الإجراءات لتشغيل المعالجة لأصناف الرسالة. لتشغيل إجراء محدد، في مربع حوار **تشغيل المعالجة** ، عيّن الخيار **اختيار إجراء** إلى **نعم** ، ثم حدد إجراءً. لتشغيل المعالجة الكاملة، اترك الخيار **اختيار إجراء** مُعينًا إلى **لا** .

#### <a name="generate-report"></a>إنشاء تقرير

حدد **إنشاء تقرير** في جزء الإجراءات لإنشاء تقرير. يقترن هذا الزر بالإجراءات من النوع **تصدير التقارير الإلكترونية** .

#### <a name="update-status"></a>تحديث الحالة

حدد **تحديث الحالة** في جزء الإجراءات لتحديث حالة صنف رسالة واحد أو أكثر. في مربع حوار **تحديث الحالة** ، استخدم علامة التبويب السريعة **السجلات المطلوب تضمينها** لتحديد عناصر الرسائل لتحديثها. تأكد من تحديد معايير الاختيار بشكل صحيح، إذ سيتم تحديث حالات عناصر الرسائل وفقًا لهذه المعايير، والحالة الأولية للإجراء المحدد وقيمة **الحالة الجديدة** التي تعيّنها. بعد الانتهاء من تحديث الحالة، سيكون من الصعب تحديد العناصر التي تم تحديثها. وبالتالي، سيكون الصعب استرجاع تحديث الحالة.

#### <a name="electronic-messages"></a>الرسائل الإلكترونية

حدد **الرسائل الإلكترونية** في جزء الإجراءات لمراجعة رسالة إلكترونية مرتبطة بعنصر الرسالة المحددة.

يمكنك أيضًا مراجعة جميع الملفات المرتبطة بعنصر رسالة محددة. حدد حقل **الرسالة** لعنصر الرسالة، أو حدد **الرسائل الإلكترونية** في جزء الإجراءات. بعد ذلك، في صفحة **الرسالة الإلكترونية** ، حدد الرسالة التي تريد مراجعة الملفات لها، ثم حدد زر **المرفق** (رمز مشبك الورق) في الزاوية العلوية اليسرى من الصفحة.

![زر المرفقات](media/attachment-icon.png)

توضح صفحة **المرفقات** كافة المرفقات المتعلقة بالرسالة. لعرض أحد الملفات، قم بتحديده في القائمة على اليسار، ثم حدد **فتح** في جزء الإجراءات.

![زر فتح](media/open-button.png)

#### <a name="original-document"></a>المستند الأصلي

حدد **المستند الأصلي** في جزء الإجراءات لفتح المستند الأصلي لصنف الرسالة المُحددة.

## <a name="example-set-up-and-run-processing-to-call-a-simple-er-exporting-format-to-generate-an-excel-report"></a>مثال: إعداد وتشغيل المعالجة لاستدعاء تنسيق تصدير تقارير إلكترونية بسيط لإنشاء تقرير Excel.

بعد أن قمت بإنشاء تنسيق ER الخاص بك، قم بتعيينه إلى مصادر البيانات، ثم قم بإكماله، يمكنك تشغيله باستخدام مساحة عمل **إعداد التقارير الإلكترونية** . يتم إنشاء تقرير، ويمكنك حفظه محليًا.

للتحكم في الجوانب التالية من عملية إعداد التقارير، يجب عليك إعداد معالجة الرسائل الإلكترونية.

- قم بتسجيل معلومات حول الشخص الذي قام بإنشاء التقرير.
- قم بتسجيل معلومات حول تاريخ إنشاء التقرير.
- قم بحفظ التقارير التي تم إنشاؤها للفترات السابقة.

يوفر هذا القسم مثالًا يوضح كيف يمكنك إعداد الرسائل الإلكترونية لإنشاء تقرير يستند إلى تنسيق تصدير ER إلى Excel. إذا أردت اتباع هذا المثال، يجب أن يكون تنسيق تصدير التقارير الإلكترونية في Excel قد تم إنشاؤه وتعيينه إلى مصادر البيانات وإكماله. علاوةً على ذلك، يجب إعداد التسلسل الرقمي للرسائل الإلكترونية مسبقًا.

عند إنشائك للمعالجة، فمن المفيد إذا قمت أولًا بتحديد إجراءات المعالجة والحالات التي سوف يتم إعدادها. يُظهر الرسم التوضيحي التالي كيف تبدو المٌعالجة لهذا المثال.

![نظام المعالجة](media/processing-scheme.png)

#### <a name="create-message-statuses"></a>إنشاء حالات الرسائل

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>حالات الرسائل** .
2. إنشاء حالات الرسائل التالية:

    - القيمة الجديدة
    - تم الإعداد
    - منشأ

    ![حالات الرسائل](media/message-statuses.png)

3. في سطر حالة **جديد** ، حدد خانة الاختيار **السماح بالحذف** للسماح للمستخدمين بحذف الرسائل التي لها هذه الحالة.

#### <a name="create-additional-fields"></a>إنشاء حقول إضافية

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>الحقول الإضافية** .
2. قم بإضافة حقل إضافي والقيم الخاصة به. فيما يلي مثال على ذلك.

    ![حقول إضافية](media/additional-fields.png)

3. قم بتعيين خيار **تحرير المستخدم** إلى **نعم** للسماح للمستخدمين بتحرير الحقل.

#### <a name="create-message-processing-actions"></a>إنشاء إجراءات معالجة الرسائل

على سبيل المثال، سوف تقوم بإنشاء الإجراءات التالية:

- **إنشاء رسالة**
- **تحديث إلى المُعد**
- **إنشاء تقرير**
- **تحديث إلى الحالة الأولية** (اختياري)

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>إجراءات معالجة الرسائل** .
2. إنشاء إجراء يسمى **إنشاء رسالة** . في علامة التبويب السريعة **عام** ، في حقل **نوع الإجراء** ، حدد **إنشاء رسالة** .
3. إنشاء إجراء يسمى **التحديث إلى المُعد** ، وقم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام** ، في حقل **نوع الإجراء** ، حدد **‏‫معالجة مستخدم مستوى الرسالة‬** .
    - في علامة التبويب السريعة **الحالات الأولية** ، في حقل **حالات الرسائل** ، حدد **جديد** .
    - في علامة التبويب السريعة **حالات النتائج** ، في حقل **حالات الرسائل** ، حدد **تم الإعداد** . في حقل **نوع الاستجابة** ، أدخل **تم التنفيذ بنجاح** .

4. إنشاء إجراء يسمى **إنشاء تقرير** ، وقم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام** ، في حقل **نوع الإجراء** ، حدد **‏‫تصدير التقارير الإلكترونية‬** . في حقل **تعيين تنسيق** ، حدد تنسيق تصدير ER. الخيارات المتاحة هي **Excel** ، **XML** ، **JSON** ، **Text** و **أخرى** .
    - في علامة التبويب السريعة **الحالات الأولية** ، في حقل **حالات الرسائل** ، حدد **تم الإعداد** .
    - في علامة التبويب السريعة **حالات النتائج** ، في حقل **حالات الرسائل** ، حدد **تم الإنشاء** . في حقل **نوع الاستجابة** ، أدخل **تم التنفيذ بنجاح** .

    ![إنشاء إجراء تقرير](media/generate-report-action.png)

5. اختياري: للسماح للمستخدمين بإعادة إنشاء تقرير عدة مرات، يمكنك إنشاء إجراء **تحديث إلى الحالة الأولية** ، ثم قم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام** ، في حقل **نوع الإجراء** ، حدد **‏‫معالجة مستخدم مستوى الرسالة‬** .
    - في علامة التبويب السريعة **الحالات الأولية** ، في حقل **حالات الرسائل** ، حدد **تم الإنشاء** .
    - على علامة التبويب السريعة **حالات النتائج‬** ، أضف سطرًا منفصلاً لكل حالة من حالتي الرسائل ( **مُعد‬** و **جديد** ). بالنسبة إلى السطرين، عيّن الحقل **نوع الاستجابة** إلى **تم التنفيذ بنجاح‬** .

#### <a name="electronic-message-processing"></a>معالجة الرسائل الإلكترونية

في هذا المثال، يتعين إعداد كافة الإجراءات بحيث يتم تشغيلها بشكل منفصل. والافتراض هو أن المستخدم سيبدأ كل إجراء.

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>معالجة الرسائل الإلكترونية** .
2. أضف سجلًا للمعالجة الخاصة بك، ثم قم بإضافة جميع الإجراءات المُعرفة مسبقًا وحقل إضافي.
3. اختياري: على علامة التبويب السريعة **أدوار الأمان** ، حدد أدوار الأمان للمعالجة لتقييد الوصول إلى تقارير معينة.
4. انتقل إلى **الضرائب \>الاستعلامات والتقارير \>الرسائل الإلكترونية \>الرسائل الإلكترونية** .
5. حدد **جديد** لإنشاء رسالة. في هذه المرحلة، يمكنك إضافة تواريخ ووصف. يمكنك أيضًا تحديث قيمة الحقل الإضافي كما تريد.

    ![إنشاء رسالة إلكترونية](media/create-electronic-message.png)

يتم ملء الشبكة في علامة التبويب السريعة **سجل الإجراءات** تلقائيًا باستخدام سجل بجميع الإجراءات التي تم تنفيذها على الرسالة.

يمكنك الآن إما حذف أو تحديث حالة الرسالة. لتحديث حالة الرسالة، حدد **تحديث الحالة** . في الحقل **حالة جديدة** ، حدد **مُعد** ، ثم حدد **موافق** .

![تحديث حالة الرسالة](media/update-status.png)

يتم تحديث حالة الرسالة إلى **تم الإعداد** ، ويمكنك الآن إنشاء التقرير عن طريق تحديد **إنشاء تقرير** . يتم إنشاء التقرير، ويتم تحديث حالة الرسالة وسجل الإجراء. لعرض التقرير المنشأ، حدد زر **المرفق** (رمز مشبك الورق) في الزاوية العلوية اليسرى من الصفحة.
