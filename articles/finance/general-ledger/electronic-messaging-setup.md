---
title: إعداد الرسائل الإلكترونية
description: يوفر هذا الموضوع معلومات حول كيفية إعداد وظائف الرسائل الإلكترونية (EM).
author: liza-golub
ms.date: 07/07/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: ''
ms.search.region: Global
ms.author: elgolu
ms.search.validFrom: 2021-06-23
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: 2b62efabfae26a6cc004604e687a49bce992d78a30f0d441aa74fa5cde70e063
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/05/2021
ms.locfileid: "6752165"
---
# <a name="set-up-electronic-messages"></a>إعداد الرسائل الإلكترونية

[!include [banner](../includes/banner.md)]

تُساعدك وظئفة **الرسائل الإلكترونية** (EM) في الاحتفاظ بعمليات تقارير الكترونية مختلفة لأنواع مستندات مختلفة. في بعض السيناريوهات المعقدة التي تدعم [ميزات إعداد التقارير الخاصة بالدولة](electronic-messaging.md#country-specific-regulatory-features-supported-by-the-em-functionality)، يتم إعداد وظيفة الرسائل الإلكترونية بحيث تتضمن مجموعة من عدة حالات رسائل وحالات عناصر رسائل وإجراءات وحقول إضافية وفئات قابلة للتنفيذ. بالنسبة لهذا السيناريو، تتوفر حزم كيانات البيانات هذه للاستيراد. إذا كنت تستخدم حزم كيان البيانات هذه، فعليك استيرادها إلى كيان قانوني باستخدام أداة إدارة البيانات. للحصول على مزيد من المعلومات حول كيفية استخدام أداة إدارة البيانات، راجع [إدارة البيانات](../../fin-ops-core/dev-itpro/data-entities/data-entities-data-packages.md).

إذا لم تقم باستيراد حزمة كيان البيانات، يمكنك إعداد وظيفة الرسائل الإلكترونية يدويًا. وفي هذه الحالة، يجب عليك إعداد العناصر التالية:

- [التسلسلات الرقمية](#sequences)
- [أنواع أصناف الرسائل](#types)
- [حالات أصناف الرسائل](#item)
- [حالات الرسائل](#statuses)
- [حقول إضافية](#additional)
- [إعدادات الدرجة القابلة للتنفيذ](#executable)
- [إجراءات تعبئة السجلات](#populate)
- [تطبيقات الويب](#applications)
- [إعدادات خدمة الويب](#settings)
- [إجراءات معالجة الرسالة](#actions)
- [معالجة الرسائل الإلكترونية](#processing)

توفر الأقسام التالية معلومات إضافية حول كل عنصر من هذه العناصر.

## <a name="number-sequences"></a><a id="sequences"></a>التسلسلات الرقمية

إعداد التسلسلات الرقمية لكل من الرسئل وعناصر الرسائل. يتم استخدام التسلسلات الرقمية بعد ذلك لترقيم الرسائل وعناصر الرسائل بشكل تلقائي. ويتم استخدام الأرقام التي تم تعيينها كمعرفات فريدة للرسائل وعناصر الرسائل في النظام. يمكنك إعداد التسلسلات الرقمية للرسائل الإلكترونية من خلال الذهاب إلى **دفتر الأستاذ العام** \> **إعداد دفتر الأستاذ** \> **معلمات دفتر الأستاذ العام**.

## <a name="message-item-types"></a><a id="types"></a>أنواع أصناف الرسائل

تُحدد أنواع عناصر الرسائل أنواع السجلات التي يتم استخدامها في الرسائل الإلكترونية. يمكنك إعداد أنواع عناصر الرسالة من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **أنواع عناصر الرسائل**.

## <a name="message-item-statuses"></a><a id="item"></a>حالات أصناف الرسائل

تُحدد حالات أصناف الرسائل الحالات التي يتم تطبيقها على عناصر الرسالة في المعالجة التي تقوم بإعدادها. يمكنك إعداد حالات عناصر الرسالة من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **حالات عناصر الرسائل**.

تحدد معلمة **السماح بالحذف** لحالة عنصر الرسالة ما إذا كان باستطاعتك حذف عناصر الرسائل التي لديها هذه الحالة في صفحة **الرسائل الإلكترونية** أو صفحة **عناصر الرسائل الإلكترونية**.

## <a name="message-statuses"></a><a id="statuses"></a>حالات الرسائل

قم بإعداد حالات الرسائل التي يتعين توافرها في معالجة الرسالة. يمكنك إعداد حالات الرسائل من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **حالات الرسائل**.

يصف الجدول التالي الحقول في صفحة **حالات الرسائل‬**.

| اسم الحقل          | الوصف |
|---------------------|-------------|
| حالة الرسالة      | أدخل اسمًا فريدًا لحالة الرسالة. تُستخدم حالات الرسائل لتمييز حالة رسالة إلكترونية في كل لحظة. ويظهر الاسم الذي تدخله في صفحة **الرسائل الإلكترونية** وفي سجل يرتبط بالرسائل الإلكترونية. |
| الوصف         | أدخل وصفًا لحالة الرسالة. |
| نوع الاستجابة       | حدد نوع الاستجابة لحالة الرسالة. بإمكان بعض الإجراءات في عملية المعالجة إنتاج أكثر من نوع استجابة واحد. على سبيل المثال، قد تؤدي إجراء من نوع **خدمة ويب** إلى إنتاج استجابات من النوع **‏‫تم التنفيذ بنجاح‬** أو من النوع **خطأ فني** استنادًا إلى نتيجة التنفيذ. وفي هذه الحالة، حدد حالات الرسائل لنوعي الاستجابة. لمزيد من المعلومات حول أنواع الإجراءات وأنواع الاستجابات ذات الصلة بها، راجع قسم [أنواع إجراءات معالجة الرسائل](#action-types) الوارد لاحقًا في هذا الموضوع. |
| حالة صنف الرسالة | في بعض الأحيان، يجب أن تؤثر حالة رسالة إلكترونية على حالة عناصر الرسالة ذات الصلة. حدد حالة عنصر رسالة في هذا الحقل لربطه بحالة الرسالة. |
| السماح بالحذف        | حدد خانة الاختيار هذه إذا كان يجب على المستخدمين أن يكونوا قادرين على حذف الرسائل الإلكترونية التي لديها هذه الحالة في صفحة **الرسائل الإلكترونية**. |

## <a name="additional-fields"></a><a id="additional"></a>حقول إضافية

تتيح لك وظيفة EM تجميع السجلات من جداول المعاملات في Microsoft Dynamics 365 Finance كعناصر رسالة. بهذه الطريقة، يمكنك إعداد السجلات لإعداد التقارير والإبلاغ عنها. ومع ذلك، لا تتوفر لدى الجداول التعاملية في بعض الأحيان معلومات كافية لملء السجلات على نحو يتوافق مع متطلبات إعداد التقارير. لتعبئة جميع المعلومات التي يتعين الإبلاغ عنها لسجل، يمكنك إعداد حقول إضافية. يمكن إقران الحقول الإضافية بالرسائل وعناصر الرسائل. يمكنك الحقول الإضافية من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **الحقول الإضافية**.

يصف الجدول التالي الحقول العامة في صفحة **الحقول الإضافية**.

| الحقل       | الوصف |
|-------------|-------------|
| اسم الحقل  | أدخل اسم الحقل الإضافي للرسائل الإلكترونية أو عناصر الرسائل المتعلقة بالعملية. يظهر هذا الاسم في واجهة المستخدم أثناء عملك على العملية. يمكن استخدام الاسم أيضًا في تكوينات التقارير الإلكترونية (ER) المرتبطة بالعملية. |
| الوصف | أدخل وصفًا للحقل الإضافي. |
| تحرير المستخدم   | عيّن هذا الخيار إلى **نعم** إذا كان يجب أن يكون المستخدمون قادرين على تغيير قيمة الحقل الإضافي في واجهة المستخدم. |
| العداد     | عيّن هذا الخيار إلى **نعم** إذا كان يجب على الحقل الإضافي أن يحتوي على تسلسل رقمي في رسالة إلكترونية. تتم تعبئة قيمة الحقل الإضافي تلقائيصا أثناء تشغيل إجراء من النوع **تصدير التقارير الإلكترونية‬**. |
| مخفي      | قم بتعيين هذا الخيار إلى **نعم** إذا كان يجب إخفاء الحقل الإضافي في واجهة المستخدم في صفحة **الرسائل الإلكترونية** أو صفحة **عناصر الرسالة الإلكترونية**. |

في علامة التبويب السريعة **القيم** يمكنك تحديد مسبقًا القيم التي يمكن أن يحتوي عليها حقل إضافي. بعد ذلك تتوفر هذه القيم للمستخدمين لتحديدها. بالتالي، لا يجب أن يتم تعبئتها يدويا أثناء المعالجة. يصف الجدول التالي الحقول.

| الحقل                | الوصف |
|----------------------|-------------|
| قيمة الحقل          | أدخل قيمة الحقل التي يجب استخدامها لرسالة أو عنصر الرسالة أثناء إعداد التقارير. |
| الوصف          | أدخل وصفًا لقيمة الحقل. |
| نوع الحساب         | قد تكون بعض قيم الحقول مقتصرة على أنواع حسابات معينة. حدد إحدى القيم التالية: **الكل**، **العميل**، أو **المورد**. |
| كود الحساب         | إذا حددت **العميل** أو **المورّد** في حقل **نوع الحساب**، فيمكنك تقييد استخدام قيمة الحقل بحيث تقتصر على مجموعة معينة أو جدول معين. |
| رقم الحساب/المجموعة | إذا قمت بتحديد **العميل** أو **المورد** في حقل **نوع الحساب**، وإذا قمت بإدخال مجموعة أو جدول في حقل **كود الحساب**، يمكنك إدخال مجموعة معينة أو وكيل تخليص في هذا الحقل. |
| السريان            | حدد تاريخ بدء اعتبار القيمة. |
| انتهاء الصلاحية           | حدد تاريخ انتهاء اعتبار القيمة. |

بشكل افتراضي، لا تؤثر مجموعات المعايير التي تم تعريفها بواسطة الحقول **رقم الحساب/المجموعة** و **كود الحساب** و **ساري‬**، و **انتهاء صلاحية** على اختيار قيم لحقول إضافية. ومع ذلك، يمكن استخدام هذه المجموعات في فئة قابلة للتنفيذ لتطبيق منطق معين يحسب قيم حقول إضافية.

## <a name="executable-class-settings"></a><a id="executable"></a>إعدادات الدرجة القابلة للتنفيذ

تمثل الدرجة القابلة للتنفيذ أسلوب X ++ أو الدرجة التي يمكن فيها استدعاء معالجة الرسائل الإلكترونية فيما يتعلق بإجراء إذا كان بعض التقييم مطلوبًا للعملية.

يمكنك إعداد فئة قابل للتنفيذ يدويًا والتي يجب استدعاؤها أثناء المعالجة عن طريق الانتقال إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات الفئة القابلة للتنفيذ**. في صفحة **إعدادات الفئة القابلة للتنفيذ**، قم بإنشاء سطر، ثم قم بتعيين الحقول التالية.

| الحقل                 | الوصف |
|-----------------------|-------------|
| الفئة القابلة للتنفيذ      | أدخل الاسم الذي سيتم استخدامه خلال إعداد إجراء معالجة الرسالة الذي يتم استدعاء هذه الدرجة بالنسبة لها. |
| الوصف           | أدخل وصفًا للدرجة القابلة للتنفيذ. |
| اسم الدرجة القابلة للتنفيذ | حدد درجة X++ القابلة للتنفيذ. |
| مستوى التنفيذ       | يتم تعيين هذا الحقل تلقائيًا لأن القيمة تكون معرفة مسبقًا للفئة القابلة للتنفيذ المُحددة. يحد هذا الحقل المستوى الذي يعمل عليه التقييم ذي الصلة. |
| وصف الفئة     | يتم تعيين هذا الحقل تلقائيًا لأن القيمة تكون معرفة مسبقًا للفئة القابلة للتنفيذ المُحددة. |
| نوع الإجراء           | يتوفر هذا الحقل عند تشغيل ميزة **\[EM\] نوع إجراء الفئة القابلة للتنفيذ** في مساحة عمل **إدارة الميزات**. استخدم هذا الحقل لتحديد نوع الإجراء للفئة القابلة للتنفيذ. يمنح هذا الحقل تحكمًا أكثر دقة للإجراءات التالية المتوفرة للرسالة الإلكترونية في صفحة **الرسائل الإلكترونية**. |

قد تتضمن بعض الفئات القابلة للتنفيذ معلمات إلزامية يجب تحديدها قبل تشغيل الفئة القابلة للتنفيذ لأول مرة. لتعريف هذه المعلمات، في جزء الإجراءات، حدد **المعلمات**. في مربع الحوار الذي يظهر، قم بتعيين الحقول، ثم حدد **موافق**. من الضروري أن تحدد **موافق**. وإلا، فلن يتم حفظ المعلمات في قاعدة البيانات، وسيتعذر استدعاء الفئة القابلة للتنفيذ بشكل صحيح.

## <a name="populate-records-actions"></a><a id="populate"></a>إجراءات تعبئة السجلات

يمكنك استخدام إجراءات تعبئة السجلات لإعداد الإجراءات التي تقوم بإضافة السجلات إلى جدول عناصر الرسائل، بحيث يمكن إضافتها إلى رسالة إلكترونية. على سبيل المثال، إذا كان من الضروري أن تقوم رسالتك الإلكترونية بالإبلاغ عن فواتير العملاء، فيجب عليك تعيين إجراء تعبئة السجلات الذي يرتبط بحقل **مصدر البيانات** في جدول "دفتر يومية فواتير العميل‬".

يمكنك إعداد إجراءات تعبئة السجلات من خلال الذهاب إلى **الضريبة** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إجراءات تعبئة السجلات**. قم بإنشاء سجل جديد لكل إجراء يجب أن يقوم بإضافة السجلات إلى الجدول، وقم بتعيين الحقول التالية.

| الحقل       | الوصف |
|-------------|-------------|
| الاسم        | أدخل اسمًا للإجراء الذي يقوم بتعبئة السجلات في عمليتك. |
| الوصف | أدخل وصفًا لإجراء تعبئة السجلات. |

على علامة التبويب السريعة **إعداد مصادر البيانات**، قم بإضافة سطر لكل مصدر بيانات مستخدم للعملية، وقم بتعيين الحقول التالية.

| الحقل                  | الوصف |
|------------------------|-------------|
| الاسم                   | أدخل اسمًا لمصدر البيانات. |
| نوع صنف الرسالة      | حدد نوع عنصر الرسالة المطلوب استخدامه عند إنشاء سجلات لمصدر البيانات. |
| نوع الحساب           | حدد نوع الحساب المطلوب إقرانه بسجلات من مصدر البيانات. |
| اسم الجدول الرئيسي      | حدد الجدول الذي سيكون مصدر بيانات. |
| حقل رقم المستند  | حدد الحقل الذي يمكنك الحصول على رقم المستند منه في الجدول المحدد الرئيسي. يتم استخدام قيمة هذا الحقل كقيمة لحقل **رقم المستند** لعنصر الرسالة. |
| حقل تاريخ المستند    | حدد الحقل الذي يمكنك الحصول على تاريخ المستند منه في الجدول المحدد الرئيسي. يتم استخدام قيمة هذا الحقل كقيمة لحقل **تاريخ عنصر الرسالة** لعنصر الرسالة. |
| حقل حساب المستند | حدد الحقل الذي يمكنك الحصول على حساب المستند منه في الجدول المحدد الرئيسي. يتم استخدام قيمة هذا الحقل كقيمة لحقل **رقم الحساب** لعنصر الرسالة. |
| الشركة                | يتوفر هذا الحقل عند تشغيل ميزة **الاستعلامات بين الشركات الشقيقة لإجراءات تعبئة السجلات** في مساحة عمل **إدارة الميزات**. استخدم هذه الميزة لإعداد مصادر بيانات بين الشركة الشقيقة لإجراءات تعبئة السجلات. يمكن جلب البيانات من شركات متعددة. |
| استعلام المستخدم             | <p>إذا قمت بإعداد استعلام عن طريق تحديد **تحرير الاستعلام** أعلى الشبكة، وحددت المعايير التي يجب تطبيقها على الجدول الرئيسي المحدد الذي يتم تعبئة البيانات منه، فسوف يتم تحديد خانة الاختيار هذه تلقائيًا. خلاف ذلك، ستتم تعبئة كافة السجلات من مصدر الجدول الرئيسي المحدد.</p><p>عند تشغيل ميزة **الاستعلامات بين الشركة الشقيقة لإجراءات تعبئة السجلات** في مساحة عمل **إدارة الميزات**، يجب جمع السجلات من عدة شركات، وإضافة سطر لكل كيان قانوني إضافي يجب تضمينه في التقارير. لكل سطر جديد، حدد **تحرير الاستعلام**، وحدد معيارًا مرتبطًا خاصًا بالكيان القانوني المحدد في حقل **الشركة** في السطر. عند الانتهاء، ستحتوي شبكة **إعداد مصادر البيانات** على سطور لكافة الكيانات القانونية التي يجب تضمينها في التقارير.</p> |

## <a name="web-applications"></a><a id="applications"></a>تطبيقات الويب

استخدم إعدادات تطبيق ويب لإعداد تطبيق ويب بحيث يدعم Open Authorization (OAuth) 2.0. إن OAuth هو المعيار المفتوح الذي يسمح للمستخدمين بمنح "تفويض الوصول الأمن" إلى التطبيق بالنيابة عنهم، من دون مشاركة بيانات اعتماد الوصول الخاصة بهم. يمكنك أيضًا الانتقال عبر عملية التفويض عن طريق الحصول على كود التفويض والرمز المميز للوصول. يمكنك تعيين إعدادات تطبيق الويب من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **تطبيقات الويب**.

يصف الجدول التالي الحقول في صفحة **تطبيقات الويب**.

| الحقل                        | الوصف |
|------------------------------|-------------|
| اسم التطبيق             | أدخل اسمًا لتطبيق الويب. |
| الوصف                  | أدخل وصفًا لتطبيق الويب. |
| عنوان URL الأساسي                     | أدخل عنوان الإنترنت الأساسي لتطبيق الويب. |
| مسار عنوان URL للتفويض       | حدد المسار المستخدم لإنشاء عنوان URL للتفويض. |
| مسار عنوان URL للرمز المميز               | حدد المسار المستخدم لإنشاء عنوان URL للرمز المميز. |
| عنوان URL لإعادة التوجيه                 | إدخال عنوان URL لإعادة التوجيه. |
| معرّف العميل                    | أدخل معرّف العميل لتطبيق ويب. |
| سر العميل                | أدخل سر العميل لتطبيق ويب. |
| الرمز المميز للخادم                 | أدخل الرمز المميز للخادم لتطبيق ويب. |
| تعيين تنسيق التفويض | حدد تنسيق التقارير الإلكترونية المستخدم لإنشاء طلب التفويض. |
| استيراد تعيين نموذج الرمز المميز   | حدد تعيين نموذج استيراد التقارير الإلكترونية الذي يجب استخدامه لتخزين الرمز المميز للوصول. |
| النطاق الممنوح                | يُمنح النطاق للطلبات الخاصة بالوصول إلى التطبيق. ويتم تحديث الحقل بشكل تلقائي. |
| ستنتهي صلاحية الرمز المميز للوصول في  | الوقت المتبقي قبل انتهاء صلاحية الرمز المميز للوصول. ويتم تحديث الحقل بشكل تلقائي. | 
| قبول                       | حدد خاصية **القبول** لطلب الويب. على سبيل المثال، أدخل **application/vnd.hmrc.1.0+json**. |
| نوع المحتوى                 | حدد نوع المحتوى. على سبيل المثال، أدخل **application/json**. |

بالإضافة إلى ذلك، تتوفر الأزرار التالية في "جزء الإجراءات" في صفحة **تطبيقات ويب** لدعم عملية التفويض:

- **الحصول على كود التفويض** - بدء تفويض تطبيق الويب. تستخدم هذه الوظيفة تنسيق ER المحدد في حقل **تعيين تنسيق التخويل** لإنشاء طلب تخويل.
- **الحصول على الرمز المميز للوصول** - تهيئة الحصول على الرمز المميز للوصول.
- **تحديث الرمز المميز للوصول** - تحديث الرمز مميز للوصول. تستخدم هذه الوظيفة تنسيق ER المحدد في حقل **تعيين نموذج استيراد الرمز المميز**  لاستيراد معلومات حول رمز الوصول المستلم.

عند تخزين رمز مميز للوصول إلى تطبيق الويب في قاعدة بيانات النظام بتنسيق مشفر، يمكن استخدامه للطلبات المرسلة إلى خدمة الويب. ولأغراض الأمان، يجب أن يقتصر الوصول إلى الرمز المميز على أدوار الأمان المسموح لها بمعالجة هذه الطلبات. إذا حاول أي شخص من خارج مجموعة الأمان معالجة طلب ما، فسيتلقى رسالة خطأ تفيد بأنه لا يُسمح له بالعمل مع الآخرين باستخدام تطبيق الويب المحدد.‬ لإعداد أدوار الأمان التي لها صلاحية الوصول إلى الرمز المميز للوصول، استخدم علامة التبويب السريعة **أدوار الأمان**  في صفحة **تطبيقات الويب**. إذا لم يتم تعريف أدوار أمان لتطبيق الويب، فسيكون باستطاعة مسؤول النظام فقط العمل مع الآخرين باستخدام تطبيق الويب.

لكل إجراء باستخدام تطبيق ويب المحدد، يقوم علامة التبويب السريعة **سجل الإجراء** بحفظ معلومات حول المستخدم والتاريخ والوقت.

قد تتطلب بعض خدمات الويب تضمين رؤوس مختلفة في الطلبات. يمكن لمسؤول النظام إعداد رؤوس إضافية وقيمها في علامة التبويب السريعة **الرؤوس التكميلية**، ثم استخدامها أثناء إنشاء الطلب.

## <a name="web-service-settings"></a><a id="settings"></a>إعدادات خدمة الويب

استخدم إعدادات خدمة الويب لإعداد إرسال البيانات مباشرة إلى خدمة ويب. يمكنك تعيين إعدادات خدمة الويب من خلال الذهاب إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات خدمة الويب**.

يوضح الجدول التالي الحقول في صفحة **إعدادات خدمة الويب**.

| الحقل                          | الوصف |
|--------------------------------|-------------|
| خدمة الويب                    | أدخل اسمًا لخدمة الويب. |
| الوصف                    | أدخل وصفًا لخدمة الويب. |
| عنوان الإنترنت               | <p>أدخل عنوان البريد الإلكتروني لخدمة الويب. إذا تم تحديد تطبيق ويب لخدمة الويب وكان من المفترض أن يكون عنوان الإنترنت لخدمة الويب هو نفسه عنوان الإنترنت المحدد لتطبيق الويب هذا، فحدد **نسخ عنوان URL الأساسي**. بعد ذلك يتم نسخ URL الأساسي لتطبيق ويب إلى هذا الحقل.</p><p>**تحذير:** لا تتطلب خدمات الجهات الخارجية أو الخدمات الأخرى التي تقوم بتكوينها هنا الحصول على شهادة وقد لا تفي بمعايير خصوصية Microsoft. يجب عليك مراجعة وثائق الخصوصية لكل خدمة والعمل مع كل مزود خدمة لمعرفة المزيد حول مستوى التوافق الذي توفره الخدمة. أنت المسؤول عن ضمان تلبية هذه الخدمات لمعايير الأمان والخصوصية والمعايير القانونية. وعليك تحمل مخاطر استخدا الخدمات. لا تمنح شركة Microsoft أية ضمانات أو شروط صريحة. نوصي بشدة باستخدام الخدمات التي توفر اتصالات آمنة ومخولة فقط، مثل HTTPS.</p> |
| الشهادة                    | حدد شهادة Azure Key Vault التي تم إعدادها مسبقًا. |
| تطبيق ويب                | حدد تطبيق الويب الذي تم إعداده مسبقًا. |
| نوع الاستجابة - XML        | قم بتعيين هذا الخيار إلى **نعم** إذا كان نوع الاستجابة XML. |
| طريقة الطلب                 | حدد أسلوب الطلب. تقوم HTTP بتعريف مجموعة من أساليب الطلب التي تشير إلى الإجراء الذي يتعين تنفيذه لمورد مُعين. بإمكان أسلوب الطلب أن يكون  **GET** أو **POST**، أو أسلوب HTTP آخر. |
| رؤوس الطلبات                | حدد رؤوس الطلبات. رأس الطلب هو رأس HTTP يمكن استخدامه في طلب HTTP. ولا علاقة له بمحتوى الرسالة. |
| قبول                         | حدد خاصية القبول لطلب الويب. |
| ترميز القبول                | حدد قيمة ترميز القبول. يُعلن عنوان HTTP لطلب ترميز القبول عن ترميز المحتوى الذي يمكن للعميل فهمه. عادةً ما يكون ترميز المحتوى هذا خوارزمية ضغط. |
| نوع المحتوى                   | حدد نوع المحتوى. يُشير رأس HTTP لكيان نوع المحتوى إلى نوع الوسائط للمورد. |
| كود الاستجابة الناجحة       | تحديد كود حالة HTTP الذي يشير إلى نجاح الطلب. |
| طلب تعيين تنسيق الرؤوس | حدد تنسيق التقارير الإلكترونية المستخدم لإنشاء رؤوس طلبات الويب. |

## <a name="message-processing-actions"></a><a id="actions"></a>إجراءات معالجة الرسالة

يمكنك استخدام إجراءات معالجة الرسالة لإنشاء إجراءات للعمليات الخاصة بك وإعداد المحددات الخاصة بها. يمكنك إعداد إجراءات معالجة الرسائل من خلال الذهاب إلى **الضريبة** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إجراءات معالجة الرسائل**.

توضح الجداول التالية الحقول في صفحة **إجراءات معالجة الرسائل**.

### <a name="general-fasttab"></a>علامة التبويب السريعة عام

| الحقل                                     | الوصف |
|-------------------------------------------|-------------|
| نوع الإجراء                               | حدد نوع الإجراء. لمزيد من المعلومات حول الخيارات المتوفرة، راجع قسم [أنواع إجراء معالجة الرسائل](#action-types) الوارد لاحقًا في هذا الموضوع. |
| تعيين تنسيق                            | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتوفر هذا الحقل فقط للإجراءات الخاصة بأنواع **تصدير التقارير الإلكترونية**، **استيراد التقارير الإلكترونية**، و **رسالة تصدير التقارير الإلكترونية**. |
| تعيين التنسيق لمسار عنوان URL               | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتم استخدام هذا التنسيق لإنشاء مسار إلى عنوان URL الذي سيضاف إلى عنوان إنترنت الأساسي المحدد لخادم الويب المحدد. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب**. |
| نوع صنف الرسالة                         | حدد أنواع السجلات التي يجب تقييم الإجراء بالنسبة لها. يتوفر هذا الحقل للإجراءات من الأنواع **مستوى تنفيذ عنصر الرسالة‬** و **تصدير التقارير الإلكترونية** و **استيراد التقارير الإلكترونية‬** و **خدمة الويب** والأنواع الأخرى. إذا تركت هذا الحقل فارغًا، يتم تقييم كافة أنواع عناصر الرسائل المُحددة لمعالجة الرسائل. |
| الفئة القابلة للتنفيذ                          | حدد إعداد فئة قابل للتنفيذ موجود. يتوافر هذا الحقل فقط للإجراءات الخاصة بأنواع **مستوى تنفيذ صنف الرسالة** و **مستوى تنفيذ صنف الرسالة**. |
| إجراء تعبئة السجل                   | حدد إجراء تعبئة سجلات موجود. يتوفر هذا الحقل فقط للإجراءات الخاصة بالنوع **تعبئة السجلات**. |
| خدمة الويب                               | حدد خدمة ويب موجودة. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب**. |
| اسم الملف                                 | حدد اسم الملف الذي سيكون نتيجة الإجراء. بإمكان هذا الملف أن يكون استجابة من خادم الويب أو التقرير الذي تم إنشاؤه. يتوفر هذا الحقل فقط للإجراءات من النوعين **خدمة الويب** و **رسالة تصدير التقارير الإلكترونية‬**. |
| إرفاق ملفات بمستندات المصدر          | حدد خانة الاختيار هذه لإرفاق الملفات التي تم إنشاؤها بالسجلات في جدول رئيسي مرجعي لعناصر EM. يتوفر هذا الحقل فقط للإجراءات من النوعين **تصدير التقارير الإلكترونية** و **خدمة الويب**. |
| إرفاق الملفات من أرشيف الإخراج للعناصر | حدد خانة الاختيار هذه لاستخراج ملفات XML منفصلة من ملف أرشيف الإخراج وإرفاقها بعناصر الرسائل الإلكترونية المطابقة. يتوفر هذا الحقل فقط للإجراءات من النوع **تصدير التقارير الإلكترونية**. |
| عدد أصناف الرسائل لكل تصدير        | حدد الحد الأقصى لعدد عناصر الرسالة التي يجب تضمينها في ملف واحد (رسالة). يتوفر هذا الحقل فقط للإجراءات من النوع **تصدير التقارير الإلكترونية**. |
| استخدام مصدر ER                             | حدد خانة الاختيار هذه لاستخدام معلمات مصدر ER للاستيراد. وإلا، يتم استخدام المرفق من الرسالة الإلكترونية. يتوفر هذا الحقل فقط للإجراءات من النوع **استيراد التقارير الإلكترونية**. |
| إظهار مربع حوار                               | عيّن هذا الخيار إلى **نعم** إذا كان يجب عرض مربع حوار للمستخدمين قبل إنشاء التقرير. يتوفر هذا الحقل فقط للإجراءات من النوع **رسالة تصدير التقارير الإلكترونية**. |

#### <a name="message-processing-action-types"></a><a id="action-types"></a>أنواع إجراء معالجة الرسائل

تتوفر الخيارات التالية ف حقل **نوع الإجراء**:

- **إنشاء رسالة** -استخدم نوع الإجراء هذا للسماح للمستخدمين بإنشاء الرسائل يدويًا في صفحة **الرسائل الإلكترونية**. يتعذر إعداد الحالة الأولية لإجراء من هذا النوع.
- **تعبئة السجلات** - يجب إعداد نوع الإجراء هذا مسبقًا. قم بإقرانه بإجراء من النوع تعبئة السجلات لتمكين تضمين الإجراء في المعالجة. من المفترض أن يتم استخدام نوع الإجراء هذا للإجراء الأول في معالجة الرسالة (عند عدم إنشاء أية رسالة إلكترونية بشكل مسبق) أو كإجراء يضيف عناصر رسالة إلى رسالة تم إنشاؤها في وقت سابق بواسطة إجراء من نوع الإجراء **إنشاء رسالة**. وبالتالي، فيما يتعلق بإجراءات من هذا النوع، يمكن إعداد حالة النتيجة لعناصر الرسالة فقط. يمكن إعداد حالة أولية للرسائل فقط.
- **مستوى تنفيذ الرسالة** - استخدم نوع الإجراء هذا لإعداد فئة قابلة للتنفيذ يتعين تقييمها على مستوى الرسالة.
- **مستوى تنفيذ عنصر الرسالة** - استخدم نوع الإجراء هذا لإعداد فئة قابلة للتنفيذ يتعين تقييمها على مستوى عنصر الرسالة.
- **تصدير التقارير الإلكترونية** -استخدم نوع الإجراء هذا للإجراءات التي يجب أن تقوم بإنشاء تقرير يستند إلى تكوين تصدير ER على مستوى صنف الرسالة.
- **رسالة تصدير التقارير الإلكترونية** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن تنشئ تقريرًا يستند إلى تكوين تصدير التقارير الإلكترونية على مستوى عنصر الرسالة (على سبيل المثال، عندما لا تحتوي رسالة على أي عناصر رسالة).
- **استيراد التقارير الإلكترونية** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن تنشئ تقريرًا يستند إلى تكوين استيراد التقارير الإلكترونية.
- **معالجة المستخدم على مستوى الرسالة** - استخدم نوع الإجراء هذا للإجراءات التي تفترض تنفيذ إجراء يدوي معين بواسطة المستخدم على مستوى الرسالة. على سبيل المثال، قد يقوم المستخدم بتحديث حالة الرسائل.
- **معالجة المستخدم** - استخدم نوع الإجراء هذا للإجراءات التي تفترض تنفيذ إجراء يدوي معين بواسطة المستخدم على مستوى عنصر الرسالة. على سبيل المثال، قد يقوم المستخدم بتحديث حالة أصناف الرسائل.
- **خدمة الويب** - استخدم نوع الإجراء هذا للإجراءات التي يجب أن ترسل تقريرًا تم إنشاؤه إلى خدمة ويب. لم يتم استخدام نوع الإجراء هذا لتقارير اتصالات فواتير المبيعات والشراء الإيطالية. بالنسبة إلى نوع الإجراء هذا، فإن صفحة **إجراءات معالجة الرسالة** تتضمن علامة التبويب السريعة **تفاصيل متنوعة** حيث يمكنك تحديد نص التأكيد. يظهر نص التأكيد هذا للمستخدمين قبل توجيه الطلبات إلى خدمة الويب المحددة.
- **التحقق من صحة الطلب** - استخدم نوع الإجراء هذا النوع لطلب التحقق من الصحة من خادم.

### <a name="initial-statuses-fasttab"></a>علامة التبويب السريعة الحالات الأولية

> [!NOTE]
> لا تتوفر علامة التبويب السريعة **الحالات الأولية** للإجراءات ذات نوع الإجراء الأولي **إنشاء رسالة**.

| الحقل               | الوصف |
|---------------------|-------------|
| حالة صنف الرسالة | حدد حالة صنف رسالة يجب تقييم إجراء معالجة الرسالة المحدد له. |
| الوصف         | وصف لحالة عنصر الرسالة المُحدد. |

### <a name="result-statuses-fasttab"></a>علامة تبويب حالات النتائج

| الحقل               | الوصف |
|---------------------|-------------|
| حالة الرسالة      | حدد حالات الرسائل التي يجب تقييم إجراء معالجة الرسالة المحدد لها. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة. على سبيل المثال، يتوفر للإجراءات من النوع **تصدير التقارير الإلكترونية** و **استيراد التقارير الإلكترونية**، ولكنه لا يتوفر للإجراءات من النوع **معالجة المستخدم** و **مستوى تنفيذ عنصر الرسالة‬**. |
| الوصف         | وصف لحالة الرسالة المُحددة. |
| نوع الاستجابة       | نوع الاستجابة لحالة الرسالة المُحددة. |
| حالة صنف الرسالة | حدد حالات النتائج التي يجب توافرها بعد أن يتم تقييم إجراء معالجة الرسالة المُحدد. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى صنف الرسالة. على سبيل المثال، تتوافر للإجراءات من النوع **معالجة المستخدمين** و **مستوى تنفيذ عنصر الرسالة**. بالنسبة لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة، يوضح هذا الحقل حالة عنصر الرسالة المُعدة لحالة الرسالة المُحددة. |

يعرض الجدول التالي حالات النتائج التي يجب إعدادها لمختلف أنواع الإجراءات وأنواع الاستجابات.

| نوع إجراء/نوع استجابة الرسالة الإلكترونية | تم التنفيذ بنجاح | حدث خطأ أثناء العمل | خطأ فني | مُعرف من قِبل المستخدم | إلغاء الأمر |
|----------------------------------------------|-----------------------|----------------|-----------------|--------------|--------|
| إنشاء رسالة                               | س                     |                |                 |              |        |
| تصدير التقارير الإلكترونية                  | س                     |                |                 |              |        |
| استيراد التقارير الإلكترونية                  |                       |                |                 |              |        |
| خدمة الويب                                  | س                     |                | س               |              |        |
| معالجة المستخدمين                              |                       |                |                 |              |        |
| مستوى تنفيذ الرسالة                      |                       |                |                 |              |        |
| تعبئة السجلات                             |                       |                |                 |              |        |
| مستوى تنفيذ صنف الرسالة                 |                       |                |                 |              |        |
| التحقق من صحة الطلب                         | س                     | س              | س               |              |        |
| رسالة تصدير التقارير الإلكترونية          | س                     |                |                 |              |        |
| معالجة مستخدم مستوى الرسالة                |                       |                |                 |              |        |

## <a name="electronic-message-processing"></a><a id="processing"></a>معالجة الرسائل الإلكترونية

يمثل معالجة الرسائل الإلكترونية مفهومًا أساسيًا لوظيفة الرسائل الإلكترونية (EM). يقوم ذلك بتجميع الإجراءات التي يتعين تقييمها للرسالة الإلكترونية. يمكن ربط الإجراءات باستخدام حالة أولية وحالة نتيجة. بدلًا من ذلك، يمكن بدء الإجراءات من النوع **معالجة المستخدم** بشكل مستقل. لإعداد معالجة الرسائل الإلكترونية، انتقل إلى **الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **معالجة الرسائل الإلكترونية**.

تسمح لك علامة التبويب السريعة **إجراء** بإضافة الإجراءات المُعرفة مسبقًا إلى المعالجة. يمكنك تحديد ما إذا كان يجب تشغيل إجراء بشكل منفصل، أو ما إذا كان يجب أن يبدأ بواسطة المعالجة. لتحديد بدء إجراء في المعالجة فقط بواسطة المستخدم، عيّن الحقل **تشغيل بشكل منفصل** إلى **نعم** لهذا الإجراء. إذا كان يجب بدء الإجراء بواسطة معالجة الرسائل أو عناصر الرسائل التي لديها الحالة المحددة كحالة أولية للإجراء، عيّن الحقل **تشغيل بشكل منفصل** إلى **لا**. يجب تشغيل الإجراءات من النوع **إجراء المستخدم** بشكل منفصل في كل الأوقات.

في بعض الأحيان، يجب تجميع عدة إجراءات في تسلسل، على الرغم من إعداد الإجراء الأول لكي يتم تشغيله بشكل منفصل. على سبيل المثال، يجب على المستخدم تهيئة إنشاء تقرير. مع ذلك، بعد إنشاء التقرير مباشرة، يجب إرساله إلى خدمة ويب، ويجب أن تنعكس الاستجابة من خدمة الويب في النظام. في هذه الحالة، يمكنك إنشاء تسلسل غير منفصل للإجراءات التي يجب تشغيلها معًا دائمًا. على علامة التبويب السريعة **الإجراء**، حدد **تسلسلات غير منفصلة** فوق الشبكة، ثم أنشئ تسلسلاً. بعد ذلك، حدد الحقل **تسلسل غير منفصل** لكافة الإجراءات التي يجب تشغيلها معًا في تسلسل واحد. على سبيل المثال، يمكن تعيين الحقل **تشغيل بشكل منفصل** إلى **نعم** للإجراء الأول في التسلسل، و **لا** لجميع الإجراءات الأخرى.

تعمل الإجراءات من نوع **تصدير التقارير الإلكترونية** و **رسائل تصدير التقارير الإلكترونية** على تنسيق ER يحتوي على معلمات الإدخال. إذا كانت معالجة الرسائل الإلكترونية تتضمن إجراءات لأي من هذين النوعين، فيجب تحديد قيم معلمات الإدخال قبل إنشاء التقرير. بهذه الطريقة، يمكن للنظام استخدام نظام دفعي لإنشاء التقرير. يمكنك تحديد **المعلمات** أعلى الشبكة لإعداد المعلمات لنوع الإجراء المحدد(**تصدير التقارير الإلكترونية** أو **رسالة تصدير التقارير الإلكترونية**). حدد خانة الاختيار **استخدام المعلمات** للإجراء الذي يجب تشغيله مع المعلمات المحددة في نظام دفعي.

استخدم علامة التبويب السريعة **الحقول الإضافية لأصناف الرسائل** لإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بأصناف الرسائل. يجب عليك إضافة حقول إضافية لكل نوع من أصناف الرسائل المرتبطة بالحقول. يمكنك تحديد قيمة افتراضية سيتم تعيينها إلى الحقل الإضافي أثناء المعالجة.

استخدم علامة التبويب السريعة **الحقول الإضافية للرسالة** لإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بالرسائل. يمكنك تحديد قيمة افتراضية سيتم تعيينها إلى الحقل الإضافي أثناء المعالجة.

استخدم علامة التبويب السريعة **أدوار الأمان** لإعداد أدوار الأمان المُعرفة مسبقًا في النظام لمُعالجة معينة. سوف يرى المستخدمون الذين لديهم دور معين المُعالجة المُحددة لهذا الدور فقط.

استخدم علامة التبويب السريعة **الدُفعة** لإعداد المعالجة للعمل في نظام الدُفعة. نوصي بإعداد نظام دفعي للمعالجة مباشرة في صفحة **الرسائل الإلكترونية** أو **عناصر الرسائل الإلكترونية**، عند تحديد **تشغيل المعالجة** في جزء الإجراء لبدء المعالجة.
