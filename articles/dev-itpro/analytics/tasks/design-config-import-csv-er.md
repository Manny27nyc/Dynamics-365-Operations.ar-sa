---
title: تصميم تكوينات التقارير الإلكترونية لاستيراد البيانات من ملفات CSV خارجية
description: استخدم هذا الإجراء لتصميم تكوينات التقارير الإلكترونية لاستيراد البيانات إلى تطبيق Dynamics 365 for Finance and Operations من ملف خارجي بتنسيق CSV.
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 8d3ea3d797de154979eae112658cf05d1914feeb
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 01/29/2019
ms.locfileid: "365214"
---
# <a name="design-er-configurations-to-import-data-from-external-csv-files"></a>تصميم تكوينات التقارير الإلكترونية لاستيراد البيانات من ملفات CSV خارجية

[!include [task guide banner](../../includes/task-guide-banner.md)]

استخدم هذا الإجراء لتصميم تكوينات التقارير الإلكترونية لاستيراد البيانات إلى تطبيق Dynamics 365 for Finance and Operations من ملف خارجي بتنسيق CSV. في هذا الإجراء، سوف تنشئ تكوينات التقارير الإلكترونية المطلوبة للشركة النموذجية Litware, Inc. لإكمال هذه الخطوات، يجب عليك أولاً إكمال الخطوات الموجودة في الإجراء "التقارير الإلكترونية - إنشاء موفر تكوين ووضع علامة عليه على أنه نشط"‬. 

تم إنشاء هذا الإجراء للمستخدمين الذين لديهم دور مسؤول النظام أو مطور التقارير الإلكترونية. يمكن إتمام هذه الخطوات باستخدام مجموعة بيانات USMF. 

يجب أيضًا تنزيل وحفظ الملفات التالية محليًا: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.

1. انتقل إلى إدارة المؤسسة > مساحات العمل‬ > إعداد التقارير الإلكتروني‬.
    * يمكنك تكوين عملية لاستيراد ملفات خارجية بتنسيق XML أو TXT أو CSV إلى جداول في تطبيق Dynamics 365 for Finance and Operations. أولاً، يجب عليك إنشاء نموذج بيانات مجرد لتمثيل البيانات التي تم استيرادها، من وجهة نظر خاصة بالعمل – يتم إنشاء تكوين نموذج بيانات تقارير إلكترونية لهذا الأمر. بعد ذلك، حدد بنية الملف المستورد الذي يتم تعيينه إلى نموذج البيانات المعين كطريقة لنقل البيانات من الملف إلى نموذج البيانات المجرد – يتم إنشاء تكوين تنسيق تقارير إلكترونية لهذا الأمر. وبعد ذلك، يجب توسيع تكوين نموذج بيانات التقارير الإلكترونية بواسطة تعيين نموذج جديد يصف كيفية استخدام البيانات من الملف المستورد والبيانات المستمرة من نموذج البيانات المجرد لتحديث جداول التطبيق أو كيانات البيانات.  
    * تُظهر الخطوات التالية كيفية استيراد حركات المورّدين التي يتم تتبعها خارجيًا من ملف CSV الخارجي لاستخدامها لاحقًا في تسوية المورّد لنماذج 1099.   
    * تحقق من وجود موفر التكوين للشركة النموذجية Litware, Inc. ومن وضع علامة عليه كنشط. إذا لم تشاهد موفر التكوين هذا، فيجب أولاً إكمال الخطوات المذكورة في الإجراء "إنشاء موفر تكوين ووضع علامة عليه على أنه نشط‬".  
2. انقر فوق "تكوينات إعداد التقارير‬".
3. طبق عامل التصفية "1099 نموذج المدفوعات". إذا سبق لك إكمال الإجراء "التقارير الإلكترونية - إنشاء التكوينات المطلوبة لاستيراد البيانات من ملف خارجي للتقارير الإلكترونية"، وكان تكوين "1099 نموذج المدفوعات" متوفرًا في شجرة التكوين، فيمكنك تخطي جميع الخطوات في الخطوة الفرعية التالية.   

## <a name="add-a-new-er-model-configuration"></a>إضافة تكوين نموذج تقارير إلكترونية جديد
1. بدلاً من إنشاء نموذج جديد لدعم استيراد البيانات، يمكنك تحميل الملف، 1099model.xml، الذي قمت بتنزيله في وقت سابق. يحتوي هذا الملف على نموذج بيانات مخصص لحركات المورّدين. تم تعيين نموذج البيانات هذا بالفعل إلى مكونات البيانات الضرورية.  
2. انقر فوق "التبادل‬".
3. انقر فوق "تحميل من ملف XML".
4. انقر فوق "استعراض"، وانتقل إلى الملف 1099model.xml الذي قمت بتنزيله في وقت سابق.  
5. انقر فوق "موافق".

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a>إضافة تكوين تنسيق تقارير إلكترونية جديد يدعم استيراد البيانات
1. في الشجرة، حدد "1099 نموذج المدفوعات".
2. انقر فوق "إنشاء تكوين" لفتح مربع حوار الإسقاط‬.
3. في الحقل "جديد"، أدخل 'التنسيق استنادًا إلى نموذج المدفوعات 1099 الخاص بنموذج البيانات".
4. حدد "نعم" في الحقل "دعم استيراد البيانات".
5. اضغط المفتاح ESC لإغلاق هذه الصفحة.
    * بدلاً من إنشاء تنسيق جديد للتقارير الإلكترونية، يمكنك تحميل الملف، 1099formatcsv.xml، الذي قمت بتنزيله في وقت سابق. يحتوي هذا الملف على تنسيق التقارير الإلكترونية الذي يحدد بنية ملف CSV الوارد بالإضافة إلى تعيين لهذه البنية إلى نموذج البيانات الخاص بحركات المورّدين.   
6. انقر فوق "التبادل‬".
7. انقر فوق "تحميل من ملف XML".
    * انقر فوق "استعراض"، وانتقل إلى الملف 1099formatcsv.xml الذي قمت بتنزيله في وقت سابق.  
8. انقر فوق "موافق".
9. في الشجرة، قم بتوسيع "1099 نموذج المدفوعات".
10. في الشجرة، حدد "1099 نموذج المدفوعات\لاستيراد حركات الموردين (CSV)".

## <a name="review-format-settings"></a>مراجعة إعدادات التنسيق
1. انقر فوق المصمم.
2. انقر فوق "توسيع/طي".
3. بدّل زر "إظهار التفاصيل" إلى وضع التشغيل.
    * يمثل التنسيق المصمّم البنية المتوقعة للملف الخارجي بتنسيق CSV.  
4. في الشجرة، حدد "وارد: ملف\جذر: تسلسل".
    * بالنسبة إلى العنصر الجذر من النوع SEQUENCE، تم تحديد الخيار "سطر جديد - Windows (CR LF)"في حقل "الأحرف الخاصة". استنادًا إلى هذا الإعداد، يجب اعتبار كل سطر في ملف التحليل سجلاً منفصلاً.   
5. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\سطر: تسلسل 1..*".
    * بالنسبة إلى العنصر جذر\سطر من النوع SEQUENCE، تم تحديد الخيار "واحد كثير" في حقل "التعدد". استنادًا إلى هذا الإعداد، سيتم تقديم سطر واحد على الأقل في ملف التحليل.   
6. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\سطر: تسلسل 1..* \أنواع: حالة".
    * لاحظ أنه تمت إضافة العنصر جذر\سطر\أنواع من النوع CASE كعنصر متداخل لتسلسل جذر\تسلسل أسطر. نظراً لاحتواء عنصر CASE هذا على ثلاثة عناصر تسلسل متداخلة، يفترض هذا الإعداد أن ملف التحليل يجب أن يتضمن 3 أنواع مختلفة من الأسطر.   
7. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\سطر: تسلسل 1..* \أنواع: حالة\رأس: تسلسل 1..1".
    * يحتوي العنصر جذر\سطر\أنواع\رأس من النوع SEQUENCE على عنصر STRING المتداخل والذي تم تعريف قيمته كقيمة السلسلة الثابتة. سيقوم هذا التسلسل بتحليل سطر الرأس لملف التحليل.   
8. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\سطر: تسلسل 1..* \أنواع: حالة\سجل: تسلسل 1..1 (,)".
    * تم تكوين العنصر جذر\سطر\أنواع\سجل من النوع SEQUENCE لتحليل سطور الحركة. لاحظ أنه تم تكوين خيار حرف "‏‫المحدد المخصص" كفاصلة. وهذا يعني أنه سيتم استخدام الفاصلة كفاصل للحقول لهذا النوع من الأسطر في ملف التحليل.   
    * لاحظ إضافة عدة عناصر متداخلة من أنواع بيانات مختلفة إلى العنصر جذر\سطر\أنواع\سجل لتحليل سطور الحركة كحقول منفصلة. لاحظ أنه تم اختيار الإعداد "بلا" لتكوين الخيار "استمارة تقديم عرض الأسعار‬". وهذا يعني أنه سيتم اعتبار جميع الحقول من هذا النوع في ملف التحليل على أنها لا تتضمن أي أحرف مضمنة.   
9. في الشجرة، حدد "وارد: ملف\جذر: تسلسل‏‎\سطر: تسلسل‏‎ 1..* \أنواع: حالة\سجل: تسلسل 1..1 (,)\TransactionDate: DateTime".
    * على سبيل المثال، تم تكوين العنصر جذر\سطر\أنواع\سجل\TransactionDate من النوع DATETIME للحصول على قيمة تاريخ ووقت الحركة من ملف التحليل بالتنسيق "ش/ي/س س س س".   
10. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\‏‎‏‎سطر: تسلسل 1..* \أنواع: حالة\سجل: تسلسل 1..1 (,)\CountryCode: سلسلة 0..1".
    * لاحظ أنه تم تكوين العنصر جذر\سطر\أنواع\سجل\CountryCode من النوع STRING على أنه يحتوي على القيمة "صفر واحد‬" في حقل "التعدد". يعتبر هذا الإعداد قيمة حقل "رمز البلد" في سطر التحليل اختيارية.   
11. في الشجرة، حدد "وارد: ملف\جذر: تسلسل‏‎‏‎‏‎\سطر: تسلسل‏‎‏‎‏‎ 1..* \أنواع: حالة\سجل: تسلسل‏‎‏‎‏‎ 1..1 (,)\ملاحظة: تسلسل‏‎‏‎‏‎ 1..1 (,)".
    * لاحظ أنه تم تكوين العنصر جذر\سطر\أنواع\سجل\عنصر الملاحظة من النوع SEQUENCE على أنه لديه الخيار "الكل" في الحقل "استمارة تقديم عرض الأسعار‬" وعلامات اقتباس مزدوجة في الحقل "علامة اقتباس". وهذا يعني أنه سيتم اعتبار كافة الحقول من هذا النوع من الأسطر في ملف التحليل (كما ورد وصفها بواسطة العناصر المتداخلة: نص من النوع STRING) على أنها مضمنة بين علامات اقتباس مزدوجة.  
12. في الشجرة، حدد "وارد: ملف\جذر: تسلسل\سطر: تسلسل 1..* \أنواع: حالة\غير محلل: تسلسل 1..1".
    * تم تكوين العنصر جذر\سطر\أنواع\غير محلل من النوع SEQUENCE لتحليل سطور الحركة للبنية التي لا تتطابق مع البنية التي تم وصفها أعلاه في عنصر CASE الأصل.   

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a>مراجعة إعداد تعيين التنسيق لنموذج البيانات
1. انقر فوق "تعيين تنسيق لنموذج‬".
    * يصف تعيين النموذج "تعيين إلى نموذج من تنسيق CSV" تدفق البيانات لعملية نقل البيانات من ملف CSV الوارد إلى نموذج البيانات.   
2. انقر فوق المصمم.
3. في الشجرة، قم بتوسيع "تنسيق".
    * لاحظ أن تقديم التنسيق المصمّم يتم هنا كأحد مكونات مصدر البيانات.  
4. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)".
5. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)".
6. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)".
7. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)\أنواع: حالة(أنواع)".
8. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)\أنواع: حالة(أنواع)\سجل: تسلسل 1..1 (,)(سجل)".
9. في الشجرة، وسّع "تنسيق\‏‎وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)\أنواع: حالة(أنواع)\سجل: تسلسل 1..1 (,)(سجل)\بيانات".
10. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)\أنواع: حالة(أنواع)\سجل: جذر 1..1 (,)(سجل)\بيانات\CountryCode\: سلسلة 0..1 (CountryCode)".
11. في الشجرة، وسّع "تنسيق\وارد: ملف(وارد)\جذر: تسلسل(جذر)\سطر: تسلسل 1..* (سطر)\أنواع: حالة(أنواع)\سجل: تسلسل 1..1 (,)(سجل)\بيانات\TransactionDate: DateTime(TransactionDate)".
    * لاحظ أن عناصر التنسيق المطلوبة أو الاختيارية، مثل TransactionDate وCountryCode، تظهر بشكل مختلف في مكون مصدر البيانات "التنسيق" المعرف بشكل مسبق.   
12. في الشجرة، وسّع "الحركات = '$both''.
    * لاحظ أن عناصر التنسيق التي تعرّف بنية الملف المستورد ترتبط بعناصر نموذج البيانات. استنادًا إلى عمليات الربط هذه، سيتم تخزين محتوى ملف CSV المستورد عند وقت التشغيل في نموذج البيانات الموجود. خذ في الاعتبار عملية ربط عنصر CountryRegion. بالنسبة إلى أي عنصر حركة في الملف الوارد لم يتم تحديد قيمة كود بلد له، سيتم ملء كود البلد الافتراضي "الولايات المتحدة" في نموذج البيانات.   
13. بدّل زر "إظهار التفاصيل" إلى وضع التشغيل.
14. انقر فوق علامة التبويب "عمليات التحقق من الصحة".
15. انقر فوق "بحث".
16. في الحقل "بحث"، اكتب "مورّد".
17. انقر فوق "بحث عن التالي".
    * قد يحتوي تعيين التنسيق هذا على منطق معرّف من قبل المستخدم للتحقق من دقة البيانات التي تم استيرادها من وجهة أعمال. على سبيل المثال، استنادًا إلى الإعداد، لأي سطر في ملف الاستيراد الذي لا تتطابق بنيته مع بنية سطر الرأس كما لا تتطابق مع سطر الحركة، ستنشأ رسالة تحذير في سجل المعلومات لإعلام المستخدم حول هذه الحالة، وتشير إلى الرقم التسلسلي للحركة في الملف.   
18. قم بإغلاق الصفحة.

## <a name="run-the-format-mapping"></a>تشغيل تعيين التنسيق
لأغراض الاختبار، قم بتنفيذ تعيين التنسيق باستخدام الملف 1099entriescsv.csv الذي قمت بتنزيله في وقت سابق. سوف تمثل المخرجات الناشئة البيانات التي سيتم استيرادها من ملف CSV المحدد وتعبئتها في نموذج البيانات المخصص عند الاستيراد الحقيقي.   
1. انقر فوق "تشغيل".
    * انقر فوق "استعراض"، وانتقل إلى الملف 1099entriescsv.csv الذي قمت بتنزيله في وقت سابق.  
2. انقر فوق "موافق".
    * لاحظ رسائل التحذير حول الأسطر غير المقبولة. يحتوي السطر 4 على قيمة الدخل المقدمة في التنسيق غير المقبول، في حين لا يحتوي السطر 7 على نص ملاحظة الحركة بين علامات اقتباس مزدوجة.   
    * راجع المخرجات بتنسيق XML التي تمثل البيانات التي تم استيرادها من الملف المحدد ونقلها إلى نموذج البيانات. لاحظ أنه قد تمت معالجة كافة الأسطر 7 لملف CSV الذي تم استيراده. تم تخطي السطر 1 لعناوين الحقول الحاوية، وتم تحليل 4 حركات بشكل صحيح، وتم التعرف على حركتين 2 على أنهما غير صالحتين.   
3. قم بإغلاق الصفحة.
4. قم بإغلاق الصفحة.

