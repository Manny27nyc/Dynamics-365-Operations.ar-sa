---
title: الرسائل الإلكترونية
description: يوفر هذا الموضوع نظرة عامة حول المراسلات الإلكترونية في Microsoft Dynamics 365 for Finance and Operations بالإضافة إلى معلومات الإعداد.
author: ShylaThompson
manager: AnnBe
ms.date: 11/16/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: shylaw
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: shylaw
ms.search.validFrom: 2018-10-28
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: 5326642553c7efcebc6c6af953e2dafe9e62e9ec
ms.sourcegitcommit: f6fc90585632918d9357a384b27028f2aebe9b5a
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/11/2019
ms.locfileid: "832185"
---
# <a name="electronic-messaging"></a>المراسلة الإلكترونية

[!include [banner](../includes/banner.md)]

يوفر هذا الموضوع نظرة عامة حول المراسلات الإلكترونية في Microsoft Dynamics 365 for Finance and Operations بالإضافة إلى معلومات الإعداد.

مؤخرًا، طبقت الحكومات والسلطات التشريعية للعديد من البلدان والمناطق في جميع أنحاء العالم متطلبات إعداد التقارير للشركات المٌسجّلة في تلك البلدان أو المناطق. ويتمثل الغرض من هذه المتطلبات في تمكين البيانات التي يتم الحصول عليها من تلك الشركات في تنسيق إلكتروني، مباشرةً من النظم التي يتم فيها حساب هذه البيانات وتخزينها ومعالجتها.

تدعم وظيفة الرسائل الإلكترونية في Finance and Operations العمليات المختلفة للتشغيل الإلكتروني المتبادل بين Finance and Operations والنظم التي تقدمها الحكومات والسلطات التشريعية لإعداد التقارير وإرسالها واستلام المعلومات الرسمية.

تتكامل وظيفة الرسائل الإلكترونية مع وحدة **إعداد التقارير الإلكترونية** (ER). وبالتالي، يمكنك إعداد تنسيقات ER للرسائل الإلكترونية. للحصول على مزيد من التفاصيل، راجع [إعداد التقارير الإلكترونية (ER)](https://docs.microsoft.com/en-us/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting).

تستند الرسائل الإلكترونية على الكيانات التالية:

- **الرسالة الإلكترونية** -تقرير أو إقرار يتعين الإبلاغ عنه أو إرساله داخليًا. على سبيل المثال، تقرير يتم إرساله إلى مكتب الضرائب.
- **عناصر الرسائل الإلكترونية** -السجلات التي يجب تضمينها في الرسالة التي يتم الإبلاغ عنها.
- **معالجة الرسائل الإلكترونية‏‎** – عبارة عن سلسلة من الإجراءات، مرتبطة أو غير مرتبطة، يجب تشغيلها لجمع البيانات المطلوبة وإنشاء التقارير وتخزين البيانات في مخزن البيانات الثنائية كبيرة الحجم في Microsoft Azure وإرسال تقارير من خارج النظام والحصول على الاستجابات من خارج النظام وتحديث قاعدة البيانات بناءً على المعلومات المستلمة.

يوضح الرسم التوضيحي التالي تدفق البيانات للرسائل الإلكترونية.

![تدفق بيانات الرسائل الإلكترونية](media/electronic-messaging-data-flow.png)

تدعم وظيفة الرسائل الإلكترونية السيناريوهات التالية:

- الإنشاء اليدوي لرسائل وتقارير تستند إلى تنسيقات تصدير تقارير إلكترونية مرتبطة من مختلف الأنواع: Microsoft Excel وXML وJavaScript Object Notation (JSON) وPDF ونص وMicrosoft Word.
- الإنشاء والمعالجة التلقائية للرسائل التي تستند إلى المعلومات المطلوبة والتي تم الحصول عليها من الهيئة عن طريق تنسيق ER استيراد مرتبط.
- تجميع المعلومات ومعالجتها من مصدر بيانات (جدول Finance and Operations) كعناصر للرسالة.
- تخزين معلومات إضافية وتقييم قيم مختلفة عن طريق استدعاء فئات قابلة للتنفيذ مُعرفة بشكل خاص فيما يتعلق بالرسائل أو عناصر الرسائل.
- تجميع المعلومات المُجمّعة في عناصر الرسالة، وتقسيم هذه المعلومات بالرسالة وإنشاء تقارير في تنسيقات تصدير ER مقترنة.
- إرسال التقارير التي تم إنشاؤها إلى خدمة ويب باستخدام معلومات الأمان المُخزنة في Azure Key Vault.
- الحصول على استجابة من خدمة الويب وتفسير الاستجابة وتحديث البيانات في Finance and Operations حسب الحاجة.
- تخزين جميع التقارير التي تم إنشاؤها ومراجعتها.
- تخزين ومراجعة جميع معلومات السجل المرتبطة بالإجراءات التي يتم تشغيلها لرسالة أو عنصر رسالة.
- التحكم في المعالجة من خلال العديد من حالات الرسائل المختلفة وحالات عناصر الرسالة

## <a name="set-up-electronic-messaging"></a>إعداد رسالة إلكترونية

تُساعدك الرسائل الإلكترونية في الاحتفاظ بعمليات تقارير الكترونية مختلفة لأنواع مستندات مختلفة. في بعض السيناريوهات المعقدة، يتم إعداد الرسائل الإلكترونية بحيث تحتوي على تركيبة من عدة حالات رسائل وحالات عناصر رسائل وإجراءات وحقول إضافية وفئات قابلة للتنفيذ. بالنسبة لهذا السيناريو، تتوفر حزم كيانات البيانات هذه للاستيراد. إذا كنت تستخدم حزم كيان البيانات هذه، يجب عليك استيرادهم إلى كيان قانوني باستخدام أداة إدارة البيانات. للحصول على مزيد من المعلومات حول كيفية استخدام أداة إدارة البيانات، راجع [إدارة البيانات](../../dev-itpro/data-entities/data-entities-data-packages.md).

إذا لم تقم باستيراد حزمة كيان البيانات، يمكنك إعداد وظيفة الرسائل الإلكترونية يدويًا. وفي هذه الحالة، يجب عليك إعداد العناصر التالية: 

- [التسلسلات الرقمية](#number-sequences)
- [أنواع أصناف الرسائل والحالات](#message-item-types-and-statuses)
- [حالات الرسائل](#message-statuses)
- [حقول إضافية](#additional-fields)
- [إعدادات الدرجة القابلة للتنفيذ](#executable-class-settings)
- [إجراءات تعبئة السجلات](#populate-records-actions)
- [تطبيقات الويب](#web-applications)
- [إعدادات خدمة الويب](#web-service-settings)
- [إجراءات معالجة الرسالة](#message-processing-actions)
- [معالجة الرسائل الإلكترونية](#electronic-message-processing)

توفر الأقسام التالية معلومات إضافية حول كل عنصر من هذه العناصر.

### <a name="number-sequences"></a>التسلسلات الرقمية

إعداد التسلسلات الرقمية لكل من الرسئل وعناصر الرسائل. يتم استخدام التسلسلات الرقمية لترقيم الرسائل وعناصر الرسائل تلقائيًا، وسوف تستخدم الأرقام التي تم تعيينها كمعرفات فريدة للرسائل وعناصر الرسائل في النظام. يمكنك إعداد التسلسلات الرقمية للرسائل الإلكترونية على صفحة **محددات دفتر الأستاذ العام** (**دفتر الأستاذ العام**\>**إعداد دفتر الأستاذ**\>**محددات دفتر الأستاذ العام**).

### <a name="message-item-types-and-statuses"></a>أنواع أصناف الرسائل والحالات

تُحدد أنواع عناصر الرسائل أنواع السجلات التي سوف تستخدم في الرسائل الإلكترونية. يمكنك إعداد أنواع عناصر الرسالة في صفحة **أنواع أصناف الرسائل** (**الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**أنواع عناصر الرسائل**).

تُحدد حالات أصناف الرسائل الحالات التي سوف يتم تطبيقها على عناصر الرسالة في المعالجة التي تقوم بإعدادها. يمكنك إعداد أنواع عناصر الرسالة في صفحة **حالات أصناف الرسائل** (**الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**حالات أصناف الرسائل**).

تحدد معلمة **السماح بالحذف** لحالة عنصر الرسالة ما إذا كان سيتم السماح للمستخدم بحذف عنصر الرسالة بهذه الحالة عبر نموذج **الرسائل الإلكترونية** أو نموذج **عناصر الرسائل الإلكترونية**. 

### <a name="message-statuses"></a>حالات الرسائل

قم بإعداد حالات الرسائل التي يتعين توافرها في معالجة الرسالة. يمكنك إعداد حالات الرسائل في صفحة **حالات الرسائل** (**الضرائب**\>**إعداد**\>**الرسائل الإلكترونية**\>**حالات الرسائل**).

وصف الحقول:

| اسم الحقل           | الوصف |
|----------------------|-------------|
|حالة الرسالة        | الاسم الفريد لحالة رسالة إلكترونية تصف حالة الرسالة في كل لحظة وقت. يظهر هذا الاسم في نموذج الرسائل الإلكترونية وفي سجل يرتبط برسالة إلكترونية. |
|الوصف           | الوصف المتعلق بحالة رسالة إلكترونية      |
|نوع الاستجابة         | قد تؤدي بعض الإجراءات في عملية معالجة إلى نوع استجابة واحد أو أكثر. على سبيل المثال، قد يؤدي إجراء من نوع **خدمة ويب** إلى نوع الاستجابة **‏‫تم التنفيذ بنجاح‬** أو **خطأ فني** استنادًا إلى نتيجة التنفيذ. وفي هذه الحالة، يجب تحديد حالة الرسالة لنوعي الاستجابة. لمزيد من المعلومات حول أنواع الإجراءات وأنواع الاستجابات ذات الصلة بها، راجع [أنواع إجراءات معالجة الرسائل‬](#message-processing-action-types). |
|حالة صنف الرسالة   |هناك حالات حيث يجب أن تؤثر حالة الرسالة الإلكترونية على حالات عناصر الرسالة ذات الصلة على التوالي. يمكنك إقران حالة عنصر الرسالة هذا في هذا الحقل عن طريق تحديده من البحث. |
|السماح بالحذف          | تحدد معلمة **السماح بالحذف** لحالة عنصر رسالة إلكترونية ما إذا كان سيتم السماح للمستخدم بحذف رسالة إلكترونية بهذه الحالة عبر نموذج **الرسائل الإلكترونية**.            |

### <a name="additional-fields"></a>حقول إضافية

تسمح لك وظيفة الرسائل الإلكتونية بتعبئة السجلات من جدول الحركات. بهذه الطريقة، يمكنك إعداد السجلات لإعداد التقارير والإبلاغ عنها. في بعض الأحيان، لا تتوافر معلومات كافية في جدول الحركات للإبلاغ عن سجل وفقًا لمتطلبات التقرير. يمكنك تعبئة كافة المعلومات التي يتعين الإبلاغ عنها لسجل عن طريقة إعداد حقول إضافية. يمكن إقران الحقول الإضافية بكل من الرسائل وعناصر الرسائل. يمكنك إعداد حقول إضافية في صفحة **الحقول الإضافية** (**الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية**\> **الحقول الإضافية**).

يصف الجدول التالي الحقول العامة في صفحة **الحقول الإضافية**:

| الحقل                | الوصف |
|----------------------|-------------|
| اسم الحقل           | أدخل اسم سمة إضافية لعناصر الرسائل لمتعلقة بالعملية. يظهر هذا الاسم في واجهة المستخدم في أثناء العمل على العملية. يمكن أيضًا استخدامه في تكوينات ER المرتبطة بالعملية. |
| الوصف          | أدخل وصفًا للسمة الإضافية لعناصر الرسائل المتعلقة بالعملية. |
| تحرير المستخدم            | عندما يجب أن يكون المستخدم قادرًا على تغيير قيمة الحقل الإضافي من واجهة المستخدم، عيّن هذا الخيار إلى **نعم**، وإلا إلى **لا**. |
| العداد              | عندما يجب أن يحتوي الحقل الإضافي على رقم تسلسل داخل رسالة إلكترونية، حدد خانة الاختيار هذه. ستتم تعبئة قيم الحقول الإضافية بشكل تلقائي أثناء تشغيل إجراء من النوع "تصدير التقارير الإلكترونية‬".  |
| مخفي               | عندما يجب أن يكون الحقل الإضافي مخفيًا من واجهة المستخدم، حدد خانة الاختيار هذه.  |

قد يتضمن كل حقل إضافي قيمًا مختلفة للمعالجة. يمكنك تعريف هذه القيم على علامة التبويب السريعة "القيم".

| الحقل                | الوصف |
|----------------------|-------------|
| قيمة الحقل          | أدخل قيمة الحقل التي يجب استخدامها بالنسبة إلى الرسالة أو عنصر الرسالة أثناء إعداد التقارير. |
| وصف الحقل    | أدخل وصفًا لقيمة الحقل التي يجب استخدامها بالنسبة إلى رسالة أو عنصر رسالة أثناء إعداد التقارير. |
| نوع الحساب         | قد تكون بعض قيم الحقول الإضافية مقتصرة على أنواع حسابات معينة. حدد إحدى القيم التالية: **الكل**، **العميل**، أو **المورد**. |
| كود الحساب         | إذا قمت بتحديد **العميل** أو **المورد** في حقل **نوع الحساب**، يمكنك تحديد استخدام قيم الحقل لمجموعة معينة أو جدول. |
| رقم الحساب/المجموعة | إذا قمت بتحديد **العميل** أو **المورد** في حقل **نوع الحساب** ، وإذا قمت بإدخال مجموعة أو جدول في حقل **كود الحساب**، يمكنك إدخال مجموعة معينة أو وكيل تخليص في هذا الحقل. |
| السريان            | حدد تاريخ بدء اعتبار القيمة. |
| انتهاء الصلاحية           | حدد تاريخ انتهاء اعتبار القيمة. |

لا تؤثر مجموعات المعايير المعرفة في **رقم الحساب/المجموعة**، **كود الحساب**، **سارٍ في‬‬**، **تاريخ انتهاء صلاحية** بشكل افتراضي على تحديد قيمة لحقل إضافي، ولكن يمكن استخدامها في الفئة القابلة للتنفيذ لتطبيق منطق معين لحساب قيمة حقل إضافي.

### <a name="executable-class-settings"></a>إعدادات الدرجة القابلة للتنفيذ

تمثل الدرجة القابلة للتنفيذ أسلوب X ++ أو الدرجة التي يمكن فيها استدعاء معالجة الرسائل الإلكترونية فيما يتعلق بإجراء إذا كان بعض التقييم مطلوبًا للعملية.

يمكنك تعيين الدرجة القابلة للتنفيذ يدويًا في صفحة **إعدادات الفئة القابلة للتنفيذ** (**الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات الدرجة القابلة للتنفيذ**). إنشاء خط، وتعيين الحقول التالية.

| الحقل                 | الوصف |
|-----------------------|-------------|
| الفئة القابلة للتنفيذ      | أدخل الاسم الذي سيتم استخدامه خلال إعداد إجراء معالجة الرسالة الذي يتم استدعاء هذه الدرجة بالنسبة لها. |
| الوصف           | أدخل وصفًا للدرجة القابلة للتنفيذ. |
| اسم الدرجة القابلة للتنفيذ | حدد درجة X++ القابلة للتنفيذ. |
| مستوى التنفيذ       | تم تعيين هذا الحقل تلقائيًا لأنه يتعين إعادة تعريف القيمة مسبقًا للدرجة القابلة للتنفيذ المُحددة. يحد هذا الحقل المستوى الذي يعمل عليه التقييم ذو الصلة. |
| وصف الفئة     | تم تعيين هذا الحقل تلقائيًا لأنه يتعين إعادة تعريف القيمة مسبقًا للدرجة القابلة للتنفيذ المُحددة. |

قد تتضمن بعض الفئات القابلة للتنفيذ معلمات إلزامية يجب تحديدها قبل تشغيل الفئة القابلة للتنفيذ لأول مرة. لتعريف مثل هذه المعلمات، انقر فوق زر **المعلمات** على جزء الإجراءات، واعمل على إعداد القيم المناظرة والحقول في نافذة مربع الحوار وانقر فوق الزر **موافق**. من الضروري أن تنقر فوق الزر **موافق**. فإذا لم تفعل، لن يتم حفظ المعلمات إلى الأساس ولن يتم استدعاء الفئة القابلة للتنفيذ بشكل صحيح.

### <a name="populate-records-actions"></a>إجراءات تعبئة السجلات

يمكنك استخدام إجراءات تعبئة السجلات لإعداد الإجراءات التي تقوم بإضافة السجلات إلى جدول عناصر الرسائل بحيث يمكن إضافتها إلى رسالة إلكترونية. على سبيل المثال، إذا كانت رسالتك الإلكترونية يجب أن تقوم بالإبلاغ عن فواتير العملاء، يجب عليك تعيين إجراء **تعبئة السجلات** المرتبط بجدول **دفتر يومية فواتير العميل** (في حقل **مصدر البيانات** ). يمكنك إعداد إجراءات تعبئة السجلات في صفحة **إجراء تعبئة السجل** (**الضريبة** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إجراءات تعبئة السجلات**). قم بإنشاء سجل جديد لكل إجراء يجب أن يقوم بإضافة السجلات إلى الجدول، وقم بتعيين الحقول التالية.

| الحقل       | الوصف                                                               |
|-------------|---------------------------------------------------------------------------|
| الاسم        | أدخل اسمًا للإجراء الذي يقوم بتعبئة السجلات في العملية الخاصة بك.       |
| الوصف | أدخل وصفًا للإجراء الذي يقوم بتعبئة السجلات في العملية الخاصة بك. |

على علامة التبويب السريعة **إعداد مصادر البيانات**، قم بإضافة سطر لكل مصدر بيانات مستخدم للعملية، وقم بتعيين الحقول التالية.

| الحقل                  | الوصف |
|------------------------|-------------|
| الاسم                   | أدخل اسمًا لمصدر البيانات. |
| نوع صنف الرسالة      | حدد نوع عنصر الرسالة الذي يتعين استخدامه عند إنشاء سجلات لمصدر البيانات. |
| نوع الحساب           | حدد نوع الحساب الذي يجب إقرانه بسجلات من مصدر البيانات. |
| اسم الجدول الرئيسي      | حدد الجدول في Finance and Operations الذي يجب أن يكون مصدر بيانات. |
| حقل رقم المستند  | حدد الحقل الذي يمكنك الحصول على رقم المستند منه في الجدول المحدد. |
| حقل تاريخ المستند    | حدد الحقل الذي يمكنك الحصول على بيانات المستند منه في الجدول المحدد. |
| حقل حساب المستند | حدد الحقل الذي يمكنك الحصول على حساب المستند منه في الجدول المحدد. |
| استعلام المستخدم             | إذا تم تحديد خانة الاختيار هذه، يمكنك إعداد استعلام عن طريق تحديد **تحرير الاستعلام** فوق الشبكة. وإلام، سوف يتم تعبئة كافة السجلات من مصدر البيانات. |

### <a name="web-applications"></a>تطبيقات الويب

يمكنك استخدام صفحة تطبيقات الويب لإعداد معلمات تطبيق الويب لدعم OAuth 2 القياسي المفتوح مما يسمح للمستخدمين بمنح "حق الوصول المفوض الآمن" إلى التطبيق بالنيابة عنهم، من دون مشاركة بيانات اعتماد الوصول الخاصة بهم. ومن هذه الصفحة يمكنك أيضًا الانتقال عبر عملية التفويض عن طريق الحصول على كود التفويض والرمز المميز للوصول. يمكنك تعيين إعدادات تطبيق الويب في صفحة **تطبيقات الويب** (**الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **تطبيقات الويب**).

يصف الجدول التالي الحقول في صفحة **تطبيقات الويب**.

| الحقل                         | الوصف |
|-------------------------------|-------------|
| اسم التطبيق              | أدخل اسمًا لتطبيق الويب. |
| الوصف                   | أدخل وصفًا لتطبيق الويب. |
| عنوان URL الأساسي                      | أدخل عنوان الإنترنت الأساسي لتطبيق الويب. |
| مسار عنوان URL للتفويض        | حدد المسار لإنشاء عنوان URL للتفويض.  |
| مسار عنوان URL للرمز المميز                | حدد المسار لإنشاء عنوان URL للرمز المميز.  |
| عنوان URL لإعادة التوجيه                  | إدخال عنوان URL لإعادة التوجيه.  |
| معرّف العميل                     | أدخل معرّف العميل لتطبيق ويب.  |
| سر العميل                 | أدخل سر العميل لتطبيق ويب.  |
| الرمز المميز للخادم                  | أدخل الرمز المميز للخادم لتطبيق ويب.  |
| تعيين تنسيق التفويض  | تحديد تنسيق التقارير الإلكترونية الذي يجب استخدامه لإنشاء طلب التفويض.   |
| استيراد تعيين نموذج الرمز المميز    | حدد تخطيط النموذج الافتراضي لاستيراد التقارير الإلكترونية الذي يجب استخدامه لتخزين الرمز المميز للوصول.  |
| النطاق الممنوح      ستنتهي صلاحية الرمز المميز للوصول في غضون  | سيتم تحديث هذا الحقل بشكل تلقائي. تعرض قيمته النطاق الممنوح للطلبات إلى تطبيق الويب.  |
| قبول                        | حدد خاصية قبول طلب الويب. على سبيل المثال، "application/vnd.hmrc.1.0+json".  |
| نوع المحتوى           | حدد نوع المحتوى. على سبيل المثال، "application/json".  |

تتوفر الوظائف التالية من صفحة **تطبيقات الويب** لدعم عملية التفويض:
-   **الحصول على كود التفويض** - لبدء تفويض تطبيق الويب.
-   **الحصول على الرمز المميز للوصول** - لتهيئة الحصول على الرمز المميز للوصول.
-   **تحديث الرمز المميز للوصول** - لتحديث الرمز مميز للوصول.

عند تخزين رمز مميز للوصول إلى تطبيق الويب في قاعدة بيانات النظام بتنسيق مشفر، يمكن استخدامه للطلبات المرسلة إلى خدمة الويب. لأغراض أمنية، يجب أن يكون الوصول إلى الرمز المميز للوصول مقتصرًا فقط على أدوار الأمان التي لديها الإذن الذي يخولها معالجة هذه الطلبات. عندما يحاول أحد المستخدمين خارج مجموعة الأمان معالجة طلب ما، سيقوم استثناء بإعلامه بأنه لا يحق له العمل مع الآخرين عبر تطبيق الويب المحدد.
استخدم الجدول السريع **أدوار الأمان** لصفحة الضريبة > الإعداد > الرسائل الإلكترونية > تطبيقات الويب لإعداد القواعد التي يجب أن يكون لديها حق الوصول إلى الرمز المميز للوصول. إذا لم يتم تعريف أدوار أمان لتطبيق الويب، سيكون باستطاعة مسؤول النظام العمل مع الآخرين فقط عبر تطبيق الويب هذا.

### <a name="web-service-settings"></a>إعدادات خدمة الويب

يمكنك استخدام إعدادات خدمة ويب لإعداد إرسال مباشر للبيانات إلى خدمة ويب. يمكنك إعداد إعدادات خدمة ويب في صفحة **إعدادات خدمة الويب** (**الضرائب** \> **الإعداد** \> **الرسائل الإلكترونية** \> **إعدادات خدمة الويب**) .

يوضح الجدول التالي الحقول في صفحة **إعدادات خدمة الويب**.

| الحقل                   | الوصف |
|-------------------------|-------------|
| خدمة الويب             | أدخل اسمًا لخدمة الويب. |
| الوصف             | أدخل وصفًا لخدمة الويب. |
| عنوان الإنترنت        | أدخل عنوان البريد الإلكتروني لخدمة الويب. إذا تم تحديد تطبيق ويب لخدمة ويب وكان من المفترض أن يكون عنوان الإنترنت هو نفسه العنوان المحدد لتطبيق الويب المحدد، فانقر فوق الزر **نسخ عنوان URL الأساسي** لنسخ **عنوان URL الأساسي** من تطبيق الويب إلى حقل **عنوان الإنترنت** التابع لخدمة الويب.  |
| الشهادة             | حدد شهادة Key Vault التي تم إعدادها مسبقًا. |
| تطبيق الويب         | حدد شهادة Key Vault التي تم إعدادها مسبقًا. |
| نوع الاستجابة - XML | قم بتعيين هذا الخيار إلى **نعم** إذا كان نوع الاستجابة XML. |
| طريقة الطلب          | حدد أسلوب الطلب. تقوم HTTP بتعريف مجموعة من أساليب الطلب التي تشير إلى الإجراء الذي يتعين تنفيذه لمورد مُعين. يمكن أن يكون الأسلوب **GET**، **POST**، أو أسلوب HTTP آخر. |
| رؤوس الطلبات         | حدد رؤوس الطلبات. يمثل عنوان الطلب عنوان HTTP يمكن استخدامه في طلب HTTP، والذي لا يتعلق بمحتوى الرسالة. |
| قبول                  | حدد خاصية قبول طلب الويب. |
| ترميز القبول         | حدد ترميز القبول. يُعلن عنوان HTTP لطلب ترميز القبول عن ترميز المحتوى الذي يمكن للعميل فهمه. عادةً ما يكون ترميز المحتوى هذا خوارزمية ضغط. |
| نوع المحتوى            | حدد نوع المحتوى. يُشير عنوان كيان نوع المحتوى إلى نوع الوسائط للمورد. |
| كود الاستجابة الناجحة   | تحديد كود حالة HTTP الذي يشير إلى نجاح الطلب. |
| طلب تعيين تنسيق الرؤوس  | حدد تنسيق التقارير الإلكترونية لإنشاء رؤوس طلبات الويب. |

### <a name="message-processing-actions"></a>إجراءات معالجة الرسالة

يمكنك استخدام إجراءات معالجة الرسالة لإنشاء إجراءات للعمليات الخاصة بك وإعداد المحددات الخاصة بها. يمكنك إعداد إجراءات معالجة الرسائل في صفحة **إجراءات معالجة الرسائل** (**الضرائب** \> **إعداد** \> **الرسائل الإلكترونية** \> **إجراءات معالجة الرسائل**).

توضح الجداول التالية الحقول في صفحة **إجراءات معالجة الرسائل**.

#### <a name="general-fasttab"></a>علامة التبويب السريعة عام

| الحقل                   | الوصف |
|-------------------------|-------------|
| نوع الإجراء             | حدد نوع الإجراء. لمزيد من المعلومات حول الخيارات المتوفرة، راجع قسم [أنواع إجراء معالجة الرسائل](#message-processing-action-types). |
| تعيين تنسيق          | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتوفر هذا الحقل فقط للإجراءات الخاصة بأنواع **تصدير التقارير الإلكترونية** و**استيراد التقارير الإلكترونية** و**رسالة تصدير التقارير الإلكترونية**. |
| تعيين التنسيق لمسار عنوان URL | حدد تنسيق ER يتعين استدعاؤه للإجراء. يتوفر هذا الحقل فقط للإجراءات الخاصة بأنواع **خدمة الويب** ويتم استخدامه لإنشاء مسار عنوان URL الذي سيضاف إلى عنوان إنترنت الأساسي المحدد لخادم الويب المحدد. |
| نوع صنف الرسالة       | حدد أنواع السجلات التي يجب تقييم الإجراء بالنسبة لها. يتوفر هذا الحقل للإجراءات من الأنواع **مستوى تنفيذ عنصر الرسالة‬** و**تصدير التقارير الإلكترونية** و**استيراد التقارير الإلكترونية‬**، **خدمة الويب** وأيضًا بعض الأنواع الأخرى. إذا تركت هذا الحقل فارغًا، يتم تقييم كافة أنواع عناصر الرسائل المُحددة لمعالجة الرسائل. |
| الفئة القابلة للتنفيذ        | حدد إعدادات الدرجة القابلة للتنفيذ التي تم إنشاؤها مسبقًا. يتوافر هذا الحقل فقط للإجراءات الخاصة بأنواع **مستوى تنفيذ صنف الرسالة** و **مستوى تنفيذ صنف الرسالة**. |
| إجراء تعبئة السجل | حدد إجراء تعبئة السجلات الذي تم إعداده مسبقًا. يتوفر هذا الحقل فقط للإجراءات الخاصة بالنوع **تعبئة السجلات**. |
| خدمة الويب  | حدد خدمة ويب تم إعدادها في وقت سابق. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب**.  |
| اسم الملف  | حدد اسم الملف الذي سيؤدي إلى الإجراء كاستجابة من خادم الويب أو إنشاء تقرير. يتوفر هذا الحقل فقط للإجراءات من النوع **خدمة الويب** و**رسالة تصدير التقارير الإلكترونية‬**.   |
| إظهار مربع حوار  | حدد خانة الاختيار هذه إذا كان يجب عرض مربع حوار للمستخدم قبل إنشاء التقرير. يتوفر هذا الحقل فقط للإجراءات من النوع **رسالة تصدير التقارير الإلكترونية**.   |

##### <a name="message-processing-action-types"></a>أنواع إجراء معالجة الرسائل

تتوفر الخيارات التالية ف حقل **نوع الإجراء**:

- **إنشاء رسالة** -استخدم هذا النوع للسماح للمستخدمين بإنشاء الرسائل يدويًا في صفحة **الرسائل الإلكترونية**. يتعذر إعداد الحالة الأولية لإجراء من هذا النوع.
- **تعبئة السجلات** – يجب إعداد إجراء**تعبئة السجلات** مسبقًا. إقران الإجراء بإجراء من النوع **تعبئة السجلات** لتمكين تضمنيه في المعالجة. من المفترض أن يتم استخدام نوع الإجراء هذا إما للإجراء الأول في معالجة الرسالة (عند عدم إنشاء أية رسالة إلكترونية بشكل مسبق) أو كإجراء يضيف عناصر رسالة إلى رسالة تم إنشاؤها في وقت سابق (بواسطة إجراء من النوع **إنشاء رسالة**). وبالتالي، يمكن إعداد حالة النتيجة لعناصر الرسالة فقط لإجراء من هذا النوع. يمكن إعداد حالة أولية للرسالة فقط.
- **مستوى تنفيذ الرسالة** -استخدم هذا النوع لإعداد درجة قابلة للتنفيذ يتعين تقييمها على مستوى الرسالة.
- **مستوى تنفيذ صنف الرسالة** -استخدم هذا النوع لإعداد درجة قابلة للتنفيذ يتعين تقييمها على مستوى صنف الرسالة.
- **تصدير التقارير الإلكترونية** -استخدم هذا النوع للإجراءات التي يجب أن تقوم بإنشاء تقرير يستند إلى تكوين تصدير ER على مستوى صنف الرسالة.
- **رسالة تصدير التقارير الإلكترونية** -استخدم هذا النوع للإجراءات التي يجب أن تقوم بإنشاء تقرير يستند إلى تكوين تصدير ER على مستوى صنف الرسالة (على سبيل المثال، عندما لا تحتوي رسالة على أي أصناف رسالة).
- **استيراد التقارير الإلكترونية** -استخدم هذا النوع للإجراءات التي يجب أن تقوم بإنشاء تقرير يستند إلى تكوين استيراد ER.
- **معالجة مستخدم مستوى الرسالة** -استخدم هذا النوع للإجراءات التي تفترض بعض الإجراءات اليدوية بواسطة المستخدم. على سبيل المثال، قد يقوم المستخدم بتحديث حالة الرسائل.
- **معالجة المستخدم** -استخدم هذا النوع للإجراءات التي تفترض بعض الإجراءات اليدوية بواسطة المستخدم. على سبيل المثال، قد يقوم المستخدم بتحديث حالة أصناف الرسائل.
- **خدمة الويب** -استخدم هذا النوع للإجراءات التي يجب أن ترسل تقرير تم إنشاؤه إلى خدمة ويب. لم يتم استخدام نوع الإجراء هذا لتقارير اتصالات فواتير المبيعات والشراء الإيطالية. بالنسبة إلى الإجراءات من النوع **خدمة الويب**، يمكنك تحديد **نص التأكيد** على علامة التبويب السريعة **تفاصيل متنوعة** في **إجراءات معالجة الرسالة‬**. سيظهر نص التأكيد هذا للمستخدم قبل توجيه الطلب إلى خدمة الويب المحددة.
- **التحقق من صحة الطلب** -استخدم هذا النوع لطلب التحقق من الصحة من خادم.

#### <a name="initial-statuses-fasttab"></a>علامة التبويب السريعة الحالات الأولية

> [!NOTE]
> لا تتوفر علامة التبويب السريعة **الحالات الأولية** للإجراءات ذات النوع الأولي **إنشاء رسالة**.

| الحقل               | الوصف                                                                                         |
|---------------------|-----------------------------------------------------------------------------------------------------|
| حالة صنف الرسالة | حدد حالة صنف رسالة يجب تقييم إجراء معالجة الرسالة المحدد له. |
| الوصف         | وصف لحالة عنصر الرسالة المُحدد.                                                  |

#### <a name="result-statuses-fasttab"></a>علامة تبويب حالات النتائج

| الحقل               | الوصف |
|---------------------|-------------|
| حالة الرسالة      | حدد حالات الرسائل التي يجب تقييم إجراء معالجة الرسالة المحدد لها. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة. على سبيل المثال، تتوافر للإجراءات الخاصة بأنواع **تصدير التقارير الإلكترونية** و **استيراد التقارير الإلكترونية**. ولكنها غير متوفرة للإجراءات من النوع **معالجة المستخدمين** و **مستوى تنفيذ عنصر الرسالة**. |
| الوصف         | وصف لحالة الرسالة المُحددة. |
| نوع الاستجابة       | نوع الاستجابة لحالة الرسالة المُحددة. |
| حالة صنف الرسالة | حدد حالات النتائج التي يجب توافرها بعد أن يتم تقييم إجراء معالجة الرسالة المُحدد. يتوفر هذا الحقل فقط لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى صنف الرسالة. على سبيل المثال، تتوافر للإجراءات من النوع **معالجة المستخدمين** و **مستوى تنفيذ عنصر الرسالة**. بالنسبة لإجراءات معالجة الرسائل التي يتم تقييمها على مستوى الرسالة، يوضح هذا الحقل حالة عنصر الرسالة المُعدة لحالة الرسالة المُحددة. |

يوضح الجدول التالي حالات النتائج التي يجب إعدادها بالنسبة إلى أنواع الإجراءات:

| نوع إجراء الرسالة الإلكترونية \ نوع الاستجابة  | تم التنفيذ بنجاح  | حدث خطأ أثناء العمل  | خطأ فني  | مُعرف من قِبل المستخدم  | إلغاء الأمر  |
|-------------------------------------------------|--------------|---------|-------|-----|-----------------|
| إنشاء رسالة                                  | س            |         |       |     |                 |
| تصدير التقارير الإلكترونية                     | س            |         |       |     |                 |
| استيراد التقارير الإلكترونية                     |              |         |       |     |                 |
| خدمة الويب                                     | س            |         | س     |     |                 |
| معالجة المستخدمين                                 |              |         |       |     |                 |
| مستوى تنفيذ الرسالة                         |              |         |       |     |                 |
| تعبئة السجلات                                |              |         |       |     |                 |
| مستوى تنفيذ صنف الرسالة                    |              |         |       |     |                 |
| التحقق من صحة الطلب                            | س            |  س      | س     |     |                 |
| رسالة تصدير التقارير الإلكترونية             | س            |         |       |     |                 |
| معالجة مستخدم مستوى الرسالة                   |              |         |       |     |                 |

### <a name="electronic-message-processing"></a>معالجة الرسائل الإلكترونية

يمثل معالجة الرسائل الإلكترونية مفهومًا أساسيًا لوظيفة الرسائل الإلكترونية. يقوم ذلك بتجميع الإجراءات التي يتعين تقييمها للرسالة الإلكترونية. يمكن ربط الإجرايات من خلال حالة أولية وحالة نتيجة. بدلًا من ذلك، يمكن بدء الإجراءات من النوع **معالجة المستخدم** بشكل مستقل. في صفحة **معالجة الرسائل الإلكترونية** (**الضريبة‬** \> **الإعداد** \> **الرسائل الإلكترونية** \> **معالجة الرسائل الإلكترونية**)، يمكنك أيضًا تحديد حقول إضافية يتعين دعمها للمعالجة إما على مستوى الرسالة أو على مستوى عناصر الرسالة.

تسمح لك علامة التبويب السريعة**إجراء** بإضافة الإجراءات المُعرفة مسبقًا إلى المعالجة. يمكنك تحديد ما إذا كان يجب تشغيل إجراء بشكل منفصل، أو بدئه من خلال المعالجة. لتحديد ما إذا كان يمكن تهيئته الإجراء بواسطة مستخدم فقط، حدد خانة الاختيار **التشغيل بشكل منفصل‬** للإجراء قيد المعالجة. أزل علامة المعلمة **التشغيل بشكل منفصل** إذا أردت أن يبدأ الإجراء من خلال معالجة الرسائل أو عناصر الرسائل في الحالة المحددة كحالة أولية لهذا الإجراء. يجب تشغيل الإجراء من النوع **إجراء المستخدم** فقط بشكل منفصل. 

قد يكون من الضروري في بعض الأحيان تجميع عدة إجراءات في تسلسل حتى لو تم تحديد أحد هذه الإجراءات لكي يتم تشغيله بشكل منفصل. على سبيل المثال، عندما يجب تهيئة عملية إنشاء التقارير بواسطة مستخدم ولكن يجب إرسال التقرير فور إنشائه إلى خدمة ويب ويجب أن تنعكس الاستجابة من خدمة الويب في النظام. لهذا الغرض، يمكنك استخدام **تسلسل غير منفصل**. للقيام بذلك، انقر فوق الزر **تسلسل غير منفصل** على جزء الإجراءات في علامة التبويب السريعة **إجراء** في صفحة **معالجة الرسائل الإلكترونية**، وأنشئ تسلسلاً وحدده في العمود **تسلسل غير منفصل** لتلك الإجراءات التي يجب تشغيلها دومًا معًا. يمكن تعيين الخيار **التشغيل بشكل منفصل** للإجراء الأول في هذه الحالة، ولكن دون تعيينه للإجراءات الأخرى.

تسمح لك علامة التبويب السريعة **الحقول الإضافية لأصناف الرسائل** بإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بأصناف الرسائل. يجب عليك إضافة حقول إضافية لكل نوع من أصناف الرسائل المرتبطة بالحقول.

تسمح لك علامة التبويب السريعة **الحقول الإضافية للرسالة** بإضافة الحقول الإضافية المُعرفة مسبقًا المتعلقة بالرسائل.

تسمح لك علامة التبويب السريعة **أدوار الأمان** بإعداد أدوار الأمان المُعرفة مسبقًا في النظام لمُعالجة معينة. سوف يرى المستخدمون الذين لديهم دور معين المُعالجة المُحددة لهذا الدور فقط.

تسمح لك علامة التبويب السريعة **الدُفعة** بإعداد المعالجة للعمل في نظام الدُفعة.

## <a name="work-with-electronic-messages-functionality"></a>العمل باستخدام وظيفة الرسائل الإلكترونية

إذا كنت تعمل على مستوى الرسالة، فإن صفحة **الرسائل الإلكترونية** (**الضرائب** \> **الاستعلامات والتقارير**\> **الرسائل الإلكترونية** \> **الرسائل الإلكترونية**) أكثر إفادة بالنسبة لك. إذا كنت تعمل على مستوى مجموعة بيانات (صنف الرسالة)، فإن صفحة **أصناف الرسائل الإلكترونية** (**الضرائب** \> **الاستعلامات والتقارير**\> **الرسائل الإلكترونية** \> **الرسائل الإلكترونية**) أكثر إفادة بالنسبة لك.

### <a name="electronic-messages"></a>الرسائل الإلكترونية

تقدم صفحة **الرسائل الإلكترونية** المعالجة المتوفرة لك، استنادًا إلى دورك. يتم إقران أدوار الأمان بالمعالجة في إعداد هذه المعالجة. بالنسبة لكل معالجة متوفرة لك، تظهر الصفحة الرسائل الإلكترونية والمعلومات المتعلقة بها.

توضح علامة التبويب السريعة **الرسائل** الرسائل للمعالجة المحددة. استنادًا إلى حالة الرسالة المُحددة والمعالجة المُعرفة مسبقًا، يمكنك تشغيل بعض الإجراءات من خلال تحديد الأزرار الواقعة أعلى الشبكة:

- **جديد** -هذا الزر مقترن بالإجراءات من النوع **إنشاء رسالة**.
- **حذف** -يتوفر هذا الزر إذا تم تحديد خانة الاختيار **السماح بالحذف** للحالة الحالية للرسالة المُحددة.
- **جمع البيانات** - يقترن هذا الزر بالإجراء من النوع **تعبئة السجلات**.
- **إنشاء تقرير** -يقترن هذا الزر بالإجراءات من النوع **رسالة تصدير الرسائل الإلكترونية** .
- **إرسال تقرير** -هذا الزر مقترن بالإجراءات من النوع **خدمة الويب**.
- **استيراد الاستجابة** - يقترن هذا الزر بالإجراءات من النوع **استيراد الرسائل الإلكترونية** .
- **تحديث الحالة** -هذا الزر غير مقترن بالإجراءات من النوع **معالجة مستخدم مستوى الرسالة**.
- **أصناف الرسائل** – افتح صفحة **أصناف الرسائل الإلكترونية**.

توضح علامة التبويب السريعة**سجل الإجراءات** معلومات حول كافة الإجراءات التي يتم تشغيلها للرسالة المحددة. إذا أدى أحد الإجراءات إلى صدور رسالة خطأ، فستكون المعلومات حول الخطأ مرفقة ببند سجل الإجراء ذي الصلة. حدد البند وانقر فوق علامة **القصاصة** في الزاوية العلوية اليسرة للصفحة لمراجعة المعلومات حول الخطأ.

توضح علامة التبويب السريعة **الحقول الإضافية للرسالة** كافة الحقول الإضافية المُعرفة للرسائل في إعداد المعالجة. ويُظهر أيضًا قيم هذه الحقول الإضافية.

توضح علامة التبويب السريعة **أصناف الرسائل** كافة أصناف الرسائل المتعلقة بالرسالة المُحددة. يمكن استخدام الوظيفة التالية لكل عنصر من عناصر الرسالة استنادًا إلى حالة عنصر الرسالة هذا:

- **حذف** - يتوفر هذا الزر إذا تم تحديد خانة الاختيار **السماح بالحذف** للحالة الحالية لعنصر الرسالة المحدد.
- **تحديث الحالة** - يقترن هذا بالإجراءات من النوع **معالجة المستخدم**.
- **المستند الأصلي** - يسمح هذا الزر للمستخدم بفتح صفحة مع المستند الأصلي للرسالة المحددة.

يمكنك مراجعة كافة المرفقات للرسالة المُحددة. تمثل هذه المرفقات تقارير تم إنشاؤها واستلامها مسبقًا. حدد الرسالة اللازم مراجعة المرفقات لها، ثم قم بتحديد زر **المرفق** في جزء الإجراءات.

![زر المرفقات](media/attachment-icon.png)

توضح صفحة **المرفقات** كافة المرفقات المتعلقة بالرسالة. لعرض أحد الملفات، قم بتحديده في القائمة على اليسار، ثم حدد **فتح** في جزء الإجراءات.

![زر فتح](media/open-button.png)

لمراجعة مرفق مرتبط بإجراء مُعيّن تم تشغيله لرسالة مسبقًا، حدد الرسالة في صفحة **الرسائل الإلكترونية**، ثم في علامة التبويب السريعة **سجل الإجراء**، حدد الإجراء. قم بتحديد زر **المرفق**في جزء الإجراءات.

يمكنك أيضًا إما تشغيل المعالجة بالكامل أو إجراء مُعيّن عن طريق تحديد **تشغيل المعالجة** في جزء الإجراءات.

### <a name="electronic-message-items"></a>أصناف الرسائل الإلكترونية

تعرض صفحة **أصناف الرسائل الإلكترونية** كافة أصناف الرسائل وسجل للإجراءات التي تم تشغيلها لكل صنف رسالة. ويُظهر أيضًا الحقول الإضافية المُعرفة لأصناف الرسائل، وقيم هذه الحقول الإضافية.

يصف الجدول التالي الحقول في علامة التبويب **أصناف الرسائل**.

<table>
<thead>
<tr>
<th>الحقل</th>
<th>الوصف</th>
</tr>
</thead>
<tbody>
<tr>
<td>المعالجة</td>
<td>اسم المعالجة المستخدمة لإنشاء صنف الرسالة.</td>
</tr>
<tr>
<td>صنف الرسالة</td>
<td>مُعرف صنف الرسالة. يتم تعيين هذا المعرف تلقائيًا، استنادًا إلى التسلسل الرقمي لـ<strong>صنف الرسالة </strong> المُحدد في صفحة <strong>محددات دفتر الأستاذ العام</strong>.</td>
</tr>
<tr>
<td>تاريخ صنف الرسالة</td>
<td>تاريخ إنشاء صنف الرسالة.</td>
</tr>
<tr>
<td>نوع صنف الرسالة</td>
<td>نوع صنف الرسالة. يمكن إعداد أنواع متعددة من أصناف الرسائل لنفس المعالجة (على سبيل المثال، <strong>الفواتير الواردة</strong> و <strong>الفواتير الصادرة</strong>). يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>حالة صنف الرسالة</td>
<td>الحالة الفعلية لصنف الرسالة. تختلف الحالة المتوفرة اعتمادًا على نوع صنف الرسالة. فيما يلي بعض الأمثلة:
<ul>
<li><strong>تمت التعبئة</strong> -تمت إضافة سجل إلى جدول أصناف الرسالة.</li>
<li><strong>تم التقييم</strong> -تم حساب سمات إضافية لصنف الرسالة.</li>
<li><strong>تم الإبلاغ</strong> -تمت إضافة صنف الرسالة بنجاح إلى التقرير.</li>
<li><strong>تم الاستبعاد</strong> -يمكن أن تكون هذه الحالة مفيدة إذا كان يجب عليك استبعاد بعض أصناف الرسائل من التقرير قبل تصديره.</li>
</ul>
</td>
</tr>
<tr>
<td>تاريخ الإرسال</td>
<td>بالنسبة للمعالجة التي تقوم بإرسال تاريخ تم إنشاؤه خارج النظام تلقائيًا، يكون التاريخ هو تاريخ إرسال صنف الرسالة.</td>
</tr>
<tr>
<td>رقم المستند</td>
<td>يتم ملء هذا الحقل تلقائيًا، استنادًا إلى إعداد إجراء تعبئة السجلات. يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>رقم الحساب</td>
<td>رقم حساب العميل أو المورد (أو قيمة حقل آخر، استنادًا إلى الحقل المُحدد في إجراء <strong>تعبئة السجلات</strong>). يمكم ملء هذا الحقل تلقائيًا فقط عند إضافة الفاتورة إلى جدول أصناف الرسائل.</td>
</tr>
<tr>
<td>رسالة</td>
<td>الرقم الخاص بالرسالة. يتم تعيين هذا الرقم تلقائيًا، استنادًا إلى التسلسل الرقمي لـ<strong>الرسالة </strong> المُحدد في صفحة <strong>محددات دفتر الأستاذ العام</strong>.</td>
</tr>
<tr>
<td>حالة الرسالة</td>
<td>الحالة الفعلية للرسالة الإلكترونية.</td>
</tr>
<tr>
<td>الإجراء التالي</td>
<td>الإجراءات التالية التي يمكن بدئها للحالة الحالية لصنف الرسالة.</td>
</tr>
</tbody>
</table>

تعرض علامة تبويب **الحقول الإضافية** الحقول الإضافية لصنف الرسالة المُحددة والقيم الخاص بها.

#### <a name="run-processing"></a>تشغيل المعالجة

حدد **تشغيل المعالجة** في جزء الإجراءات لتشغيل المعالجة لأصناف الرسالة. لتشغيل إجراء محدد، في مربع حوار **تشغيل المعالجة**، حدد خيار **تحديد إجراء** إلى **نعم**، ثم قم بتحديد إجراء. لتشغيل المعالجة الكاملة، اترك خيار **حدد إجراء** مُعينًا إلى **لا**.

#### <a name="generate-report"></a>إنشاء تقرير

حدد **إنشاء تقرير** في جزء الإجراءات لإنشاء تقرير. يقترن هذا الزر بالإجراءات من النوع **تصدير التقارير الإلكترونية**.

#### <a name="update-status"></a>تحديث الحالة

حدد **تحديث الحالة** في جزء الإجراءات لتحديث حالة صنف رسالة واحد أو أكثر. في مربع حوار **تحديث الحالة**، استخدم علامة التبويب السريعة **السجلات المطلوب تضمينها** لتحديد أصناف الرسائل للتحديث. تأكد من تحديد معايير الاختيار بشكل صحيح، لأنه سوف يتم تحديث حالات أصناف الرسائل وفقًا لهذه المعايير، والحالة الأولية للإجراء المُحدد وقيمة **الحالة الجديدة** التي قمت بتعيينها. بعد الانتهاء من تحديث الحالة، فسوف يكون من الصعب تحديد أي العناصر قمت بتحديثها للتو. لذلك، فسوف يكون من الصعب استرجاع تحديثات الحالة.

#### <a name="electronic-messages"></a>الرسائل الإلكترونية

حدد **الرسالة الإلكترونية** في جزء الإجراءات لمراجعة رسالة إلكترونية مرتبطة بصنف الرسالة المُحددة.

يمكنك أيضًا مراجعة جميع الملفات المتوافقة مع صنف الرسالة. حدد حقل **الرسالة** لصنف الرسالة، أو حدد **الرسالة الإلكترونية** في جزء الإجراءات. في صفحة **الرسالة الإلكترونية**، حدد الرسالة لعرض تقرير لها، ثم حدد زر **المرفق** في جزء الإجراءات.

![زر المرفقات](media/attachment-icon.png)

توضح صفحة **المرفقات** كافة المرفقات المتعلقة بالرسالة. لعرض أحد الملفات، قم بتحديده في القائمة على اليسار، ثم حدد **فتح** في جزء الإجراءات.

![زر فتح](media/open-button.png)

#### <a name="original-document"></a>المستند الأصلي

حدد **المستند الأصلي** في جزء الإجراءات لفتح المستند الأصلي لصنف الرسالة المُحددة.

## <a name="example"></a>مثال

بعد أن قمت بإنشاء تنسيق ER الخاص بك، قم بتعيينه إلى مصادر البيانات، ثم قم بإكماله، يمكنك تشغيله باستخدام مساحة عمل **إعداد التقارير الإلكترونية**. يتم إنشاء تقرير يمكنك حفظه محليًا.

للتحكم في الجوانب التالية من عملية إعداد التقارير، يجب عليك إعداد معالجة الرسائل الإلكترونية.

- قم بتسجيل معلومات حول الشخص الذي قام بإنشاء التقرير.
- قم بتسجيل وقت إنشاء التقرير.
- قم بحفظ التقارير التي تم إنشاؤها للفترات السابقة.

يوفر هذا القسم مثالًا يوضح كيف يمكنك إعداد وظيفة الرسائل الإلكترونية لإنشاء عملية إعداد تقارير.

### <a name="set-up-and-run-processing-to-call-a-simple-er-exporting-format-to-generate-an-excel-report"></a>قم بإعداد وتشغيل المعالجة لاستدعاء تنسيق تصدير ER بسيط لإنشاء تقرير Excel.

يوفر هذا القسم مثالًا يوضح كيف يمكنك إعداد الرسائل الإلكترونية لإنشاء تقرير يستند إلى تنسيق تصدير ER إلى Excel. لمتابعة هذا المثال، يجب أن يكون تنسيق تصدير Excel ER قد تم إنشاؤه بالفعل وتعيينه إلى مصادر البيانات وإكماله. يجب إعداد التسلسل الرقمي للرسائل الإلكترونية مسبقًا.

عند إنشائك للمعالجة، فمن المفيد إذا قمت أولًا بتحديد إجراءات المعالجة والحالات التي سوف يتم إعدادها. يُظهر الرسم التوضيحي التالي كيف تبدو المٌعالجة لهذا المثال.

![نظام المعالجة](media/processing-scheme.png)

#### <a name="create-message-statuses"></a>إنشاء حالات الرسائل

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>حالات الرسائل**.
2. إنشاء حالات الرسائل التالية:

    - القيمة الجديدة
    - تم الإعداد
    - منشأ

    ![حالات الرسائل](media/message-statuses.png)

3. في سطر حالة **جديد**، حدد خانة الاختيار **السماح بالحذف** للسماح للمستخدمين بحذف الرسائل التي لها هذه الحالة.

#### <a name="create-additional-fields"></a>إنشاء حقول إضافية

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>الحقول الإضافية**.
2. قم بإضافة حقل إضافي والقيم الخاصة به. فيما يلي مثال على ذلك.

    ![حقول إضافية](media/additional-fields.png)

3. قم بتعيين خيار **تحرير المستخدم** إلى **نعم** للسماح للمستخدمين بتحرير الحقل.

#### <a name="create-message-processing-actions"></a>إنشاء إجراءات معالجة الرسائل

على سبيل المثال، سوف تقوم بإنشاء الإجراءات التالية:

- **إنشاء رسالة**
- **تحديث إلى المُعد**
- **إنشاء تقرير**
- **تحديث إلى الحالة الأولية** (اختياري)

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>إجراءات معالجة الرسائل**.
2. إنشاء إجراء يسمى **إنشاء رسالة**. في علامة التبويب السريعة **عام**، في حقل **نوع الإجراء**، حدد **إنشاء رسالة**.
3. إنشاء إجراء يسمى **التحديث إلى المُعد**، وقم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام**، في حقل **نوع الإجراء**، حدد **‏‫معالجة مستخدم مستوى الرسالة‬**.
    - في علامة التبويب السريعة **الحالات الأولية**، في حقل **حالات الرسائل**، حدد **جديد**.
    - في علامة التبويب السريعة **حالات النتائج**، في حقل **حالات الرسائل**، حدد **تم الإعداد**. في حقل **نوع الاستجابة** ، أدخل **تم التنفيذ بنجاح**.

4. إنشاء إجراء يسمى **إنشاء تقرير**، وقم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام**، في حقل **نوع الإجراء**، حدد **‏‫تصدير التقارير الإلكترونية‬**. في حقل **تعيين تنسيق** ، حدد تنسيق تصدير ER. الخيارات المتاحة هي **Excel**، **XML**،**JSON**، **Text** و**أخرى**.
    - في علامة التبويب السريعة **الحالات الأولية**، في حقل **حالات الرسائل**، حدد **تم الإعداد**.
    - في علامة التبويب السريعة **حالات النتائج**، في حقل **حالات الرسائل**، حدد **تم الإنشاء**. في حقل **نوع الاستجابة** ، أدخل **تم التنفيذ بنجاح**.

    ![إنشاء إجراء تقرير](media/generate-report-action.png)

5. اختياري: للسماح للمستخدمين بإعادة إنشاء تقرير عدة مرات، يمكنك إنشاء إجراء **تحديث إلى الحالة الأولية**، ثم قم بتعيين الحقول التالية:

    - في علامة التبويب السريعة **عام**، في حقل **نوع الإجراء**، حدد **‏‫معالجة مستخدم مستوى الرسالة‬**.
    - في علامة التبويب السريعة **الحالات الأولية**، في حقل **حالات الرسائل**، حدد **تم الإنشاء**.
    - في علامة التبويب السريعة **حالات النتائج**، في حقل **حالات الرسائل** ، حدد **تم الإعداد** أو (و) **جديد**. في حقل **نوع الاستجابة** ، أدخل **تم التنفيذ بنجاح**.

#### <a name="electronic-message-processing"></a>معالجة الرسائل الإلكترونية

في هذا المثال، يتعين إعداد كافة الإجراءات بحيث يتم تشغيلها بشكل منفصل. والافتراض هو أنه سوف يتم بدء كل إجراء بواسطة المستخدم.

1. انتقل إلى **الضرائب \>الإعداد \> الرسائل الإلكترونية \>معالجة الرسائل الإلكترونية**.
2. أضف سجلًا للمعالجة الخاصة بك، ثم قم بإضافة جميع الإجراءات المُعرفة مسبقًا وحقل إضافي.
3. اختياري: في علامة التبويب السريعة **أدوار الأمان**، قم بتحديد أدوار الأمان للمعالجة الخاصة بك لتقييد الوصول إلى تقرير معين.
4. انتقل إلى **الضرائب \>الاستعلامات والتقارير \>الرسائل الإلكترونية \>الرسائل الإلكترونية**.
5. حدد **جديد** لإنشاء رسالة. في هذه المرحلة، يمكنك إضافة تواريخ ووصف. يمكنك أيضًا تحديث قيمة الحقل الإضافي كما تريد.

    ![إنشاء رسالة إلكترونية](media/create-electronic-message.png)

يتم ملء الشبكة في علامة التبويب السريعة **سجل الإجراءات** تلقائيًا باستخدام سجل بجميع الإجراءات التي تم تنفيذها على الرسالة.

يمكنك الآن إما حذف أو تحديث حالة الرسالة. لتحديث حالة الرسالة، حدد **تحديث الحالة**، ثم في حقل **حالة جديدة**، حدد **تم الإعداد**. ثم حدد **موافق**.

![تحديث حالة الرسالة](media/update-status.png)

يتم تحديث حالة الرسالة إلى **تم الإعداد**، ويمكنك الآن إنشاء التقرير عن طريق تحديد **إنشاء تقرير**. يتم إنشاء التقرير، ويتم تحديث حالة الرسالة وسجل الإجراء. لعرض التقرير الذي تم إنشاؤه، حدد زر **المرفق** في جزء الإجراءات.
