---
title: خيارات التنسيق المتقدمة في التقارير المالية
description: يصف هذا الموضوع وظائف التنسيق المتقدمة، بما في ذلك عوامل التصفية والقيود والصفوف غير المطبوعة والعبارات الشرطية في العمليات الحسابية.
author: panolte
manager: AnnBe
ms.date: 04/26/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: FinancialReports
audience: Application User
ms.reviewer: kfend
ms.custom: 106571
ms.assetid: 895b5127-01d6-4495-b127-343387b743aa
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: f0417ac1007fc94431aeb11d2464ee699e3f3441
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 01/30/2021
ms.locfileid: "5093152"
---
# <a name="advanced-formatting-options-in-financial-reporting"></a>خيارات التنسيق المتقدمة في التقارير المالية

[!include [banner](../includes/banner.md)]

عند إنشاء تقرير في التقارير المالية، تتوفر وظائف تنسيق إضافية، بما في ذلك عوامل التصفية للأبعاد، والقيود للأعمدة ووحدات إعداد التقارير‬ والصفوف غير القابلة للطباعة وعبارات IF/THEN/ELSE في العمليات الحسابية.

يشرح الجدول التالي وظائف التنسيق المتقدمة التي تتوفر عند تصميم التقارير.

| الوظيفة                   | الوصف |
|----------------------------|-------------|
| تصفية البُعد           | للوصول إلى مجموعات معينة من البيانات، يمكنك استخدام الأبعاد في تعريف صف وتعريف عمود. ولا تستخدم العديد من التقارير سوى الشريحة العادية في تنسيق الصف. ومع ذلك، يمكن تعديل الصفوف بحيث تتضمن قيم الأبعاد. تُستخدم عوامل تصفية الأبعاد في في تعريف العمود للوصول إلى قيم الأبعاد المحددة. |
| تقييد وحدة التقارير | يمكنك إعداد صف تقرير بحيث يعرض معلومات مرتبطة بوحدة تقارير محددة. |
| صفوف عدم الطباعة (NP)     | صفوف عدم الطباعة مفيدة في العديد من التقارير. وإذا كانت هناك حاجة إلى العديد من عمليات الحساب للحصول على قيمة، يمكن إخفاء عمليات الحساب هذه في التقرير المطبوع. كما أن صفوف عدم طباعة مفيدة لاستكشاف الأخطاء وإصلاحها في تصميمات التقرير ولموضع الخلية المتقدم. |
| تقييد العمود         | يفيد تقييد العمود في تعريف الصف لإخفاء القيم ذات الصلة فقط في بعض صفوف التقرير. وعندما يتم إجراء عمليات حساب النسبة المئوية في صف، يمنع تقييد العمود طباعة أعمدة الإجمالي أو الأعمدة الأخرى عند عدم استخدام تلك الأرقام. |
| فاصل أعمدة               | يمكنك إضافة فواصل الأعمدة في تعريف صف لإظهار معلومات التقرير جنبًا إلى جنب. ويمكنك إضافة فواصل الأعمدة المتعددة في تعريف صف واحد، ويتم تكرار رؤوس الأعمدة في أعلى كل عمود بعد فاصل الأعمدة. ويتم عرض التعليقات لتقرير بين فواصل الأعمدة. |
| عبارة IF/THEN/ELSE     | يمكنك تعديل عمليات الحساب في تعريف صف أو تعريف عمود. |
| استخدام علامات الاقتباس المفردة (' ') وعلامة العطف (&) لقيم الأبعاد | يمكنك استخدام قيم الأبعاد، بما في ذلك حرف العطف لتصميم التقرير. |

## <a name="advanced-cell-placement"></a>موضع الخلية المتقدم

يشتمل وضع الخلية المتقدم، أو *فرض*، على وضع قيم معينة في الخلايا المحددة. على سبيل المثال، يتم غالبصا استخدام الفرض لنقل الرصيد الصحيح في قائمة التدفق النقدي. يمكنك استخدام الفرض للأغراض التالية:

- نقل القيم من Microsoft Excel إلى خلايا معينة.
- القيم الخاصة بالكود البرمجي في تقرير.
- تعديل العلامات بنسخ قيمة من خلية سابقة وضرب هذه القيمة في -1.

> [!NOTE]
> في الكثير من الحالات، يجب عليك تكوين تعريف التقرير لإجراء حسابات الأعمدة قبل حسابات الصفوف. ولإكمال هذا التكوين، اتبع الخطوات التالية.
>
> 1. في "مصمم التقارير"، افتح تعريف التقرير.
> 2. في علامة التبويب **إعدادات**، ضمن **أولوية عملية الحساب**، حدد **إجراء عملية حساب العمود أولاً ثم الصف**.

## <a name="designing-the-report"></a>تصميم التقرير

عندما تقوم بتصميم تقرير، يجب عليك إنشاء كافة صفوف التفاصيل أولاً للتأكد من أن القيم يتم سحبها كما هو متوقع. وبعد ذلك، قم بإضافة تجاوزات تنسيق **NP** (عدم طباعة) لمنع التفاصيل التي تتضمن القيم النهائية.

> [!IMPORTANT]
> عند استخدام كود التنسيق **CAL** في تعريف الصف، لا يمكنك التصفح لأسفل وصولاً إلى تفاصيل الحركة.

وفي الفرض، تستخدم المعادلات التنسيق التالي: &lt;عمود الوجهة&gt;=&lt;العمود الأصلي&gt;.&lt;كود الصف&gt; افصل أية مواضع إضافية لصف بفاصلة ومسافة. وفيما يلي مثال: D=C.190,E=C.100

## <a name="examples-of-advanced-formatting-options"></a>أمثلة على خيارات التنسيق المتقدم

تبين الأمثلة التالية كيف يتم تنسيق تعريف صف وتعريف عمود لفرض تقرير التدفق النقدي الأساسي (المثال 1) وتقرير إحصائي (المثال 2).

### <a name="example-1-basic-forcing"></a>المثال 1: الفرض الأساسي

يعرض الجدول التالي مثال لتعريف صف يستخدم الفرض الأساسي.

| رمز الصف |           ‏‏الوصف            | كود التنسيق | المعادلات/الصفوف/الوحدات ذات الصلة |        مُعدِّل الصف        | ربط بالأبعاد المالية |
|----------|----------------------------------|-------------|-----------------------------|----------------------------|------------------------------|
| 100      | النقد في بداية الفترة (NP) |             |                             | معدِّل الحساب = \[/BB\] | ‎+Segment2 = \[1100\]         |
| 130      | النقدية في بداية الفترة      | CAL         | C=C.100,F=D.100             |                            |                              |
| 160      |                                  |             |                             |                            |                              |
| 190      |                                  |             |                             |                            |                              |

> [!NOTE]
> تمت إزالة الأعمدة الفارغة من الجدول السابق لأغراض العرض التقديمي: لا تظهر أعمدة تجاوز التنسيق والتوازن العادي والتحكم في الطباعة وتقييد العمود‬.

يعرض الجدول التالي مثال لتعريف عمود يستخدم الفرض الأساسي في الصف.

|           تنسيق             | أ   | B    | C        | D      | هـ      | ج    |
|------------------------------|-----|------|----------|--------|--------|------|
| الرأس 1                     |     |      |          |        |        |      |
| الرأس 2                     | أ   | B    | C        | D      | هـ      | ج    |
| الرأس 3                     |     |      |          |        |        |      |
| نوع العمود                  | ROW | وصف | FD       | FD     | FD     | CALC |
| كود الدفتر/فئة السمة |     |      | ACTUAL   | ACTUAL | ACTUAL |      |
| السنة المالية                  |     |      | BASE     | BASE   | BASE   |      |
| الفترة                       |     |      | BASE     | BASE   | BASE   |      |
| الفترات المشمولة              |     |      | PERIODIC | YTD/BB | السنة حتى تاريخه    |      |
| المعادلة                      |     |      |          |        |        | E-D  |
| عرض العمود                 | 5   | 30   | 14       | 14     | 14     | 14   |

### <a name="example-2-statistical-reports"></a>المثال 2: التقارير الإحصائية

يعرض الجدول التالي مثال لتعريف صف يستخدم الفرض لتقرير إحصائي.

| كود الصف | الوصف               | كود التنسيق | المعادلات/الصفوف/الوحدات ذات الصلة     | تجاوز التنسيق      | الرصيد العادي | ربط بالأبعاد المالية               |
|----------|---------------------------|-------------|---------------------------------|----------------------|----------------|--------------------------------------------|
| 50       | معلومات إحصائية   | REM         |                                 |                      |                |                                            |
| 100      | عدد الأشخاص - الولايات المتحدة            | CAL         | 4                               | \#\#\#0.;($\#\#\#0.) |                |                                            |
| 115      | عدد الأشخاص - دولي | CAL         | 11                              | \#\#\#0.;($\#\#\#0.) |                |                                            |
| 130      |                           |             |                                 |                      |                |                                            |
| 190      | مبيعات الولايات المتحدة                  |             |                                 |                      | ش              | ‎+Segment2 = \[41\*\]،‏ Segment3 = \[00\]    |
| 220      | المبيعات الدولية       |             |                                 |                      | ش              | ‎+Segment2 = \[41\*\]،‏ Segment3 = \[01:99\] |
| 250      |                           |             |                                 |                      |                |                                            |
| 280      |                           |             |                                 |                      |                |                                            |
| 310      | مبيعات الولايات المتحدة                  | CAL         | D=C.190,E=C.100,F=(C.100/C.190) |                      |                |                                            |
| 340      | المبيعات الدولية       | CAL         | D=C.220,E=C115,F=(C.220/C.115)  |                      |                |                                            |

> [!NOTE]
> تمت إزالة الأعمدة الفارغة من الجدول السابق لأغراض العرض التقديمي: لا تظهر أعمدة التحكم في الطباعة وتقييد العمود ومُعدِّل الصف.

يعرض الجدول التالي مثال لتعريف عمود يستخدم الفرض لتقرير إحصائي.

|    تنسيق                    | أ   | B    | C      | D            | هـ     | ج            |
|------------------------------|-----|------|--------|--------------|-------|--------------|
| الرأس 1                     | أ   | B    | C      | D            | هـ     | ج            |
| الرأس 2                     | -   | -    | YTD    | المبيعات السنوية | الموظفون | دولار لكل شخص |
| الرأس 3                     |     |      |        |              |       |              |
| نوع العمود                  | ROW | DESC | FD     | CALC         | CALC  | CALC         |
| كود الدفتر/فئة السمة |     |      | ACTUAL |              |       |              |
| السنة المالية                  |     |      | BASE   |              |       |              |
| الفترة                       |     |      | BASE   |              |       |              |
| الفترات المشمولة              |     |      | السنة حتى تاريخه    |              |       |              |
| المعادلة                      |     |      |        |              |       | E-D          |
| عرض العمود                 | 5   | 30   | 14     | 14           | 14    | 14           |

## <a name="restricting-a-row-to-a-specific-reporting-unit"></a>تقييد صف لوحدة إعداد تقارير محددة

عند تقييد صف تقرير على وحدة تقارير محددة، يعرض هذا الصف البيانات المرتبطة فقط لوحدة التقارير المسماة ويتجاهل بيانات وحدات التقارير الأخرى المشمولة في شجرة التقارير. على سبيل المثال، يمكنك إنشاء صف يوفر تفاصيل لإجمالي نفقات التشغيل لقسم معين. وقد يحتوي التقرير على بيانات متكررة إذا كان التقرير يحتوي على شجرة تقارير وتعريف صف يحتوي على أكثر من مجرد عملية حساب عادية. على سبيل المثال، لديك شجرة تقارير تسرد الأقسام الستة في المؤسسة الخاصة بك، ولديك أيضًا تعريف صف يسرد مجموعة محددة من حساب وقسم في الصف. وعند إنشاء التقرير، تتم طباعة المجموعة المحددة من الحساب والقسم على كل مستوى في شجرة التقارير، على الرغم من أن تلك الإدارة قد لا تتطابق مع ما هو موجود في الشجرة. ويحدث هذا السلوك لأن الصف يتجاوز ما تتم تصفيته عادةً بواسطة تعريف التقرير. وهناك طريقة واحدة يمكنك بها تجنب تكرار البيانات تتمثل فب تقييد صف على وحدة تقارير محددة.

> [!NOTE]
> إذا تضمن أحد الصفوف أبعادًا، وقمت بتقييد هذا الصف بوحدة تقارير فرعية، يتم تضمين مبلغ الصف الخاص بتلك الوحدة الفرعية ووحداتها الأصلية، ولكن لا يحدث أي تكرار.

### <a name="restrict-a-row-to-a-reporting-unit"></a>تقييد صف على وحدة تقارير

1. في "مصمم التقارير"، انقر فوق **تعريفات الصفوف**، ثم قم بتحديد تعريف صف لتعديله.
2. انقر نقرًا مزدوجًا فوق خلية **المعادلات/الصفوف/الوحدات ذات الصلة** الملائمة.
3. في مربع حوار **تحديد وحدة التقارير**، وفي حقل **شجرة التقارير**، حدد الشجرة التي تم تعيينها في تعريف التقرير.
4. حدد وحدة تقارير، ثم انقر فوق **موافق**. يظهر التقييد في خلية تعريف الصف.
5. انقر نقراً مزدوجاً فوق الخلية الموجودة في عمود **ارتباط إلى الأبعاد المالية** في الصف المقيد، ثم قم بإدخال ارتباط إلى نظام البيانات المالية.

## <a name="selecting-print-control-in-a-row-definition"></a>تحديد عنصر التحكم في الطباعة في تعريف صف

يمكنك تحديد رموز التحكم في الطباعة لكل عمود باستخدام خلية **عنصر التحكم في الطباعة**.

### <a name="add-print-control-codes-to-a-report-row"></a>إضافة أكواد التحكم في الطباعة إلى صف تقرير

1. في "مصمم التقارير"، افتح تعريف الصف لتعديله.
2. انقر نقراً مزدوجاً فوق خلية **التحكم في الطباعة**.
3. في مربع الحوار **عنصر التحكم في الطباعة**، حدد كود التحكم في الطباعة، أو اضغط مع الاستمرار على مفتاح Ctrl لتحديد أكواد متعددة. كما يمكنك إدخال أكواد التحكم في الطباعة مباشرةً في خلية **عنصر التحكم في الطباعة**. استخدم فواصل لفضل عدة أكواد للتحكم في الطباعة.
4. حدد أية خيارات طباعة مشروطة.
5. وانقر فوق **موافق**.

### <a name="regular-print-control-codes"></a>أكواد التحكم في الطباعة العادية

يصف الجدول التالي أكواد التحكم في الطباعة العادية لتعريف صف.

| كود التحكم في الطباعة | تفسير كود التحكم في الطباعة         | الوصف |
|--------------------|--------------------------------------------------|-------------|
| NP                 | صف عدم الطباعة                                 | منع طباعة المبالغ الموجودة في صف في التقرير، واستبعاد المبالغ من عمليات الحساب. لتضمين عمود عدم الطباعة في عملية حسابية، أرجع إلى العمود مباشرةً في معادلة عملية الحساب. على سبيل المثال، يتم تضمين صف عدم الطباعة 240 في العملية الحسابية التالية: **230+240+250**. ومع ذلك، لا يتم تضمين صف عدم الطباعة 240 في العملية الحسابية التالية: **230:250**. |
| CS                 | رمز العملة؛ استخدام تنسيق العملة في هذا الصف | تضمين رمز العملة في كافة المبالغ لغير النسبة المئوية. لا تتلقى قيم النسبة المئوية رمز العملة أبدًا. |
| XD                 | منع صف في تقرير تفاصيل الحساب            | منع عرض الحسابات في تقارير تفاصيل الحساب وتقارير تفاصيل الحركة. ويفيد عنصر التحكم في الطباعة هذا عندما يتضمن صف عدة حسابات يجب ألا يتم سردها في تقرير تفاصيل الحساب أو تقرير تفاصيل الحركة. |
| X0                 | منع صف إذا كانت قيم الخلايا كلها أصفار                        | استبعاد صف من التقرير إذا كانت كافة الخلايا في هذا الصف إما فارغة أو تحتوي على أصفار. ولا يفيد عنصر التحكم في الطباعة هذا إلا عند عدم تحديد خيار منع الرصيد الصفري في تعريف التقرير. |
| B0                 | ترك الأعمدة التي بقيم أصفار فارغة                         | ترك الأعمدة فارغة في صف يحتوي على مبالغ صفرية. |
| XR                 | منع التسجيل                                  | منع تسجيل. إذا كان التقرير يستخدم شجرة تقارير، لا يتم تسجيل المبالغ الموجودة في هذا الصف في العقدات الأصلية اللاحقة. |
| SR                 | منع التقريب                                | منع تقريب المبالغ الموجودة في هذا الصف. |
| XT                 | منع صف في تقرير تفاصيل الحركة        | منع عرض الحركات في تقارير تفاصيل الحركة. ويفيد عنصر التحكم في الطباعة هذا عندما يتضمن صف عدة حسابات يجب ألا يتم سردها في تقرير تفاصيل الحركة. |

### <a name="conditional-print-control-codes"></a>أكواد التحكم في الطباعة المشروطة

يصف الجدول التالي أكواد التحكم في الطباعة المشروطة لتعريف صف.

| كود التحكم في الطباعة | الوصف                                  |
|--------------------|----------------------------------------------|
| (لا شيء)             | إلغاء تحديد الطباعة المشروطة.       |
| DR                 | طباعة الأرصدة المدينة فقط لهذا الصف.  |
| CR                 | طباعة الأرصدة الدائنة فقط لهذا الصف. |

## <a name="column-restriction-cell-in-a-row-definition"></a>خلية تقييد العمود في تعريف صف

تحتوي خلية **تقييد العمود** في تعريف صف على أغراض متعددة. واستناداً إلى نوع الصف، يمكنك استخدام خلية **تقييد العمود** لتحديد واحدة من الوظائف التالية:

- يمكنك للخلية تقييد طباعة مبالغ الصف على عمود معين. وهذه الوظيفة مفيدة إذا كنت تقوم بإنشاء ميزانية عمومية جدولية.
- ويمكن للخلية تحديد عمود المبالغ للفرز.

## <a name="using-a-calculation-formula-in-a-row-definition"></a>استخدام معادلة عملية حسابية في تعريف صف

يمكن أن تتضمن معادلة حساب في تعريف صف عوامل **+**، و **-**، و **\**_، و*/** _ وكذلك عبارات **IF/THEN/ELSE**. بالإضافة إلى ذلك، يمكن أن يتضمن عملية حساب الخلايا الفردية والمبالغ المطلقة (الأرقام الفعلية المضمنة في المعادلة). ويمكن أن يصل طول المعادلة إلى 1,024 أحرف. ولا يمكن تطبيق العمليات الحسابية على الصفوف التي تحتوي على خلايا من نوع **ارتباط إلى الأبعاد المالية** (FD). وعلى الرغم من ذلك، يمكنك تضمين عمليات حسابية في صفوف متتالية ومنع طباعة تلك الصفوف، ثم تحديد مجموع صفوف العملية الحسابية.

### <a name="operators-in-a-calculation-formula"></a>العوامل في معادلة العملية الحسابية

تستخدم معادلة العملية الحسابية عوامل أكثر تعقيداً من معادلة إجمالي الصف. ومع ذلك، يمكنك استخدام عاملي **\**_ و_*/** معًا مع عوامل إضافية لضرب (\*) وقسمة (/) المبالغ. ولاستخدام نطاق أو مجموع في معادلة عملية حساب، يجب عليك استخدام علامة (@) أمام أي كود صف، إلا إذا كنت تستخدم عمود في تعريف صف. على سبيل المثال، لإضافة المبلغ في الصف 100 إلى المبلغ الموجود في الصف 330، يمكنك استخدام معادلة إجمالي الصف **100+330** أو معادلة عملية الحساب **@100+@330**.

> [!NOTE]
> يجب عليك استخدام علامة (@) قبل كل كود صف تستخدمه في معادلة حساب. وإلا، فإنه تتم قراءة الرقم كمبلغ مطلق. على سبيل المثال، تضيف المعادلة **@100+330** مبلغ 330 دولارًا إلى المبلغ في الصف 100. عند الإشارة إلى عمود في معادلة حساب، لا تكون العلامة (@) مطلوبة.

### <a name="create-a-calculation-formula"></a>إنشاء معادلة عملية حساب

1. في "مصمم التقارير"، انقر فوق **تعريفات الصفوف**، ثم قم بفتح تعريف صف لتعديله.
2. انقر نقراً مزدوجاً فوق خلية **كود التنسيق**، ثم حدد **CAL**.
3. في خلية **المعادلات/الصفوف/الوحدات ذات الصلة**، أدخل معادلة عملية الحساب.

### <a name="example-of-a-calculation-formula-for-specific-rows"></a>مثال على معادلة عملية الحساب للصفوف المحددة

في هذا المثال، تعني معادلة الحساب **@100+@330** إضافة المبلغ الموجود في الصف 100 إلى المبلغ الموجود في الصف 330. وتقوم معادلة إجمالي الصف **340+370** بجمع المبلغ الموجود في صف 340 بالمبلغ الموجود في الصف 370. (المبلغ الموجود في الصف 370 يساوي المبلغ من معادلة عملية الحساب.)‬

| كود الصف | الوصف                 | كود التنسيق | المعادلات/الصفوف/الوحدة ذات الصلة | عنصر تحكم الطباعة | معدِّل الصف | الارتباط بالأبعاد المالية |
|----------|-----------------------------|-------------|----------------------------|---------------|--------------|------------------------------|
| 340      | النقدية في بداية الفترة |             |                            | NP            | BB           | +حساب=\[1100:1110\]       |
| 370      | النقدية في بداية العام   | CAL         | 330@+100@                  | NP            |              |                              |
| 400      | النقدية في بداية الفترة | TOT         | 340+370                    |               |              |                              |

عندما يكون الصف في تعريف صف يشتمل على كود تنسيق من **CAL**، وتقوم بإدخال عملية حسابية في خلية **المعادلات/الصفوف/الوحدات ذات الصلة**، يجب عليك أيضًا إدخال حرف العمود والصف المقترن في التقرير. ‏‫على سبيل المثال، أدخل **A.120** لتمثيل العمود A، الصف 120. وبدلاً من ذلك، يمكنك استخدام علامة (@) للإشارة إلى كافة الأعمدة.‬ ‏‫على سبيل المثال، أدخل **@120** لتمثيل كافة الأعمدة في الصف 120. وإن أي عملية حسابية لا تحتوي على حرف عمود أو علامة (@) من المفترض أن تكون رقمًا حقيقيًا.‬

> [!NOTE]
> إذا استخدمت رمز صف تسمية للإشارة إلى صف، يجب عليك استخدام نقطة (.) كفاصل بين حرف العمود والتسمية (على سبيل المثال، **A.GROSS\_MARGIN/A.SALES**). إذا كنت تستخدم علامة (@)، فلست بحاجة إلى فاصل (على سبيل المثال، **\@GROSS\_MARGIN/@SALES**).

### <a name="example-of-a-calculation-formula-for-a-specific-column"></a>مثال على معادلة عملية الحساب للعمود المحدد

في هذا المثال، تعني معادلة الحساب **E=C.340** أن تنفيذ الحساب في الخلية الموجودة في العمود C، صف 340، يتم فقط على العمود E.

> [!NOTE]
> عند الإشارة إلى عمود في معادلة حساب، لا تكون العلامة (@) مطلوبة.

| كود الصف | الوصف                 | كود التنسيق | المعادلات/الصفوف/الوحدة ذات الصلة | عنصر تحكم الطباعة | معدِّل الصف | الارتباط بالأبعاد المالية |
|----------|-----------------------------|-------------|----------------------------|---------------|--------------|------------------------------|
| 340      | النقد في بداية الفترة |             |                            | NP            | BB           | +حساب=\[1100:1110\]       |
| 370      | النقد في بداية السنة   | CAL         | E=C.340                    | NP            |              |                              |
| 400      | النقد في بداية الفترة | TOT         | 340+370                    |               |              |                              |

### <a name="modifying-a-number-in-selected-columns"></a>تعديل رقم في الأعمدة المحددة

عند تعديل رقم أو عملية حساب في عمود واحد من صف محدد ولكن لا تريد أن تؤثر على الأعمدة الأخرى في التقرير، يمكنك تحديد **CAL** (عملية الحساب) في عمود **كود التنسيق** في تعريف الصف.

- لإجراء عمليات حسابية في جميع أعمدة (**FD**) التقرير، لا تقم بإدخال تعيين عمود.
- لتقييد معادلة لأعمدة محددة، أدخل حرف العمود، وعلامة المساواة (**=**)، ثم المعادلة.
- يمكنك تحديد عدة أعمدة. وعند استخدام علامة (@) في وضع عمود محدد، ترتبط علامة (@) بالصف.
- يمكنك إدخال معادلات أعمدة متعددة في صف واحد. وقم بالفصل بين المعادلات باستخدام الفواصل.

### <a name="calculation-examples"></a>أمثلة العمليات الحسابية

| حساب            | الإجراء الذي تم إنشاؤه                                                                                                   |
|------------------------|--------------------------------------------------------------------------------------------------------------------------|
| @130\*.75              | بالنسبة لكل عمود، يتم ضرب القيمة الموجودة في الصف 130 في 0.75. ويتم بعد ذلك وضع النتيجة في الصف الحالي لكل عمود. |
| B=@130\*.75            | يتم تنفيذ نفس العملية الحسابية فقط في العمود B.                                                                      |
| A,B,C=(@100/@130)\*.75 | A=‏(A.100/A.130)\*.75 B=‏(B.100/B.130)\*.75 C=‏(C.100/C.130)\*.75                                                           |

### <a name="ifthenelse-statements-in-a-row-definition"></a>عبارات IF/THEN/ELSE في تعريف صف

يمكن إضافة عبارات **IF/THEN/ELSE** إلى أي عملية حساب صالحة البيانات واستخدامها مع تنسيق **CAL**. وتقوم بإدخال معادلات عمليات حساب **IF/THEN/ELSE** في الخلية في عمود **المعادلات/الصفوف/الوحدات ذات الصلة**. ‏‫تستخدم معادلات الحساب **IF/THEN/ELSE** التنسيق التالي: IF &lt;true/false statement&gt; THEN &lt;formula&gt; ELSE &lt;formula&gt; ويكون جزء **ELSE &lt;formula&gt;** من العبارة اختياريًا.

#### <a name="if-statements"></a>عبارات IF

العبارة التي تلي لفظ **إذا** يمكن أن تكون أي عبارة يمكن تقييمها كصحيحة أو زائفة. وقد تتضمن العبارة التي تلي لفظ **إذا** تقييمًا بسيطًا، أو قد تكون عبارة معقدة يمكن أن تحتوي على تعبيرات متعددة. فيما يلي بعض الأمثلة:

- **IF A.200&gt;0** (تقييم بسيط)
- **IF A.200&gt;0 AND A.200&lt;10000** (عبارة معقدة)
- **IF A.200&gt;10000 OR ‏((A.340‏/B.1200)\*2 &lt;1200)** (عبارة معقدة تحتوي على عدة تعبيرات)

يمثل مصطلح **الفترات** في عبارة **IF** عدد الفترات الزمنية للتقرير. ويُستخدم هذا المصطلح عادةً لحساب متوسط السنة حتى تاريخه. على سبيل المثال، عند تشغيل تقرير لفترة 7 سنوات حتى تاريخه، تعني عبارة **B.150/فترات** أن القيمة الموجودة في الصف 150 في العمود B تتم قسمتها على 7.

#### <a name="then-and-else-formulas"></a>معادلات THEN وELSE

قد تكون معادلات **THEN** و **ELSE** أي عملية حساب صالحة من تعيينات القيم البسيطة للغاية للمعادلات المعقدة. على سبيل المثال، تعني عبارة **IF A.200&gt;0 THEN A=B.200** "إذا كانت القيمة الموجودة في الخلية الموجودة في العمود A في الصف 200 أكبر من 0 (صفر)، فضع القيمة من الخلية الموجودة في العمود B في الصف 200 في الخلية الموجودة في العمود A في الصف الحالي". تضع عبارة **IF/THEN** السابقة قيمة في عمود واحد في الصف الحالي. ومع ذلك، يمكنك أيضًا استخدام علامة (@) في تقييمات الصواب/الخطأ أو المعادلة لتمثيل كافة الأعمدة. فيما يلي بعض الأمثلة الأخرى الموضحة في الأقسام التالية:

- **IF A.200 &gt;0 THEN B.200**: إذا كانت القيمة الموجودة في الخلية A.200 موجبة، فإنه يتم وضع القيمة من الخلية B.200 في كل عمود في الصف الحالي.
- **IF A.200 &gt;0 THEN @200**: إذا كانت القيمة الموجودة في الخلية A.200 موجبة، فستوضع القيمة من كل عمود في الصف 200 في العمود المقابل في الصف الحالي.
- **IF @200 &gt;0 THEN @200**: إذا كانت القيمة في الصف 200 في العمود الحالي موجبة، فستوضع القيمة من الصف 200 في نفس العمود في الصف الحالي.

### <a name="restricting-a-calculation-to-a-reporting-unit-in-a-row-definition"></a>تقييد عملية حساب على وحدة تقارير في تعريف صف

لتقييد عملية حساب على وحدة تقارير واحدة في شجرة تقارير، بحيث لا يظهر المبلغ الناتج لوحدة ذات مستوى أعلى، فإنه يمكنك استخدام كود **\@Unit** الموجود في خلية **المعادلات/الصفوف/الوحدات ذات الصلة** في تعريف الصف. ويتم سرد كود **\@Unit** في العمود B من شجرة التقارير، **اسم الوحدة**. وعند استخدام كود **\@Unit**، لا تظهر القيم، ولكن يتم تقييم عملية الحساب على كل مستوى لشجرة التقارير.

> [!NOTE]
> لاستخدام هذه الوظيفة، يجب أن تكون شجرة تقارير مرتبطة بتعريف الصف.

ويمكن أن يشير صف عملية الحساب إلى صف عملية حساب أو صف بيانات مالية. ويتم تسجيل عملية الحساب في خلية **المعادلات/الصفوف/الوحدات ذات الصلة** في تعريف الصف وتقييد نوع البيانات المالية. ويجب على عملية الحساب استخدام عملية حساب مشروطة تبدأ ببنية **IF @Unit**. وفيما يلي مثال: IF @Unit(SALES) THEN @100 ELSE 0 تتضمن عملية الحساب هذه المبلغ من الصف 100 في كل عمود من التقرير، ولكن فقط لوحدة المبيعات. وإذا تمت تسمية عدة وحدات باسم المبيعات، يظهر المبلغ في كل وحدة من تلك الوحدات. بالإضافة إلى ذلك، يمكن أن يكون الصف 100 صف بيانات مالية ويمكن تحديده بأنها مخصص لعدم الطباعة. وفي هذه الحالة، يتم منع ظهور المبلغ في جميع الوحدات في الشجرة. ويمكنك أيضًا تحديد المبلغ لعمود واحد من التقرير، مثل العمود H، باستخدام قيد عمود لطباعة القيمة في عمود التقرير هذا فقط. ويمكنك تضمين مجموعات **OR** في عبارة **IF**. فيما يلي مثال: IF @Unit(SALES) OR @Unit(SALESWEST) THEN 5 ELSE @100 يمكنك تحديد وحدة في تقييد نوع عملية الحساب بإحدى الطرق التالية:

- أدخل اسم وحدة ليشمل الوحدات المطابقة. على سبيل المثال، تعمل عبارة **IF @Unit(SALES)** على تضمين عملية الحساب لأي وحدة تُسمى "المبيعات"، حتى إذا كان هناك عدة وحدات مبيعات في شجرة التقارير.
- أدخل الشركة واسم الوحدة لتقييد عملية الحساب على وحدات محددة في شركة معينة. على سبيل المثال، أدخل **IF @Unit(ACME:SALES**) لتقييد عملية الحساب على وحدات المبيعات في شركة ACME.
- أدخل كود التسلسل الهرمي الكامل من شجرة التقارير لتقييد عملية الحساب على وحدة محددة. على سبيل المثال، أدخل **IF @Unit(SUMMARY^ACME^WEST COAST^SALES)**.

> [!NOTE]
> للعثور على كود التدرج الهرمي كاملاً، انقر بزر الماوس الأيمن في تعريف شجرة التقارير، ثم حدد **نسخ معرف وحدة التقارير (H-code)**.

#### <a name="restrict-a-calculation-to-a-reporting-unit"></a>تقييد الحساب لوحدة تقارير

1. في مصمم التقارير، انقر فوق **تعريفات الصفوف**، ثم افتح تعريف الصف للتعديل.
2. انقر نقراً مزدوجاً فوق خلية **كود التنسيق**، ثم حدد **CAL**.
3. انقر فوق خلية **المعادلات/الصفوف/الوحدات ذات الصلة**، ثم قم بإدخال عملية حساب مشروطة تبدأ ببنية **IF @Unit**.

### <a name="ifthenelse-statements-in-a-column-definition"></a>عبارات IF/THEN/ELSE في تعريف عمود

تعمل عبارات **IF/THEN/ELSE** على تمكين أي عملية حساب من الاعتماد على النتائج من أي عمود آخر. ويمكنك الإشارة إلى أعمدة أخرى، ولكن لا يمكنك الإشارة إلى خلية تقرير في عبارة **IF**. ويجب تطبيق أي عملية حساب على العمود بالكامل. على سبيل المثال، تعني العبارة **IF B&gt;100 THEN B ELSE C\*1.25** "إذا كان المبلغ الموجود في العمود B أكبر من 100، فضع القيمة من العمود B في عمود **CALC**. إذا لم يكن المبلغ الموجود في العمود B أكبر من 100، فاضرب القيمة الموجودة في العمود C في 1.25 ووضع النتيجة في عمود **CALC**". واتبع دائماً عبارة **IF** بعبارة منطقية يمكن تقييمها كصحيحة أو خاطئة. ويمكن أن تحتوي المعادلات التي تستخدمها لكلٍّ من عبارة **THEN** وعبارة **ELSE** على مراجع إلى أي عدد من الأعمدة، ويمكن أن تكون هذه المعادلات معقدة كيفما تريد أن تجعلها.

> [!NOTE]
> لا يمكنك وضع نتائج عملية حسابية في أي عمود آخر. يجب أن تكون النتائج موجودة في العمود الذي يحتوي على المعادلة.

#### <a name="use-single-quotes-and-an-ampersand-for-dimension-values-in-a-row-column-or-tree"></a>استخدام علامات الاقتباس المفردة وعلامة العطف لقيم الأبعاد في صف أو عمود أو شجرة

يمكنك تصميم التقارير باستخدام قيم الأبعاد التي تحتوي على علامة العطف (&).

ضمن أي حقل **ربط بالبعد المالي**، يمكنك إدخال قيمة مثل **"الأرباح والخسائر"**. يشير تضمين علامات الاقتباس المفردة (' ') على جانبي قيمة البعد إلى انك تستخدم القيمة الحرفية، مثل تضمين علامة العطف (&).


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]