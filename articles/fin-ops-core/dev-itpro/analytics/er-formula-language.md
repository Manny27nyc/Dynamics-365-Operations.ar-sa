---
title: لغة تركيبة التقارير الإلكترونية
description: يوفر هذا الموضوع معلومات حول كيفية استخدام ‏‫لغة التركيبة في التقارير الإلكترونية‬.
author: NickSelin
ms.date: 05/04/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 470b4fa1c8b15ae4a9e9ebef81af9e4ca107422d
ms.sourcegitcommit: 15aacd0e109b05c7281407b5bba4e6cd99116c28
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/10/2021
ms.locfileid: "6223976"
---
# <a name="electronic-reporting-formula-language"></a>لغة تركيبة التقارير الإلكترونية

[!include [banner](../includes/banner.md)]

توفر التقارير الإلكترونية (ER) تجربة تحويل بيانات قوية. تشبه اللغة المستخدمة للتعبير عن عمليات معالجة البيانات المطلوبة في [مصمم تركيبة ER](general-electronic-reporting-formula-designer.md) لغة التركيبة في Microsoft Excel.

## <a name="basic-syntax"></a>البنية الأساسية

يمكن أن تحتوي تعبيرات التقارير الإلكترونية أي من العناصر التالية أو كلها:

- [ثوابت](#Constants)
- [المعاملات](#Operators)
- [المراجع](#References)
- [المسارات](#Paths)
- [الوظائف](#Functions)

## <a name="constants"></a><a name="Constants"></a>ثوابت

عند تصميم التعبيرات، يمكنك استخدام الثوابت النصية والرقمية (القيم التي لم تُحتسب). على سبيل المثال، يستخدم التعبير `VALUE ("100") + 20` الثابت الرقمي **20** وثابت السلسلة **"100"**، وتُعيد القيمة الرقمية **120**.

يدعم مصمم معادلة التقارير الإلكترونية تسلسلات الهروب. لذلك، يمكنك تحديد أي سلسلة تعبير تجب معالجتها بشكل مختلف. علي سبيل المثال، يُعيد التعبير `"Leo Tolstoy ""War and Peace"" Volume 1"` السلسلة النصية **ليو تولستوي "الحرب والسلم" المجلد 1**.

## <a name="operators"></a><a name="Operators"></a>عوامل التشغيل

يعرض الجدول التالي عوامل التشغيل الحسابية التي يمكن استخدامها لإجراء عمليات حسابية أساسية مثل الجمع والطرح والقسمة والضرب.

| المعامل | المعنى               | مثال     |
|----------|-----------------------|-------------|
| +        | الجمع              | `1+2`       |
| -        | الطرح، السالب | `5-2`, `-1` |
| \*       | الضرب        | `7\*8`      |
| /        | القسم              | `9/3`       |

يعرض الجدول التالي عوامل تشغيل المقارنة المدعومة. يمكنك استخدام عوامل التشغيل هذه لمقارنة قيمتين.

| المعامل | المعنى                  | مثال      |
|----------|--------------------------|--------------|
| =        | متساو                    | `X=Y`        |
| &gt;     | أكبر من             | `X>Y`        |
| &lt;     | أقل من                  | `X<Y`        |
| &gt;=    | أكبر من أو يساوي | `X>=Y`       |
| &lt;=    | أقل من أو يساوي    | `X<=Y`       |
| &lt;&gt; | لا يساوي             | `X<>Y`       |

بالإضافة إلى ذلك، يمكنك استخدام علامة عطف (&) كعامل ربط نص. وبهذه الطريقة، يمكنك الانضمام أو ربط سلسلة نصية واحدة أو أكثر في جزء واحد من النص.

| المعامل | المعنى     | مثال                                               |
|----------|-------------|-------------------------------------------------------|
| &        | تسلسل | `"Nothing to print:" & " " & "no records found"`      |

### <a name="operator-precedence"></a>أسبقية عامل التشغيل

يُعد الترتيب الذي يتم بموجبه تقييم أجزاء تعبير مركب عنصرًا هامًا. على سبيل المثال، تختلف نتيجة التعبير `1 + 4 / 2` ، تبعًا للعملية التي تم تنفيذها أولاً، سواءً كانت عملية جمع أم قسمة. يمكنك استخدام الأقواس لتعريف كيفية تقييم تعبير بوضوح. على سبيل المثال، للإشارة إلى وجوب إنجازه عملية الجمع أولاً، يمكنك تغيير التعبير السابق إلى ‎`(1 + 4) / 2`. إذا لم تشر إلى ترتيب العمليات في تعبير بشكل واضح، فإن الترتيب يستند إلى الأسبقية الافتراضية المعيّنة إلى عوامل التشغيل المعتمدة. يُظهر الجدول التالي الأولوية المعينة لكل عامل تشغيل. يتم تقييم عوامل التشغيل التي لها أسبقية أعلى (على سبيل المثال، 7) قبل عوامل التشغيل التي لها أولوية أقل (على سبيل المثال، 1).

| الأسبقية | المعاملات      | بناء الجملة                                                                  |
|------------|----------------|-------------------------------------------------------------------------|
| 7          | تجميع       | ( … )                                                                   |
| 6          | وصول العضو  | … . …                                                                   |
| 5          | استدعاء دالة  | … ( … )                                                                 |
| 4          | تضاعفي | … \* …<br>… / …                                                         |
| 3          | شيء مضاف       | … + …<br>… - …                                                          |
| 2          | مقارنة     | … &lt; …<br>… &lt;= …<br>… =&gt; …<br>… &gt; …<br>… = …<br>… &lt;&gt; … |
| 1          | الفصل     | … , …                                                                   |

إذا كان تعبير يتضمن عوامل تشغيل متعددة متتالية لها نفس الأسبقية، فإنه يتم تقييم هذه العمليات من اليسار إلى اليمين. على سبيل المثال، يُرجع التعبير `1 + 6 / 2 \* 3 > 5` القيمة **صحيح**. نوصي باستخدام الأقواس للإشارة بوضوح إلى الترتيب المطلوب للعمليات في التعبيرات، ولتسهيل قراءة التعبيرات والمحافظة عليها.

## <a name="references"></a><a name="References"></a>المراجع

يمكن استخدام جميع مصادر البيانات في مكون التقارير الإلكترونية الحالي التي تتوفر أثناء تصميم تعبير كمراجع مسماة. يمكن ان يكون المكون ER الحالي إما تعيين نموذج أو تنسيق. على سبيل المثال، يحتوي تعيين نموذج‬ التقارير الإلكترونية الحالي على مصدر البيانات **ReportingDate**، الذي يُرجع قيمة نوع البيانات [*DateTime*](er-formula-supported-data-types-primitive.md#datetime). لتنسيق هذه القيمة في المستند المنشأ بشكل صحيح، يمكنك الرجوع إلى مصدر البيانات في التعبير على شكل `DATETIMEFORMAT (ReportingDate, "dd-MM-yyyy")`

يجب أن تكون جميع الأحرف في اسم مصدر البيانات المرجعي والتي لا تمثل حرفًا أبجديًا مسبوقة بعلامة اقتباس مفردة ('). إذا كان اسم مصدر البيانات المرجعي يحتوي على رمز واحد على الأقل لا يمثل حرفًا من الحروف الأبجدية، فمن ثم يجب أن يضمن الاسم في علامة اقتباس مفردة. على سبيل المثال، قد تكون هذه الرموز غير الأبجدية علامات ترقيم أو رموز مكتوبة أخرى. فيما يلي بعض الأمثلة:

- يجب الإشارة إلى مصدر البيانات **Today's date & time** في تعبير التقارير الإلكترونية على الشكل التالي: `'Today''s date & time'`.
- يجب الإشارة إلى الأسلوب **name()** في مصدر البيانات **العملاء** في تعبير التقارير الإلكترونية على الشكل التالي: `Customers.'name()'`.

إذا كانت أساليب مصادر بيانات التطبيق تشتمل على معلمات، فإنه يتم استخدام بناء الجملة التالي لاستدعاء تلك الأساليب:

- إذا كان أسلوب **isLanguageRTL** لمصدر بيانات **النظام** يشتمل على معلمة **EN-US** لنوع بيانات [*السلسلة*](er-formula-supported-data-types-primitive.md#string)، فيجب الإشارة إلى هذا الأسلوب في تعبير تقارير إلكترونية على الشكل التالي `System.isLanguageRTL("EN-US")`.
- لن تكون علامات الاقتباس مطلوبة عندما يحتوي اسم الأسلوب على رموز أبجدية رقمية فقط. ومع ذلك، تكون مطلوبة بالنسبة إلى أسلوب جدول عندما يتضمن الاسم أقواسًا.

عندما تتم إضافة مصدر بيانات **النظام** إلى تعيين التقارير الإلكترونية الذي إلى فئة التطبيق **عمومي** ، يُرجع التعبير `System.isLanguageRTL("EN-US ")` القيمة *المنطقية* **FALSE**. يُرجع التعبير `System.isLanguageRTL("AR")` المعدل القيمة *المنطقية* **TRUE**.

يمكنك تحديد الطريقة التي يتم بها تمرير القيم إلى معلمات هذا النوع من الأسلوب:

- يمكن تمرير الثوابت فقط للأساليب الخاصة بهذا النوع. يتم تحديد قيم الثوابت في وقت التصميم.
- يتم دعم أنواع البيانات الأولية (الأساسية) [الأساسية](er-formula-supported-data-types-primitive.md) فقط للمعلمات من هذا النوع. تتضمن أنواع البيانات الأولية *عدد صحيح*، و *حقيقي*، و *منطقية*، و *سلسلة*.

## <a name="paths"></a><a name="Paths"></a>المسارات

عندما يشير تعبير إلى مصدر بيانات مصنف، يمكنك استخدام تعريف المسار لتحديد عنصر أساسي معينة من مصدر البيانات هذا. يتم استخدام حرف النقطة (.) لفصل العناصر الفردية في مصدر بيانات مصنف. على سبيل المثال، يحتوي تعيين نموذج التقارير الإلكترونية الحالي على مصدر بيانات **InvoiceTransactions** ، ويُرجع مصدر البيانات هذا قائمة بالسجلات. تحتوي بنية السجل **InvoiceTransactions** على الحقلين **AmountDebit** و **AmountCredit**، اللذين يرجعان قيمًا رقمية. لذلك، يمكنك تصميم التعبير التالي لحساب المبلغ المفوتر: `InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit`. البناء `InvoiceTransactions.AmountDebit` في هذا التعبير هو المسار الذي يتم استخدامه للوصول إلى حقل **AmountDebit** لمصدر بيانات **InvoiceTransactions** من نوع *قائمه السجلات* .

### <a name="relative-path"></a>مسار نسبي

إذا كان مسار مصدر بيانات مصنف يبدأ بعلامة "at" (@)، فهذا مسار نسبي. يتم إظهار علامة "at" بدلاً من الجزء المتبقي من المسار المطلق للبنية الشجرية الهرمية المستخدمة. يبين الرسم التوضيحي التالي مثالاً. هنا، يشير المسار المطلق `Ledger.'accountingCurrency()'` إلى أن قيمة عملة المحاسبة من مصدر بيانات **دفتر الأستاذ** يتم إدخالها في حقل **AccountingCurrency** الخاص بنموذج البيانات.

![مثال للمسار المطلق علي صفحة مصمم تعيين نموذج](./media/ER-FormulaLanguage-AbsolutePath.png)

يظهر المثال في الرسم التوضيحي التالي كيفية استخدام مسار نسبي. يشير المسار النسبي `@.AccountNum` إلى انه يتم استخدام حقل **AccountNum** الخاص بمصدر بيانات **Intrastat** (الذي يظهر مستوي اعلي من الحقل **AccountNum** في الشجرة الهرمية لنموذج البيانات) لإدخال رقم حساب العميل أو المورد في نموذج بيانات حقل **AccountNum** .

![مثال للمسار النسبي علي صفحة مصمم تعيين نموذج تقارير إلكترونية](./media/ER-FormulaLanguage-RelativePath1.png)

يتم أيضًا إظهار الجزء المتبقي من المسار المطلق في [محرر تركيبة تقارير إلكترونية](general-electronic-reporting-formula-designer.md).

![الجزء المتبقي من المسار المطلق علي صفحة مصمم تركيبة التقارير الإلكترونية](./media/ER-FormulaLanguage-RelativePath2.png)

لمزيد من المعلومات، راجع [استخدام مسار نسبي في روابط البيانات لتنسيقات ونماذج ER](relative-path-data-bindings-er-models-format.md).

## <a name="functions"></a><a name="Functions"></a>الوظائف

يمكن استخدام وظائف التقارير الإلكترونية المُضمنة في تعبيرات التقارير الإلكترونية. ويمكن استخدام جميع مصادر البيانات لسياق التعبير (أي، تعيين نموذج التقارير الإلكترونية الحالية أو تنسيق التقارير الإلكترونية) كمعلمات لوظائف الاتصال، وفقًا لقائمة الوسائط لوظائف الاتصال. يمكن أيضًا استخدام الثوابت كمعلمات لدالات الاستدعاء. على سبيل المثال، يحتوي تعيين نموذج التقارير الإلكترونية الحالي على مصدر بيانات **InvoiceTransactions** ، ويُرجع مصدر البيانات هذا قائمة بالسجلات. تحتوي بنية السجل **InvoiceTransactions** على الحقلين **AmountDebit** و **AmountCredit**، اللذين يرجعان قيمًا رقمية. وبالتالي، لحساب المبلغ الذي تم تحرير فواتير به، يمكنك تصميم التعبير التالي الذي يستخدم توظيف تقريبي للتقارير الإلكترونية المُضمنة: `ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)`.

عندما تقوم بتصميم تعيينات نموذج التقارير الإلكترونية وإعداد تقارير التقارير الإلكترونية، ويمكنك استخدام وظائف التقارير الإلكترونية من الفئات التالية:

- [دلات التاريخ والوقت](er-functions-category-datetime.md)
- [دالات القائمة](er-functions-category-list.md)
- [الوظائف المنطقية](er-functions-category-logical.md)
- [الدالات الحسابية](er-functions-category-mathematical.md)
- [وظائف السجلات](er-functions-category-record.md)
- [الدالات النصية](er-functions-category-text.md)
- [وظائف تجميع البيانات](er-functions-category-data-collection.md)
- [دالات أخرى (خاصة بمجال الأعمال)](er-functions-category-other.md)
- [وظائف تحويل النوع](er-functions-category-type-conversion.md)

## <a name="functions-list-extension"></a>ملحق قائمة الدالات

تسمح لك التقارير الإلكترونية بتوسيع قائمة الدالات التي يتم استخدامها في تعبيرات التقارير الإلكترونية. يُتطلب بذل بعض الجهود الهندسية. للحصول على معلومات مفصلة، راجع [توسيع قائمة دالات التقارير الإلكترونية (ER)](general-electronic-reporting-formulas-list-extension.md).

## <a name="compound-expressions"></a>تعبيرات مركبة

يمكنك إنشاء تعبيرات مركبة تستخدم وظائف من فئات مختلفة، بشرط أن تتطابق أنواع البيانات. عند استخدام الوظائف معًا، تطابق نوع بيانات الإخراج من وظيفة واحدة إلى نوع بيانات الإدخال المطلوب من قبل وظيفة أخرى. علي سبيل المثال، لتجنب الخطأ "قائمه-فارغة" في ربط حقل إلى عنصر تنسيق التقارير الإلكترونية، دمج الوظائف من فئة [القائمة](er-functions-category-list.md) مع وظيفة من الفئة [المنطقية](er-functions-category-logical.md) ، كما يظهر المثال التالي. هنا، تستخدم التركيبة وظيفة [IF](er-functions-logical-if.md) لاختبار ما إذا كانت قائمة **IntrastatTotals** فارغة قبل إرجاع قيمة التجميع المطلوب من تلك القائمة. إذا كانت القائمة **IntrastatTotals** فارغة، ترجع التركيبة **0** (صفر).

```vb
IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
```

## <a name="multiple-solutions"></a>حلول متعددة

في كثير من الأحيان، يمكنك الحصول علي نفس نتيجة تحويل البيانات بطرق متعددة، باستخدام وظائف من فئات مختلفة أو وظائف مختلفة من نفس الفئة. علي سبيل المثال، يمكن أيضًا تكوين التعبير السابق باستخدام وظيفة [COUNT](er-functions-list-count.md) من فئة [قائمة](er-functions-category-list.md) .

```vb
IF(COUNT (IntrastatTotals)=0, 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
```

## <a name="additional-resources"></a>الموارد الإضافية

[نظرة عامة حول التقارير الإلكترونية](general-electronic-reporting.md)

[مصمم المعادلات في التقارير الإلكترونية](general-electronic-reporting-formula-designer.md)

[توسيع قائمة وظائف التقارير الإلكترونية](general-electronic-reporting-formulas-list-extension.md)

[أنوع البيانات الأساسية المدعومة](er-formula-supported-data-types-primitive.md)

[أنوع البيانات المركبة المدعومة](er-formula-supported-data-types-composite.md)

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
