---
title: تخصيص تكوينات التقارير الإلكترونية لإنشاء مستند إلكتروني
description: يوضح هذا الموضوع كيفية تخصيص تكوينات التقارير الإلكترونية (ER) المقدمة من Microsoft والتي يتم استخدامها لإنشاء مستند إلكتروني مخصص.
author: NickSelin
ms.date: 10/21/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable, ERParameters, ERDataModelDesigner, ERModelMappingTable, ERModelMappingDesigner, EROperationDesigner, ERVendorTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom:
- "220314"
- intro-internal
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: a7353d7d8149ff1316fbc0adc55b7e1050f443a8
ms.sourcegitcommit: 5f7177b9ab192b5a6554bfc2f285f7cf0b046264
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/30/2022
ms.locfileid: "8661647"
---
# <a name="customize-electronic-reporting-configurations-to-generate-an-electronic-document"></a>تخصيص تكوينات التقارير الإلكترونية لإنشاء مستند إلكتروني

[!include[banner](../includes/banner.md)]

يتيح لك [إطار عمل التقارير الإلكترونية (ER)](general-electronic-reporting.md) تحميل the ER [تكوينات](general-electronic-reporting.md#Configuration) التقارير الإلكترونية التي تقدمها Microsoft لمثيل Microsoft Dynamics 365 Finance. وبهذه الطريقة، يمكن أن تعمل التكوينات المقدمة من Microsoft كحل للتقارير الإلكترونية الذي يتم استخدامه لإنشاء فواتير العميل الإلكترونية (الفواتير الإلكترونية). يمكنك استخدام حل التقارير الإلكترونية هذا لتكوين حل التقارير الإلكترونية المخصص الخاص بك للوصول إلى حقول قاعدة البيانات المخصصة وإنشاء الفواتير الإلكترونية التي تتوافق مع متطلباتك الخاصة، دون الحاجة إلى تحرير التعليمات البرمجية المصدر.

## <a name="overview"></a>نظرة عامة

بالنسبة للمثال الموجود في هذا الموضوع، فإنه يجب تحديد كود هوية الضريبة الفيدرالية كسمة مخصصة جديدة لكل عميل تقوم بفوترته إلكترونيًا. وبالتالي، فإنه يجب عليك تخصيص بنية الفاتورة المستخدمة حاليًا، وذلك بإضافة صنف جديد يجب ملؤه بكود الضريبة في كل فاتورة من الفواتير الإلكترونية التي يتم إنشاؤها.

توضح الإجراءات الواردة في هذا الموضوع كيفية قيام مستخدم بدور مسؤول النظام أو مطور التقارير الإلكترونة أو مستشار وظيفة التقارير الإلكترونية بإجراء المهام التالية في مثيل Finance:

- [قم بتكوين الحد الأدنى لمجموعة معلمات التقارير الإلكترونية المطلوبة لبدء استخدام إطار عمل التقارير الإلكترونية](#ConfigureER).
- [قم باستيراد الإصدارات الأولية من تكوينات التقارير الإلكترونية القياسية التي يتم تقديمها لإنشاء الفواتير الإلكترونية](#ImportERConfigurations1).
- [قم بتكوين معلمات الحسابات المدينة للبدء في استخدام تكوينات التقارير الإلكترونية القياسية](#ConfigureAR1).
- [قم بتكوين معلمات الكيان القانوني لفوترة العملاء](#ConfigureLE).
- [قم بإعداد سجل عميل للفوترة الإلكترونية](#ConfigureCustomer1).
- [قم بإضافة فاتورة عميل وترحيلها وإرسالها باستخدام تكوينات التقارير الإلكترونية القياسية](#ProcessInvoice1).
- [قم بإضافة حقل قاعدة بيانات مخصص لإدارة كود هوية الضريبة الفيدرالي للعملاء](#AddCustomField).
- [قم بتحديث بيانات تعريف التقارير الإلكترونية لتمكين تغييرات قاعدة البيانات لمصمم تعيين نموذج التقارير الإلكترونية](#RefreshERMetadata).
- [قم بتصميم تكوينات التقارير الإلكترونية المخصصة لإنشاء الفواتير الإلكترونية التي تحتوي على كود الضريبة الجديد](#DesignCustomERConfigurations).
- [قم بتكوين معلمات الحسابات المدينة للبدء في استخدام تكوينات التقارير الإلكترونية المخصصة](#ConfigureAR2).
- [قم بتحديث سجل عميل للفوترة الإلكترونية](#ConfigureCustomer2).
- [قم بإضافة فاتورة عميل وترحيلها وإرسالها باستخدام تكوينات التقارير الإلكترونية المخصصة](#ProcessInvoice2).
- [قم باستيراد الإصدارات الجديدة من تكوينات التقارير الإلكترونية القياسية التي يتم تقديمها لإنشاء الفواتير الإلكترونية](#ImportERConfigurations2).
- [تبنى التغييرات على الإصدارات الجديدة من تكوينات التقارير الإلكترونية القياسية في التكوينات المخصصة للتقارير الإلكترونية](#RebaseCustomERConfigurations).
- [قم بإضافة فاتورة عميل وترحيلها وإرسالها باستخدام الإصدارات الجديدة لتكوينات التقارير الإلكترونية المخصصة](#ProcessInvoice3).

يمكن إكمال جميع هذه الإجراءات في شركة **DEMF**.

## <a name="configure-the-er-framework"></a><a name="ConfigureER"></a>تكوين إطار عمل ER

كمستخدم في المستشار الوظيفي للتقارير الإلكترونية أو دور مطور التقارير الإلكترونية، يجب عليك تكوين الحد الأدنى لمجموعة معلمات التقارير الإلكترونية. يمكنك بعد ذلك بدء استخدام إطار عمل التقارير الإلكترونية لتصميم إصدارات مخصصة من التكوينات القياسية الخاصة بحل التقارير الإلكترونية المستخدم لإنشاء الفواتير الإلكترونية.

### <a name="configure-er-parameters"></a>تكوين معلمات التقارير الإلكترونية

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **مخطط الترجمة‬**، في قسم **الارتباطات المتعلقة**، حدد **معلمات التقارير الإلكترونية**.
3. في صفحة **معلمات التقارير الإلكترونية**، على علامة التبويب **عام**، عيّن الخيار **تمكين وضع التصميم** إلى **نعم**.
4. ضمن علامة التبويب **المرفقات**، في الحقل **التكوينات**، حدد **ملف**.
5. في حقول **أرشيف الوظيفة** و **المؤقت** و **الأساس** و **أخرى**، حدد نوع **الملف**.

لمزيد من المعلومات حول معلمات ER ، راجع [تكوين إطار عمل ER](electronic-reporting-er-configure-parameters.md).

### <a name="activate-an-er-configuration-provider"></a>تنشيط موفر تكوين ER

يتم تعليم كل تكوين ER تمت إضافته باعتباره مملوكا لموفر تكوين ER. يتم استخدام موفر تكوين ER الذي تم تنشيطه في مساحة عمل **التقارير الإلكترونية** لهذا الغرض. بالتالي، يجب عليك تنشيط موفر تكوين ER في مساحة عمل **التقارير الإلكترونية** قبل البدء في إضافة تكوينات ER أو تحريرها.

> [!NOTE]
> يمكن لمالك تكوين ER فقط تحريره. بالتالي، قبل تحرير تكوين ER، يجب تنشيط موفر تكوين ER المناسب في مساحة عمل **التقارير الإلكترونية**.

#### <a name="review-the-list-of-er-configuration-providers"></a>مراجعة قائمة موفري تكوين ER

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **مخطط الترجمة**، في قسم **الارتباطات المتعلقة**، حدد **موفرو التكوين** .
3. في صفحة **جدول موفري التكوين**، يتضمن كل سجل موفر اسمًا وعنوان URL فريدين. راجع محتويات هذه الصفحة. في حالة وجود سجل لـ **Litware, Inc.** (`https://www.litware.com`) بالفعل، فتخطي الإجراء التالي، [إضافة موفر تكوين ER جديد](#AddProvider).

#### <a name="add-a-new-er-configuration-provider"></a><a id="AddProvider"></a>إضافة موفر تكوين ER جديد

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **مخطط الترجمة**، في قسم **الارتباطات المتعلقة**، حدد **موفرو التكوين** .
3. في صفحة **موفري التكوين**، حدد **جديد**.
4. في حقل **الاسم**، أدخل **Litware, Inc**.
5. في الحقل **عنوان الإنترنت**، أدخل `https://www.litware.com`.
6. حدد **حفظ**.

#### <a name="activate-an-er-configuration-provider"></a>تنشيط موفر تكوين ER

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **مخطط الترجمة**، في القسم **موفرو التكوين**، حدد تجانب **Litware, Inc.** ثم حدد **تعيين نشط**.

لمزيد من المعلومات حول موفري تكوين ER، راجع [إنشاء موفري التكوين ووضع علامة عليهم كنشطين](tasks/er-configuration-provider-mark-it-active-2016-11.md).

## <a name="import-the-initial-versions-of-standard-er-configurations"></a><a name="ImportERConfigurations1"></a>استيراد الإصدارات الأولية من تكوينات التقارير الإلكترونية القياسية

لإضافة تكوينات التقارير الإلكترونية القياسية إلى مثيل Finance الحالي من Microsoft، فإنه يجب استيرادها من مستودع [التقارير الإلكترونية](general-electronic-reporting.md#Repository) الذي تم تكوينه لذلك المثيل.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **مخطط الترجمة**، في قسم **موفرو التكوين**، حدد تجانب **Microsoft**، ثم حدد **المستودعات** لعرض قائمة المستودعات الخاصة بموفر Microsoft.
3. في صفحة **مستودعات التكوين**، حدد المستودع من نوع **عام**، ثم حدد **فتح**. في حالة مطالبتك بالتخويل للاتصال بخدمة Regulatory Configuration Service، اتبع إرشادات التخويل.
4. في صفحة **مستودع التكوين**، في شجرة التكوينات في الجزء الأيسر، حدد تكوين تنسيق **فاتورة مبيعات Peppol**.
5. في علامة التبويب السريعة **الإصدارات**، حدد الإصدار **11.2.2**.
6. حدد **استيراد** لتنزيل الإصدار المحدد من المستودع العالمي.

![صفحة مستودع التكوين.](./media/er-quick-start3-import-solution1.png)

> [!TIP]
> إذا كانت لديك مشكلة في الوصول إلى [المستودع العمومي](er-download-configurations-global-repo.md)، فيمكنك [تنزيل التكوينات](download-electronic-reporting-configuration-lcs.md) من Microsoft Dynamics Lifecycle Services (LCS) بدلا من ذلك.

### <a name="review-the-imported-er-configurations"></a>مراجعة تكوينات ER المستوردة

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **مخطط الترجمة**، في قسم **التكوينات**، حدد تجانب **تكوينات إعداد التقارير** .
3. ضمن الصفحة **التكوينات**، قم بتوسيع علامة التبويب السريعة **مكونات التكوين**.
4. في شجرة التكوين الموجودة في الجزء الأيسر، قم بتوسيع **نموذج الفاتورة**، ثم قم بتوسيع **فاتورة مبيعات UBL**.

لاحظ أنه، بالإضافة إلى تنسيق التقارير الإلكترونية الخاصة بـ **فاتورة مبيعات Peppol** المحدد، تم استيراد تكوينات التقارير الإلكترونية الأخرى. نظرًا لأنه يتم نشر الإصدارات الجديدة من تكوينات التقارير الإلكترونية بشكل دائم إلى المستودع العالمي وLCS للمحافظة على توافق الحلول المقابلة مع المتطلبات الجديدة، فإنه تم استيراد أحدث إصدارات تكوين نموذج البيانات المطلوب وتكوينات تعيين نموذج الخاصة بها.

![صفحة التكوينات.](./media/er-quick-start3-imported-solution1a.png)

لمحاكاة حالة تكوينات التقارير الإلكترونية في مثيل Finance، فإنها ستكون موجودة إذا قمت باستيراد الإصدار **11.2.2** الخاص بتنسيق التقارير الإلكترونية **فاتورة مبيعات Peppol** في الماضي (على سبيل المثال، في 7 أغسطس، 2019)، اتبع هذه الخطوات.

- في جزء الإجراء، حدد **حذف** لحذف كافة تكوينات التقارير الإلكترونية التي تم نشرها بعد تاريخ 7 أغسطس، 2019. يجب ترك تكوينات **نموذج الفاتورة** و **تعيين نموذج الفاتورة** (الذي تم تسميته مبدئيًا **تعيين نموذج فاتورة العميل**) و **فاتورة مبيعات UBL** و **فاتورة مبيعات Peppol** فقط.
- بالنسبة لتكوينات التقارير الإلكترونية المتبقية، في علامة التبويب السريعة **الإصدارات**، حدد **حذف** لحذف كافة إصدارات تكوينات التقارير الإلكترونية التي تم نشرها بعد تاريخ 7 أغسطس، 2019.

ثم تحقق من توفر التكوينات التالية في شجرة التكوين:

- تكوين نموذج بيانات التقارير الإلكترونية لـ **نموذج الفاتورة** (تم تسميته مبدئيًا باسم **نموذج فاتورة العميل**).

    - يحتوي الإصدار 11 على الإصدار 10 من مكون التقارير الإلكترونية لـ نموذج البيانات الذي يمثل بنية بيانات مجال عمل الفوترة. تم استيراد تكوين التقارير الإلكترونية هذا كأصل لتنسيق التقارير الإلكترونية **لفاتورة مبيعات Peppol** الذي تم تحديده للاستيراد.
    - يحتوي الإصدار 50 على الإصدار 31 لمكون التقارير الإلكترونية لنموذج البيانات. وقد تم استيراد تكوين التقارير الإلكترونية هذا كأصل لإصدار 7 أغسطس، 2019، إصدار تكوين تعيين نموذج التقارير الإلكترونية **تعيين نموذج الفواتير**.

    ![تكوين نموذج بيانات التقارير الإلكترونية الخاص بنموذج الفاتورة في الصفحة تكوينات.](./media/er-quick-start3-imported-solution1b1.png)

    > [!TIP]
    > إذا لم تكن ترى الإصدار 50 من نموذج البيانات هذا، فافتح المستودع العالمي، وقم باستيراد الإصدار 50.19 من تكوين التقارير الإلكترونية **تعيين نموذج الفواتير**.

- تكوين تعيين نموذج التقارير الإلكترونية **تعيين نموذج الفاتورة** (تم تسميته مبدئيًا باسم **تعيين نموذج فاتورة العميل**).

    - تم استيراد الإصدار 50.19 كأحدث تنفيذ للإصدار 50 خاص بتكوين نموذج بيانات التقارير الإلكترونية **نموذج الفاتورة**. يحتوي على مكوني تقارير إلكترونية لـ تعيين نموذج يصفان كيفية ملء نموذج البيانات ببيانات التطبيق في وقت التشغيل.

    ![تكوين تعيين نموذج التقارير الإلكترونية الخاص بتعيين نموذج الفاتورة في الصفحة تكوينات.](./media/er-quick-start3-imported-solution1b2.png)

    > [!TIP]
    > إذا لم تكن ترى الإصدار 50.19 من تعيين النموذج هذا، فافتح المستودع العالمي، وقم باستيراد الإصدار 50.19 من تكوين التقارير الإلكترونية **تعيين نموذج الفواتير**.

- تكوين تنسيق التقارير الإلكترونية **لفاتورة مبيعات UBL**:

    - يحتوي الإصدار 11.2 على التنسيق ومكونات التقارير الإلكترونية لتعيين التنسيق. يحدد مكون التنسيق تخطيط التقرير. يحتوي مكون تعيين التنسيق على مصدر بيانات النموذج ويحدد كيفية استخدام مصدر البيانات هذا لملء تخطيط التقرير في وقت التشغيل. تم تكوين تنسيق التقارير الإلكترونية هذا لإنشاء الفواتير الإلكترونية بتنسيق لغة الاعمال العامة (UBL). تم استيراد هذا كأصل لتنسيق التقارير الإلكترونية **لفاتورة مبيعات Peppol** الذي تم تحديده للاستيراد.

- تكوين تنسيق التقارير الإلكترونية **لفاتورة مبيعات Peppol**:

    - يحتوي الإصدار 11.2.2 على تعيين التنسيق ومكونات التقارير الإلكترونية الخاصة بتعيين التنسيق التي تم تكوينها لإنشاء الفواتير الإلكترونية في تنسيق Pan-European Public Procurement OnLine (PEPPOL).

    ![تكوين تنسيق التقارير الإلكترونية الخاص بفاتورة مبيعات Peppol في الصفحة تكوينات.](./media/er-quick-start3-imported-solution1b3.png)

## <a name="configure-the-accounts-receivable-parameters"></a><a name="ConfigureAR1"></a>تكوين معلمات الحسابات المدينة

1. انتقل إلى **الحسابات المدينة** \> **إعداد** \> **معلمات الحسابات المدينة**.
2. في علامة التبويب **المستندات الإلكترونية**، في علامة التبويب السريعة **التقارير الإلكترونية**، في الحقل **المبيعات وفاتورة النص الحر**، حدد **فاتورة مبيعات Peppol**.
3. حدد **حفظ**.

![علامة التبويب المستندات الإلكترونية على الصفحة معلمات الحسابات المدينة.](./media/er-quick-start3-configure-ar1.png)

## <a name="configure-the-legal-entity-parameters"></a><a name="ConfigureLE"></a>تكوين معلمات الكيان القانوني

1. انتقل إلى **إدارة المؤسسة** \> **المؤسسات** \> **الكيانات القانونية**.
2. بالنسبة لشركة **DEMF** المحددة، في علامة التبويب السريعة **معلومات الحساب البنكي**، في الحقل **رقم التوجيه**، أدخل **1234**.
3. حدد **حفظ**.
4. أغلق الصفحة **الكيانات القانونية**.

## <a name="prepare-a-customer-record"></a><a name="ConfigureCustomer1"></a>إعداد سجل عميل

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في الصفحة **جميع العملاء**، حدد ارتباط حساب العمل **DE-014**.

### <a name="add-a-customer-contact"></a>إضافة جهة اتصال عميل

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في جزء الإجراء، في علامة تبويب **العميل** في مجموعة **الحسابات**، حدد **جهات الاتصال**.
3. حدد **إضافة جهات اتصال**.
4. في الصفحة **جهات الاتصال**، في الحقل **الاسم الأول**، افتح البحث وحدد **Adam Carter**، ثم حدد **تحديد** لإغلاق البحث.
5. حدد **حفظ**.
6. أغلق الصفحة **جهات الاتصال**.

### <a name="define-a-primary-contact"></a>تحديد جهة اتصال أساسية

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في علامة التبويب السريعة **التوزيع الديموغرافي للمبيعات**، في الحقل **جهة الاتصال الرئيسية**، حدد **Adam Carter**.

### <a name="set-the-e-invoicing-option"></a>تعيين خيار الفوترة الإلكترونية

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في علامة التبويب السريعة **الفاتورة والتسليم**، قم بتعيين الخيار **الفاتورة الإلكترونية** إلى **نعم**.
3. حدد **حفظ**.
4. أغلق الصفحة **جميع العملاء**.

## <a name="process-a-customer-invoice-by-using-the-standard-er-configurations"></a><a name="ProcessInvoice1"></a>معالجة فاتورة عميل باستخدام تكوينات التقارير الإلكترونية القياسية

يمكنك الآن استخدام تكوينات التقارير الإلكترونية القياسية التي قمت باستيرادها لإرسال فاتورة نص حر إلى العميل إلكترونيًا.

### <a name="add-a-new-invoice"></a>إضافة فاتورة جديدة

1. انتقل إلى **الحسابات المدينة** \> **الفواتير** \> **جميع الفواتير ذات نص حر‬**.
2. من الصفحة **فاتورة النص الحر**، حدد **جديد**.
3. في علامة التبويب السريعة **رأس فاتورة النص الحر**، في الحقل **حساب العميل**، حدد **DE-014**.
4. في علامة التبويب السريعة **بنود الفاتورة**، يتم إضافة بند الفاتورة تلقائيًا. في هذا البند، قم بتعيين الحقول التالية:

    - في الحقل **الوصف**، أدخل **دفتر الملاحظات**.
    - في الحقل **الحساب الرئيسي**، حدد **401100**.
    - في الحقل **سعر الوحدة**، أدخل **1000**.

5. حدد **حفظ**.

![صفحة الفاتورة ذات النص الحر.](./media/er-quick-start3-add-invoice.png)

للحصول على مزيد من المعلومات، راجع [إنشاء فاتورة ذات النص الحر‬](../../../finance/accounts-receivable/create-free-text-invoice-new.md).

### <a name="post-a-new-invoice"></a>نشر فاتورة جديدة

1. انتقل إلى **الحسابات المدينة** \> **الفواتير** \> **جميع الفواتير ذات نص حر‬**.
2. في الصفحة **فاتورة النص الحر**، في جزء الإجراء، حدد **نشر**.
3. في مربع الحوار **ترحيل فاتورة ذات نص حر**، حدد **موافق**.

![صفحة تفاصيل الفاتورة ذات النص الحر.](./media/er-quick-start3-post-invoice.png)

### <a name="send-a-posted-invoice"></a>إرسال فاتورة مرحلة

1. انتقل إلى **الحسابات المدينة** \> **الفواتير** \> **جميع الفواتير ذات نص حر‬**.
2. في الصفحة **فاتورة ذات نص حر**، في جزء الإجراء، في المجموعة **المستند**، حدد **إرسال** \> **الأصل**.

    ![معاينة الفاتورة الأصلية.](./media/er-quick-start3-send-invoice.png)

3. أغلق الصفحة **فاتورة ذات النص الحر**.

### <a name="analyze-a-generated-e-invoice"></a>تحليل الفاتورة الإلكترونية التي تم إنشاؤها

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **وظائف إعداد التقارير الإلكترونية**.
2. في الصفحة **وظائف إعداد التقارير الإلكترونية**، حدد السجل الأولي الذي يحتوي على وصف المهمة **إرسال XML الخاص بالفاتورة الإلكترونية**.
3. حدد **إظهار الملفات** للوصول إلى قائمة الملفات التي تم إنشاؤها.

    ![صفحة وظائف إعداد التقارير الإلكترونية.](./media/er-quick-start3-jobs-list.png)

4. حدد **فتح** لتنزيل ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه.
5. قم بتحليل ملف XML الخاص بالفاتورة الإلكترونية. لاحظ أن مخطط ضريبة العميل يتم تمثيله حاليًا بواسطة السمات XML **schemeID** و **schemeAgencyID**. ولاحظ أيضًا أن عنصر XML **cbc:CustomizationID** يحتوي حاليًا على النص التالي: `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0`.

    ![معاينة ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه.](./media/er-quick-start3-e-invoice1.png)

## <a name="add-a-custom-database-field"></a><a name="AddCustomField"></a>إضافة حقل مخصص لقاعدة البيانات

يمكنك استخدام ميزة [الحقل المخصص](../../fin-ops/get-started/user-defined-fields.md) للقيام بالتخصيص التالي في مثيل Finance الحالي:

- قم بتخصيص بنية قاعدة البيانات عن طريق إضافة حقل جديد مخصص لقاعدة بيانات يقوم بتخزين كود هوية الضريبة الفيدرالية لكل عميل.
- قم بتخصيص الصفحة **العميل** من خلال إضافة حقل جديد لإدخال البيانات يمكن استخدامه لإدخال قيمة كود الضريبة في حقل قاعدة البيانات المخصص الجديد.

اتبع هذه الخطوات لإجراء التخصيص.

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في الصفحة **جميع العملاء**، حدد ارتباط حساب العمل **DE-014**.
3. في علامة التبويب السريعة **عام**، انقر بزر الماوس الأيمن فوق أي منطقة فارغة أسفل الحقل **اللغة**، ثم حدد **تخصيص: UpperGroup**.

    يتم تمييز محتويات علامة التبويب السريعة **عام** وتظهر قائمة **تخصيص**.

4. في القائمة **تخصيص**، حدد **إضافة حقل**.
5. في مربع الحوار **إضافة أعمدة**، حدد **إنشاء حقل جديد**.
6. في مربع الحوار **إنشاء حقل جديد**، في الحقل **اسم الجدول**، حدد **العملاء**.
7. في الحقل **بادئة الاسم**، أدخل **FederalTaxID**.

    > [!NOTE]
    > تم تعريف اسم الحقل بالكامل تلقائيًا كـ **FederalTaxID\_Custom**.

8. في الحقل **التسمية**، أدخل **Federal Tax ID**.
9. في الحقل **النوع**، حدد **النص**.
10. في الحقل **الطول**، أدخل **20**.
11. حدد **حفظ**.
12. في مربع الرسالة الذي يظهر، حدد **نعم** للتأكيد على أنك تريد إنشاء إدخال حقل **إFederalTaxID** لجدول **العملاء**.
13. حدد **إدخال** <a name="insert_custom_field"></a>لإضافة الحقل **FederalTaxID\_Custom** إلى الصفحة الحالية.

    ![صفحة جميع العملاء.](./media/er-quick-start3-create-new-field.gif)

14. أغلق الصفحة **جميع العملاء**.

## <a name="refresh-the-er-metadata"></a><a name="RefreshERMetadata"></a>تحديث بيانات تعريف التقارير الإلكترونية

يجب عليك تحديث بيانات تعريف التقارير الإلكترونية لجعل الحقل المخصص الذي قمت بإضافته [مرئيا](electronic-reporting-er-configure-parameters.md#frequently-asked-questions) في مصمم تعيين نموذج التقارير الإلكترونية.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **إعادة إنشاء تفضيلات الجدول**.
2. في مربع الحوار **تحديث نموذج البيانات**، حدد **موافق**.

## <a name="design-the-custom-er-configurations"></a><a name="DesignCustomERConfigurations"></a>تصميم تكوينات التقارير الإلكترونية المخصصة

يمكنك استخدام تكوينات التقارير الإلكترونية المقدمة من Microsoft لتصميم تكوينات التقارير الإلكترونية المخصصة الخاصة بك بحيث تقوم بإنشاء الفواتير الإلكترونية التي تحتوي على كود الضريبة الجديد.

### <a name="customize-the-data-model-configuration"></a>تخصيص تكوين نموذج البيانات

كمستخدم في دور المستشار الوظيفي للتقارير الإلكترونية، فإنه يمكنك تصميم نموذج بيانات التقارير الإلكترونية المخصص.

#### <a name="add-a-custom-data-model-configuration"></a>إضافة تكوين نموذج بيانات مخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات، الجزء الأيسر، حدد **نموذج فاتورة العميل**.
3. في جزء الإجراء، حدد **إنشاء تكوين**.
4. في مربع الحوار المنسدل، في الحقل **جديد**، حدد **مشتق من الاسم: نموذج فاتورة العميل، Microsoft** للإشارة إلى أن تكوين نموذج بيانات التقارير الإلكترونية المخصص الجديد الخاص بك يجب أن يستند إلى تكوين نموذج بيانات التقارير الإلكترونية.
5. في الحقل **الاسم**، أدخل **نموذج الفاتورة (Litware)**.
6. حدد **إنشاء تكوين** لإنشاء تكوين التقارير الإلكترونية الجديد.

يمكنك الآن استخدام مصمم نموذج بيانات التقارير الإلكترونية لتحرير الإصدار 50.1 الخاص بتكوين التقارير الإلكترونية لـ **نموذج الفاتورة (Litware)** في **حالة** [المسودة](general-electronic-reporting.md#component-versioning).

![إصدار 50.1 لتكوين تنسيق التقارير الإلكترونية في صفحة التكوينات.](./media/er-quick-start3-added-custom-model.png)

#### <a name="configure-a-custom-data-model"></a>تكوين نموذج بيانات مخصص

يجب عليك تعديل نموذج البيانات المخصص الخاص بك عن طريق إضافة حقل جديد لتوفير قيمة كود هوية الضريبة الفيدرالي. يُعتبر هذا الكود جزءًا من بيانات العميل لكل تنسيق للتقارير الإلكترونية والذي سيستخدم نموذج البيانات هذا كمصدر بيانات.

1. في صفحة **التكوينات**، في شجرة التكوينات الجزء الأيسر، حدد **نموذج الفاتورة (Litware)**.
2. في علامة التبويب السريعة **إصدارات**، حدد الإصدار **50.1** لتكوين نموذج بيانات التقارير الإلكترونية المحدد في حالة **مسودة**.
3. في جزء الإجراء، حدد **المصمم** الخاص بإصدار التكوين المحدد.
4. في الصفحة **مصمم نموذج البيانات**، في شجرة نموذج البيانات، حدد **معلومات العميل (Customer)**.
5. حدد **جديد**.
6. في مربع الحوار المنسدل، في الحقل **عقدة جديدة كـ**، اقبل القيمة الافتراضية، **‬‏‫تابع لعقدة نشطة**.
7. في الحقل **اسم**، أدخل **FederalTaxID\_Litware**.
8. في الحقل **نوع العنصر**، اقبل القيمة الافتراضية، **السلسلة**.
9. حدد **إضافة**، ثم قم بتحديد **حفظ**.

    ![صفحة مصمم نموذج البيانات.](./media/er-quick-start3-add-data-model-field.png)

    > [!NOTE]
    > يصف الحقلان **التسمية** و **الوصف** الغرض من الحقل الجديد. يمكنك ملء هذه الحقول بلغات متعددة. للحصول على مزيد من المعلومات، راجع [‏‫تصميم تقارير متعددة اللغات في التقارير الإلكترونية‬](er-design-multilingual-reports.md).

10. أغلق صفحة **مصمم نموذج البيانات**.

#### <a name="complete-a-custom-data-model-configuration"></a>إكمال تكوين نموذج بيانات مخصص

يجب [إكمال](general-electronic-reporting.md#component-versioning) عملك باستخدام الإصدار 50.1 من تكوين نموذج بيانات التقارير الإلكترونية المخصص لتوفيره بحيث يمكن إضافة تكوينات التقارير الإلكترونية المخصصة الأخرى.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الفاتورة**، وحدد **نموذج الفاتورة (Litware)**.
3. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 50.1 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 50.2، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين نموذج بيانات التقارير الإلكترونية المخصص.

![الإصدار 50.1 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-model1.png)

### <a name="customize-the-model-mapping-configuration"></a>تخصيص تكوين تعيين النموذج

كمستخدم في دور مطور التقارير الإلكترونية، فإنه يمكنك تصميم تعيين نموذج التقارير الإلكترونية المخصص.

#### <a name="add-a-custom-model-mapping-configuration"></a>إضافة تكوين تعيين نموذج مخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج فاتورة العميل**، وحدد **تعيين نموذج فاتورة العملاء**.
3. في جزء الإجراء، حدد **إنشاء تكوين**.
4. في مربع الحوار المنسدل، في الحقل **جديد**، حدد **مشتق من الاسم: تعيين نموذج فاتورة العميل** للإشارة إلى أن تكوين تعيين نموذج بيانات التقارير الإلكترونية المخصص الجديد الخاص بك يجب أن يستند إلى تكوين تعيين نموذج بيانات التقارير الإلكترونية.
5. في الحقل **الاسم**، أدخل **تعيين نموذج الفاتورة (Litware)**.
6. في الحقل **نموذج الهدف**، حدد **نموذج الفواتير (Litware)**.

    > [!IMPORTANT]
    > هذه الخطوة هامة جدًا. في حالة حذفه، لن تتمكن من استخدام نموذج البيانات المخصص في تعيين النموذج المكون.

7. حدد **إنشاء تكوين** لإنشاء تكوين التقارير الإلكترونية الجديد.

![إضافة تكوين تعيين النموذج المخصص في الصفحة تكوينات.](./media/er-quick-start3-adding-custom-mapping.png)

#### <a name="configure-a-custom-model-mapping"></a>تكوين تعيين نموذج مخصص

يجب تعديل تعيين النموذج المخصص وتحديد كيف يجب أن يتم ملء الحقل **FederalTaxID\_Litware** الخاص بنموذج البيانات المخصص في بيانات التطبيق في وقت التشغيل.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج فاتورة العميل** \> **تعيين نموذج فاتورة العميل**، وحدد **تعيين نموذج الفاتورة (Litware)**.
3. في جزء الإجراءات، حدد **المصمم**.
4. في صفحة **تعيين النموذج إلى مصدر البيانات**، حدد تعيين **فاتورة العميل**.

    ![صفحة تعيين النموذج إلى مصدر البيانات.](./media/er-quick-start3-select-customer-mapping.png)

5. حدد **المصمم**.
6. في الصفحة **مصمم تعيين النموذج**، في الجزء **مصادر البيانات**، قم بتوسيع مصدر البيانات **CustInvoiceJour** الذي يمثل جدول التطبيق **CustInvoiceJour**.
7. ضمن **CustInvoiceJour**، قم بتوسيع **العلاقات** لمراجعة قائمة العلاقات لنوع من عديد إلى متعدد (N:1) للجدول **CustInvoiceJour**.
8. ضمن **CustInvoiceJour** \> **العلاقات**، قم بتوسيع **العملاء (CustTable)** للوصول إلى الحقول وعلاقات جدول **العملاء (CustTable)**.
9. حدد مصدر البيانات **FederalTaxID\_Custom** الذي قمت بتنفيذه [في وقت سابق](#insert_custom_field).
10. في الجزء **نموذج البيانات**، قم بتوسيع **معلومات العميل (Customer)**، ثم حدد حقل نموذج البيانات **FederalTaxID\_Litware**.
11. حدد **ربط**.

    ![صفحة مصمم تعيين النموذج.](./media/er-quick-start3-customize-model-mapping.gif)

12. حدد **حفظ**.
13. أغلق صفحة **مصمم تعيين النموذج**.
14. أغلق صفحة **تعيين النموذج إلى مصدر البيانات**.

#### <a name="complete-a-custom-model-mapping-configuration"></a>إكمال تكوين تعيين نموذج مخصص

يجب عليك [إكمال](general-electronic-reporting.md#component-versioning) عملك باستخدام الإصدار 50.19.1 من تكوين تعيين نموذج التقارير الإلكترونية المخصص حتى يكون متوفرًا للاستخدام.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج فاتورة العميل** \> **تعيين نموذج فاتورة العميل**، وحدد **تعيين نموذج الفاتورة (Litware)**.
3. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 50.19.1 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 50.19.2، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين تعيين نموذج التقارير الإلكترونية المخصص.

![الإصدار 50.19.1 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-mapping1.png)

> [!NOTE]
> لا تغطي [دورة حياة](general-electronic-reporting-manage-configuration-lifecycle.md) التكوين المدعوم دورة حياة تغييرات قاعدة البيانات. إذا قمت بتصدير الإصدار 50.19.1 من تكوين **تعيين نموذج الفاتورة (Litware)** من مثيل Finance الحالي وحاول استيراده إلى مثيل آخر لا يحتوي على الحقل **FederalTaxID\_Custom** المخصص في الجدول **CustTable**، سيحدث استثناء. سيشير الاستثناء إلى أن تكوين التقارير الإلكترونية المستورد لا يتوافق مع بيانات تعريف مثيل Finance المستهدف.

### <a name="customize-the-format-configuration"></a>تخصيص تكوين التنسيق

كمستخدم في دور المستشار الوظيفي للتقارير الإلكترونية، فإنه يمكنك تصميم تنسيق التقارير الإلكترونية المخصص.

#### <a name="add-a-custom-format-configuration"></a>إضافة تكوين تنسيق مخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، قم بتوسيع **نموذج فاتورة العميل** \> **فاتورة مبيعات UBL**، حدد **فاتورة مبيعات Peppol**.
3. في جزء الإجراء، حدد **إنشاء تكوين**.
4. في مربع الحوار المنسدل، في الحقل **جديد**، حدد **مشتق من الاسم: نموذج مبيعات Peppol، Microsoft** للإشارة إلى أن تكوين تنسيق التقارير الإلكترونية المخصص الجديد الخاص بك يجب أن يستند إلى تكوين تنسيق التقارير الإلكترونية.
5. في الحقل **الاسم**، أدخل **فاتورة مبيعات Peppol (Litware)**.
6. في الحقل **نموذج البيانات**، حدد **نموذج الفاتورة (Litware)** لاستخدام مكونات تعيين النموذج ونموذج البيانات المخصصة الخاصة بك.

    > [!NOTE]
    > هذه الخطوة هامة جدًا. في حالة حذفه، لن تتمكن من استخدام نموذج البيانات المخصص الخاص بك بالتنسيق المكون.

7. في الحقل **نموذج البيانات**، حدد تعريف الجذر **InvoiceCustomer**.
8. حدد **إنشاء تكوين** لإنشاء تكوين التقارير الإلكترونية الجديد.

![إضافة تكوين تنسيق مخصص في الصفحة تكوينات.](./media/er-quick-start3-adding-custom-format.png)

يمكنك الآن استخدام مصمم عمليات التقارير الإلكترونية لتحرير الإصدار 11.2.2.1 لتكوين التقارير الإلكترونية **فاتورة مبيعات Peppol (Litware)** في **الحالة** [مسودة](general-electronic-reporting.md#component-versioning).

![إصدار 11.2.2.1 لتكوين تنسيق التقارير الإلكترونية في صفحة التكوينات.](./media/er-quick-start3-added-custom-format.png)

#### <a name="configure-a-custom-format"></a>تكوين تنسيق مخصص

يجب تعديل التنسيق المخصص الخاص بك عن طريق إضافة عنصر تنسيق جديد لتعبئة قيمة كود هوية الضريبة الفيدرالية الخاص بالعميل الذي تمت فوترته.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوين في الجزء الأيسر، قم بتوسيع **نموذج فاتورة العميل** \> **فاتورة مبيعات UBL** \> **فاتورة مبيعات Peppol**، وحدد **فاتورة مبيعات Peppol (Litware)**.
3. في جزء الإجراءات، حدد **المصمم**.
4. في شجرة التنسيق، قم بتوسيع **XMLHeader** \> **الفاتورة** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme**، وحدد **cbc:ID**.
5. حدد **إضافة**، ثم حدد **XML** \> **سمة**.
6. في مربع الحوار **خاصية المكون**، في الحقل **الاسم**، أدخل **FederalTaxID**.
7. حدد **موافق** لإضافة عنصر تنسيق جديد لإنشاء سمة XML **FederalTaxID** في ملف XML تم إنشاؤه.
8. في شجرة التنسيق، ضمن **XMLHeader** \> **فاتورة** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme** \> **cbc:ID**، حدد **FederalTaxID**.
9. حدد **تحريك لأعلى**.

![عنصر تنسيق جديد في صفحة مصمم التنسيق.](./media/er-quick-start3-customized-format.png)

#### <a name="configure-a-custom-format-mapping"></a>تكوين تعيين تنسيق مخصص

1. في صفحة **مصمم التنسيق**، في علامة التبويب **تعيين**، قم بتوسيع مصدر البيانات **الفاتورة** لنوع **النموذج**.
2. ضمن **الفاتورة**، قم بتوسيع **معلومات العميل (Customer)**، وحدد **FederalTaxID\_Litware**.
3. حدد **ربط**.

    ![صفحة مصمم التنسيق‬.](./media/er-quick-start3-customized-format-mapping.png)

4. حدد مصدر البيانات **الفاتورة** لنوع **النموذج**، ثم حدد **تحرير**.
5. في الحقل **إصدار**، حدد الإصدار **1** لنموذج البيانات المخصص الخاص بك، ثم حدد **موافق**.
6. حدد **حفظ**.
7. أغلق صفحة **مصمم المعادلة**.

#### <a name="complete-a-custom-format-configuration"></a>إكمال تكوين تنسيق مخصص

يجب عليك [إكمال](general-electronic-reporting.md#component-versioning) عملك باستخدام الإصدار 11.2.2.1 من تكوين تنسيق التقارير الإلكترونية المخصص حتى يكون متوفرًا للاستخدام.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوين في الجزء الأيسر، قم بتوسيع **نموذج فاتورة العميل** \> **فاتورة مبيعات UBL** \> **فاتورة مبيعات Peppol**، وحدد **فاتورة مبيعات Peppol (Litware)**.
3. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 11.2.2.1 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 11.2.2.2، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين التقارير الإلكترونية المخصص.

![الإصدار 11.2.2.1 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-format1.png)

## <a name="configure-the-accounts-receivable-parameters-to-start-to-use-custom-er-configurations"></a><a name="ConfigureAR2"></a>تكوين معلمات الحسابات المدينة للبدء في استخدام تكوينات التقارير الإلكترونية المخصصة

1. انتقل إلى **الحسابات المدينة** \> **إعداد** \> **معلمات الحسابات المدينة**.
2. في علامة التبويب **المستندات الإلكترونية**، في علامة التبويب السريعة **التقارير الإلكترونية**، في الحقل **المبيعات وفاتورة النص الحر**، حدد **فاتورة مبيعات Peppol (Litware)**.
3. حدد **حفظ**.

![صفحة معلمات الحسابات المدينة، علامة التبويب المستندات الإلكترونية، علامة التبويب السريعة للتقارير الإلكترونية.](./media/er-quick-start3-configure-ar2.png)

## <a name="update-a-customer-record-by-adding-a-federal-tax-identification-code"></a><a name="ConfigureCustomer2"></a>تحديث سجل عميل عن طريق إضافة كود هوية ضريبة فيدرالية

1. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**.
2. في الصفحة **جميع العملاء**، حدد ارتباط حساب العمل **DE-014**.
3. في علامة التبويب السريعة **عام**، في الحقل **معرف الضريبة الفيدرالية**، أدخل **LITWARE-6789**.
4. حدد **حفظ**.

    ![DE-014 صفحة تفاصيل العميل.](./media/er-quick-start3-added-tax-id-value.png)

5. أغلق الصفحة **جميع العملاء**.

## <a name="process-a-customer-invoice-by-using-custom-er-configurations"></a><a name="ProcessInvoice2"></a>معالجة فاتورة عميل باستخدام تكوينات التقارير الإلكترونية المخصصة

### <a name="select-and-send-a-posted-invoice"></a>تحديد فاتورة مرحلة وإرسالها

1. انتقل إلى **الحسابات المدينة** \> **الفواتير** \> **جميع الفواتير ذات نص حر‬**.
2. في الصفحة **فاتورة النص الحر**، حدد الفاتورة التي قمت بإضافتها وترحيلها مسبقًا.
3. في جزء الإجراء، في المجموعة **المستند**، حدد **إرسال** \> **أصلي**.
4. أغلق الصفحة **فاتورة ذات النص الحر**.

### <a name="analyze-a-generated-e-invoice"></a>تحليل الفاتورة الإلكترونية التي تم إنشاؤها

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **وظائف إعداد التقارير الإلكترونية**.
2. في الصفحة **وظائف إعداد التقارير الإلكترونية**، حدد السجل الأحدث الذي يحتوي على وصف المهمة **إرسال XML الخاص بالفاتورة الإلكترونية**.
3. حدد **إظهار الملفات** للوصول إلى قائمة الملفات التي تم إنشاؤها.
4. حدد **فتح** لتنزيل ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه.
5. قم بتحليل ملف XML الخاص بالفاتورة الإلكترونية. لاحظ أنه وفقًا للتخصيص الخاص بك، يتضمن مخطط ضريبة العميل سمة XML **المخصصة** بالإضافة إلى سمات XML **schemeID** و **chemeAgencyID**. يتم تحديد قيمة سمة XML الجديدة هذه بواسطة معرف الضريبة الفيدرالية **LITWARE-6789** الذي تم إدخاله لأحد العملاء الذين تمت فوترتهم.

    ![معاينة ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه باستخدام التخصيصات الخاصة بك.](./media/er-quick-start3-e-invoice2.png)

## <a name="import-the-latest-versions-of-standard-er-configurations"></a><a name="ImportERConfigurations2"></a>استيراد الإصدارات الأحدث من تكوينات التقارير الإلكترونية القياسية

لكي تظل مجموعة تكوينات التقارير الإلكترونية القياسية في مثيل Finance الخاص بك [محدثة](general-electronic-reporting-manage-configuration-lifecycle.md)، فإنه يجب عليك استيراد إصدارات جديدة لها متى تصبح متوفرة في [مستودع](general-electronic-reporting.md#Repository) التقارير الإلكترونية الذي تم تكوينه لذلك المثيل.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **تكوينات التعريب**، في قسم **موفري التكوين**، حدد تجانب **Microsoft**، ثم حدد **المستودعات** لعرض قائمة المستودعات الخاصة بموفر Microsoft.
3. في صفحة **مستودعات التكوين**، حدد المستودع من نوع **عام**، ثم حدد **فتح**. في حالة مطالبتك بالتخويل للاتصال بخدمة Regulatory Configuration Service، اتبع إرشادات التخويل.
4. في صفحة **مستودع التكوين**، في شجرة التكوينات في الجزء الأيسر، حدد تكوين تنسيق **فاتورة مبيعات Peppol**.
5. في علامة التبويب السريعة **الإصدارات**، حدد الإصدار **32.6.7** الخاص بتكوين تنسيق التقارير الإلكترونية المحدد الذي تم إصداره لدعم الفواتير الإلكترونية للعميل بتنسيق PEPPOL BIS 3. لمزيد من المعلومات، راجع [KB4490320](https://support.microsoft.com/help/4490320/an-update-for-european-union-to-support-export-of-customers-electronic).
6. حدد **استيراد** لتنزيل الإصدار المحدد من المستودع العمومي إلى مثيل Finance الحالي.

![الإصدار 32.6.7 المحدد في صفحة مستودع التكوين.](./media/er-quick-start3-import-solution2.png)

للحصول على معلومات حول كيفية أتمتة هذه العملية، راجع [استيراد إصدارات تكوينات التقارير الإلكترونية المحدثة](er-download-updated-versions-global-repo.md).

### <a name="review-the-imported-er-configurations"></a>مراجعة تكوينات ER المستوردة

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **التكوينات**، حدد تجانب **تكوينات إعداد التقارير** .
3. قم بتوسيع علامة التبويب السريعة **مكونات التكوين**.
4. في شجرة التكوين الموجودة في الجزء الأيسر، قم بتوسيع **نموذج الفاتورة**. لاحظ أنه تم تغيير اسم **نموذج فاتورة العميل** إلى **نموذج الفاتورة** في أحد تكوينات نموذج بيانات التقارير الإلكترونية المستوردة.
5. في شجرة التكوين الموجودة في الجزء الأيسر، قم بتوسيع **تعيين نموذج الفاتورة**. لاحظ أنه تم تغيير اسم **تعيين نموذج فاتورة العميل** إلى **تعيين نموذج الفاتورة** في أحد تكوينات تعيين نموذج التقارير الإلكترونية المستوردة.
6. قم بتوسيع **فاتورة مبيعات UBL** \> **فاتورة مبيعات Peppol**.

لاحظ أنه، بالإضافة إلى تنسيق التقارير الإلكترونية الخاص بـ **فاتورة مبيعات Peppol** المحدد، تم استيراد الإصدارات الأحدث لتكوينات التقارير الإلكترونية الأخرى. نظرًا لأنه يتم نشر الإصدارات الجديدة من تكوينات التقارير الإلكترونية بشكل دائم إلى المستودع العالمي وLCS للمحافظة على توافق حلول التقارير الإلكترونية المقابلة مع المتطلبات الجديدة، فإنه تم استيراد أحدث إصدارات تكوين نموذج البيانات المطلوب وتكوينات تعيين نموذج الخاصة بها.

تأكد من توفر تكوينات التقارير الإلكترونية التالية، في النهاية، في شجرة التكوين:

- تكوين نموذج بيانات التقارير الإلكترونية الخاص بـ **نموذج الفاتورة**:

    - يحتوي الإصدار 206 (أو أحدث) على الإصدار 24 (أو أحدث) من مكون التقارير الإلكترونية لـ نموذج البيانات الذي يمثل بنية بيانات مجال عمل الفوترة. وقد تم استيراد تكوين التقارير الإلكترونية هذا كأصل لتكوين تعيين نموذج التقارير الإلكترونية **تعيين نموذج الفواتير** المتوفر الأحدث.

    ![الإصدار 206 في صفحة التكوينات.](./media/er-quick-start3-imported-solution2b1.png)

- تكوين تعيين نموذج التقارير الإلكترونية **تعيين نموذج الفاتورة**:

    - تم استيراد الإصدار 206.132 (أو أحدث) كأحدث تنفيذ للإصدار 206 خاص بتكوين نموذج بيانات التقارير الإلكترونية **نموذج الفاتورة**. يحتوي على مكونات متعددة للتقارير الإلكترونية لتعيين نموذج تصف كيفية ملء نموذج البيانات ببيانات التطبيق في وقت التشغيل.

    ![الإصدار 206.132 في صفحة التكوينات.](./media/er-quick-start3-imported-solution2b2.png)

- تكوين تنسيق التقارير الإلكترونية **لفاتورة مبيعات UBL**:

    - يحتوي الإصدار 32.6 على التنسيق ومكونات التقارير الإلكترونية لتعيين التنسيق. يحدد مكون التنسيق تخطيط التقرير. يحتوي مكون تعيين التنسيق على مصدر بيانات النموذج ويحدد كيفية استخدام مصدر البيانات هذا لملء تخطيط التقرير في وقت التشغيل. تم تكوين تنسيق التقارير الإلكترونية هذا لإنشاء الفواتير الإلكترونية بتنسيق UBL. تم استيراد هذا كأصل لتنسيق التقارير الإلكترونية **لفاتورة مبيعات Peppol** الذي تم تحديده للاستيراد.

- تكوين تنسيق التقارير الإلكترونية **لفاتورة مبيعات Peppol**:

    - يحتوي الإصدار 32.6.7 على تعيين التنسيق ومكونات التقارير الإلكترونية الخاصة بتعيين التنسيق التي تم تكوينها لإنشاء الفواتير الإلكترونية في تنسيق PEPPOL.

    ![الإصدار 32.6.7 في صفحة التكوينات.](./media/er-quick-start3-imported-solution2b3.png)

## <a name="adopt-the-changes-to-the-new-standard-er-configurations-in-your-custom-er-configurations"></a><a name="RebaseCustomERConfigurations"></a>تبنى التغييرات على تكوينات التقارير الإلكترونية القياسية الجديدة في التكوينات المخصصة للتقارير الإلكترونية.

### <a name="adopt-your-custom-er-data-model"></a>تبني نموذج البيانات المخصص للتقارير الإلكترونية

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الفاتورة**، وحدد **نموذج الفاتورة (Litware)**.
3. في علامة التبويب السريعة **إصدارات**، بالنسبة لإصدار المسودة **50.2** لتكوين نموذج البيانات المحدد، حدد **إعادة التعريف**.
4. في الحقل **الإصدار الهدف**، قم بتأكيد تحديد الإصدار **206** الخاص بتكوين نموذج بيانات التقارير الإلكترونية الأساسي، ثم حدد **موافق**.

    يتم إعادة ترقيم إصدار المسودة الخاص بتكوين نموذج بيانات التقارير الإلكترونية المخصص من **50.2** إلى **206.2** للإشارة إلى أنه يحتوي الآن على التخصيص الذي تم دمجه مع التغييرات في الإصدار الأخير (206) الخاص بتكوين نموذج بيانات التقارير الإلكترونية الأساسي.

    > [!NOTE]
    > يمكن التراجع عن إجراء إعادة التعريف. لإلغاء عملية إعادة التعريف هذه، حدد الإصدار **50.1** الخاص بالنموذج **نموذج الفاتورة (Litware)** في علامة التبويب السريعة **الإصدارات**، ثم حدد **الحصول على هذا الإصدار**. سيتم بعد ذلك إعادة ترقيم الإصدار 206.2 إلى **50.2**، وستتم مطابقة محتوى إصدار المسودة 50.2 مع محتوى الإصدار 50.1.

5. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 206.2 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 206.3، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين نموذج بيانات التقارير الإلكترونية المخصص.

![الإصدار 206.2 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-model2.png)

### <a name="adopt-your-custom-er-model-mapping"></a>تبني تعيين نموذج التقارير الإلكترونية المخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الفاتورة** \> **تعيين نموذج الفاتورة**، وحدد **تعيين نموذج الفاتورة (Litware)**.
3. في علامة التبويب السريعة **إصدارات**، بالنسبة لإصدار المسودة **50.19.2** لتكوين تعيين النموذج، حدد **إعادة التعريف**.
4. في الحقل **الإصدار الهدف**، قم بتأكيد تحديد الإصدار **206.132** الخاص بتكوين تعيين نموذج التقارير الإلكترونية الأساسي، ثم حدد **موافق**.

    يتم إعادة ترقيم إصدار المسودة الخاص بتكوين نموذج بيانات التقارير الإلكترونية المخصص من **50.19.2** إلى **206.132.2** للإشارة إلى أنه يحتوي الآن على التخصيص الذي تم دمجه مع التغييرات في الإصدار الأخير (206.132) الخاص بتكوين تعيين نموذج التقارير الإلكترونية الأساسي.

    لاحظ أنه تم اكتشاف بعض تعارضات تغيير العنوان الأساسي. يجب أن تقوم الآن بحل هذه التعارضات يدويًا.

    ![رسالة تعارض تغيير العنوان الأساسي في صفحة التكوينات.](./media/er-quick-start3-rebase-conflicts-model-mapping1.png)

5. في جزء الإجراء، حدد **المصمم**، ثم في قائمة التعيينات، حدد **فاتورة العميل**.
6. لكل تعارض في تغيير العنوان الأساسي، حدد **الاحتفاظ بالقيمة الخاصة**، لأنه يجب الاحتفاظ برقم إصدار نموذج البيانات المخصص الخاص بك لكل مكون تمت الإشارة إليه.

    ![تعارضات تغيير العنوان الأساسي في صفحة مصمم تعيين النموذج.](./media/er-quick-start3-rebase-conflicts-model-mapping2.png)

7. حدد **حفظ**، ثم أغلق صفحة **مصمم تعيين النموذج**.
8. في قائمة التعيينات، حدد **فاتورة المشروع**.
9. لكل تعارض في تغيير العنوان الأساسي، حدد **الاحتفاظ بالقيمة الخاصة**، لأنه يجب الاحتفاظ برقم إصدار نموذج البيانات المخصص الخاص بك لكل مكون تمت الإشارة إليه.
10. حدد **حفظ**، ثم أغلق صفحة **تعيينات النماذج**.

    > [!NOTE]
    > يمكن التراجع عن إجراء إعادة التعريف. لإلغاء عملية إعادة التعريف هذه، حدد الإصدار **50.19.1** الخاص بتعيين نموذج **تعيين نموذج الفاتورة (Litware)** في علامة التبويب السريعة **الإصدارات**، ثم حدد **الحصول على هذا الإصدار**. سيتم بعد ذلك إعادة ترقيم الإصدار 206.132.2 إلى **50.19.2**، وستتم مطابقة محتوى إصدار المسودة 50.19.2 مع محتوى الإصدار 50.19.1.

11. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 206.132.2 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 206.132.3، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين تعيين نموذج التقارير الإلكترونية المخصص.

![الإصدار 206.132.2 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-mapping2.png)

### <a name="adopt-your-custom-er-format"></a>تبني تنسيق التقارير الإلكترونية المخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوين في الجزء الأيسر، قم بتوسيع **نموذج الفاتورة** \> **فاتورة مبيعات UBL** \> **فاتورة مبيعات Peppol**، وحدد **فاتورة مبيعات Peppol (Litware)**.
3. في علامة التبويب السريعة **إصدارات**، بالنسبة لإصدار المسودة **11.2.2.2** لتكوين التنسيق المحدد، حدد **إعادة التعريف**.
4. في الحقل الإصدار **الهدف**، قم بتأكيد تحديد الإصدار **32.6.7** الخاص بتكوين تنسيق التقارير الإلكترونية الأساسي، ثم حدد **موافق**.

    يتم إعادة ترقيم إصدار المسودة الخاص بتكوين تنسيق التقارير الإلكترونية المخصص من **11.2.2.2** إلى **32.6.7.2** للإشارة إلى أنه يحتوي الآن على التخصيص الذي تم دمجه مع التغييرات في الإصدار الأخير (32.6.7) الخاص بتكوين تنسيق التقارير الإلكترونية الأساسي.

    لاحظ أنه تم اكتشاف بعض تعارضات تغيير العنوان الأساسي. يجب أن تقوم الآن بحل هذه التعارضات يدويًا.

5. في جزء الإجراءات، حدد **المصمم**.
6. لكل تعارض في تغيير العنوان الأساسي، حدد **الاحتفاظ بالقيمة الخاصة**، لأنه يجب الاحتفاظ برقم إصدار نموذج البيانات المخصص الخاص بك لكل مكون تمت الإشارة إليه.
7. حدد **حفظ**.
8. في علامة التبويب **تعيين**، حدد مصدر البيانات **الفاتورة** الخاص بنوع **النموذج**، ثم حدد **تحرير**.
9. في الحقل **إصدار**، حدد الإصدار **2** لنموذج البيانات المخصص الخاص بك، ثم حدد **موافق**.
10. حدد **حفظ**.

    > [!NOTE]
    > يمكن التراجع عن إجراء إعادة التعريف. لإلغاء عملية إعادة التعريف هذه، حدد الإصدار **11.2.2.1** الخاص بالتنسيق **فاتورة مبيعات (Litware)** في علامة التبويب السريعة **الإصدارات**، ثم حدد **الحصول على هذا الإصدار**. سيتم بعد ذلك إعادة ترقيم الإصدار 32.6.7.2 إلى **11.2.2.2**، وستتم مطابقة محتوى إصدار المسودة 11.2.2.2 مع محتوى الإصدار 11.2.2.1.

11. أغلق صفحة **مصمم المعادلة**.
12. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 32.6.7.2 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. يتم إضافة إصدار جديد قابل للتحرير، 32.6.7.3، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تكوين التقارير الإلكترونية المخصص.

![الإصدار 32.6.7.2 مكتمل في صفحة التكوينات.](./media/er-quick-start3-completed-custom-format2.png)

## <a name="process-a-customer-invoice-by-using-new-versions-of-the-custom-er-configurations"></a><a name="ProcessInvoice3"></a>معالجة فاتورة عميل باستخدام الإصدارات الجديدة من تكوينات التقارير الإلكترونية المخصصة

### <a name="select-and-send-a-posted-invoice"></a>تحديد فاتورة مرحلة وإرسالها

1. انتقل إلى **الحسابات المدينة** \> **الفواتير** \> **جميع الفواتير ذات نص حر‬**.
2. في الصفحة **فاتورة النص الحر**، حدد الفاتورة التي قمت بإضافتها وترحيلها مسبقًا.
3. في جزء الإجراء، في المجموعة **المستند**، حدد **إرسال** \> **أصلي**.

    > [!NOTE] 
    > ونظرًا لأنه لديك الآن إصدارين من تكوين تنسيق التقارير الإلكترونية الخاص بـ **فاتورة مبيعات Peppol (Litware)**، ولا يحتوي أي إصدار منهما على قيمة [تاريخ السريان](general-electronic-reporting.md#component-date-effectivity)، فإنه يتم استخدم الإصدار الأحدث لإنشاء فاتورة إلكترونية.

4. أغلق الصفحة **فاتورة ذات النص الحر**.

### <a name="analyze-a-generated-e-invoice"></a>تحليل الفاتورة الإلكترونية التي تم إنشاؤها

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **وظائف إعداد التقارير الإلكترونية**.
2. في الصفحة **وظائف إعداد التقارير الإلكترونية**، حدد السجل الأحدث الذي يحتوي على وصف المهمة **إرسال XML الخاص بالفاتورة الإلكترونية**.
3. حدد **إظهار الملفات** للوصول إلى قائمة الملفات التي تم إنشاؤها.
4. حدد **فتح** لتنزيل ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه.
5. قم بتحليل ملف XML الخاص بالفاتورة الإلكترونية. لاحظ أنه وفقًا للتخصيص الخاص بك، لا يزال يحتوي على مخطط ضريبة العميل سمة XML **المخصصة** بالإضافة إلى سمات XML **schemeID** و **chemeAgencyID**. بالإضافة إلى ذلك، نظرًا لأنه تم دمج التغييرات في الإصدار الجديد من تنسيق **فاتورة مبيعات UBL** الأساسي باستخدام التخصيص الخاص بك، فإنه تم تغيير نص عنصر XML **cbc:CustomizationID** من `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0` إلى `urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0`.

    ![معاينة ملف XML الخاص بالفاتورة الإلكترونية الذي تم إنشاؤه باستخدام التخصيصات.](./media/er-quick-start3-e-invoice3.png)

## <a name="additional-resources"></a>الموارد الإضافية

- [نظرة عامة حول التقارير الإلكترونية](general-electronic-reporting.md)
- [تنزيل تكوينات ER من Lifecycle Services](download-electronic-reporting-configuration-lcs.md)
- [تنزيل تكوينات ER من المستودع العمومي لخدمة التكوين](er-download-configurations-global-repo.md)
- [إنشاء فاتورة نص حر](../../../finance/accounts-receivable/create-free-text-invoice-new.md)
- [إنشاء حقول مخصصة والعمل باستخدامها](../../fin-ops/get-started/user-defined-fields.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
