---
title: ضبط تنسيق ER لإنشاء مستند إلكتروني مخصص
description: يوضح هذا الموضوع كيفية تعديل تنسيق التقارير الإلكترونية (ER) المقدمة من Microsoft بحيث تقوم بإنشاء مستند إلكتروني مخصص.
author: NickSelin
manager: AnnBe
ms.date: 06/22/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable, ERParameters, ERDataModelDesigner, ERModelMappingTable, ERModelMappingDesigner, EROperationDesigner, ERVendorTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 3c643c913d9bc9233c891709593dff995284e2e5
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/09/2021
ms.locfileid: "5568987"
---
# <a name="adjust-an-er-format-to-generate-a-custom-electronic-document"></a>ضبط تنسيق ER لإنشاء مستند إلكتروني مخصص

[!include[banner](../includes/banner.md)]

توضح الإجراءات الواردة في هذا الموضوع كيفية قيام مستخدم بدور مسؤول النظام أو مستشار وظيفة التقارير الإلكترونية بإجراء هذه المهام:

- تكوين معلمات [لإطار عمل التقارير الإلكترونية (ER)](general-electronic-reporting.md)
- استيراد تكوينات ER التي يتم توفيرها بواسطة Microsoft واستخدامها لإنشاء ملف دفع أثناء معالجة [مدفوعات المورد](../../../finance/cash-bank-management/tasks/vendor-payment-overview.md).
- إنشاء إصدار مخصص من تكوين تنسيق ER القياسي الذي يتم توفيره بواسطة Microsoft.
- تعديل تكوين التنسيق ER المخصص بحيث يقوم بإنشاء ملفات دفع تتوافق مع متطلبات بنك معين.
- تبني التغييرات التي يتم إجراؤها على تكوين التنسيق ER القياسي في تكوين تنسيق ER المخصص.

يمكن إجراء كافة الإجراءات التالية في شركة **GBSI**. الترميز غير مطلوب.

- [تكوين إطار عمل ER](#ConfigureFramework)

    - [تكوين معلمات التقارير الإلكترونية](#ConfigureParameters)
    - [تنشيط موفر تكوين ER](#ActivateProvider)

        - [مراجعة قائمة موفري تكوين ER](#ReviewProvidersList)
        - [إضافة موفر تكوين ER جديد](#ActivateProvider)
        - [تنشيط موفر تكوين ER](#ActivateAddedProvider)

- [استيراد تكوينات تنسيق ER القياسية](#ImportERSolution1)

    - [استيراد تكوينات تنسيق ER القياسية](#ImportERFormat1)
    - [مراجعة تكوينات ER المستوردة](#ReviewImportedERSolution)

- [تجهيز مدفوعات المورد للمعالجة](#PrepareVendorPayment)

    - [إضافة معلومات البنك لحساب مورد](#AddBankAccount)
    - [إدخال مدفوعات المورد](#EnterVendorPayment)

- [معالجة مدفوعات المورد باستخدام تنسيق ER القياسي](#ProcessVendorPayment1)

    - [إعداد طريقة الدفع الإلكترونية](#ConfigureMethodOfPayment1)
    - [معالجة مدفوعات مورد](#ProcessPayment1)

- [تخصيص تنسيق ER القياسي](#CustomizeProvidedFormat)

    - [إنشاء تنسيق مخصص](#DeriveProvidedFormat)
    - [تحرير تنسيق مخصص](#ConfigureDerivedFormat)
    - [تعليم تنسيق مخصص على أنه قابل للتشغيل](#MarkFormatRunnable)

- [معالجة مدفوعات المورد باستخدام تنسيق ER مخصص](#ProcessVendorPayment2)

    - [إعداد طريقة الدفع الإلكترونية](#ConfigureMethodOfPayment2)
    - [معالجة مدفوعات مورد](#ProcessPayment2)

- [استيراد إصدارات جديدة من تكوينات تنسيق ER القياسية](#ImportERSolution2)

    - [استيراد إصدارات جديدة من تكوينات ER القياسية](#ImportERFormat2)
    - [مراجعة تكوينات تنسيق ER المستوردة](#ReviewImportedERFormat)

- [تبني التغييرات في الإصدار الجديد من تنسيق مستورد في تنسيق مخصص](#AdoptNewBaseVersion)

    - [إكمال إصدار المسودة الحالي لتنسيق مخصص](#CompleteDerivedFormat)
    - [إعادة تعريف تنسيق مخصص إلى إصدار أساسي جديد](#RebaseDerivedFormat)
    - [معالجة مدفوعات المورد باستخدام تنسيق ER معاد تعريفه](#ProcessPayment3)

- [الموارد الإضافية](#References)

## <a name="configure-the-er-framework"></a><a id="ConfigureFramework"></a>تكوين إطار عمل ER

كمستخدم بدور المستشار الوظيفي للتقارير الإلكترونية، يجب عليك تكوين مجموعة صغيرة من معلمات ER قبل البدء في استخدام الإطار الأساسي ER لتصميم إصدار مخصص من التنسيق ER القياسي.

### <a name="configure-er-parameters"></a><a id="ConfigureParameters"></a>تكوين معلمات التقارير الإلكترونية

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **الارتباطات المتعلقة**، حدد **معلمات التقارير الإلكترونية**.
3. في صفحة **معلمات التقارير الإلكترونية**، على علامة التبويب **عام**، عيّن الخيار **تمكين وضع التصميم** إلى **نعم**.
4. في علامة التبويب **المرفقات**، عيّن المعلمات التالية:

    - في حقل **التكوينات**، حدد نوع **الملف** لشركة **USMF**.
    - في حقول **أرشيف الوظيفة** و **المؤقت** و **الأساس** و **أخرى**، حدد نوع **الملف**.

لمزيد من المعلومات حول معلمات ER ، راجع [تكوين إطار عمل ER](electronic-reporting-er-configure-parameters.md).

### <a name="activate-an-er-configuration-provider"></a><a id="ActivateProvider"></a>تنشيط موفر تكوين ER

يتم تعليم كل تكوين ER تمت إضافته باعتباره مملوكا لموفر تكوين ER. يتم استخدام موفر تكوين ER الذي تم تنشيطه في مساحة عمل **التقارير الإلكترونية** لهذا الغرض. بالتالي، يجب عليك تنشيط موفر تكوين ER في مساحة عمل **التقارير الإلكترونية** قبل البدء في إضافة تكوينات ER أو تحريرها.

> [!NOTE]
> يمكن لمالك تكوين ER فقط تحريره. بالتالي، قبل تحرير تكوين ER، يجب تنشيط موفر تكوين ER المناسب في مساحة عمل **التقارير الإلكترونية**.

#### <a name="review-the-list-of-er-configuration-providers"></a><a id="ReviewProvidersList"></a>مراجعة قائمة موفري تكوين ER

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **الارتباطات المتعلقة**، حدد **موفري التكوين** .
3. في صفحة **جدول موفري التكوين**، يتضمن كل سجل موفر اسمًا وعنوان URL فريدين. راجع محتويات هذه الصفحة. في حالة وجود سجل لـ **Litware, Inc.** (`https://www.litware.com`) بالفعل، فتخطي الإجراء التالي، [إضافة موفر تكوين ER جديد](#ActivateProvider).

#### <a name="add-a-new-er-configuration-provider"></a><a id="ActivateProvider"></a>إضافة موفر تكوين ER جديد

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **الارتباطات المتعلقة**، حدد **موفري التكوين** .
3. في صفحة **موفري التكوين**، حدد **جديد**.
4. في حقل **الاسم**، أدخل **Litware, Inc**.
5. في الحقل **عنوان الإنترنت**، أدخل `https://www.litware.com`.
6. حدد **حفظ**.

#### <a name="activate-an-er-configuration-provider"></a><a id="ActivateAddedProvider"></a>تنشيط موفر تكوين ER

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **تكوينات التعريب**، في القسم **موفري التكوين**، حدد تجانب **Litware, Inc.** ثم حدد **تعيين نشط**.

لمزيد من المعلومات حول موفري تكوين ER، راجع [إنشاء موفري التكوين ووضع علامة عليهم كنشطين](tasks/er-configuration-provider-mark-it-active-2016-11.md).

## <a name="import-the-standard-er-format-configurations"></a><a id="ImportERSolution1"></a>استيراد تكوينات تنسيق ER القياسية

### <a name="import-the-standard-er-configurations"></a><a id="ImportERFormat1"></a>استيراد تكوينات تنسيق ER القياسية

لإضافة تكوينات ER القياسية إلى المثيل الحالي من Microsoft Dynamics 365 Finance، يجب استيرادها من [مستودع](general-electronic-reporting.md#Repository) ERالذي تم تكوينه لهذا المثيل.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **تكوينات التعريب**، في قسم **موفري التكوين**، حدد تجانب **Microsoft**، ثم حدد **المستودعات** لعرض قائمة المستودعات الخاصة بموفر Microsoft.
3. في صفحة **مستودعات التكوين**، حدد المستودع من نوع **عام**، ثم حدد **فتح**. في حالة مطالبتك بالتخويل للاتصال بخدمة Regulatory Configuration Service، اتبع إرشادات التخويل.
4. في صفحة **مستودع التكوين**، في شجرة التكوينات في الجزء الأيسر، حدد تكوين تنسيق **BACS (UK)**.
5. على علامة التبويب السريعة **إصدارات**، حدد الإصدار **1.1** لتكوين تنسيق ER المحدد.
6. حدد **استيراد** لتنزيل الإصدار المحدد من المستودع العمومي إلى مثيل Finance الحالي.

![صفحة مستودع التكوين](./media/er-quick-start2-import-solution1.png)

> [!TIP]
> إذا كانت لديك مشكلة في الوصول إلى [المستودع العمومي](er-download-configurations-global-repo.md)، فيمكنك [تنزيل التكوينات](download-electronic-reporting-configuration-lcs.md) من Microsoft Dynamics Lifecycle Services (LCS) بدلا من ذلك.

### <a name="review-the-imported-er-configurations"></a><a id="ReviewImportedERSolution"></a>مراجعة تكوينات ER المستوردة

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **التكوينات**، حدد تجانب **تكوينات إعداد التقارير** .
3. في صفحة **التكوينات**، في شجرة التكوينات، الجزء الأيسر، وسَّع **نموذج الدفع**.
4. لاحظ أنه، بالإضافة إلى تنسيق ER **BACS (UK)** المحدد، تم استيراد تكوينات ER الأخرى. تأكد من توفر تكوينات ER التالية في شجره التكوين:

    - **نموذج الدفع** -يحتوي هذا التكوين على مكون ER [نموذج البيانات](general-electronic-reporting.md#data-model-and-model-mapping-components) الذي يمثل بنية البيانات الخاصة بمجال أعمال الدفع.
    - **تعيين نموذج الدفع 1611** – يحتوي هذا التكوين على مكون ER الخاص بـ [تعيين النموذج](general-electronic-reporting.md#data-model-and-model-mapping-components) الذي يوضح كيفية ملء نموذج البيانات ببيانات التطبيق في وقت التشغيل.
    - **BACS (UK)** – يحتوي هذا التكوين على [التنسيق](general-electronic-reporting.md#FormatComponentOutbound) ومكونات ER لتعيين التنسيق. يحدد مكون التنسيق تخطيط التقرير. يحتوي مكون تعيين التنسيق على مصدر بيانات النموذج ويحدد كيفية ملء تخطيط التقرير باستخدام مصدر البيانات هذا في وقت التشغيل.

![صفحة التكوينات](./media/er-quick-start2-imported-solution1.png)

## <a name="prepare-a-vendor-payment-for-processing"></a><a id="PrepareVendorPayment"></a>تجهيز مدفوعات المورد للمعالجة

### <a name="add-bank-information-for-a-vendor-account"></a><a id="AddBankAccount"></a>إضافة معلومات البنك لحساب مورد

يجب إضافة معلومات البنك لحساب مورد والذي ستتم الإشارة إليه لاحقا في عملية دفع مسجلة.

1. انتقل إلى **الحسابات الدائنة** \> **الموردون** \> **كافة الموردين**.
2. في صفحة **كافة الموردين**، حدد حساب المورد **GB_SI_000001**، ثم، في جزء الإجراءات، في علامة تبويب **المورد**، في مجموعة **الإعداد**، حدد **الحسابات البنكية**.
3. في صفحة **الحسابات البنكية للمورد**، حدد **جديد**، ثم أدخل المعلومات التالية:

    1. في الحقل **حساب البنك** أدخل **GBP OPER**.
    2. في حقل **مجموعات البنك**، حدد **BankGBP**.
    3. في الحقل **رقم حساب البنك** أدخل **202015**.
    4. في حقل **رمز SWIFT**، أدخل <a id="DefineSWIFTCode"></a>**CHASDEFXXXX**.
    5. في حقل **IBAN**، أدخل **GB33BUKB20201555555555**.
    6. في حقل **رقم التوجيه**، احتفظ بالقيمة الافتراضية، <a id="DefineRoutingNumber"></a>**123456**.

    ![صفحة الحسابات البنكية للمورد](./media/er-quick-start2-bank-account.png)

4. حدد **حفظ**.
5. قم بإغلاق الصفحة.
6. في صفحة **كافة الموردين**، افتح حساب المورد **GB_SI_000001**.
7. في صفحة تفاصيل المورد، حدد **تحرير** لجعل الصفحة قابلة للتحرير، إذا كان ذلك مطلوبًا.
8. في علامة التبويب السريعة **المدفوعات**، في حقل **الحساب البنكي**، حدد **GBP OPER**.

    ![صفحة تفاصيل المورد](./media/er-quick-start2-bank-account-reference.png)

9. حدد **حفظ**.
10. قم بإغلاق الصفحة.

### <a name="enter-a-vendor-payment"></a><a id="EnterVendorPayment"></a>إدخال مدفوعات المورد

يجب إدخال مدفوعات مورد جديدة باستخدام [مقترح دفع](https://docs.microsoft.com/dynamics365/finance/accounts-payable/create-vendor-payments-payment-proposal).

1. انتقل إلى **الحسابات الدائنة** \> **المدفوعات** \> **‏‫دفتر يومية المدفوعات للمورد‬**.
2. في صفحة **دفتر يومية المدفوعات للمورد‬**، حدد **جديد**.
3. في حقل **الاسم**، حدد **VendPay**.
4. حدد **البنود**.
5. حدد **مقترح الدفع** \> **إنشاء مقترح الدفع**.
6. في مربع الحوار **مقترح دفع المورد**، قم بتكوين الشروط لتصفية السجلات الخاصة بحساب المورد **GB_SI_000001** فقط، ثم حدد **موافق**.
7. حدد السطر الخاص بفاتورة **00000007_Inv**، ثم حدد **إنشاء دفع**.

    ![مربع حوار مقترح دفع المورد](./media/er-quick-start2-payment-proposal.png)

8. تحقق من أن الدفع الذي تم إدخاله قد تم تكوينه لاستخدام أسلوب الدفع **الإلكتروني**.

    ![صفحة مدفوعات المورد](./media/er-quick-start2-payment-line.png)

## <a name="process-a-vendor-payment-by-using-the-standard-er-format"></a><a id="ProcessVendorPayment1"></a>معالجة مدفوعات المورد باستخدام تنسيق ER القياسي

### <a name="set-up-the-electronic-payment-method"></a><a id="ConfigureMethodOfPayment1"></a>إعداد طريقة الدفع الإلكترونية

يجب تكوين طريقة الدفع الإلكترونية لكي يمكن استخدام تكوين تنسيق ER المستورد.

1. انتقل إلى **الحسابات الدائنة** \> **إعداد الدفع** \> **طرق الدفع**.
2. في صفحة **طرق الدفع - الموردون**، حدد طريقة الدفع **الإلكترونية** في الجزء الأيمن.
3. حدد **تحرير**.
4. في علامة التبويب السريعة **تنسيقات الملف**، قم بتعيين خيار **تنسيق التصدير الإلكتروني العام‬** على **نعم**.
5. في حقل **تكوين تنسيق التصدير**، حدد تكوين التنسيق **BACS (UK)**.

    ![طرق الدفع - صفحة الموردون](./media/er-quick-start2-method-of-payment1.png)

6. حدد **حفظ**.

### <a name="process-a-vendor-payment"></a><a id="ProcessPayment1"></a>معالجة مدفوعات مورد

1. انتقل إلى **الحسابات الدائنة** \> **المدفوعات** \> **‏‫دفتر يومية المدفوعات للمورد‬**.
2. في صفحة **‏‫دفتر يومية المدفوعات للمورد‬** ، حدد دفتر يومية المدفوعات الذي قمت بإضافته مسبقا، ثم حدد **البنود**.
3. في صفحة **مدفوعات المورد**، حدد **إنشاء مدفوعات**.
4. في مربع الحوار **إنشاء مدفوعات**، أدخل المعلومات التالية:

    - في حقل **طريقة الدفع** حدد **إلكتروني**.
    - في الحقل **حساب البنك** حدد **GBSI OPER**.

5. حدد **موافق**.
6. في مربع الحوار **معلمات التقرير الإلكتروني**، قم بتعيين خيار **طباعة تقرير التحكم** إلى **نعم**، ثم حدد **موافق**.

    ![صفحة حوار معلمات التقرير الإلكتروني](./media/er-quick-start2-payment-dialog1.png)

    > [!NOTE]
    > بالإضافة إلى ملف الدفع، يمكنك الآن إنشاء تقرير التحكم.

7. قم بتنزيل الملف المضغوط من نوع zip، ثم قم باستخراج الملفات التالية منه:

    - تقرير التحكم بتنسيق Excel
    - ملف الدفع بتنسيق TXT

        لاحظ أنه وفقًا [لبنية](#PositionRoutingNumber) تنسيق ER الموفّر، يبدأ سطر الدفع في الملف الذي تم إنشاؤه برقم التوجيه الذي تم [تحديده](#DefineRoutingNumber) للحساب البنكي المكوّن.

        ![ملف الدفع بتنسيق TXT](./media/er-quick-start2-payment-file1.png)

## <a name="customize-the-standard-er-format"></a><a id="CustomizeProvidedFormat"></a>تخصيص تنسيق ER القياسي

بالنسبة للمثال الموضح في هذا القسم، فإنك ترغب في استخدام تكوينات ER التي يتم توفيرها بواسطة Microsoft لإنشاء ملفات دفع المورد بتنسيق BACS، ولكن يجب إضافة تخصيص لدعم متطلبات بنك معين. كما أنك تريد أن تكون قادرًا على ترقيه التنسيق المخصص عند توفر إصدارات جديدة من تكوينات ER. مع ذلك، تريد أن تكون قادرًا على إجراء الترقية بأقل تكلفة.

في هذه الحالة، بصفتك مندوب لـ Litware, Inc.، يجب إنشاء (اشتقاق) تكوين تنسيق ER جديد باستخدام التكوين **BACS (UK)** المقدم من Microsoft كأساس.

### <a name="create-a-custom-format"></a><a id="DeriveProvidedFormat"></a>إنشاء تنسيق مخصص

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الدفع**، ثم حدد **BACS (UK)**. سوف تستخدم Litware, Inc. الإصدار 1.1 من تكوين تنسيق ER هذا كأساس للإصدار المخصص.
3. حدد **إنشاء تكوين** لفتح مربع الحوار المنسدل. يمكنك استخدام مربع الحوار هذا لإنشاء تكوين جديد لتنسيق دفع مخصص.
4. في مجموعة الحقول **الجديدة**، حدد خيار **مشتق من الاسم: BACS (UK), Microsoft**.
5. في حقل **الاسم**، أدخل **‏‫BACS (UK مخصص)**.

    ![إنشاء مربع حوار القائمة المنسدلة للتكوين](./media/er-quick-start2-add-derived-format.png)

6. حدد **إنشاء التكوين**.

يتم إنشاء الإصدار 1.1.1 من تكوين تنسيق ER **BACS (UK مخصص)**. هذا الإصدار [بالحالة](general-electronic-reporting.md#component-versioning) **مسودة** ويمكن تحريره. يطابق المحتوي الحالي لتنسيق ER الخاص بك محتوي التنسيق الذي توفره Microsoft.

![صفحة التكوينات](./media/er-quick-start2-derived-format-configuration1.png)

### <a name="edit-a-custom-format"></a><a id="ConfigureDerivedFormat"></a>تحرير تنسيق مخصص

يجب تكوين التنسيق المخصص الخاص بك بحيث يفي بالمتطلبات الخاصة بالبنك. على سبيل المثال، قد يتطلب أحد البنك أن تتضمن ملفات الدفع التي يتم إنشاؤها كود جمعية الاتصالات المالية بين البنوك العالمية (سويفت) للبنك الذي تم تعيينه لدور الوكيل في دفع المورد الذي تمت معالجته. أكواد سويفت هي أكواد بنكية دولية تحدد البنوك الخاصة بالعالم. وتعرف أيضا بأكواد معرفات البنك (BIC). يجب أن يكون طول كود سويفت 11 حرفًا، ويجب إدخاله في بداية كل سطر دفع في أي ملف دفع تم إنشاؤه.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الدفع**، ثم حدد **BACS (UK مخصص)**.
3. على علامة التبويب السريعة **إصدارات**، حدد الإصدار **1.1.1** للتكوين المحدد.
4. حدد **المصمم**.
5. في صفحة **مصمم التنسيق**، حدد **إظهار التفاصيل** لعرض مزيد من المعلومات حول عناصر التنسيق.
6. قم بتوسيع ومراجعة العناصر التالية:

    - عنصر **BACSReportsFolder** لنوع **المجلد**. يتم استخدام هذا العنصر لإنشاء إخراج بتنسيق ZIP.
    - عنصر **الملف** لنوع **الملف**. يتم استخدام هذا العنصر لإنشاء ملف دفع بتنسيق TXT.
    - عنصر **الحركات** لنوع **التسلسل**. يتم استخدام هذا العنصر لإنشاء سطر دفع فردي في ملف الدفع.
    - عنصر **الحركة** لنوع **التسلسل**. يتم استخدام هذا العنصر لإنشاء حقول فردية في ملف دفع فردي.

7. حدد عنصر **الحركة**.

    ![عنصر الحركة في مصمم عمليات ER](./media/er-quick-start2-derived-format0.png)

    > [!NOTE]
    > يتم تكوين التقرير المقدم بحيث <a id="PositionRoutingNumber"></a>يبدأ كل سطر من سطور الدفع برقم التوجيه البنكي. يتم استخدام عنصر التنسيق **vendBankRouteNum** لهذا الغرض. 

8. حدد **إضافة**، ثم حدد نوع **سلسلة\\نصية** لعنصر التنسيق الذي تقوم بإضافته:

    1. في حقل **الاسم**، أدخل **vendBankSWIFT**.
    2. في حقل **الحد الأقصى للطول**، أدخل **11**.
    3. في حقل **الحد الأقصى للطول**، أدخل **11**.
    4. حدد **موافق**.

    > [!NOTE]
    > سيتم استخدام عنصر **vendBankSWIFT** لإدخال كود سويفت لبنك المورد في الملف الذي تم إنشاؤه.

9. في شجرة بنية التنسيق، حدد **vendBankSWIFT**
10. حدد **تحريك لأعلى** لتحريك عنصر التنسيق المحدد بمقدار مستوى واحد لأعلى. كرر هذه الخطوة حتى يصبح عنصر **vendBankSWIFT** هو <a id="PositionSWIFTCode"></a>العنصر الأول ضمن عنصر **الحركة الأصلية**.

    ![vendBankSWIFT كعنصر أول ضمن الحركة في مصمم عمليات ER](./media/er-quick-start2-derived-format1.png)

11. بينما ما يزال **vendBankSWIFT** محددًا في شجرة بنية التنسيق، حدد علامة التبويب **تعيين**، ثم قم بتوسيع مصدر بيانات **النموذج**.
12. قم بتوسيع **model.Payment** \> **model.Payment.CreditorAgent**، وحدد حقل مصدر البيانات **model.Payment.CreditorAgent.BICFI**. ويعرض حقل مصدر البيانات هذا كود سويفت للبنك الخاص بالمورد والذي تم تعيينه لدور الوكيل في مدفوعات المورد التي تمت معالجتها.
13. حدد **ربط**. عنصر التنسيق **vendBankSWIFT** مرتبط الآن بحقل مصدر البيانات **model.Payment.CreditorAgent.BICFI**، لكي يمكن إدخال أكواد سويفت في ملفات الدفع التي تم إنشاؤها

    ![عنصر التنسيق vendBankSWIFT مرتبطة الآن بحقل مصدر البيانات model.Payment.CreditorAgent.BICFI في مصمم عمليات ER](./media/er-quick-start2-derived-format2.png)

14. حدد **حفظ**.
15. أغلق صفحة المصمم.

### <a name="mark-a-custom-format-as-runnable"></a><a id="MarkFormatRunnable"></a>تعليم تنسيق مخصص على أنه قابل للتشغيل

والآن بعد أن تم إنشاء الإصدار الأول من التنسيق المخصص وأصبح بالحالة **مسودة**، يمكنك تشغيله لأغراض الاختبار. لتشغيل التقرير، يجب عليك معالجة دفع المورد باستخدام طريقة الدفع التي تشير إلى تنسيق ER المخصص. افتراضيًا، عندما تستدعي أحد تنسيقات ER من التطبيق، يتم فقط استخدام الإصدارات التي بالحالة **مكتمل** أو **مشترك** والتي تتم [مراعاتها](general-electronic-reporting.md#component-versioning). يساعد هذا السلوك في منع استخدام تنسيقات ER التي لها تصميمات غير مكتملة. مع ذلك، بالنسبة لتشغيل الاختبارات الخاصة بك، يمكنك إجبار التطبيق على استخدام إصدار تنسيق ER بالحالة **مسودة**. وبهذه الطريقة، يمكنك تعديل إصدار التنسيق الحالي إذا كانت هناك أية تعديلات مطلوبة. لمزيد من المعلومات، راجع [قابلية التطبيق‬](electronic-reporting-destinations.md#applicability).

لاستخدام إصدار المسودة لتنسيق ER، يجب وضع علامة بوضوح على تنسيق ER.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في جزء الإجراءات، في علامة التبويب **التكوينات**، في مجموعة **الإعدادات المتقدمة**، حدد **معلمات المستخدمين**.
3. في مربع الحوار **معلمات المستخدم**، قم بتعيين خيارات **إعدادات التشغيل** إلى **نعم**، ثم حدد **موافق**.
4. حدد **تحرير** لتجعل الصفحة الحالية قابلة للتحرير، حسب الحاجة.
5. في شجره التكوين الموجودة في الجزء الأيمن، حدد **BACS (UK مخصص)**.
6. عيّن الخيار **تشغيل المسودة** إلى **نعم**.

    ![خيار تشغيل المسودة في صفحة التكوينات](./media/er-quick-start2-derived-format-configuration2.png)

## <a name="process-a-vendor-payment-by-using-the-custom-er-format"></a><a id="ProcessVendorPayment2"></a>معالجة مدفوعات المورد باستخدام تنسيق ER مخصص

### <a name="set-up-the-electronic-payment-method"></a><a id="ConfigureMethodOfPayment2"></a>إعداد طريقة الدفع الإلكترونية

يجب تكوين طريقة الدفع الإلكترونية حتى يتم استخدام تنسيق ER المخصص لمعالجة مدفوعات المورد.

1. انتقل إلى **الحسابات الدائنة** \> **إعداد الدفع** \> **طرق الدفع**.
2. في صفحة **طرق الدفع - الموردون**، حدد طريقة الدفع **الإلكترونية** في الجزء الأيمن.
3. حدد **تحرير**.
4. في علامة التبويب السريعة **تنسيق الملف**، قم بتعيين خيار **تنسيق التصدير الإلكتروني العام‬** على **نعم**.
5. في حقل **تكوين تنسيق التصدير**، حدد تكوين التنسيق **BACS (UK مخصص)**.

    ![طرق الدفع - صفحة الموردون](./media/er-quick-start2-method-of-payment2.png)

6. حدد **حفظ**.

### <a name="process-a-vendor-payment"></a><a id="ProcessPayment2"></a>معالجة مدفوعات مورد

1. انتقل إلى **الحسابات الدائنة** \> **المدفوعات** \> **‏‫دفتر يومية المدفوعات للمورد‬**.
2. في صفحة **‏‫دفتر يومية المدفوعات للمورد‬**، حدد دفتر يومية المدفوعات الذي قمت بإنشائه سابقًا.
3. حدد **البنود**.
4. في صفحة **مدفوعات المورد**، أعلى الشبكة، حدد **حالة الدفع** \> **بلا**.
5. حدد **إنشاء الدفع**.
6. في مربع الحوار **إنشاء مدفوعات**، أدخل المعلومات التالية:

    - في حقل **طريقة الدفع** حدد **إلكتروني**.
    - في الحقل **حساب البنك** حدد **GBSI OPER**.

7. حدد **موافق**.
8. في مربع الحوار **معلمات التقرير الإلكتروني**، قم بتعيين خيار **طباعة تقرير التحكم** إلى **نعم**، ثم حدد **موافق**.

    > [!NOTE]
    > بالإضافة إلى ملف الدفع، يمكنك إنشاء تقرير التحكم فقط.

9. قم بتنزيل الملف المضغوط من نوع zip، ثم قم باستخراج الملفات التالية منه:

    - تقرير التحكم بتنسيق Excel
    - ملف الدفع بتنسيق TXT

        لاحظ أنه وفقا للبنية الخاصة بتنسيق ER المخصص، [يبدأ](#PositionSWIFTCode) سطر الدفع في الملف الذي تم إنشاؤه الآن بكود سويفت الذي تم [إدخاله](#DefineSWIFTCode) للحساب البنكي للمورد الذي تمت معالجة الدفع الخاص به.

        ![ملف الدفع بتنسيق TXT](./media/er-quick-start2-payment-file2.png)

## <a name="import-new-versions-of-the-standard-er-format-configurations"></a><a id="ImportERSolution2"></a>استيراد إصدارات جديدة من تكوينات تنسيق ER القياسية

بالنسبة للمثال الموضح في هذا القسم، سوف تتلقى إخطارًا حول مقالة قاعدة المعارف [KB 3763330](https://fix.lcs.dynamics.com/Issue/Details?kb=3182046). يعلمك هذا الإخطار بالإصدار الجديد من تنسيق ER **BACS (UK مخصص)** الذي تم نشره بواسطة Microsoft. بالإضافة إلى تقرير التحكم، يتيح هذا الإصدار الجديد للمستخدمين إنشاء تقرير إخطار الدفع وتقرير إشعار الحضور بينما تجري معالجة دفع المورد. تريد الآن بدء استخدام هذه الوظيفة.

### <a name="import-new-versions-of-the-standard-er-configurations"></a><a id="ImportERFormat2"></a>استيراد إصدارات جديدة من تكوينات ER القياسية

لإضافة إصدارات جديدة لتكوينات ER إلى مثيل Finance الحالي، يجب استيرادها من [مستودع](general-electronic-reporting.md#Repository) ERالذي قمت بتكوينه.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **تكوينات التعريب**، في قسم **موفري التكوين**، حدد تجانب **Microsoft**، ثم حدد **المستودعات** لعرض قائمة المستودعات الخاصة بموفر Microsoft.
3. في صفحة **مستودعات التكوين**، حدد المستودع من نوع **عام**، ثم حدد **فتح**. في حالة مطالبتك بالتخويل للاتصال بخدمة Regulatory Configuration Service، اتبع إرشادات التخويل.
4. في صفحة **مستودع التكوين**، في شجرة التكوينات في الجزء الأيسر، حدد تكوين تنسيق **BACS (UK)**.
5. على علامة التبويب السريعة **إصدارات**، حدد الإصدار **3.3** لتكوين تنسيق ER المحدد.
6. حدد **استيراد** لتنزيل الإصدار المحدد من المستودع العمومي إلى مثيل Finance الحالي.

![صفحة مستودع التكوين](./media/er-quick-start2-import-solution2.png)

> [!TIP]
> إذا كانت لديك مشكلة في الوصول إلى [المستودع العمومي](er-download-configurations-global-repo.md)، فيمكنك [تنزيل التكوينات](download-electronic-reporting-configuration-lcs.md) من LCS بدلا من ذلك.

### <a name="review-the-imported-er-format-configurations"></a><a id="ReviewImportedERFormat"></a>مراجعة تكوينات تنسيق ER المستوردة

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **التكوينات**، حدد تجانب **تكوينات إعداد التقارير** .
3. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الدفع**، ثم حدد **BACS (UK)**.
4. في علامة التبويب السريعة **الإصدارات**، حدد الإصدار **3.3**.
5. حدد **المصمم**.
6. في صفحة **مصمم التنسيق**، قم بتوسيع عنصر التنسيق **BACSReportsFolder**.
7.  لاحظ أن الإصدار 3.3 يحتوي على عنصر التنسيق **PaymentAdviceReport** الذي يُستخدم في إنشاء تقرير إخطار الدفع عند معالجة مدفوعات المورد.

    ![عنصر التنسيق PaymentAdviceReport في مصمم عمليات ER](./media/er-quick-start2-imported-solution2.png)

8. أغلق صفحة المصمم.

## <a name="adopt-the-changes-in-the-new-version-of-an-imported-format-in-a-custom-format"></a><a id="AdoptNewBaseVersion"></a>تبني التغييرات في الإصدار الجديد من تنسيق مستورد في تنسيق مخصص

### <a name="complete-the-current-draft-version-of-a-custom-format"></a><a id="CompleteDerivedFormat"></a>إكمال إصدار المسودة الحالي لتنسيق مخصص

إذا كنت تريد الاحتفاظ بالحالة الحالية لتنسيقك المخصص، فقم بإكمال إصدار المسودة 1.1.1 بتغيير حالته من **مسودة** إلى **مكتمل**.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في الصفحة **تكوينات الترجمة**، في قسم **التكوينات**، حدد تجانب **تكوينات إعداد التقارير** .
3. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الدفع**، ووسِّع **BACS (UK)**، ثم حدد **BACS (UK مخصص)**.
4. في علامة التبويب السريعة **الإصدارات**، حدد **تغيير الحالة** \> **مكتمل**، ثم حدد **موافق**.

يتم تغيير حالة الإصدار 1.1.1 من **مسودة** إلى **مكتمل**، ويصبح الإصدار للقراءة فقط. تمت إضافة إصدار جديد قابل للتحرير، 1.1.2، بالحالة **مسودة**. يمكنك استخدام هذا الإصدار لإجراء مزيد من التغييرات في تنسيق ER المخصص.

### <a name="rebase-a-custom-format-to-a-new-base-version"></a><a id="RebaseDerivedFormat"></a>إعادة تعريف تنسيق مخصص إلى إصدار أساسي جديد

لبدء استخدام الوظيفة الجديدة الخاصة بالإصدار 3.3 من تنسيق **BACS (UK)** في التخصيص الخاص بك، يجب تغيير إصدار التكوين الأساسي للتكوين المخصص، **BACS (UK مخصص)**. تُعرف هذه العملية باسم [إعادة تعيين الأساس](general-electronic-reporting.md#upgrading-a-format-selecting-a-new-version-of-base-format-rebase). بدلاً من الإصدار 1.1 من **BACS (UK)**، استخدم الإصدار 3.3.

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيسر، وسَّع **نموذج الدفع**، ثم حدد **BACS (UK مخصص)**.
3. في علامة التبويب السريعة **الإصدارات**، حدد الإصدار **1.1.2**، ثم حدد **إعادة تعريف**.
4. في مربع الحوار **إعادة تعريف**، في حقل **الإصدار الهدف**، حدد الإصدار **3.3** من التكوين الأساسي لتطبيقه على أنه الأساس الجديد واستخدمه لتحديث التكوين.

    ![مربع الحوار "إعادة تعريف"](./media/er-quick-start2-rebase1.png)

5. حدد **موافق**.
6. لاحظ أنه تم تغيير رقم مسودة الإصدار من **1.1.2** إلى **3.3.2** لعكس التغيير في الإصدار الأساسي.

    عند دمج الإصدار المخصص والإصدار الأساسي الجديد، قد يتم اكتشاف بعض التعارضات بسبب تغييرات التنسيق التي لا يمكن دمجها تلقائيًا.

    ![تكوين معاد تعريفه مع وجود تعارضات في صفحة التكوينات](./media/er-quick-start2-rebase2.png)

    في حالة اكتشاف تعارضات، يجب حلها يدويًا في مصمم التنسيق.

7. في علامة التبويب السريعة **الإصدارات**، حدد الإصدار **3.3.2**.
8. حدد **المصمم**.
9. في صفحة **مصمم التنسيق**، في علامة التبويب السريعة **التفاصيل**، حدد سجل تعارضات إعادة التعريف، ثم حدد **تطبيق القيمة الأساسية**.

    ![سجل تعارضات إعادة التعريف في مصمم عمليات ER](./media/er-quick-start2-rebase3.png)

10. حدد **حفظ**.

    يجب ألا يظهر سجل تعارضات إعادة التعريف في علامة التبويب السريعة **التفاصيل**.

    ![حل التعارضات في مصمم عمليات ER](./media/er-quick-start2-rebase4.png)

    > [!NOTE]
    > لقد قمت بحل التعارض عن طريق التأكيد على أنه يجب استخدام الإصدار 3 من النموذج الأساسي في تنسيق ER هذا.

11. قم بتوسيع **BACSReportsFolder** \> **الملف** \> **الحركات** \> **الحركة**.
12. في علامة التبويب **تعيين**، لاحظ أن الإصدار 3.3.2 لتنسيق ER المخصص يحتوي على كل من التخصيص الخاص بك (عنصر تنسيق **vendBankSWIFT** وارتباطاته) والوظيفة الجديدة للإصدار 3.3 من التنسيق ER الأساسي الذي تم توفيره بواسطة Microsoft (عنصر التنسيق **PaymentAdviceReport** مع العناصر المتداخلة والارتباطات المكونة له). بعدد قليل من نقرات الماوس، فإنك بذلك تستخدم التعديلات الخاصة بالإصدار الأساسي الجديد عن طريق دمجه مع التخصيص الخاص بك.

    ![التنسيق المدمج في مصمم عمليات ER](./media/er-quick-start2-rebase5.png)

13. أغلق صفحة المصمم.

> [!NOTE]
> يمكن التراجع عن إجراء إعادة التعريف. لإلغاء عملية إعادة التعريف هذه، حدد **1.1.1** لتنسيق **BACS (UK مخصص)** في علامة التبويب السريعة **الإصدارات**، ثم حدد **الحصول على هذا الإصدار**. سيتم بعد ذلك إعادة ترقيم الإصدار 3.3.2 إلى 1.1.2، وستتم مطابقة محتوى إصدار المسودة 1.1.2 مع محتوى الإصدار 1.1.1.

### <a name="process-a-vendor-payment-by-using-a-rebased-er-format"></a><a id="ProcessPayment3"></a>معالجة مدفوعات المورد باستخدام تنسيق ER معاد تعريفه

1. انتقل إلى **الحسابات الدائنة** \> **المدفوعات** \> **‏‫دفتر يومية المدفوعات للمورد‬**.
2. في صفحة **‏‫دفتر يومية المدفوعات للمورد‬**، حدد دفتر يومية المدفوعات الذي قمت بإنشائه سابقًا.
3. حدد **البنود**.
4. في صفحة **مدفوعات المورد**، أعلى الشبكة، حدد **حالة الدفع** \> **بلا**.
5. حدد **إنشاء الدفع**.
6. في مربع الحوار **إنشاء مدفوعات**، أدخل المعلومات التالية:

    - في حقل **طريقة الدفع** حدد **إلكتروني**.
    - في الحقل **حساب البنك** حدد **GBSI OPER**.

7. حدد **موافق**.
8. في مربع الحوار **معلمات التقارير الإلكترونية**، أدخل المعلومات التالية:

    - قم بتعيين خيار **طباعة تقرير التحكم** على **نعم**.
    - قم بتعيين خيار **طباعة إخطار الدفع** على **نعم**.

    ![مربع حوار معلمات التقرير الإلكتروني](./media/er-quick-start2-payment-dialog2.png)

    > [!NOTE]
    > بالإضافة إلى ملف الدفع، يمكنك الآن إنشاء تقرير التحكم وتقرير إخطار الدفع.

9. حدد **موافق**.
10. قم بتنزيل الملف المضغوط من نوع zip، ثم قم باستخراج الملفات التالية منه:

    - تقرير التحكم بتنسيق Excel
    - تقرير إخطار الدفع بتنسيق Excel

        ![تقرير إخطار الدفع بتنسيق Excel](./media/er-quick-start2-payment-advice-report.png)

    - ملف الدفع بتنسيق TXT

        لاحظ أن سطر الدفع في الملف الذي تم إنشاؤه يبدأ بكود سويفت الذي تم إدخاله للحساب البنكي للمورد الذي تمت معالجة الدفع الخاص به.

        ![ملف الدفع بتنسيق TXT](./media/er-quick-start2-payment-file3.png)

## <a name="additional-resources"></a><a id="References"></a>الموارد الإضافية

- [نظرة عامة حول التقارير الإلكترونية](general-electronic-reporting.md)
- [تنزيل تكوينات ER من Lifecycle Services](download-electronic-reporting-configuration-lcs.md)
- [تنزيل تكوينات ER من المستودع العمومي لخدمة التكوين](er-download-configurations-global-repo.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]