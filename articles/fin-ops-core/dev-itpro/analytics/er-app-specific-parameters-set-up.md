---
title: إعداد معلمات تنسيق التقارير الإلكترونية لكل كيان قانوني
description: يشرح هذا الموضوع كيف يمكنك إعداد معلمات تنسيق التقارير الإلكترونية (ER) لكل كيان قانوني.
author: NickSelin
ms.date: 10/29/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: baa3cab78574ac3779aaea000f0b2b88ff625c37
ms.sourcegitcommit: 25b3dd639e41d040c2714f56deadaa0906e4b493
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/06/2021
ms.locfileid: "7605245"
---
# <a name="set-up-the-parameters-of-an-er-format-per-legal-entity"></a>إعداد معلمات تنسيق التقارير الإلكترونية لكل كيان قانوني

[!include[banner](../includes/banner.md)]

## <a name="prerequisites"></a>المتطلبات الأساسية

لإكمال هذه الخطوات، يجب أولا إكمال الخطوات في موضوع [تكوين تنسيقات التقارير الإلكترونية لاستخدام المعلمات المحددة للكيان القانوني](er-app-specific-parameters-configure-format.md).

لإكمال الامثله الموجودة في هذا الموضوع ، يجب ان يكون لديك حق الوصول إلى Microsoft Dynamics 365 Finance (Finance) لأحد الأدوار التالية:

- مطور إعداد التقارير الإلكتروني
- مستشار وظيفي لإعداد التقارير الإلكتروني
- مسؤول النظام

## <a name="import-er-configurations"></a>استيراد تكوينات التقارير الإلكترونية

1.  تسجيل الدخول إلى البيئة الخاصة بك.
2.  في لوحة المعلومات الافتراضية، حدد **‏‫إعداد التقارير الإلكترونية**.
3.  حدد **تكوينات إعداد التقارير‬**.
4.  قم باستيراد، إلى المثيل الحالي لـ Finance، التكوينات التي قمت بتصديرها من خدمات التكوين التنظيمية (RCS) اثناء قيامك بإكمال الخطوات الموجودة في موضوع [تكوين تنسيقات التقارير الإلكترونية لاستخدام المعلمات المحددة لكل كيان قانوني](er-app-specific-parameters-configure-format.md). اتبع الخطوات التالية لكل تكوين خاص بالتقرير الكتروني (ER) ، بالترتيب التالي: نموذج البيانات وتعيين الطراز والتنسيقات.

    1. حدد **Exchange \> تحميل من ملف XML**.
    2. حدد **استعراض** لتحديد الملف اللازم لتكوين التقارير الإلكترونية المطلوب بتنسيق XML.
    3. حدد **موافق**.
    
    يبين الرسم التوضيحي التالي التكوينات التي يجب ان تكون لديك عند الانتهاء.

    ![صفحة تكوينات التقارير الإلكترونية.](./media/GER-AppSpecParms-ImportedConfigurations.PNG)

## <a name="set-up-parameters-for-the-demf-company"></a>إعداد المعلمات الخاصة بشركة DEMF

يمكنك استخدام إطار عمل التقارير الإلكترونية لاعداد المعلمات الخاصة بالتطبيق لتنسيق التقارير الإلكترونية.

1.  حدد الكيان القانوني **DEMF**.
2.  في شجره التكوينات، حدد تنسيق **تنسيق للتعرف على كيفية البحث عن بيانات الكيان القانوني**.
3.  في جزء الإجراءات، على علامة تبويب **التكوينات**، في المجموعة **المعلمات الخاصة بالتطبيق**، حدد **إعداد**.
    
    في صفحة **المعلمات الخاصة بالتطبيق**، يمكنك تكوين قواعد مصدر بيانات **المحدد** لتنسيق **تنسيق للتعرف على كيفية البحث عن بيانات الكيان القانوني**.
    
    إذا كان التنسيق الأساسي للتقارير الإلكترونية يحتوي علي العديد من مصادر البيانات من نوع **البحث**، يجب عليك تحديد مصدر البيانات المطلوب في علامة التبويب السريعة **عمليات البحث** قبل ن يمكنك بدء تكوين مجموعة القواعد لمصدر البيانات.
    
    بالنسبة لكل مصدر بيانات ، يمكنك تكوين قواعد منفصلة لكل إصدار من إصدارات التنسيق المحددة للتقارير الإلكترونية.
    
    تقوم المجموعة الكاملة من القواعد لكافة مصادر بيانات البحث المتوفرة في الإصدار المحدد من التنسيق الأساسي لللتقارير الإلكترونية بإنشاء المعلمات الخاصة بالتطبيق لتنسيق التقارير الإلكترونية.

4.  حدد الإصدار **1.1.1** الخاص بتنسيق التقارير الإلكترونية.
5.  على علامة التبويب السريعة **الشروط** ، حدد **إضافة**.
6.  في حقل **الكود** الخاص بالسجل الجدسد، حدد سهم القائمة المنسدلة لفتح البحث.

    يقدم البحث قائمه بأكواد الضريبة للتحديد. يتم إرجاع هذه القائمة بواسطة مصدر بيانات **Model.Data.Tax** الذي تم تكوينه باستخدام التنسيق الأساسي للتقارير الإلكترونية. نظرا لان مصدر البيانات هذا يحتوي علي حقل **الاسم**، يظهر اسم كل كود ضريبة في البحث.

    ![صفحة المعلمات الخاصة بتطبيق التقارير الإلكترونية، بحث في حقل الكود.](./media/GER-AppSpecParms-LookupForm-CodeFldPicker.PNG)
    
7.  حدد كود الضريبة **VAT19**.
8.  في حقل **نتيجة البحث** الخاص بالسجل الجديد، حدد سهم القائمة المنسدلة لفتح البحث. يقدم البحث قائمه بالقيم الخاصة بتعداد تنسيق TaxationLevel للتحديد.

    لاحظ انه إذا تم تحديد اللغة المانيه كلغة المستخدم المفضلة التي قمت بتسجيل الدخول بها ، ستكون تسميات القيم في البحث باللغة المانيه ، شرط ان تتم ترجمتها في التنسيق الأساسي للتقارير الإلكترونية. بالاضافه إلى ذلك ، إذا تمت ترجمه تسميه مصدر بيانات البحث، ستظهر هذه التسمية في اللغة المفضلة للمستخدم في علامة التبويب **عمليات البحث**.

    ![صفحه معلمات خاصه بتطبيق ER ، تظهر نتائج البحث باللغة المفضلة للالمانيه.](./media/GER-AppSpecParms-LookupForm-LookupFldPicker.PNG)

9.  حدد قيمه **الضرائب العادية**.

    باضافه هذا السجل ، قم بتحديد القاعدة التالية: كلما تم طلب مصدر بيانات البحث عن **المحدد** وتم تمرير كود ضريبة **VAT19** كوسيطة، فسيتم إرجاع **الضرائب العادية** كمستوي الضرائب المطلوب.

10. حدد **إضافة**، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد كود الضريبة **InVAT19**.
    2. في حقل **نتيجة البحث**، حدد قيمة **الضرائب العادية**.
    
11. حدد **إضافة** مرة أخرى، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد كود الضريبة **VAT7**.
    2. في حقل **نتيجة البحث**، حدد قيمة **الضرائب المخفضة**.
    
12. حدد **إضافة** مرة أخرى، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد كود الضريبة **InVAT7**.
    2. في حقل **نتيجة البحث**، حدد قيمة **الضرائب المخفضة**.
    
13. حدد **إضافة** مرة أخرى، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد كود الضريبة **THIRD**.
    2. في حقل **نتيجة البحث**، حدد قيمة **لا ضرائب**.
    
14. حدد **إضافة** مرة أخرى، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد كود الضريبة **InVAT0**.
    2. في حقل **نتيجة البحث**، حدد قيمة **لا ضرائب**.
    
15. حدد **إضافة** مرة أخرى، ثم اتبع الخطوات التالية:

    1. في حقل **الكود**، حدد خيار **\*غير فارغ\***.
    2. في حقل **نتيجة البحث**، حدد قيمة **آخر**.
    
    بإضافة هذا السجل الأخير ، فإنك تحدد القاعدة التالية: عندما لا يفي رمز الضريبة الذي يتم تمريره كوسيطة بأي من القواعد السابقة ، سيرجع مصدر بيانات البحث **آخر** باعتباره مستوى الضرائب المطلوبة.

    ![صفحه معلمات خاصه بتطبيق ER ، علامة التبويب السريعة الشروط مع آخر سجل لأخر.](./media/GER-AppSpecParms-LookupForm-RulesSet.PNG)
    
16. في حقل **الحالة**، حدد **مكتمل**.

    عند تشغيل إصدار تنسيق التقارير الإلكترونية بحالة **مكتمل** أو **مشترك**، يجب ان تكون هذه المجموعة بحالة **مكتملة**. والا، ستتم مقاطعه عمليه تنفيذ تنسيق التقارير الإلكترونية الأساسي عند محاولة التنسيق تحميل البيانات من مجموعة القواعد هذه أثناء تشغيل مصدر بيانات البحث عن **المحدد**.
    
    عند تشغيل إصدار تنسيق تقارير إلكترونية بحالة **مسودة**، يمكن ان يصل التنسيق الأساسي للتقارير الإلكترونية إلى مجموعة القواعد هذه، بغض النظر عن حالتها.
    
17. حدد **حفظ**.
18. أغلق صفحة **المعلمات الخاصة بالتطبيق**.

## <a name="run-the-er-format-in-the-demf-company"></a>تشغيل تنسيق التقارير الإلكترونية في شركة DEMF

1.  في شجره التكوينات، حدد تنسيق **تنسيق للتعرف على كيفية البحث عن بيانات الكيان القانوني**.
2.  في جزء الإجراءات، حدد **تشغيل**.
3.  في مربع الحوار الذي يظهر، حدد **موافق**.
4.  تنزيل كشف الحساب الذي تم إنشاؤه وتخزينه محليا.

    في العبارة التي تم إنشاؤها، لاحظ أنه تم وضع كود الضريبة **InVAT7** في المستوى **المخفض**، وتم وضع ملخصات أكواد الضرائب **VAT19** و **InVA19** في المستوى **العادي**. يتم تحديد هذا السلوك بواسطة التكوين في مجموعه القواعد التابعة للكيان القانوني.
    
5.  انتقل إلى **الضريبة \> الضرائب غير المباشرة \> ضريبة المبيعات \> أكواد ضرائب المبيعات**.
6.  حدد كود الضريبة **InVAT7**.
7.  في جزء الإجراءات، ضمن علامة التبويب **كود ضريبة المبيعات**، في مجموعة **الاستعلامات**، حدد **ضريبة المبيعات المنشورة** لعرض معلومات حول قيمه الضريبة وسعر الضريبة المطبق لكل كود ضريبة.

    ![صفحة ضريبة المبيعات المرحّلة.](./media/GER-AppSpecParms-Statement.PNG)

8.  قم بإغلاق صفحة ضريبة المبيعات المرحلة.

## <a name="set-up-parameters-for-the-usmf-company"></a>إعداد المعلمات الخاصة بشركة USMF

1.  حدد الكيان القانوني **USMF**.
2.  انتقل إلى **إدارة المؤسسة \> التقارير الإلكترونية \> التكوينات**.
3.  في شجره التكوينات، قم بتوسيع عنصر **النموذج للتعرف على الاستدعاءات ذات المعلمات**، وقم بتوسيع عنصر **التنسيق للتعرف على الاستدعاءات ذات المعلمات**، وحدد تنسيق **التنسيق للتعرف على كيفيه البحث عن بيانات الكيان القانوني**.
4.  في جزء الإجراءات، على علامة تبويب **التكوينات**، في المجموعة **المعلمات الخاصة بالتطبيق**، حدد **إعداد**.
5.  حدد الإصدار **1.1.1** الخاص بتنسيق التقارير الإلكترونية.
6.  على علامة التبويب السريعة **الشروط** ، حدد **إضافة**.
7.  في حقل **الكود** الخاص بالسجل الجدسد، حدد سهم القائمة المنسدلة لفتح البحث.

    يقدم البحث الآن قائمه بأكواد الضريبة لضريبة شركة **USMF** للتحديد.

    ![صفحه معلمات خاصه بتطبيق ER ، بحث حقل الرمز يظهر قائمه بأكواد الضريبة لشركه USMF.](./media/GER-AppSpecParms-LookupForm-CodeFldPicker2.PNG)
    
8.  حدد كود الضريبة **EXEMPT**.
9.  في حقل **نتيجة البحث** في السجل الجديد، حدد قيمة **لا ضرائب**.
10. حدد **إضافة** مرة أخرى.
11. في حقل **الكود** في السجل الجديد، حدد خيار **\*غير فارغ\***.
12. في حقل **نتيجة البحث** في السجل الجديد، حدد قيمة **الضرائب العادية**.
13. في حقل **الحالة**، حدد **مكتمل**.
14. حدد **حفظ**.

    ![صفحة المعلمات الخاصة بتطبيق التقارير الإلكترونية.](./media/GER-AppSpecParms-LookupForm-RulesSet2.PNG)
    
15. أغلق صفحة **المعلمات الخاصة بالتطبيق**.

## <a name="run-the-er-format-in-the-usmf-company"></a>تشغيل تنسيق التقارير الإلكترونية في شركة USMF

1.  في شجره التكوينات، حدد تنسيق **تنسيق للتعرف على كيفية البحث عن بيانات الكيان القانوني**.
2.  في جزء الإجراءات، حدد **تشغيل**.
3.  في مربع الحوار الذي يظهر، حدد **موافق**.
4.  تنزيل كشف الحساب الذي تم إنشاؤه وتخزينه محليا.

    في العبارة التي تم إنشاؤها، لاحظ انك قمت الآن باعاده استخدام نفس تنسيق التقارير الإلكترونية لكيان قانوني مختلف، ولكن دون اجراء إيه تعديلات علي تنسيق التقارير الإلكترونية.

## <a name="reuse-legal-entitydependent-parameters"></a>إعادة استخدام المعلمات التابعة للكيان القانوني

### <a name="export-parameters"></a>تصدير المعلمات

1.  انتقل إلى **إدارة المؤسسة \> مساحات العمل \> إعداد التقارير الإلكترونية**.
2.  حدد **تكوينات إعداد التقارير‬**.
3.  في شجره التكوينات، حدد تنسيق **تنسيق للتعرف على كيفية البحث عن بيانات الكيان القانوني**.
4.  في جزء الإجراءات، على علامة تبويب **التكوينات**، في المجموعة **المعلمات الخاصة بالتطبيق**، حدد **إعداد**.
5.  حدد الإصدار **1.1.1** الخاص بتنسيق التقارير الإلكترونية.
6.  في جزء الإجراءات، حدد **تصدير**.
7.  قم بتنزيل كشف الحساب الذي تم إنشاؤه وتخزينه محليا.

    لقد تم الآن تصدير المجموعة المكونة من المعلمات الخاصة بالتطبيق كملف XML.

### <a name="import-parameters"></a>استيراد المعلمات

1.  حدد الإصدار **1.1.2** الخاص بتنسيق التقارير الإلكترونية.
2.  في جزء الإجراءات، حدد **استيراد**.
3.  حدد **نعم** لتأكيد انك تريد تجاوز المعلمات الخاصة بالتطبيق الموجود لإصدار التنسيق هذا.
4.  حدد **استعراض** للبحث عن الملف الذي يحتوي علي المعلمات الخاصة بالتطبيق المصدر للإصدار **1.1.1**.
5.  حدد **موافق**.

    يحتوي الإصدار **1.1.2** لتنسيق التقارير الإلكترونية على نفس معلمات التطبيق التي قمت بتكوينها في الأصل لإصدار **1.1.1**.
    
    لاحظ ان المعلمات الخاصة بالتطبيق الخاص بتنسيق التقارير الإلكترونية تعتمد علي الكيان القانوني. لأعاده استخدام المعلمات الخاصة بالتطبيق والتي تم تكوينها لأحد الكيانات القانونية في كيان قانوني مختلف ، يجب تصديرها اثناء تسجيل الدخول إلى الكيان القانوني الأول ثم استيرادها بعد تسجيل الدخول إلى الكيان القانوني الآخر.

    يمكنك أيضا استخدام هذا الأسلوب لتحويل المعلمات الخاصة بالتطبيق المرتبط بالتطبيق المرتبط التي تم تكوينها أصلا في مثيل واحد من Finance لمثيل آخر من Finance.

    يجب مراعاه انك إذا قمت بتكوين المعلمات الخاصة بالتطبيق لإصدار واحد من التنسيق الخاص بالتطبيق واستيراد إصدار أحدث من نفس التنسيق إلى المثيل المالي الحالي ، فلن يتم تطبيق المعلمات الخاصة بالتطبيق الموجود علي الإصدار المستورد.
    
    عليك أيضا ان تدرك انه عند تحديد ملف للاستيراد ، تتم مقارنه بنيه المعلمات الخاصة بالتطبيق في ذلك الملف ببنيه مصدر البيانات لنوع **البحث** الذي تم تحديده للاستيراد. يتم اجراء عمليه الاستيراد عندما تطابق بنيه كل معلمه خاصه بتطبيق ما بنيه مصدر البيانات المقابل في تنسيق التقارير الإلكترونية المحدد للاستيراد. في حاله عدم تطابق البنيات ، ستظهر لك رسالة تحذير توضح انه لا يمكن اجراء الاستيراد. إذا قمت بفرض اجراء الاستيراد ، سيتم تنظيف المعلمات الخاصة بالتطبيق الموجود لتنسيق التقارير الإلكترونية المحدد ، ويجب اعدادها من البداية.

## <a name="relationship-between-application-specific-parameters-and-an-er-format"></a>العلاقة بين المعلمات الخاصة بالتطبيق وتنسيق التقارير الإلكترونية

يتم إنشاء العلاقة بين تنسيق التقارير الإلكترونية والمعلمات الخاصة بالتطبيق الخاص به بواسطة كود التعريف الفريد المستقل الخاص بتنسيق التقارير الإلكترونية. ولذلك ، عند أزاله تنسيق التقارير الإلكترونية من Finance، يتم الاحتفاظ بالمعلمات الخاصة بالتطبيق والتي تم تكوينها لتنسيق التقارير الإلكترونية في المثيل الحالي لـ Finance. ويمكن الوصول اليها في اي وقت يتم فيه إعادة استيراد التنسيق الأساسي للتقارير الإلكترونية في هذا المثيل الخاص بـ Finance.

## <a name="access-application-specific-parameters-by-using-the-er-framework"></a>الوصول إلى المعلمات الخاصة بالتطبيق باستخدام إطار عمل التقارير الإلكترونية

في المثال السابق ، لقد قمت بالوصول إلى معلمات خاصه بالتطبيق لتنسيق التقارير الإلكترونية باستخدام إطار عمل التقارير الإلكترونية. وهذا الأسلوب لا يسمح لك بتقييد الوصول إلى المعلمات الخاصة بالتطبيق لتنسيق تقارير إلكترونية محدد. إذا كان من الضروري تطبيق مثل هذه القيود، فاتبع الخطوات التالية. 

1.  قم إما باعاده استخدام عنصر قائمة **ERSolutionAppSpecificParametersDesigner** أو نفذ عنصر قائمة **ERSolutionAppSpecificParametersDesigner**.

    ![صفحه Visual studio ، جزء الخصائص.](./media/GER-AppSpecParms-LookupForm-Access1.PNG)
    
2.  اتبع إحدى الخطوات التالية:

    1.  قم بإنشاء زر عنصر قائمه جديد، وقم بربطه بالسجل المقابل من جدول **ERSolutionTable** عن طريق تعيين خاصية **مصدر البيانات** الخاص به إلى **ERSolutionTable**.
    
        ![صفحه Visual studio ، أجزاء التصميم.](./media/GER-AppSpecParms-LookupForm-Access2.PNG)
        
    2.  قم بإنشاء زر بسيط، وتجاوز طريقة **النقر** كما هو موضح في المثال التالي.
    
        وباستخدام هذا الأسلوب، يمكنك تحديد معرف حل فريد (معرف من خلال قيمة **GUID**) للسماح بالوصول إلى المعلمات الخاصة بالتطبيق فقط بالتنسيق المحدد للتقارير الإلكترونية والنسخ التابعة التي تم اشتقاقها منها.
        
        ```xpp
        public void clicked()
            {
                super();

                ERSolutionTable solutionTableRecord = ERSolutionTable::findByGUID(str2Guid('ADACCB2F-EFD1-4C90-877D-7E1E5D1AEE92'));

                Args args = new Args();
                args.record(solutionTableRecord);
                args.caller(this);

                new MenuFunction(menuItemDisplayStr(ERSolutionAppSpecificParametersDesigner), MenuItemType::Display)
                    .run(args);
            }
        ```

## <a name="additional-resources"></a>الموارد الإضافية

[مصمم المعادلات في التقارير الإلكترونية](general-electronic-reporting-formula-designer.md)

[تكوين تنسيقات التقارير الإلكترونية لاستخدام المعلمات المحددة لكل كيان قانوني](er-app-specific-parameters-configure-format.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
