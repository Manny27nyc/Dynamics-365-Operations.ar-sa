---
title: تصميم تعبيرات التقارير الإلكترونية لاستدعاء أساليب فئات التطبيقات
description: تصف هذه المقالة كيفية إعادة استخدام منطق التطبيق الموجود في تكوينات التقارير الإلكترونية عن طريق استدعاء أساليب فئات التطبيقات المطلوبة.
author: NickSelin
ms.date: 11/02/2021
ms.topic: business-process
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 0fb0a9725d882fdc330d7adbb49bd3dcadf7805f
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8883614"
---
# <a name="design-er-expressions-to-call-application-class-methods"></a>تصميم تعبيرات التقارير الإلكترونية لاستدعاء أساليب فئات التطبيقات

[!include [banner](../../includes/banner.md)]

تصف هذه المقالة كيفية إعادة استخدام منطق التطبيق الحالي في تكوينات [التقارير الإلكترونية (ER)](../general-electronic-reporting.md) عن طريق استدعاء الأساليب المطلوبة لفئات التطبيق في تعبيرات التقارير الإلكترونية. يمكن تعريف قيم الوسائط لاستدعاء الفئات ديناميكيًا في وقت التشغيل. على سبيل المثال، يمكن أن تستند القيم إلى المعلومات الموجودة في مستند التحليل للتأكد من صحتها.

بالنسبة إلى المثال الموجود في هذه المقالة، ستقوم بتصميم عملية تقوم بتحليل كشوفات الحسابات البنكية الواردة لتحديث بيانات التطبيق. ستتلقى كشوف الحسابات المصرفية الواردة كملفات نصية (.txt) تحتوي على أكواد رقم الحساب المصرفي الدولي (IBAN). كجزء من عملية استيراد كشوف الحسابات البنكية، يجب عليك التحقق من صحة رمز IBAN باستخدام المنطق المتاح بالفعل.

## <a name="prerequisites"></a>المتطلبات الأساسية

الإجراءات الواردة في هذه المقالة مخصصة للمستخدمين الذين تم تعيين دور **مسؤول النظام** أو **مطور التقارير الإلكترونية** لهم.

يمكن إتمام الإجراءات باستخدام أي مجموعة بيانات.

لإكمالها، يجب عليك تنزيل الملف التالي وحفظه: [SampleIncomingMessage.txt](https://download.microsoft.com/download/8/0/a/80adbc89-f23c-46d9-9241-e0f19125c04b/SampleIncomingMessage.txt).

في هذا المثال، ستقوم بإنشاء تكوينات التقارير الإلكترونية المطلوبة للشركة النموذجية Litware, Inc. لذلك، قبل استكمال الإجراءات الواردة في هذه المقالة، يجب اتباع هذه الخطوات.

1. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
2. في صفحة **تكوينات الترجمة**، تحقق من أن موفر التكوين لشركة العينة **Litware, Inc.** متاح وتم تمييزه على أنه نشط. إذا كنت لا ترى موفر التكوين هذا، فيجب عليك أولاً إكمال الخطوات الواردة في [إنشاء موفري التكوين وتمييزهم على أنهم نشطون](er-configuration-provider-mark-it-active-2016-11.md).

## <a name="import-a-new-er-model-configuration"></a>استيراد تكوين نموذج تقارير إلكترونية جديد

1. في صفحة **تكوينات الترجمة**، في قسم **موفري التكوين**، حدد الإطار المتجانب لموفر تكوين **Microsoft**.
2. حدد **المستودعات**.
3. في صفحة **مستودعات الترجمة**، حدد **إظهار عوامل التصفية**.
4. لتحديد سجل المستودع العام، أضف حقل عامل التصفية **الاسم**.
5. في الحقل **الاسم**، أدخل **عمومي**. وبعد ذلك، حدد مشغل عامل التصفية **يحتوي على**.
6. حدد **تطبيق**.
7. حدد **[فتح](../er-download-configurations-global-repo.md#open-configurations-repository)** لمراجعة قائمة تكوينات التقارير الإلكترونية في المستودع المحدد.
8. في صفحة **مستودع التكوين**، في شجرة التكوين، حدد **نموذج الدفع**.
9. في علامة التبويب السريعة **إصدارات**، إذا كان الزر **استيراد**، فحدده، ثم حدد **نعم**.

    في حالة عدم توفر الزر **استيراد**، لقد قمت بالفعل باستيراد الإصدار المحدد لتكوين التقارير الإلكترونية **نموذج الدفع**.

10. أغلق صفحة **مستودع التكوين**، ثم أغلق صفحة **مستودعات الترجمة**.

## <a name="add-a-new-er-format-configuration"></a>إضافة تكوين تنسيق تقارير إلكترونية جديد

أضف تنسيق تقارير إلكترونية جديدًا لتحليل كشوف الحسابات البنيكية في تنسيق TXT.

1. في صفحة **تكوينات الترجمة**، حدد الإطار المتجانب **تكوينات الإبلاغ**.
2. في صفحة **التكوينات**، في شجرة التكوينات، في الجزء الأيسر، حدد **نموذج الدفع**.
3. حدد **إنشاء التكوين**. 
4. في مربع الحوار المنسدل، اتبع الخطوات التالية:

    1. في الحقل **جديد**، أدخل **التنسيق استناداً إلى نموذج الدفع الخاص بنموذج البيانات**.
    2. في حقل **الاسم**، أدخل **تنسيق استيراد كشف حساب بنكي (نموذج)‬**.
    3. في حقل **دعم استيراد البيانات**، حدد **نعم**.
    4. حدد **إنشاء تكوين** لإنهاء إنشاء التكوين.

## <a name="design-the-er-format-configuration--format"></a>تصميم تكوين تنسيق تقارير إلكترونية - تنسيق

صمم تنسيق تقارير إلكترونية يمثل البنية المتوقعة للملف الخارجي بتنسيق TXT.

1. بالنسبة إلى تكوين تنسيق **تنسيق استيراد كشف حساب بنكي (نموذج)‬** الذي أضفته، حدد **المصمم**.
2. في صفحة **مصمم التنسيق**، في شجرة بنية التنسيق في الجزء الأيسر، حدد **إضافة جذر**.
3. في مربع الحوار الذي يظهر، اتبع الخطوات التالية:

    1. في الشجرة، حدد **النص\\التسلسل** لإضافة مكون تنسيق **التسلسل**.
    2. في حقل **الاسم**، أدخل **الجذر**.
    3. في حقل **الأحرف الخاصة**، حدد **سطر جديد - Windows ‏(CR LF)**. بناءً على هذا الإعداد، سيتم اعتبار كل سطر في ملف التحليل سجلاً منفصلاً.
    4. حدد **موافق**.

4. حدد **إضافة**.
5. في مربع الحوار الذي يظهر، اتبع الخطوات التالية:

    1. في الشجرة، حدد **النص\\التسلسل**.
    2. في الحقل **الاسم**، أدخل **صفوف**.
    3. في حقل **التعدد**، حدد **واحد كثير‬**. بناءً على هذا الإعداد، من المتوقع وجود سطر واحد على الأقل في ملف التحليل.
    4. حدد **موافق**.

6. في الشجرة، حدد **الجذر\\الصفوف**، ثم حدد **إضافة التسلسل**.
7. في مربع الحوار الذي يظهر، اتبع الخطوات التالية:

    1. في الحقل **الاسم**، أدخل **الحقول**.
    2. في حقل **التعدد**، حدد **واحد فقط**.
    3. حدد **موافق**.

8. في الشجرة، حدد **الجذر\\الصفوف\\الحقول**، ثم حدد **إضافة**.
9. في مربع الحوار الذي يظهر، اتبع الخطوات التالية:

    1. في الشجرة، حدد **النص\\السلسلة**.
    2. في حقل **الاسم**، أدخل **IBAN**.
    3.. حدد **موافق**.

10. حدد **حفظ**.

تم الآن إعداد التكوين بحيث يحتوي كل سطر في ملف التحليل على رمز IBAN فقط.

![تكوين تنسيق تنسيق استيراد كشف الحساب البنكي (نموذج) في صفحة مصمم التنسيق.](../media/design-expressions-app-class-er-01.png)

## <a name="design-the-er-format-configuration--mapping-to-a-data-model"></a>تصميم تكوين تنسيق تقارير إلكترونية – تعيين إلى نموذج بيانات

صمم مخطط تنسيق تقارير إلكترونية يستخدم معلومات من ملف التحليل لتعبئة نموذج بيانات.

1. في صفحة **مصمم التنسيق** في جزء الإجراءات، حدد **تعيين تنسيق لنموذج**.
2. في صفحة **تعيين النموذج إلى مصدر البيانات** في جزء الإجراءات، حدد **جديد**.
3. في حقل **التعريف**، حدد **BankToCustomerDebitCreditNotificationInitiation**.
4. في الحقل **الاسم**، أدخل **تعيين إلى نموذج البيانات‬**.
5. حدد **حفظ**.
6. حدد **المصمم**.
7. في صفحة **مصمم تعيين النموذج**، في شجرة **أنواع مصادر البيانات**، حدد **فئة Dynamics 365 for Operations\\‎**.
8. في قسم **مصادر البيانات**، حدد **إضافة الجذر** لإضافة مصدر بيانات يستدعي منطق التطبيق الحالي للتحقق من صحة رموز IBAN.
9. في مربع الحوار الذي يظهر، اتبع الخطوات التالية:

    1. في حقل **الاسم**، أدخل **فحص\_الرموز**.
    2. في حقل **الدرجة**، أدخل أو حدد **ISO7064**.
    3. حدد **موافق**.

10. في شجرة **أنواع مصادر البيانات**، اتبع هذه الخطوات:

    1. قم بتوسيع مصدر بيانات **التنسيق**.
    2. قم بتوسيع **التنسيق\\الجذر: التسلسل(الجذر)**.
    3. قم بتوسيع **التنسيق\\الجذر: التسلسل(الجذر)\\الصفوف: التسلسل 1..\* (الصفوف)**.
    4. قم بتوسيع **التنسيق\\الجذر: التسلسل(الجذر)\\الصفوف: التسلسل 1..\* (الصفوف)\\الحقول: التسلسل 1..1 (الحقول)**.

11. في شجرة **نموذج البيانات**، اتبع هذه الخطوات:

    1. قم بتوسيع حقل **الدفعات** في نموذج البيانات.
    2. قم بتوسيع **الدفعات\\حساب الدائن(CreditorAccount)**.
    3. قم بتوسيع **الدفعات\\حساب الدائن(CreditorAccount)\\التعريف**.
    4. قم بتوسيع **الدفعات\\حساب الدائن(CreditorAccount)\\التعريف\\IBAN**.

12. اتبع هذه الخطوات لربط مكونات التنسيق المكون بحقول نموذج البيانات:

    1. حدد **التنسيق\\الجذر: التسلسل(الجذر)\\الصفوف: التسلسل 1..\* (الصفوف)**.
    2. حدد **الدفعات**.
    3. حدد **ربط**. بناءً على هذا الإعداد، سيتم اعتبار كل سطر في ملف التحليل دفعة واحدة.
    4. حدد **التنسيق\\الجذر: التسلسل(الجذر)\\الصفوف: التسلسل 1..\* (الصفوف)\\الحقول: التسلسل 1..1 (الحقول)\\IBAN: السلسلة(IBAN)**.
    5. حدد **الدفعات\\حساب الدائن(CreditorAccount)\\التعريف\\IBAN**.
    6. حدد **ربط**. بناءً على هذا الإعداد، سيتم ملء حقل **IBAN** في نموذج البيانات بالقيمة من ملف التحليل.

    ![ربط مكونات التنسيق بحقول نموذج البيانات في صفحة مصمم تعيين النموذج.](../media/design-expressions-app-class-er-02.png)

13. في علامة التبويب **عمليات التحقق**، اتبع هذه الخطوات لإضافة قاعدة [تحقق](../general-electronic-reporting-formula-designer.md#Validation) تُظهر رسالة خطأ لأي سطر في ملف التحليل الذي يحتوي على رمز IBAN غير صالح:

    1. حدد **جديد**، ثم حدد **تحرير الشرط**.
    2. في صفحة **مصمم المعادلة**، في شجرة **مصدر البيانات**، قم بتوسيع مصدر بيانات **فحص\_الرموز** الذي يمثل فئة تطبيق **ISO7064** لعرض الطرق المتاحة لهذه الفئة.
    3. حدد **فحص\_الرموز\\verifyMOD1271\_36**.
    4. حدد **إضافة مصدر البيانات**.
    5. في حقل **المعادلة**، أدخل [التعبير](../general-electronic-reporting-formula-designer.md#Binding) التالي: **فحص\_codes.verifyMOD1271\_36(format.Root.Rows.Fields.IBAN)**.
    6. حدد **حفظ** ثم قم بإغلاق الصفحة.
    7. حدد **تحرير الرسالة**.
    8. في صفحة **مصمم المعادلة**، في حقل **المعادلة**، أدخل **CONCATENATE("تم العثور على رمز IBAN غير صالح:&nbsp;"،‏ format.Root.Rows.Fields.IBAN)**.
    9. حدد **حفظ** ثم قم بإغلاق الصفحة.

    بناءً على هذه الإعدادات، ستُرجع حالة التحقق من الصحة *[FALSE](../er-formula-supported-data-types-primitive.md#boolean)* لأي رمز IBAN غير صالح عن طريق الاتصال بطريقة **verifyMOD1271\_36** الموجودة في فئة تطبيق **ISO7064**. لاحظ أن قيمة رمز IBAN يتم تعريفها ديناميكيًا في وقت التشغيل كوسيطة لطريقة الاستدعاء، بناءً على محتوى ملف نص التحليل.

    ![قاعدة التحقق من الصحة في صفحة مصمم خرائط النموذج.](../media/design-expressions-app-class-er-03.png)

14. حدد **حفظ**.
15. أغلق صفحة **مصمم تعيين النموذج**، ثم أغلق صفحو **تعيين النموذج إلى مصدر البيانات**.

## <a name="run-the-format-mapping"></a>تشغيل تعيين التنسيق

لأغراض الاختبار، قم بتشغيل تعيين التنسيق باستخدام ملف SampleIncomingMessage.txt الذي قمت بتنزيله مسبقًا. سيتضمن الإخراج الذي تم إنشاؤه البيانات التي تم استيرادها من الملف النصي المحدد ونقلها إلى نموذج البيانات المخصص أثناء الاستيراد الحقيقي.

1. في صفحة **تعيين النموذج إلى مصدر البيانات**، حدد **تشغيل**.
2. في صفحة **معلمات التقرير الإلكتروني**، حدد الزر **استعراض** لاستعراض ملف **SampleIncomingMessage.txt** الذي قمت بتنزيله، وحدده.
3. حدد **موافق**.
4. لاحظ أن صفحة **نموذج لتعيين مصدر البيانات** تعرض رسالة خطأ حول رمز IBAN غير صالح.

    ![نتيجة تشغيل تعيين التنسيق في صفحة تعيين النموذج إلى مصدر البيانات.](../media/design-expressions-app-class-er-04.png)

5. راجع المخرجات بتنسيق XML التي تمثل البيانات التي تم استيرادها من الملف المحدد ونقلها إلى نموذج البيانات. لاحظ أنه تمت معالجة ثلاثة سطور فقط من الملف النصي المستورد بدون أخطاء. رمز IBAN الموجود في السطر 4 غير صالح وتم تخطيه.

    ![إخراج XML.](../media/design-expressions-app-class-er-05.png)

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
