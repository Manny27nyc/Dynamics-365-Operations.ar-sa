---
title: استخدام مصادر بيانات جمع البيانات في تنسيقات التقارير الإلكترونية
description: توضح هذه المقالة كيفية استخدام مصادر بيانات لجمع البيانات في تنسيقات التقارير الإلكترونية (ER).
author: kfend
ms.date: 08/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2021-01-01
ms.dyn365.ops.version: AX 10.0.16
ms.custom: 58771
ms.assetid: ''
ms.search.form: EROperationDesigner
ms.openlocfilehash: 221cefc1880cdd88a952140424daf24975a575aa
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/12/2022
ms.locfileid: "9286168"
---
# <a name="use-data-collection-data-sources-in-electronic-reporting-formats"></a>استخدام مصادر بيانات جمع البيانات في تنسيقات التقارير الإلكترونية

[!include [banner](../includes/banner.md)]

يمكنك استخدام مصمم عمليات إطار عمل [إعداد التقارير الإلكترونية (ER)](general-electronic-reporting.md) لتكوين مكون التنسيق لحل إعداد التقارير الإلكترونية المستخدم لإنشاء المستندات الصادرة بتنسيق نصي. يتكون الهيكل الهرمي لمكون التنسيق المكون من أنواع مختلفة من عناصر التنسيق. يتم استخدام عناصر التنسيق هذه لملء المستندات التي تم إنشاؤها بالمعلومات المطلوبة في وقت التشغيل. عند تشغيل تنسيق إعداد التقارير الإلكترونية، يتم افتراضيًا تشغيل عناصر التنسيق بنفس الترتيب كما هو موضح في التدرج الهرمي للتنسيق: واحد تلو الآخر من أعلى إلى أسفل.

عند تشغيل ER عنصر تنسيق يحتوي على ربط، يتم تشغيل الصيغة من هذا الربط، وعنصر التنسيق يضيف القيمة إلى مستند تم إنشاؤه. على سبيل المثال، يمكن للربط تمرير قيمة حقل نموذج البيانات لعنصر التنسيق. يمكنك تكوين مصدر بيانات تجميع البيانات لتجميع قيم حقول نموذج البيانات في وقت التشغيل، والقيام بجمع القيمة، وملء مستند مُنشأ بالقيم المجمعة. لاستخدام هذا الأسلوب، قم بتغيير الارتباط الأولي بحيث يتم استخدام مصدر البيانات المكون من مجموعة البيانات لتمرير قيمة حقل نموذج البيانات إلى عنصر التنسيق. من خلال تمرير القيم من خلال مصدر البيانات "تجميع البيانات"، يمكنك جمع التفاصيل المطلوبة لمزيد من الاستخدام.

عند تكوين مصدر بيانات "تجميع البيانات"، حدد نوع القيمة التي ستتم إدارتها في مصدر البيانات. يتم حاليا اعتماد [أنواع البيانات](er-formula-supported-data-types-primitive.md) لجمع القيم:

- منطقي
- التاريخ
- التاريخ/الوقت
- Guid
- Int64
- عدد صحيح
- حقيقي
- سلسلة
- الوقت

يمكنك استخدام أسلوب `Collect(Value)` مصدر بيانات "تجميع البيانات" لتمرير قيمة إلى مصدر بيانات لجمع. في هذا الأسلوب، تكون وسيطة `Value` إما ثابت أو مسار صالح حقل مصدر بيانات من نوع البيانات ذات الصلة.

استخدم خاصية `Result` لمصدر بيانات "تجميع البيانات" للوصول إلى قائمة القيم المجمعة. تقوم هذه الخاصية بإرجاع [قائمة سجلات](er-formula-supported-data-types-composite.md#record-list). تحتوي سجلات قائمة السجلات على حقل `Value` الذي يمكنك استخدامه للوصول إلى القيم المجمعة.

بشكل افتراضي، يجمع مصدر بيانات "تجميع البيانات" قيم فريدة فقط.

لتجميع جميع القيم، قم بتعيين حقل **تجميع كافة القيم** لمصدر بيانات "تجميع البيانات" المكون إلى **نعم**. عندما يتم تعيين الحقل **تجميع كافة القيم** إلى **نعم**، تصبح خاصية `Sum(Flag)` ذات المعلمات متوفرة. يمكنك استخدام هذه الخاصية للحصول على إجمالي المبلغ لكافة القيم التي تم جمعها حاليًا. في هذه الخاصية، تكون وسيطة `Flag` هي [قيمة منطقية](er-formula-supported-data-types-primitive.md#boolean) تُستخدم للإشارة إلى ما إذا كان يجب إعادة تعيين القيمة الإجمالية.

- عند توفير القيمة **False**، يستمر التجميع من المبلغ الذي تم جمعه مسبقا.
- عند توفير القيمة **True**، يتم بدء عملية جمع جديدة.

أنواع البيانات التالية مدعومة حاليًا لتجميع:

- Int64
- عدد صحيح
- حقيقي

لمعرفة المزيد حول هذه الميزة، أكمل المثال التالي.

## <a name="example-configure-an-er-format-to-do-counting-and-summing-by-using-a-data-collection-data-source"></a>مثال: قم بتكوين تنسيق التقارير الإلكترونية للقيام بالعد والتجميع باستخدام مصدر بيانات تجميع البيانات

يوضح هذا المثال كيف يمكن لمستخدم في دور مسؤول النظام أو دور مستشار وظيفي لإعداد التقارير الإلكترونية تكوين تنسيق تقارير إلكترونية يحتوي على مصدر بيانات تجميع البيانات الذي يتم استخدامه لحساب الإجماليات الجارية وتجميع القيم المجمعة.

يمكن إكمال الإجراءات الواردة في هذا المثال في شركة USMF في 365‎ Finance Microsoft Dynamics.

### <a name="upload-and-use-the-provided-er-solution"></a>قم بتحميل واستخدام حل ER المتوفر

1. [استيراد نموذج تكوينات التقارير الإلكترونية](er-defer-sequence-element.md#import-the-sample-er-configurations).
2. [تنشيط موفر تكوين](er-defer-sequence-element.md#activate-a-configurations-provider).
3. [مراجعة تعيين النموذج المستورد](er-defer-sequence-element.md#review-the-imported-model-mapping).
4. [مراجعة التنسيق المستورد](er-defer-sequence-element.md#review-the-imported-format).
5. [تشغيل التنسيق المستورد](er-defer-sequence-element.md#run-the-imported-format).

### <a name="run-the-format-of-the-provided-er-solution"></a>تشغيل تنسيق حل التقرير الإلكتروني المتوفر

1. في صفحة **مصمم التنسيق**، حدد **تشغيل**.
2. في مربع الحوار **معلمات التقارير الإلكترونية** حدد **موافق**.
3. نزِّل الملف الذي يعرضه مستعرض الويب وراجعه.

    ![تحميل الملف الذي يحتوي على نتائج تنفيذ التنسيق الأولي](./media/er-data-collection-data-sources-01.png)

### <a name="modify-the-format-of-the-er-solution-to-calculate-the-running-tax-total"></a>تعديل تنسيق حل ER لحساب إجمالي الضريبة الجارية

إذا كان حجم المعاملات أكبر بكثير من الحجم في المثال الحالي، فقد يزيد الوقت الذي يتطلبه التلخيص ويسبب مشكلات في الأداء. من خلال تغيير إعدادات التنسيق، يمكنك المساعدة في منع مشكلات الأداء هذه. نظرًا لأنك تصل إلى قيم الضرائب لتضمينها في التقرير الذي تم إنشاؤه، يمكنك إعادة استخدام هذه المعلومات لتجميع قيم الضرائب.

1. في صفحة **مصمم التنسيق**، على علامة التبويب **التعيين**، حدد **إضافة جذر**.
2. في مربع الحوار **إضافة مصدر بيانات**، حدد **الوظائف** \>**جمع البيانات**.
3. في مربع الحوار **خصائص مصدر بيانات جمع البيانات**، اتبع الخطوات التالية:

    1. في حقل **الاسم**، أدخل **CollectedTaxValues**.
    2. في الحقل **نوع الصنف**، حدد **حقيقي**.
    3. في حقل **جمع كل القيم**، حدد **نعم**.
    4. حدد **موافق**.

4. حدد عنصر التنسيق الرقمي **التقرير\\السطور\\السجل\\TaxAmount**.

    > [!NOTE]
    > حاليًا، يتمم تكوين ربط `@.Value` لهذا العنصر. لذلك، مستند تم إنشاؤه إذا تم تعبئته بقيم الضريبة من حقل `model.Data.List.Value`.

5. حدد **تحرير المعادلة**.
6. في صفحة **مصمم المعادلة‬**، اتبع الخطوات التالية:

    1. في حقل **المعادلة**، استبدل `@.Value` بـ `CollectedTaxValues.Collect(@.Value)`.
    2. احفظ التغييرات وأغلق الصفحة.

    > [!NOTE]
    > سيمرر الارتباط الجديد نفس قيم الضرائب إلى مستند تم إنشاؤه. ومع ذلك، سيتم أيضًا تجميع هذه القيم في مصدر بيانات **CollectedTaxValues**.

7. حدد عنصر التنسيق الرقمي **التقرير\\السطور\\السجل\\RunningTotal**.
8. حدد **تحرير المعادلة**.
9. في صفحة **مصمم المعادلة‬**، اتبع الخطوات التالية:

    1. في حقل **المعادلة**، أدخل `CollectedTaxValues.Sum(false)`.
    2. احفظ التغييرات وأغلق الصفحة.

    > [!NOTE]
    > سيمرر الارتباط الجديد، إلى مستند تم إنشاؤه، المبلغ الإجمالي لقيم الضرائب التي تم إدخالها بالفعل.

    ![العناصر الرقمية التي قامت بتحديث الارتباطات في صفحة مصمم التنسيق](./media/er-data-collection-data-sources-02.png)

10. حدد **حفظ**، ثم حدد **تشغيل**.
11. في مربع الحوار **معلمات التقارير الإلكترونية** حدد **موافق**.
12. نزِّل الملف الذي يعرضه مستعرض الويب وراجعه.

    ![ملف تم تنزيله يحتوي على نتائج تنفيذ التنسيق المعدل](./media/er-data-collection-data-sources-03.png)

### <a name="modify-the-format-to-evaluate-the-list-of-collected-tax-values"></a>تعديل التنسيق لتقييم قائمة قيم الضرائب التي تم جمعها

1. في صفحة **مصمم التنسيق**، في علامة التبويب **تنسيق**، حدد **التقرير\\البنود\\السجل\\RunningTotal**، ثم اتبع الخطوات التالية:

    1. في حقل **النوع الرقمي**، قم بتغيير القيمة من **حقيقي** إلى **عدد صحيح**.
    2. في حقل **التنسيق الرقمي**، قم بتغيير القيمة من **F2** إلى **F0**.

3. في علامة التبويب **التعيين**، حدد **تحرير المعادلة**.
4. في صفحة **مصمم المعادلة‬**، اتبع الخطوات التالية:

    1. في حقل **المعادلة**، أدخل `COUNT(CollectedTaxValues.Result)`.
    2. احفظ التغييرات وأغلق الصفحة.

    > [!NOTE]
    > سيمرر الارتباط الجديد، إلى مستند تم إنشاؤه، عدد السجلات في القائمة حيث يتم جمع قيم الضرائب.

5. حدد **حفظ**، ثم حدد **تشغيل**.
6. في مربع الحوار **معلمات التقارير الإلكترونية** حدد **موافق**.
7. نزِّل الملف الذي يعرضه مستعرض الويب وراجعه.

    ![ملف تم تنزيله يحتوي على نتائج تنفيذ تنسيق آخر معدل](./media/er-data-collection-data-sources-04.png)

## <a name="frequently-asked-questions"></a>الأسئلة المتداولة

### <a name="if-i-have-to-calculate-running-totals-and-collect-data-what-is-the-difference-between-using-a-data-collection-data-source-and-using-the-built-in-data-collection-functions"></a>إذا كان علي حساب الإجماليات الجارية وجمع البيانات، فما الفرق بين استخدام مصدر بيانات تجميع البيانات واستخدام وظائف تجميع البيانات المضمنة؟

يمكن استخدام كل من مصدر بيانات تجميع البيانات ووظائف [تجميع البيانات](er-functions-category-data-collection.md) المضمنة لجمع البيانات، والتلخيص، والعد، استنادا إلى المعلومات التي يتم تمريرها إلى مستند صادر تم إنشاؤه. ومع ذلك، عندما تحاول تحديد الأسلوب الذي تريد استخدامه، يجب عليك مراعاة النقاط التالية.

| مصدر البيانات | الوظائف المضمنة |
|-------------| ------------------ |
| يتم جمع القيم فقط. | <p>يتم جمع القيم المسماة. لذلك، يمكن حساب الإجماليات لمجموعات منفصلة من القيم.</p><p>بالإضافة إلى ذلك، يمكن استخراج المجموعات كقائمة.</p><p>يمكن أيضًا جمع القيم النصية.</p> |
| يتم جمع القيم الفريدة تلقائيًا. | إعدادات إضافية مطلوبة لاستخراج قائمة القيم الفريدة من القيم المجمعة. |
| يعتمد الأداء على حجم القيم المجمعة. | من الناحية العملية، لا يعتمد الأداء على حجم القيم المجمعة. |
| تعمل هذه التقنية مع جميع أنواع المستندات الصادرة. | تعمل هذه التقنية فقط مع مستندات النص وXML. |

## <a name="additional-resources"></a>الموارد الإضافية

- [تكوين التنسيق لتنفيذ عمليات الجرد والتجميع](./tasks/er-format-counting-summing-1.md)
- [تأجيل تنفيذ عناصر التسلسل في تنسيقات إعداد التقارير الإلكترونية](er-defer-sequence-element.md#Example)

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
