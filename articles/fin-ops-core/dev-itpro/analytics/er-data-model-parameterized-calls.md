---
title: دعم مكالمات ذات معلمات لنماذج بيانات التقارير الإلكترونية
description: توضح هذه المقالة كيفية تنفيذ الاستدعاءات ذات معلمات لنماذج بيانات التقارير الإلكترونية.
author: NickSelin
ms.date: 03/14/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, EROperationDesigner, ERExpressionDesignerFormula, ERDataModelDesigner
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-10-01
ms.dyn365.ops.version: 10.0.15
ms.openlocfilehash: 65ac81e9aa25b286640fd526e71b55de3b0695ca
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8884246"
---
# <a name="support-parameterized-calls-of-er-data-models"></a>دعم مكالمات ذات معلمات لنماذج بيانات التقارير الإلكترونية

[!include [banner](../includes/banner.md)]

لإنشاء مستندات الأعمال، عليك تكوين حل [إعداد التقارير الإلكترونية (ER)](general-electronic-reporting.md) الذي يحتوي علي مكونات ER التالية:

- **[التنسيق](er-overview-components.md#format-component)** – يحدد هذا المكون بنية مستند الأعمال.
- **تعيين التنسيق** – يتحكم هذا المكون في كيفية ملء مستند أعمال في وقت التشغيل.
- **[تعيين النموذج](er-overview-components.md#model-mapping-component)** – يحدد هذا المكون ما تسحبه البيانات من التطبيق إلى تعيين تنسيق.
- **[نموذج البيانات](er-overview-components.md#data-model-component)** – يمرر هذا المكون المعلومات بين المكونات الفردية.

عند تشغيل تنسيق تقارير إلكترونية، يتم تشغيل كل عنصر تنسيق، اعتبارًا من عنصر التنسيق الجذر. كلما احتوى عنصر التنسيق الذي يتم تشغيله على رابط [بمصدر بيانات](general-electronic-reporting.md#configuring-data-model-mappings-for-outgoing-documents)، يتم تشغيل مصدر البيانات لتسليم البيانات المتوقعة واستخدامها لتعبئة عنصر التنسيق. عند استدعاء مصدر بيانات لنوع *النموذج*، يتم استدعاء تعيين النموذج المناسب لسحب البيانات من التطبيق، بالاستناد إلى إعدادات تعيين النموذج.

في السابق، كان يتعذر تعيين معلمات لتعيينات النماذج هذه لجعلها تعتمد على منطق التنسيق الذي يتم تشغيله. تم دعم تدفق البيانات التالي فقط.

<table>
<tbody>
<tr align="center">
<td>
<b>تنسيق</b><br>
عنصر&nbsp;التنسيق<br>
&nbsp;
</td>
<td>
<i>الربط</i><br>
&gt;&nbsp;الطلب&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;&lt;
</td>
<td><b>تعيين&nbsp;التنسيق</b><br>
مصدر البيانات<br>
&nbsp;
</td>
<td>
<i>نموذج&nbsp;البيانات</i><br>
&gt;&nbsp;الطلب&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;&lt;
</td>
<td>
<b>تعيين&nbsp;النموذج</b><br>
مصدر&nbsp;البيانات<br>
&nbsp;
</td>
<td>
<i>الربط</i><br>
&gt;&nbsp;الطلب&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;&lt;
</td>
<td>
<b>الجدول</b><br>
السجل<br>
الحقل
</td>
</tr>
</tbody>
</table>

ومع ذلك، في الإصدار 10.0.15 والإصدارات الأحدث، يمكنك تكوين حقول نموذج البيانات التي يمكن استدعاؤها فقط عند توفير قيم المعلمات التي تم تكوينها. عند تكوين مثل هذا الحقل واستدعائه من مكون التنسيق، يجب توفير المعلمات المطلوبة في رابط التنسيق كوسائط الاستدعاء. وفي هذه الحالات، يمكن تحديد قيم الوسيطات بالاستناد إلى قيم التنسيق المحدد. وبالتالي، يمكنك استخدام **تعيين معلمات وقت التشغيل الديناميكي** لاستدعاءات نموذج البيانات لدعم تدفق البيانات التالي.

<table>
<tbody>
<tr align="center">
<td>
<b>تنسيق</b><br>
عنصر‏‎&nbsp;التنسيق&nbsp;1<br>
<br>
عنصر‏‎&nbsp;التنسيق&nbsp;2<br>
&nbsp;<br>
&nbsp;
</td>
<td>
<i>الربط</i><br>
&gt;&nbsp;الطلب&nbsp;1&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;1&nbsp;&lt;<br>
&gt;&nbsp;الطلب&nbsp;2&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;3&nbsp;&lt;<br>
&nbsp;
</td>
<td>
<b>تعيين&nbsp;التنسيق</b><br>
مصدر‏‎&nbsp;البيانات&nbsp;1<br>
&nbsp;<br>
<b>value2=Func(value1)</b><br>
&nbsp;<br>
&nbsp;
</td>
<td>
<i>نموذج&nbsp;البيانات</i><br>
&gt;&nbsp;الحقل1&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;1&nbsp;&lt;<br>
<b>&gt;&nbsp;field2(value2)&nbsp;&gt;</b><br>
&lt;&nbsp;القيمة&nbsp;3&nbsp;&lt;<br>
&nbsp;
</td>
<td>
<b>تعيين&nbsp;النموذج</b><br>
مصدر‏‎&nbsp;البيانات&nbsp;1<br>
<br>
مصدر‏‎&nbsp;البيانات&nbsp;2<br>
&nbsp;<br>
&nbsp;
</td>
<td>
<i>الربط</i><br>
&gt;&nbsp;الطلب&nbsp;1&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;1&nbsp;&lt;<br>
&gt;&nbsp;الطلب&nbsp;2&nbsp;&gt;<br>
&lt;&nbsp;القيمة&nbsp;3&nbsp;&lt;<br>
&nbsp;
</td>
<td>
<b>الجدول&nbsp;1</b><br>
السجل&nbsp;1<br>
الحقل&nbsp;1<br>
<b>الجدول&nbsp;2</b><br>
السجل&nbsp;2<br>
الحقل&nbsp;2
</td>
</tr>
</tbody>
</table>

تتيح لك الوظيفة الجديدة تحديد معلمات الاتصال بأي حقل نموذج بيانات من نوع [*السجل*](er-formula-supported-data-types-composite.md#record) أو [*قائمة السجلات*](er-formula-supported-data-types-composite.md#record-list). أنواع البيانات التالية مدعومة لمعلمات حقل نموذج بيانات:

- [منطقي](er-formula-supported-data-types-primitive.md#boolean)
- [الحاوية](er-formula-supported-data-types-composite.md#container)
- [التاريخ](er-formula-supported-data-types-primitive.md#date)
- [التاريخ/الوقت](er-formula-supported-data-types-primitive.md#datetime)
- [GUID](er-formula-supported-data-types-primitive.md#guid)
- [Int64](er-formula-supported-data-types-primitive.md#int64)
- [عدد صحيح](er-formula-supported-data-types-primitive.md#integer)
- [حقيقي](er-formula-supported-data-types-primitive.md#real)
- [سلسلة](er-formula-supported-data-types-primitive.md#string)

يمكنك تحديد كل معلمة لحقل نموذج بيانات يمكن توفير الوسيطة له كقيمة فردية لنوع البيانات المحدد و [*قائمة*](er-formula-supported-data-types-composite.md#record-list) مثل هذه القيم.

> [!NOTE]
> القيمة الافتراضية للمعلمة الخاصة بحقل نموذج بيانات غير مدعومة. إذا أضفت معلمة إلى حقل في نموذج بيانات، وكان إصدار نموذج البيانات هذا قد تم إصداره ونشره بالفعل، فعليك [إعادة تعريف](general-electronic-reporting.md#upgrading-a-format-selecting-a-new-version-of-base-format-rebase) لجميع تعيينات وتنسيقات النماذج المقابلة إلى الإصدار الجديد من هذا النموذج، لأن تغيير نموذج البيانات هذا غير متوافق مع الإصدارات السابقة.

يمكنك تكوين حقول نموذج البيانات ذات المعلمات لجعل استدعاءات تعيين النموذج خاصة بالتنسيق. يمكن أن يساعدك هذا الأسلوب في تقليل عدد تعيينات النماذج التي يجب تكوينها للعديد من التنسيقات الخاصة بنموذج بيانات واحد. يمكنك أيضًا استخدام هذا الأسلوب لتحسين أداء تنفيذ التنسيقات وتقليل الوقت المطلوب لإنشاء مستندات الأعمال. لمعرفة المزيد عن هذه الميزة، أكمل المثال في هذه المقالة.

## <a name="example-use-parameterized-calls-of-er-data-models"></a>مثال: استخدام مكالمات ذات معلمات لنماذج بيانات التقارير الإلكترونية

توضح الخطوات التالية كيف يمكن لمستخدم يؤدي دور مسؤول النظام أو دور مطور التقارير الإلكترونية تصميم حل تقارير إلكترونية يحتوي على نموذج بيانات، وتعيين نموذج، ومكون تنسيق التقارير الإلكترونية الذي تم تكوينه لاستدعاء تعيين نموذج من تنسيق عن طريق توفير وسيطة للاستدعاء، والتي تم حساب قيمتها في وقت التشغيل باستخدام صيغة التنسيق قيد التشغيل. 

يمكن تنفيذ هذه الخطوات في شركة **DEMF**. تعديلات التعليمات البرمجية غير مطلوبة. 

في هذا المثال، ستقوم بإنشاء تكوينات [ER](general-electronic-reporting.md#Configuration) المطلوبة للشركة النموذجية **Litware, Inc.**. تأكد من أن موفر التكوين للشركة النموذجية **Litware, Inc.** (`http://www.litware.com`) تم إدراجه لإطار عمل إعداد التقارير الإلكترونية، وتم تمييزه على أنه **نشط**. في حالة عدم إدراج موفر التكوين، أو عدم وضع علامة عليه كـ **نشط**، اتبع الخطوات الموجودة في [إنشاء موفر تكوين ووضع علامة عليه على أنه نشط.](tasks/er-configuration-provider-mark-it-active-2016-11.md).

### <a name="business-scenario"></a>سيناريو الأعمال

لديك حل تقارير إلكترونية يتضمن تنسيقًا يمكنك تشغيله لإنشاء مستند إلكتروني لأغراض التدقيق. ويحتوي هذا التنسيق على حركات الضرائب المتعلقة بأوامر المبيعات وأوامر الشراء، والتي تحتوي على التفاصيل المطلوبة، مثل تاريخ الحركة وقيمة الضريبة. اعتبارًا من السنه المالية الجديدة، تم تغيير بنية هذا المستند. يجب عليك الآن إرسال مستند موسع يتضمن تفاصيل إضافية (أسماء) لجميع الأطراف (العملاء والموردين) الذين يتم تقديم حركاتهم في التقارير المُنشأة. وبالتالي، يجب عليك تعديل حل إعداد التقارير الإلكترونية بحيث يقوم بإنشاء مستندات تتوافق مع هذا المطلب الجديد.

### <a name="configure-the-er-framework"></a>تكوين إطار عمل ER

اتبع الخطوات في [تكوين إطار عمل التقارير الإلكترونية](er-quick-start2-customize-report.md#ConfigureFramework) لإعداد الحد الأدنى لمجموعة معلمات التقارير الإلكترونية. يجب عليك إكمال هذا الإعداد قبل البدء في استخدام إطار عمل إعداد التقارير الإلكترونية لتصميم حل ER جديد.

### <a name="design-a-domain-specific-data-model"></a>تصميم نموذج بيانات خاص بالمجال

يجب إنشاء تكوين جديد للتقارير الإلكترونية يحتوي على مكون نموذج البيانات المطلوب. سيتم استخدام نموذج البيانات هذا كمصدر بيانات لاحقًا، عندما تقوم بتصميم تنسيق تقارير إلكترونية لإنشاء تقرير تدقيق.

اتبع هذه الخطوات لاستيراد نموذج البيانات المطلوب من ملف XML الذي توفره Microsoft.

1. قم بتنزيل الملف [Sample audit model.version.1.xml](https://download.microsoft.com/download/7/1/9/719b0132-fed7-4c73-8afa-90cac29c2fee/Sample-audit-model.version.1.xml) واحفظه في جهاز الكمبيوتر المحلي.
2. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
3. في مساحة عمل **إعداد التقارير الإلكترونية**، حدد **تكوينات إعداد التقارير**.
4. في صفحة **التكوينات**، في جزء الإجراءات، حدد **Exchange** \> **تحميل من ملف XML**.
5. حدد **استعراض** ثم ابحث عن الملف **Sample audit model.version.1.xml** وحدده.
6. حدد **موافق** لاستيراد التكوين.

    ![تكوين نموذج بيانات التقارير الإلكترونية المستوردة في صفحة التكوينات.](./media/er-data-model-parameterized-calls-imported-model.png)

يبين الرسم التوضيحي التالي الإصدار القابل للتحرير لنموذج البيانات المكوّن في صفحة **مصمم نموذج البيانات**.

![هيكل نموذج بيانات التقارير الإلكترونية في صفحة مصمم نموذج البيانات.](./media/er-data-model-parameterized-calls-model1.png)

في الوقت الحالي، هذا النموذج مصمم لعرض فقط حركات الضرائب التي تحتوي على التفاصيل المطلوبة.

### <a name="design-a-model-mapping-for-the-configured-data-model"></a>تصميم تعيين نموذج لنموذج البيانات المكوّن

بصفتك مستخدمًا في دور مطور التقارير الإلكترونية، يجب عليك إنشاء تكوين تقارير إلكترونية جديد يحتوي على مكون تعيين نموذج لعينة نموذج بيانات التدقيق. يقوم هذا المكون بتنفيذ نموذج البيانات المكون لـ 365‎ Finance Microsoft Dynamics وهو خاص بهذا التطبيق. يجب تكوين مكون تعيين النموذج لتحديد كائنات التطبيق التي يجب استخدامها لتعبئة نموذج البيانات الذي تم تكوينه بواسطة بيانات التطبيق في وقت التشغيل. لإكمال هذه المهمة، يجب أن تفهم كيفية تنفيذ بنية البيانات الخاصة بمجال ضرائب الشركات في Finance.

اتبع هذه الخطوات لاستيراد تعيين النموذج المطلوب من ملف XML الذي توفره Microsoft.

1. قم بتنزيل الملف [Sample audit model mapping.version.1.1.xml](https://download.microsoft.com/download/c/0/3/c03a4673-b1b1-4ef8-96d0-bf96518be6e0/Sample-audit-model-mapping.version.1.1.xml) واحفظه في جهاز الكمبيوتر المحلي.
2. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
3. في مساحة عمل **إعداد التقارير الإلكترونية**، حدد **تكوينات إعداد التقارير**.
4. في صفحة **التكوينات**، في جزء الإجراءات، حدد **Exchange** \> **تحميل من ملف XML**.
5. حدد **استعراض** ثم ابحث عن الملف **Sample audit model mapping.version.1.1.xml** وحدده.
6. حدد **موافق** لاستيراد التكوين.

    ![تكوين تعيين نموذج التقارير الإلكترونية الذي تم استيراده في صفحة التكوينات.](./media/er-data-model-parameterized-calls-imported-mapping.png)

يبين الرسم التوضيحي التالي الإصدار القابل للتحرير لتعيين النموذج الذي تم تكوينه على صفحة **مصمم تعيين النموذج**.

![هيكل تعيين نموذج التقارير الإلكترونية في صفحة مصمم تعيين النموذج.](./media/er-data-model-parameterized-calls-mapping1.png)

في الوقت الحالي، تعيين النموذج مصمم لعرض فقط حركات الضرائب التي تحتوي على التفاصيل المطلوبة. إنه يحضر هذه المعلومات من جدول تطبيق `TaxTrans` باستخدام مصادر بيانات التقارير الإلكترونية `TaxTrans` و`TaxTransFiltered` التي تم تكوينها.

### <a name="design-a-new-format"></a>تصميم تنسيق جديد

كمستخدم في دور المستشار الوظيفي للتقارير الإلكترونية، يجب عليك إنشاء تكوين تقارير إلكترونية جديد يحتوي على مكون التنسيق. يجب تكوين مكون التنسيق لملء التقارير التي تم إنشاؤها بواسطة حركات الضرائب التي تحتوي على كافة التفاصيل المطلوبة.

اتبع هذه الخطوات لاستيراد التنسيق المطلوب من ملف XML الذي توفره Microsoft.

1. قم بتنزيل الملف [Sample audit format.version.1.xml](https://download.microsoft.com/download/e/b/7/eb7e126e-2bb3-4bbb-a735-ffd4c48920b1/Sample-audit-format.version.1.1.xml) واحفظه في جهاز الكمبيوتر المحلي.
2. انتقل إلى **إدارة المؤسسة** \> **مساحات العمل** \> **التقارير الإلكترونية**.
3. في مساحة عمل **إعداد التقارير الإلكترونية**، حدد **تكوينات إعداد التقارير**.
4. في صفحة **التكوينات**، في جزء الإجراءات، حدد **Exchange** \> **تحميل من ملف XML**.
5. حدد **استعراض** ثم ابحث عن الملف **Sample audit format.version.1.xml** وحدده.
6. حدد **موافق** لاستيراد التكوين.

    ![تكوين تنسيق التقارير الإلكترونية الذي تم استيراده في صفحة التكوينات.](./media/er-data-model-parameterized-calls-imported-format.png)

يبين الرسم التوضيحي التالي الإصدار القابل للتحرير للتنسيق المكوّن في صفحة **مصمم التنسيق**.

![هيكل تنسيق التقارير الإلكترونية في صفحة مصمم التنسيق.](./media/er-data-model-parameterized-calls-format1.png)

تم تكوين تنسيق التقارير الإلكترونية لإنشاء تقرير كملف نصي بتنسيق قيم مفصولة بفواصل (CSV).

### <a name="run-the-imported-format"></a>تشغيل التقارير الإلكترونية المستوردة

1. في الصفحة **تكوينات**، حدد التكوين **عينة تنسيق التدقيق**، ثم في جزء الاجراءات، حدد **تشغيل**.
2. في مربع حوار **معلمات التقارير الإلكترونية**، في علامة التبويب **السجلات المطلوب تضمينها**، حدد **عامل التصفية**.
3. حدد الشروط المطلوبة لتحديد حركات الضريبة للإيصالين **PIV-110000004** و **INV-10000001**.
4. حدد **موافق**.
5. حدد **موافق**.
6. راجع المستند الذي تم إنشاؤه والذي يحتوي علي حركات الضريبة الخاصة بالإيصالات المحددة.

    ![عاين المستند الذي تم إنشاؤه مع حركات الضريبة.](./media/er-data-model-parameterized-calls-output1.png)

### <a name="adjust-the-imported-er-solution"></a>ضبط حل التقارير الإلكترونية المستورد

وفقًا للمتطلبات الجديدة، يجب أن يحتوي المستند الذي يجب عليك تقديمه على أسماء العملاء والموردين الذين تم تضمين حركاتهم. وبالتالي، يجب عليك تعديل حل التقارير الإلكترونية المستورد بحيث يقوم بإنشاء مستند يتوافق مع هذا المطلب الجديد.

حدد كيفية تطبيق التعديلات المطلوبة لمكونات التقارير الإلكترونية المستوردة.

يهدف هذا الأسلوب الواضح إلى تنفيذ التعديلات التالية:

- في نموذج بياناتك، أضف حقل نموذج البيانات الجديد `Transaction.Party.Name` من النوع *سلسلة* .
- في تعيين النموذج، قم بتكوين الرابط لحقل نموذج البيانات الجديد باستخدام علاقات الجدول المتاحة للوصول إلى السجل ذي الصلة من جدول التطبيق `DirPartyTable` وإحضار قيمه الحقل `Name` منه.

علي الرغم من ان هذا الأسلوب سيعمل، إلا إنه قد يتسبب في حدوث مشكلات في الأداء في قاعده بيانات SQL، لأن `TaxTrans` هو جدول الحركات ويمكنه بالتالي أن يحتوي على كمية كبيرة من السجلات. وفي هذه الحالة، يجب أن يساوي عدد استدعاءات `DirPartyTable` عدد السجلات الموجودة في الجدول `TaxTrans` والتي يمكن أن تتسبب في حدوث مشكلات في الأداء .

أو، يمكنك تطبيق التعديلات التالية:

- في نموذج بياناتك ، أضف الجذر الجديد `Party` والحقل `Party.Name` الجديد.
- في تعيين النموذج، أضف مصدر بيانات جديدًا سيربط كافة سجلات الجداول المستخدمة في علاقات الجداول للوصول إلى السجل ذي الصلة لجدول التطبيق `DirPartyTable`، اعتبارًا من الجدول `TaxTrans`.

علي الرغم من ان هذا الأسلوب سيعمل، الا إنه قد يتسبب في حدوث بعض المشاكل في استهلاك الذاكرة. حتى عند تشغيل مصدر بيانات [‎JOIN](er-join-data-sources.md) جديد كطلب SQL فردي لقاعدة بيانات التطبيق لمنع مشاكل أداء قاعدة البيانات، يجب إحضار النتيجة إلى ذاكرة خادم التطبيق. لأن عدد السجلات وعدد الحقول في تلك السجلات سيكون كبيرًا جدًا، فقد يتسبب هذا الأسلوب في استهلاك كثيف جدًا للذاكرة. قد يتم أيضًا طرح استثناء وقت تشغيل نفاد الذاكرة.

يمكنك تنفيذ التعديلات عندما يجمع تنسيق قيد التشغيل، في الذاكرة، رموز التعريف الفريدة للعملاء والموردين لجميع حركات الضرائب التي سيتم تقديمها في تقرير تم إنشاؤه. ولأنه يجب الاحتفاظ بالرموز الفريدة فقط، فلن تكون المجموعة النهائية من الرموز كبيرة بما يكفي للتأثير على استهلاك الذاكرة. سيتم بعد ذلك تمرير مجموعة الرموز إلى تعيين النموذج كوسيطة لاستدعاء آخر لمصدر البيانات من النوع *نموذج*. بالاستناد إلى هذا الاستدعاء، سيعمل تعيين النموذج على تشغيل مصدر بيانات تقارير إلكترونية جديد يقوم بإجراء طلب SQL واحد إلى قاعدة بيانات التطبيق لإحضار، من سجلات الجدول `DirPartyTable`، فقط لتلك الأطراف التي يتم تقديم رموزها في المجموعة المتوفرة من الرموز.

### <a name="adjust-the-imported-data-model"></a>ضبط نموذج البيانات المستورد

1. انتقل إلى **إدارة المؤسسة** \> **التقارير الإلكترونية** \> **التكوينات**.
2. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيمن، حدد **عينة نموذج التدقيق**.
3. في علامة التبويب السريعة **الإصدارات‏‎**، حدد الإصدار **2** بالحالة **[مسودة‏‎](general-electronic-reporting.md#component-versioning)**.
4. حدد علامة التبويب السريعة **مكونات التكوين**.
5. حدد **المصمم** لفتح نموذج البيانات لتحريره.
6. في الصفحة نموذج **نموذج البيانات**، تأكد من تحديد الحقل `Root`، ثم حدد **جديد**.
7. في مربع الحوار المنسدل، اتبع الخطوات التالية:

    1. في مجموعة الحقل **عقدة جديدة كـ‬**، حدد الخيار **تابع لعقدة نشطة**.
    2. في الحقل **الاسم**، أدخل **طرف**.
    3. في حقل **نوع الصنف**، حدد **قائمة سجلات**.
    4. حدد **إضافة** للانتهاء من إضافة الحقل الجديد.

8. تأكد من تحديد الحقل `Root.Party`، ثم على علامة تبويب **العقدة**، حدد **المعلمات**.
9. في مربع الحوار **المعلمات‏‎**، اتبع الخطوات التالية:

    1. على علامة التبويب **المعلمات** ، حدد **جديد**.
    2. في حقل **الاسم**، أدخل **‏‫PartyRefRecId‬**.
    3. في حقل **النوع**، حدد **‎Int64**.
    4. حدد خانة الاختيار **قائمة**.
    5. حدد **موافق** للانتهاء من إدخال المعلمات.

    > [!NOTE]
    > لقد قمت للتو بتكوين حقل نموذج البيانات `Root.Party` كحقل يتم استدعاؤه عند توفير قيمة في المعلمة **PartyRefRecId**. يجب أن تكون هذه القيمة موجودة في قائمة السجلات التي تحتوي على حقل `Value` من نوع البيانات *Int64*.

    ![مربع حوار "المعلمات".](./media/er-data-model-parameterized-calls-model2a.png)

10. تأكد من استمرار تحديد الحقل `Root.Party`، ثم حدد **جديد**.
11. في مربع الحوار المنسدل، اتبع الخطوات التالية:

    1. في مجموعة الحقل **عقدة جديدة كـ‬**، حدد الخيار **تابع لعقدة نشطة**.
    2. في حقل **الاسم**، أدخل **الاسم**.
    3. في الحقل **نوع الصنف**، حدد **سلسلة**.
    4. حدد **إضافة** للانتهاء من إضافة الحقل الجديد.

12. حدد **حفظ**، ثم أغلق صفحة **نموذج البيانات**.

    ![هيكل نموذج بيانات التقارير الإلكترونية المعدّل صفحة مصمم نموذج البيانات.](./media/er-data-model-parameterized-calls-model2b.png)

13. في علامة التبويب السريعة **الإصدارات**، للإصدار **2**، حدد **تغيير الحالة** \> **مكتمل**. ثم حدد **موافق**.

    > [!NOTE]
    > يتم تخزين تغييرات نموذج البيانات في المراجعة الثانية لمكون نموذج البيانات **عينة نموذج التدقيق‬‏‫** الموجود في الإصدار الثاني من تكوين التقارير الإلكترونية **عينة نموذج التدقيق‬‏‫**.

![تكوين نموذج بيانات التقارير الإلكترونية المحدّث في صفحة التكوينات.](./media/er-data-model-parameterized-calls-updated-model.png)

### <a name="adjust-the-imported-model-mapping"></a>ضبط تعيين النموذج المستورد

1. في صفحة **التكوينات**، في شجرة التكوينات في الجزء الأيمن، وسّع **عينة نموذج التدقيق**.
2. حدد **تعيين عينة نموذج التدقيق**، ثم على علامة التبويب السريعة **الإصدارات**، حدد إصدار التعيين الثاني الذي يستند إلى إصدار نموذج البيانات الأول (الإصدار **1.2**)، بالحالة **مسودة**.
3. حدد **إعادة تعريف**.
4. في الحقل **الإصدار الهدف**، اترك الإصدار **2** من النموذج الأساسي **عينة نموذج التدقيق**.
5. حدد **موافق** لإعادة تعريف تعيين النموذج ومواءمته بواسطة تغييرات نموذج البيانات الحديثة.

    لاحظ أن رقم إصدار تعيين النموذج القابل للتحرير قد تغير من **1.2** إلى **2.2** للإشارة إلى أن إصدار النموذج الثاني مستخدم حاليًا كأساس.

6. حدد **المصمم**.
7. في صفحة **تعيين النموذج إلى مصدر البيانات** في جزء الإجراءات، حدد **المصمم** لتعيين النموذج الحالي.
8. اتبع الخطوات التالية لإضافة مصدر بيانات جديد للوصول إلى جدول التطبيق `DirPartyTable`:

    1. في الجزء **نوع مصدر البيانات**، حدد **Dynamics 365 for Operations \> سجلات الجدول**.
    2. حدد **إضافة جذر** في جزء **مصادر البيانات** .
    3. في الحقل **الاسم**، أدخل **‏‫PartyTable‬**.
    4. في حقل **الجدول**، أدخل **DirPartyTable‎**.
    5. حدد **موافق** للانتهاء من إضافة مصدر البيانات الجديد.

9. اتبع الخطوات التالية لإضافة مصدر بيانات جديد لطلب سجلات `DirPartyTable`، استنادًا إلى قائمة أكواد تعريف السجلات المتوفرة:

    1. في الجزء **نوع مصدر البيانات**، حدد **عام \> حاوية فارغة**.
    2. حدد **إضافة جذر** في جزء **مصادر البيانات** .
    3. في حقل **الاسم**، أدخل **بيانات**.
    4. حدد **موافق** للانتهاء من إضافة مصدر البيانات الجديد.
    5. في جزء **مصادر البيانات**، حدد مصدر البيانات **‎بيانات**.
    6. في الجزء **نوع مصدر البيانات**، حدد **الوظائف \> الحقل المحسوب**.
    7. في جزء **مصادر البيانات**، حدد **إضافة** .
    8. في الحقل **الاسم**، أدخل **‏DirParty**.
    9. حدد **تحرير المعادلة**.
    10. في صفحة **مصمم المعادلة**، حدد **المعلمات**.
    11. في مربع الحوار **المعلمات‏‎**، اتبع الخطوات التالية:

        1. على علامة التبويب **المعلمات** ، حدد **جديد**.
        2. في الحقل **الاسم**، أدخل **‏DirPartyId**.
        3. في حقل **النوع**، حدد **‎Int64**.
        4. حدد خانة الاختيار **قائمة**.
        5. حدد **موافق**.

        > [!NOTE]
        > لقد قمت للتو بتكوين هذا الحقل المحسوب بحيث يقبل، في وقت التشغيل، وسيطة معلمة واحدة تم تكوينها كقائمة سجلات تحتوي على حقل `Value` واحد من النوع *Int64*.

    12. في حقل **المعادلة**، ابحث عن التعبير التالي:

        `FILTER(PartyTable, VALUEINLARGE(PartyTable.RecId, DirPartyId, DirPartyId.Value))`

        > [!NOTE]
        > لقد قمت للتو بتكوين الحقل المحسوب `DirParty` لإحضار فقط سجلات `DirPartyTable` حيث تم تضمين أكواد تعريف السجلات بها في القائمة `DirPartyId` المتوفرة كوسيطه عند استدعاء الحقل `DirParty`.

        ![معادلة لإحضار أسماء الأطراف من جدول التطبيق في صفحة مصمم المعادلة.](./media/er-data-model-parameterized-calls-formula1.png)

    13. حدد **حفظ** وأغلق صفحة **مصمم المعادلة**.
    14. حدد **حفظ**، ثم حدد **موافق** للانتهاء من إضافة مصدر البيانات الجديد.

10. اتبع هذه الخطوات لربط مصدر البيانات الجديد بحقل نموذج البيانات الجديد، بحيث يتم استخدام نموذج البيانات لعرض أسماء الأطراف:

    1. في جزء **نموذج البيانات**، حدد حقل نموذج البيانات `Root.Party`.
    2. حدد **تحرير** في جزء **نموذج البيانات** .
    3. في الصفحة **مصمم المعادلة**، في حقل **المعادلة‏‎**، أدخل التعبير التالي `Data.DirParty(PartyRefRecId)`.
    4. حدد **حفظ** وأغلق صفحة **مصمم المعادلة**.

        > [!NOTE]
        > لقد قمت للتو بتكوين الرابط لاستدعاء مصدر بيانات `Data.DirParty` الذي تم تكوينه وتوفير قائمة بأكواد تعريف السجلات التي سيتم تحديدها في التنسيق عند استدعاء حقل نموذج البيانات `Root.Party`.

    5. في جزء **نموذج البيانات**، حدد حقل نموذج البيانات `Root.Party.Name`.
    6. حدد **تحرير** في جزء **نموذج البيانات** .
    7. في صفحة **مصمم المعادلة**، في جزء **مصدر البيانات**، وسّغ **البيانات‏‎ \> DirParty**، وحدد **الاسم**.
    8. حدد **إضافة مصدر البيانات**.
    9. حدد **حفظ** وأغلق صفحة **مصمم المعادلة**.

    ![هيكل تعيين نموذج التقارير الإلكترونية المعدّل في صفحة مصمم تعيين النموذج.](./media/er-data-model-parameterized-calls-mapping2.png)

11. حدد **حفظ**، ثم أغلق صفحة **مصمم تعيين النموذج**.
12. أغلق صفحة **تعيين النموذج إلى مصدر البيانات**.
13. في علامة التبويب السريعة **الإصدارات‏‎**، للإصدار **2.2**، حدد **تغيير الحالة \> مكتمل‏‎**. ثم حدد **موافق**.

### <a name="adjust-the-imported-format"></a>ضبط التنسيق المستورد

1. في صفحة **التكوينات**، حدد **عينة تنسيق التدقيق‬‏‫**.
2. في علامة التبويب السريعة **الإصدارات‏‎‏‎**، حدد الإصدار  **1.2** بالحالة **مسودة‏‎‏‎**.
3. حدد **إعادة تعريف**.
4. في الحقل **الإصدار الهدف**، اترك الإصدار **2** من النموذج الأساسي **عينة نموذج التدقيق**.
5. حدد **موافق** لإعادة تعريف التنسيق ومواءمته بواسطة تغييرات نموذج البيانات الحديثة.
6. حدد **المصمم**.
7. في صفحة **مصمم التنسيق**، في شجرة بنية التنسيق في الجزء الأيمن، حدد **توسيع/طي**.
8. اتبع هذه الخطوات لإضافة عنصر تنسيق جديد لتجميع أكواد تعريف السجلات للأطراف التي يتم تقديم حركاتها في التقارير التي تم إنشاؤها.

    1. في شجرة بنية التنسيق، حدد عنصر التسلسل **Report.Row.Trans**.
    2. حدد **إضافة**.
    3. في مربع الحوار **إضافة**، حدد **مصدر بيانات \> عنصر**.
    4. في مربع الحوار **خصائص المكون**، في الحقل **الاسم**، أدخل **المعرف**.
    5. في الحقل **نوع البيانات**، حدد **Int64**.
    6. حدد **موافق**.

    > [!NOTE]
    > يمكن استخدام عنصر **مصدر بيانات \> عنصر** لإجراء العمليات الحسابية الداخلية وتحويل البيانات فقط في نطاق التنسيق الجاري. وبالتالي، من خلال إضافة عنصر التنسيق هذا، فأنت لا تغير محتوى المستند الذي تم إنشاؤه.

9. اتبع الخطوات التالية لإضافة عناصر تنسيق جديدة لإدخال أسماء الأطراف في التقارير التي تم إنشاؤها:

    1. حدد عنصر التسلسل **Report.Row**.
    2. حدد **إضافة**.
    3. في مربع الحوار **إضافة**، حدد **نص \> تسلسل**.
    4. في مربع الحوار **خصائص المكون**، في الحقل **الاسم**، أدخل **الطف**.
    5. حدد **موافق**.
    6. حدد عنصر التسلسل **Report.Row.Party**.
    7. حدد **إضافة**.
    8. في مربع الحوار **إضافة**، حدد **نص \> سلسلة**.
    9. في مربع الحوار **خصائص المكون**، في الحقل **الاسم**، أدخل **الاسم**.
    10. حدد **موافق**.

10. اتبع هذه الخطوات لإضافة مصدر بيانات جديد لتجميع أكواد تعريف السجلات للأطراف التي يتم تقديم حركاتها في التقارير التي تم إنشاؤها:

    1. في علامة تبويب **تعيين**، حدد **إضافة جذر**.
    2. في مربع الحوار **إضافة مصدر بيانات**، حدد **الوظائف \> جمع البيانات**.
    3. في مربع الحوار **خصائص مصدر البيانات "جمع البيانات"** ـ في حقل **الاسم**، أدخل **PartyIds**.
    4. في الحقل **نوع العنصر**، حدد **Int64**.
    5. حدد **موافق**.

11. اتبع هذه الخطوات لإضافة رابط جديد لتجميع أكواد تعريف السجلات للأطراف التي يتم تقديم حركاتها في التقارير التي تم إنشاؤها:

    1. في شجرة بنية التنسيق، حدد عنصر البيانات **Report.Row.Trans.Id**.
    2. حدد **تحرير المعادلة**.
    3. في الصفحة **مصمم المعادلة**، أدخل التعبير `PartyIds.Collect(model.Transaction.Party.RecId)`.
    4. حدد **حفظ** وأغلق صفحة **مصمم المعادلة**.

12. اتبع الخطوات التالية لإضافة روابط جديدة لإدخال أسماء الأطراف في التقارير التي تم إنشاؤها:

    1. في شجرة بنية التنسيق، حدد عنصر التسلسل **Report.Party**.
    2. حدد **تحرير المعادلة**.
    3. في الصفحة **مصمم المعادلة**، أدخل التعبير `model.Party(PartyIds.Result)`.
    4. حدد **حفظ** وأغلق صفحة **مصمم المعادلة**.
    5. في شجرة بنية التنسيق، حدد عنصر التسلسل **Report.Party.Name**.
    6. في علامة التبويب **التعيين**، حدد حقل نموذج البيانات `model.Party.Name`.
    7. حدد **ربط**.

    ![هيكل تنسيق التقارير الإلكترونية المعدّل في صفحة مصمم التنسيق.](./media/er-data-model-parameterized-calls-format2.png)

13. حدد **حفظ** وأغلق صفحة **مصمم التنسيق**.
14. أغلق صفحة **تعيين النموذج إلى مصدر البيانات**.
15. في علامة التبويب السريعة **الإصدارات**، للإصدار **2.2**، حدد **تغيير الحالة** \> **مكتمل**. ثم حدد **موافق**.

### <a name="run-the-adjusted-format"></a>تشغيل تنسيق معدّل

1. في الصفحة **تكوينات**، حدد **عينة تنسيق التدقيق**، ثم في جزء الاجراءات، حدد **تشغيل**.
2. في مربع حوار **معلمات التقارير الإلكترونية**، في علامة التبويب **السجلات المطلوب تضمينها**، حدد **عامل التصفية**.
3. حدد الشروط المطلوبة لتحديد حركات الضريبة للإيصالين **PIV-110000004** و **INV-10000001**.
4. حدد **موافق**.
5. حدد **موافق**.
6. راجع المستند المُنشأ الذي يحتوي على حركات الضرائب للسندات المحددة وأسماء العميل والمورد المقابل.

    ![عاين المستند الذي تم إنشاؤه مع حركات الضريبة وأسماء الأطراف.](./media/er-data-model-parameterized-calls-output2.png)

7. انتقل إلى **الحسابات الدائنة** \> **المورّد** \> **جميع المورّد‏‎ين**، وراجع تفاصيل الإيصال **PIV-110000004** المحدد، بما في ذلك اسم المورّد.

    ![راجع تفاصيل إيصال الشراء في صفحات جميع المورّدين ودفتر يومية الفواتير.](./media/er-data-model-parameterized-calls-review1.gif)

8. انتقل إلى **الحسابات المدينة** \> **العملاء** \> **جميع العملاء**، وراجع تفاصيل الإيصال **INV-10000001** المحدد، بما في ذلك اسم العميل.

    ![راجع تفاصيل إيصال المبيعات في صفحات جميع العملاء وضريبة المبيعات المرحّلة.](./media/er-data-model-parameterized-calls-review2.gif)

لمزيد من التفاصيل حول تنفيذ حل التقارير الإلكترونية، استخدم محلل التقارير الإلكترونية المضمن [تتبع الأداء](trace-execution-er-troubleshoot-perf.md).

## <a name="additional-resources"></a>الموارد الإضافية

- [دعم استدعاءات ذات معلمات لمصادر بيانات التقارير الإلكترونية لنوع الحقل المحسوب‬](er-calculated-field-type.md)
- [تتبع تنفيذ تنسيقات التقارير الإلكترونية لاستكشاف مشكلات الأداء وإصلاحها](trace-execution-er-troubleshoot-perf.md)
- [استخدام مصادر بيانات جمع البيانات في تنسيقات التقارير الإلكترونية](er-data-collection-data-sources.md)
- [دالة التقارير الإلكترونية ValueInLarge](er-functions-logical-valueinlarge.md)

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
