---
title: إنشاء مرتجعات في نقطة البيع.
description: يصف هذا الموضوع كيفية بدء المرتجعات لحركات الدفع نقدًا والاستلام فورًا‬‬‏‫ أو أوامر العملاء في تطبيق نقطة بيع Microsoft Dynamics 365 Commerce (POS).
author: hhainesms
ms.date: 04/27/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-20
ms.dyn365.ops.version: Release 10.0.20
ms.openlocfilehash: c8e06c0d83e3bc2f5efea1e3a8124c700706aa2e
ms.sourcegitcommit: 9e1129d30fc4491b82942a3243e6d580f3af0a29
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/27/2022
ms.locfileid: "8648978"
---
# <a name="create-returns-in-pos"></a>إنشاء مرتجعات في نقطة البيع.

[!include [banner](includes/banner.md)]

يصف هذا الموضوع كيفية بدء المرتجعات لحركات الدفع نقدًا والاستلام فورًا‬‬‏‫ أو أوامر العملاء في تطبيق نقطة بيع Microsoft Dynamics 365 Commerce (POS).

> [!NOTE]
> في Commerce الإصدار 10.0.20 والإصدارات الأحدث، تتوفر ميزة جديدة تسمى **تجربة معالجة الإرجاع الموحدة في نقطة البيع**. توفر هذه الميزة عملية إرجاع أكثر تناسقًا وموحدة في نقطة البيع، بغض النظر عن نوع الحركة (حركات الدفع نقدًا والاستلام فورًا‬‬‏‫ أو أمر العميل) أو القناة الأصلية التي تم إنشاء أمر التوريد بها. نوصي بأن تقوم جميع المؤسسات بتشغيل هذه الميزة الجديدة للمساعدة في تحسين الموثوقية بشكل عام لمعالجة الإرجاع من خلال نقطة البيع.
>
> بعد تشغيل الميزة، يتعذر إيقاف تشغيلها.

## <a name="process-returns-by-using-the-return-transaction-operation"></a>إرجاعات العملية باستخدام عملية حركة الإرجاع

نوصي بإضافة عملية حركة الإرجاع إلى [تخطيط شاشة نقطة البيع](pos-screen-layouts.md). وفي Commerce الإصدارات قبل الإصدار 10.0.20، تقوم عملية حركة الإرجاع بشكل صحيح بدعم معالجة المرتجعات لحركات الدفع نقدًا والاستلام فورًا فقط. بعد تشغيل الميزة **تجربة معالجة الإرجاع الموحدة في نقطة البيع‬‏‫** في Commerce الإصدار 10.0.20 أو أحدث، تدعم عملية حركة الإرجاع أيضًا معالجة المرتجعات التي تنشأ من أوامر العميل، مثل أوامر "انتقاء" أو "شحن إلى المنزل" التي تمت فوترتها بالفعل.

من عملية حركة الإرجاع، يمكن للمستخدمين البحث عن حركة الدفع نقدًا والاستلام فورًا أو أمر العميل الذي سيتم إرجاعه مقابل إدخال أي من معايير البحث الأربعة التالية. يمكن للمستخدمين إدخال هذه المعايير باستخدام لوحة مفاتيح الجهاز، أو لوحة المفاتيح على الشاشة، أو الماسح الضوئي للكود الشريطي.

- معرف الإيصال
- رقم الطلب
- معرف مرجع القناة (والذي يُعرف أيضًا بمعرف تأكيد الأمر)
- معرف الفاتورة

في حالة العثور على الحركة أو الأمر الذي يتطابق مع معايير البحث، تظهر الصفحة **المنتجات القابلة للإرجاع**. هناك، يمكن للمستخدمين تحديد الأصناف التي يتم إرجاعها. كما يمكنهم إدخال كميات الإرجاع وأكواد السبب.

لكل بند من بنود الأوامر في قائمة المنتجات القابلة للإرجاع، تعرض نقطة البيع معلومات حول كمية الشراء الأصلية والكميات من أية مرتجعات تمت معالجتها مسبقًا. يجب أن تكون كمية الإرجاع التي يدخلها المستخدم لبند الأمر أقل من أو يساوي قيمة الحقل **متاح إلى الإرجاع**.

![صفحة المنتجات القابلة للإرجاع.](media/returnslist.png)

أثناء معالجة الإرجاع، وفي حالة وجود منتج فعلي لأحد المستخدمين، وكان ذلك المنتج يحتوي على كود شريطي، يمكن للمستخدم القيام بالمسح الضوئي للكود الشريطي. يؤدي كل مسح ضوئي للكود الشريطي إلى زيادة كمية الإرجاع بمقدار صنف واحد. ومع ذلك، إذا كانت تسمية الكود الشريطي تشتمل على كمية مضمنة، سيتم إدخال تلك الكمية في الحقل **الإرجاع الآن**.

كما يمكن للمستخدمين تحديد الأصناف يدويًا في الصفحة **المنتجات القابلة للإرجاع** ثم تحديث الحقل **الإرجاع الآن** باستخدام جزء التفاصيل الموجود على الجانب الأيمن.

في حالة تحديد الكمية القصوى المتاحة **الإرجاع الآن** لحركة، يمكن للمستخدم تحديد العملية **تحديد الكل** على شريط تطبيقات نقطة البيع لتعيين الكمية القصوى القابلة للإرجاع على كافة البنود.

بالنسبة لكل بند يحتوي علة الكمية **الإرجاع الآن**، يجب على المستخدم تحديد كود سبب الإرجاع باستخدام لوحة التفاصيل. بالنسبة لإرجاعات الدفع نقدًا والاستلام فورًا، يتم تكوين أكواد سبب الإرجاع كأكواد معلومات في ملف تعريف وظائف المتجر. بالنسبة لمرتجعات أوامر العميل ، يتم تكوين أكواد سبب الإرجاع في الصفحة **أكواد سبب الإرجاع** في مركز Dynamics 365 Commerce الرئيسي.

بعد تعيين كمية الإرجاع وكود السبب لكل صنف يجب إرجاعه، يمكن للمستخدم تحديد عملية **الإرجاع** على شريط تطبيق نقطة البيع لمتابعة المعالجة. عندئذ تظهر صفحة حركة نقطة البيع، حيث تمت إضافة الأصناف القابلة للإرجاع التي تم تحديدها في الصفحة السابقة إلى سله التسوق. وتظهر الكميات **الإرجاع الآن** للأصناف على شكل بنود كمية سالبة في الحركة، ويتم حساب إجمالي المبلغ المسترد.

يمكن أن يقوم المستخدمون بإضافة بنود إلى حركة إرجاع إذا كانوا يقومون بإنشاء أمر صرف. كما يمكن للمستخدمين إضافة المزيد من أصناف الإرجاع المخصصة إلى حركه إرجاع باستخدام عملية **إرجاع المنتج** لبند مبيعات الكمية الموجبة المحدد الذي تمت إضافته.

> [!NOTE]
> لا تقدم عملية **إرجاع المنتج** في نقطة البيع أي تحقق من الصحة مقابل أية حركة أصلية وتسمح بإرجاع أي منتج. وبالتالي، نُوصي بأن يتم السماح للمستخدمين المخولين فقط بإجراء هذه العملية، أو أنه يجب القيام بتجاوز المدير في حالة استخدام هذه العملية.

إذا كان المبلغ المسترد مستحقًا عند السحب، فيمكن للمؤسسات تكوين [سياسات دفع المبلغ المسترد](refund_policy_returns.md) التي تحد طرق الدفع التي يمكن استخدامها لاسترداد المبلغ للعملاء. إذا كانت الحركة الأصلية قد تم دفعها باستخدام بطاقة مدينة، وفقًا لمعالج الدفع وتكوين النظام، فقد يكون لدى المستخدمين خيار [إصدار مبلغ مسترد للبطاقة الأصلية](dev-itpro/linked-refunds.md). في هذه الحالة، يمكن معالجة المبلغ المسترد بدون الحاجة إلى سحب بطاقة العميل المدينة الخاصة به مرة أخرى. يتم استخدام رمز الدفع الأصلي لإصدار المبلغ المسترد.

## <a name="other-return-options-in-pos"></a>خيارات إرجاع أخرى في نقطة البيع

عند تشغيل الميزة **تجربة معالجة الإرجاع الموحدة في نقطة البيع**، يمكن للمستخدمين أيضًا استخدام العملية **إظهار دفتر اليومية** في نقطة البيع لبدء حركة الدفع نقدًا والاستلام فورًا‬‬‏‫ أو أمر العميل. ثم يمكنهم تحديد حركة في دفتر اليومية ثم تحديد عملية **الإرجاع** علي شريط تطبيق نقطة البيع. تتوفر هذه العملية فقط في حالة وجود بنود قابلة للإرجاع على الأمر. وإنها تعمل على بدء تجربة المستخدم نفسها كعملية **حركة الإرجاع**.

كما يمكن للمستخدمين استخدام العملية **استدعاء الأمر** في نقطة البيع للبحث عن أوامر العميل واستدعائها. (لا يمكن استخدام هذه العملية لحركات الدفع نقدًا والاستلام فورًا‬‬‏‫). في هذه الحالة، بعد تحديد أمر العميل، يمكن استخدام العملية **إرجاع** على شريط تطبيق نقطة البيع لبدء إرجاع أمر العميل. تتوفر هذه العملية فقط في حالة وجود بنود قابلة للإرجاع على الأمر. وإنها تعمل على بدء تجربة المستخدم نفسها كعملية **حركة الإرجاع** أو **إظهار دفتر اليومية**.

## <a name="return-orders-are-posted-to-commerce-headquarters-as-sales-orders"></a>يتم ترحيل أوامر الإرجاع إلى مركز Commerce الرئيسي كأوامر مبيعات 

عند تشغيل **تجربة معالجة الإرجاع الموحدة في نقطة البيع**، تتم كتابة كافة المرتجعات التي يتم إنشاؤها في نقطة البيع إلى مركز Commerce الرئيسي كأوامر المبيعات التي تحتوي على بنود سالبة. في Commerce في الإصدارات قبل 10.0.20، يمكن للمستخدمين تحديد ما إذا كان يجب ترحيل أوامر الإرجاع على إنها أوامر مبيعات تحتوي على بنود سالبة أم لا، أو ما إذا كان يجب أن تكون أوامر إرجاع يتم إنشاؤها من خلال عملية ترخيص المواد المسترجعة (RMA). 

في الميزة **تجربة معالجة الإرجاع الموحدة في نقطة البيع**، تم إهمال خيار استخدام عملية RMA لإنشاء المرتجعات في نقطة البيع. بعد تشغيل هذه الميزة، سيتم إنشاء كافة المرتجعات كأوامر مبيعات تشتمل على بنود سالبة.

## <a name="offline-return-processing-improvements"></a>تحسينات معالجة الإرجاع دون اتصال

في معظم الحالات، عند معالجة إرجاع في نقطة بيع، يحاول النظام إجراء استدعاء لخدمة الوقت الحقيقي (RTS) لمركز Commerce الرئيسي للتحقق من صحة الكميات الحالية المتوفرة للإرجاع يساعد هذا التحقق في الصحة على منع سيناريوهات الاحتيال حيث يحاول العميل إرجاع الصنف نفسه في مواقع متعددة.

لمعالجة المواقف التي لا يمكن إجراء استدعاء RTS بها بسبب مشكلات الشبكة أو الاتصال، يتم وضع العملية في مكان لمزامنة بيانات كمية الإرجاع بشكل دوري من مركز Commerce الرئيسي إلى قاعدة بيانات القناة الخاصة بالمتجر. يساعد تعقب الإرجاع الموجود على القناة في التأكد من أن الكميات **المتاح إلى الإرجاع** التي يتم عرضها في نقطة البيع دقيقة بشكل معقول، حتى عندما تكون نقطة البيع دون اتصال. كما أنه يضمن أن بإمكان نقطة البيع الاستمرار في التحقق من صحة المعلومات الخاصة بالقناة للمساعدة في تجنب المرتجعات الاحتيالية.

لاستخدام عملية الإرجاع دون اتصال بالطريقة المناسبة، يجب أن تقوم المؤسسات بجدولة وظيفة الدفعة **تحديث كميات الارتجاع** في مركز Commerce الرئيسي حتى يتم تشغيلها بشكل متكرر. نوصي بتشغيل هذه الوظيفة بالتكرار نفسه كالوظيفة P التي تسحب الحركات الجديدة من قنوات Commerce إلى مركز Commerce الرئيسي.

تحسب الوظيفة **تحديث كميات الإرجاع** الكميات المتوفرة للإرجاع لكافة أوامر المبيعات التي يتم العثور عليها في مركز Commerce الرئيسي. ويجب بعد ذلك إرسال البيانات التي تقوم بحسابها الوظيفة إلى قواعد بيانات القنوات، بحيث يمكن تحديث قنوات التخزين. يتم استخدام مهمة توزيع **كميات الإرجاع** (1200) لهذا الغرض. ونظرًا لأنه تتم مزامنة بيانات حول الكمية القابلة للإرجاع من مركز Commerce الرئيسي، وذلك في حالة معالجة الإرجاع في نقطة البيع، ولكن لا يمكن إجراء استدعاء RTS، يمكن لنقطة البيع استخدام معلومات الإرجاع الموجود على القناة للتحقق من صحة الكميات **المتوفرة للإرجاع** لبند المبيعات المحدد.

عند تعذر إجراء استدعاءات RTS، وكانت نقطة البيع تستخدم بيانات موجودة على القناة للتحقق من صحة الإرجاع ، فإن رسالة تحذير تبلغ المستخدمين بأنها تقوم بإنشاء إرجاع "دون اتصال". وبالتالي، فإنها تعلم أن الكمية **متوفر للإرجاع** المعروضة في نقطة البيع قد تكون قديمة ولم تعد دقيقة، اعتمادًا على الوقت الذي تم به معالجة وظيفة **تحديث كميات الإرجاع** ومزامنتها مع القناة للمرة الأخيرة.

على سبيل المثال، قام عميل مؤخرًا بمعالجة إرجاع لبند أمر في قناة أخرى، ولكن لم تتم مزامنة تلك البيانات بعد بقواعد بيانات القنوات من خلال الوظيفة **تحديث كميات الإرجاع**. ومن ثم، ينتقل العميل إلى متجر مختلف ويحاول إرجاع الصنف نفسه مرة أخرى. في هذه الحالة، إذا لم يستطع المتجر إجراء استدعاء RTS لمركز Commerce الرئيسي للحصول على بيانات إرجاع الوقت الحقيقي، ستسمح نقطة البيع بإرجاع الصنف مرة أخرى. ومع ذلك، يتم تحذير المستخدم من أن المعلومات التي يتم استخدامها للتحقق من الإرجاع قد تكون غير محدثة. الرسالة التي يتلقاها المستخدم عبارة عن رسالة تحذير فقط. ولا يمنع هذا المستخدم من متابعة معالجة الإرجاع.

إذا كانت المعلومات الموجودة على القناة غير محدثة لسبب ما، وتمت معالجة إرجاع دون اتصال لكمية تتجاوز الكمية **المتاح للإرجاع** الفعلية، فقد يتم إنشاء خطأ عند تشغيل ترحيل كشف الحساب لإنشاء الحركة في مركز Commerce الرئيسي.

> [!NOTE]
> عند تشغيل الميزة **تجربة معالجة الإرجاع الموحدة في نقطة البيع**، تصبح الميزات الاختيارية الجديدة التي تدعم التحقق من صحة مرتجعات المنتجات المتسلسلة متاحة. لمزيد من المعلومات، راجع نقطة بيع [الرقم التسلسلي للإرجاع – المنتجات المتحكمة في نقطة البيع (POS)](POS-serial-returns.md).

## <a name="version-details"></a>تفاصيل الإصدار

توفر القائمة التالية الحد الأدنى من متطلبات الإصدار للمكونات المختلفة.
- Commerce headquarters: الإصدار 10.0.20
- Commerce Scale Unit (CSU): الإصدار 9.30
- نقطة البيع (POS): الإصدار 9.30

## <a name="enable-proper-tax-calculation-for-returns-with-partial-quantity"></a>تمكين الحساب المناسب للضريبة للمرتجعات التي تحتوي على كمية جزئية

تضمن هذه الوظيفة مساواة الضرائب في النهاية لمبلغ الضريبة المحصل بالأصل وذلك عند إرجاع أمر باستخدام فواتير متعددة.

1. في مساحة عمل **إدارة الميزات** ابحث عن **‏‫‏‫تمكين الحساب المناسب للضريبة للمرتجعات التي تحتوي على كمية جزئية‬**.
1. حدد الميزة **تمكين الحساب المناسب للضريبة للمرتجعات التي تحتوي على كمية جزئية** ثم حدد **تمكين**.

## <a name="set-up-return-locations-for-retail-stores"></a>إعداد مواقع الإرجاع لمتاجر البيع بالتجزئة

يسمح لك Commerce إعداد مواقع الإرجاع المستندة إلى أكواد معلومات البيع بالتجزئة وأكواد أسباب المبيعات والتسويق. عندما يقوم العملاء بإرجاع المشتريات، غالبًا ما يشير موظفي الكاشير إلى سبب الإرجاع. يمكنك تحديد أن يتم تعيين المنتجات المرتجعة إلى مواقع إرجاع مختلفة في المخزون، استناداً إلى أكواد المعلومات وأكواد الأسباب التي يحددها الكاشير في سجل نقطة البيع (POS).

على سبيل المثال، يقوم أحد العملاء بإرجاع أحد المنتجات المعيبة، ويقوم الكاشير بمعالجة حركة الإرجاع. عند عرض Retail POS كود المعلومات الخاص بالمرتجعات، يقوم الكاشير بتحديد الكود الفرعي لمرتجعات المنتجات المعيبة. بعد ذلك، يتم تعيين المنتج المرتجع إلى موقع إرجاع معين بشكل تلقائي.

بإمكان موقع الإرجاع أن يكون مستودعًا أو موقعًا داخل المستودع أو حتى بالتة معينة، وذلك وفقًا لمواقع المخزون التي أعدتها مؤسستك. يمكنك تعيين كل موقع إرجاع إلى واحد أو أكثر من أكواد معلومات البيع بالتجزئة وأكواد أسباب المبيعات والتسويق‬.

### <a name="prerequisites"></a>المتطلبات الأساسية

قبل إعداد مواقع الإرجاع، ينبغي إعداد العناصر التالية:

- **أكواد معلومات البيع بالتجزئة** – المطالبات في سجل نقطة البيع والتي تم إعدادها في الوحدة النمطية **البيع بالتجزئة**. لمزيد من المعلومات، راجع [إعداد أكواد الأسباب](/dynamicsax-2012/appuser-itpro/setting-up-info-codes).
- **أكواد أسباب المبيعات والتسويق** – المطالبات الموجودة في سجل نقطة البيع والتي تم إعدادها في الوحدة النمطية **المبيعات والتسويق**. لمزيد من المعلومات، راجع [إعداد أكواد الأسباب](/dynamicsax-2012/appuser-itpro/set-up-return-reason-codes).
- **مواقع المخزون** – الأماكن حيث يتم الاحتفاظ بالمخزون. لمزيد من المعلومات، راجع [إعداد مواقع المخزون](/dynamicsax-2012/appuser-itpro/about-locations).
    
### <a name="set-up-return-locations"></a>إعداد مواقع الإرجاع

لإعداد مواقع الإرجاع، اتبع هذه الخطوات.

1. انتقل إلى **البيع بالتجزئة والتجارة \> إعداد القناة \> المستودعات**، وحدد مستودعًا.
1. على علامة التبويب السريعة **البيع بالتجزئة**، في حقل **موقع الإرجاع الافتراضي**، حدد موقع المخزون المراد استخدامه للمرتجعات حيث لم يتم تعيين أكواد المعلومات أو أكواد الأسباب إلى مواقع الإرجاع.
1. في حقل **بالتة الإرجاع ‬الافتراضية**‬، حدد البالتة المراد استخدامها للمرتجعات حيث لم يتم تعيين أكواد المعلومات أو أكواد الأسباب إلى مواقع الإرجاع.
1. انتقل إلى **البيع بالتجزئة والتجارة \> إدارة المخزون \> مواقع الإرجاع**.
1. حدد **جديد** لإنشاء سياسة موقع إرجاع.
1. أدخل اسمًا فريدًا ووصفًا لموقع الإرجاع.

    > [!NOTE]
    > إذا تم إعداد تسلسل رقمي لمواقع الإرجاع، فسيتم إدخال الاسم تلقائياً.

1. على علامة التبويب السريعة **عام**، عيّن الخيار **طباعة التسميات‬** إلى **نعم** لطباعة التسميات‬ لجميع المنتجات التي تم تعيينها إلى مواقع الإرجاع.
1. عيّن الخيار **حظر المخزون‬** إلى **نعم** لوضع المنتجات المرتجعة في موقع الإرجاع الافتراضي خارج المخزون ومنع بيعها.
1. لتعيين أكواد معلومات البيع بالتجزئة معينة والأكواد الفرعية إلى مواقع الإرجاع، اتبع الخطوات التالية:

    1. على علامة التبويب السريعة **أكواد معلومات البيع بالتجزئة‬**، حدد **إضافة**.
    1. في الحقل **كود المعلومات**، حدد كود معلومات للمرتجعات.
    1. في الحقل **الكود الفرعي**، حدد كودًا فرعيًا لسبب الإرجاع. يعرض حقل **الوصف** وصفًا للكود الفرعي المحدد.
    1. في الحقل **المتجر**، حدد المتجر حيث يتم استخدام كود المعلومات.
    1. استخدم حقول **المستودع** و **الموقع** و **معرف البالتة‬** لتحديد موقع إرجاع. على سبيل المثال، لتحديد موقع معين في المتجر، حدد متجرًا في الحقل **المتجر** وموقعًا في الحقل **الموقع**.
    1. حدد خانة الاختيار  **حظر المخزون** لوضع المنتجات المرتجعة خارج المخزون ومنع بيعها.

1. لتعيين أكواد أسباب المبيعات والتسويق إلى مواقع الإرجاع، اتبع الخطوات التالية:

    1. على علامة التبويب السريعة **أكواد أسباب المبيعات والتسويق**، حدد **إضافة**.
    1. في حقل **كود السبب**، حدد كود سبب للمرتجعات. يعرض حقل **الوصف** وصفًا لكود السبب المحدد.
    1. في الحقل **المتجر**، حدد المتجر حيث يتم استخدام كود السبب.
    1. استخدم حقول **المستودع** و **الموقع** و **معرف البالتة‬** لتحديد موقع إرجاع. على سبيل المثال، لتحديد بالتة معينة في موقع في مستودع، حدد أحد المستودعات في الحقل **المستودع** وموقعًا في الحقل **الموقع** وبالتة في حقل **معرف البالتة**.
    1. حدد خانة الاختيار  **حظر المخزون** لوضع المنتجات المرتجعة خارج المخزون ومنع بيعها.

    > [!NOTE]
    > إذا تم استخدام سياسة موقع الإرجاع لأحد الأصناف، ولكن سبب الإرجاع الذي يحدده الكاشير لا يتطابق مع أي كود محدد في علامة التبويب السريعة **أكواد معلومات البيع بالتجزئة** أو **أكواد أسباب المبيعات والتسويق**، فسيتم إرسال الصنف إلى موقع الإرجاع الافتراضي المحدد في صفحة **المستودع**. علاوةً على ذلك، يحدد إعداد خانة الاختيار **حظر المخزون** على علامة التبويب السريعة **عام** في صفحة **مواقع الإرجاع** المكان حيث يجب أن يكون الصنف المرتجع محظورًا من المخزون.

1. انتقل إلى **البيع بالتجزئة والتجارة \> التدرج الهرمي لمنتج Commerce**.
1. على علامة التبويب السريعة **إدارة خصائص فئة المخزون‬** في الحقل **موقع الإرجاع**، حدد موقع إرجاع. نظرًا لإمكانية تعريف سياسات متعددة لمواقع الإرجاع للمتجر نفسه، تحدد القيمة التي تحددها هنا سياسة موقع الإرجاع المستخدمة.

## <a name="additional-resources"></a>الموارد الإضافية

[الرقم التسلسلي للإرجاع – المنتجات المتحكمة في نقطة البيع (POS)](POS-serial-returns.md)

[المبالغ المستردة المرتبطة بالحركات المعتمدة والمؤكدة مسبقًا](dev-itpro/linked-refunds.md)

[إنشاء وتحديث سياسة للمرتجعات والمبالغ المستردة لقناة](refund_policy_returns.md)

[التكوينات المرئية لواجهة مستخدم نقطة البيع](pos-screen-layouts.md)
