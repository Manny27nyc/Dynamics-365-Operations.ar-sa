---
title: التحقق من صحة حركات المتجر لحساب كشف الحساب
description: يصف هذا الموضوع الوظيفة الخاصة بالتحقق من صحة حركات المتجر في Microsoft Dynamics 365 Commerce.
author: analpert
ms.date: 01/31/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: analpert
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: f51b1f39aa212fe8587761721194db7791bec5bc
ms.sourcegitcommit: 7893ffb081c36838f110fadf29a183f9bdb72dd3
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/02/2022
ms.locfileid: "8087439"
---
# <a name="validate-store-transactions-for-statement-calculation"></a>التحقق من صحة حركات المتجر لحساب كشف الحساب

[!include [banner](includes/banner.md)]

يصف هذا الموضوع الوظيفة الخاصة بالتحقق من صحة حركات المتجر في Microsoft Dynamics 365 Commerce. تقوم عملية التحقق من الصحة بتحديد وتعليم الحركات التي تؤدي إلى حدوث أخطاء في الترحيل، قبل أن يتم انتقاؤها بواسطة عملية ترحيل كشف الحساب.

عند محاولة ترحيل كشف حساب، يمكن أن تفشل عملية التحقق من الصحة نظرًا لعدم اتساق البيانات في جداول حركات التجارة. إليك بعض الأمثلة عن العوامل التي يمكن أن تتسبب في حدوث حالات عدم التناسق هذه:

- إجمالي الحركة في جدول العنوان غير متطابق مع إجمالي الحركة في البنود.
- عدد الأصناف المحددة في جدول العنوان غير متطابق مع عدد الأصناف الموجودة في جدول الحركة.
- الضرائب في جدول العنوان غير متطابقة مع قيمة الضريبة في البنود. 

عندما تنتقي عملية ترحيل كشوف الحسابات حركات غير متناسقة، قد يتسبب إنشاء دفاتر يومية دفعات وفواتير مبيعات في فشل عملية ترحيل كشف الحساب. تؤدي عملية **التحقق من صحة حركات المتجر** إلى منع حدوث هذه المشكلات من خلال ضمان تمرير الحركات التي تمرر قواعد التحقق من صحة الحركات فقط إلى عملية حساب كشف حساب الحركات.

يبين الرسم التوضيحي التالي العمليات اليومية المتكررة لتحميل الحركات، والتحقق من صحتها، وحساب كشوف حسابات الحركات وترحيلها، وكذلك عمليات نهاية اليوم لحساب القائمة المالية وترحيلها.

![رسم توضيحي يوضح العمليات اليومية المتكررة لتحميل الحركات، والتحقق من صحتها، وحساب كشوف حسابات الحركات وترحيلها، وكذلك عمليات نهاية اليوم لحساب القائمة المالية وترحيلها](./media/valid-checker-statement-posting-flow.png)

## <a name="store-transaction-validation-rules"></a>قواعد التحقق من صحة حركات المتجر

تدقق معالجة الدُفعة **التحقق من صحة حركات المتجر** في تناسق جداول حركات التجارة، استنادًا إلى قواعد التحقق من الصحة التالية.

> [!NOTE]
> ستستمر إضافة قواعد التحقق من الصحة في الإصدارات اللاحقة.

### <a name="transaction-header-validation-rules"></a>قواعد التحقق من صحة عنوان الحركة

يسرد الجدول التالي قواعد التحقق من صحة عنوان الحركة التي يتم التحقق منها مقابل عنوان حركات البيع بالتجزئة قبل تمرير هذه الحركات إلى ترحيل كشف الحساب.

| القاعدة | ‏‏الوصف‬ |
|-------|-------------|
| تاريخ الأعمال | تتحقق هذه القاعدة من أن تاريخ العمل الخاص بالحركة مرتبط بفترة مالية مفتوحة في دفتر الأستاذ. |
| تقريب العملة | تتحقق هذه القاعدة من أنه يتم تقريب مبالغ الحركة وفقًا لقاعدة تقريب العملة. |
| حساب العميل | تتحقق هذه القاعدة من أن العميل المستخدم في الحركة موجود في قاعدة البيانات. |
| مبلغ الخصم | تتحقق هذه القاعدة من أن مبلغ الخصم الموجود في العنوان يساوي مجموع مبالغ الخصومات الموجودة في البنود. |
| حالة ترحيل المستند المالي (البرازيل) | تتحقق هذه القاعدة من إمكانية ترحيل المستند المالي بنجاح. |
| إجمالي المبلغ | تتحقق هذه القاعدة من أن إجمالي المبلغ في عنوان الحركة يتطابق مع المبلغ الصافي، بما في ذلك الضريبة، لبنود الحركة بالإضافة إلى الرسوم. |
| الصافي | تتحقق هذه القاعدة من أن المبلغ الصافي في عنوان الحركة يتطابق مع المبلغ الصافي، مع استبعاد الضريبة، لبنود الحركة بالإضافة إلى الرسوم. |
| الصافي + الضريبة | تتحقق هذه القاعدة من أن إجمالي المبلغ في عنوان الحركة يتطابق مع المبلغ الصافي، مع استبعاد الضريبة، لبنود الحركة بالإضافة إلى كل الضرائب والرسوم. |
| عدد الأصناف | تتحقق هذه القاعدة من أن عدد الأصناف المحددة في عنوان الحركة يتطابق مع مجموع الكميات الموجودة في بنود الحركة. |
| مبلغ الدفعة | تتحقق هذه القاعدة من أن مبلغ الدفع الموجود في عنوان الحركة يتطابق مع مجموع كل حركات الدفع. |
| حساب الإعفاء الضريبي | تتحقق هذه القاعدة من أن مجموع المبلغ المحسوب ومبلغ الإعفاء الضريبي لبنود التكاليف يساوي المبلغ المحسوب الأصلي. |
| تضمين الضريبة في السعر | تتحقق هذه القاعدة من تناسق علامة **الضريبة مضمنة في السعر** عبر عنوان الحركة وحركات الضريبة. |
| الحركة ليست فارغة | تتحقق هذه القاعدة من أن الحركة تحتوي على بنود، ومن عدم إلغاء بند واحد على الأقل. |
| دفع بالزيادة/بالنقصان‬‬‏‫ | تتحقق هذه القاعدة من أن الفرق بين إجمالي المبلغ ومبلغ الدفع لا يتجاوز الحد الأقصى لتكوين الدفع بالزيادة/بالنقصان. |

### <a name="transaction-line-validation-rules"></a>قواعد التحقق من صحة بنود الحركات

يسرد الجدول التالي قواعد التحقق من صحة بنود الحركة التي يتم التحقق منها مقابل تفاصيل بنود حركات البيع بالتجزئة قبل تمرير هذه الحركات إلى ترحيل كشف الحساب.

| القاعدة | ‏‏الوصف‬ |
|-------|-------------|
| الكود الشريطي | تتحقق هذه القاعدة من أن كافة أكواد شريط الأصناف المستخدمة في بنود الحركة موجودة في قاعدة البيانات. |
| بنود التكاليف | تتحقق هذه القاعدة من أن مجموع المبلغ المحسوب ومبلغ الإعفاء الضريبي لبنود التكاليف يساوي المبلغ المحسوب الأصلي. |
| مرتجعات بطاقات الهدايا | تتحقق هذه القاعدة من عدم وجود مرتجعات لبطاقات الهدايا في الحركة. |
| متغير الصنف | تتحقق هذه القاعدة من أن كافة الأصناف والمتغيرات المستخدمة في بنود الحركة موجودة في قاعدة البيانات. |
| خصم البند | تتحقق هذه القاعدة من أن مبلغ خصم البند يتطابق مع مجموع حركات الخصم. |
| ضريبة البند | تتحقق هذه القاعدة من أن مبلغ ضريبة البند يتطابق مع مجموع حركات الضريبة. |
| السعر السالب | تتحقق هذه القاعدة من عدم استخدام أسعار سالبة في بنود الحركة. |
| التحكم في الرقم التسلسلي | تتحقق هذه القاعدة من وجود الرقم التسلسلي في بند الحركة للأصناف التي يتم التحكم فيها بواسطة الرقم التسلسلي. |
| بُعد الرقم التسلسلي | تتحقق هذه القاعدة من أنه لا يتم توفير أي رقم تسلسلي إذا كان بُعد الرقم التسلسلي للصنف غير نشط. |
| تناقض العلامة | تتحقق هذه القاعدة من أن علامة الكمية وعلامة صافي المبلغ هما نفسهما في جميع بنود الحركة. |
| الإعفاء الضريبي | تتحقق هذه القاعدة من أن مجموع سعر صنف البند ومبلغ الإعفاء الضريبي يساوي السعر الأصلي. |
| تعيين مجموعة ضرائب | تتحقق هذه القاعدة من أن الجمع بين مجموعة ضريبة المبيعات ومجموعة ضريبة الصنف ينتج عنه تقاطع ضريبة صالح. |
| تحويلات وحدة القياس | تتحقق هذه القاعدة من أن وحدة قياس كافة البنود لها تحويل صالح إلى وحدة قياس المخزون. |

## <a name="enable-the-store-transaction-validation-process"></a>تمكين عملية التحقق من صحة حركات المتجر

قم بتكوين وظيفة **التحقق من صحة حركات المتجر** لعمليات التشغيل الدورية في المركز الرئيسي لـ Commerce (**Retail وCommerce \> Retail وتكنولوجيا معلومات Commerce \> ترحيل نقطة البيع**). تتم جدولة الوظيفة الدفعية استنادًا إلى التدرج الهرمي لمؤسسة المتجر. نوصي بتكوين معالجة الدُفعة هذه للتشغيل بنفس تكرار وظائفك الدفعية **وظيفة P** و **حساب كشف حساب الحركة**.

## <a name="results-of-the-validation-process"></a>نتائج عملية التحقق من الصحة

يمكن عرض نتائج معالجة الدُفعة **التحقق من صحة حركات المتجر** في كل حركة من حركات متجر البيع بالتجزئة. يتم تعيين حقل **حالة التحقق من الصحة** في سجل الحركة على **ناجح** أو **خطأ** أو **لا شيء**. يظهر الحقل **وقت التحقق من الصحة الأخير** تاريخ آخر تشغيل لعملية التحقق من الصحة.

يصف الجدول التالي كل حالة تحقق من الصحة.

| حالة التحقق من الصحة | ‏‏الوصف‬ |
|-------------------|-------------|
| ناجح | تم تمرير كافة قواعد التحقق من الصحة الممكّنة. |
| ‏‏خطأ | قامت إحدى قواعد التحقق من الصحة الممكّنة بتحديد خطأ. يمكنك عرض المزيد من التفاصيل حول الخطأ عن طريق تحديد **أخطاء التحقق من الصحة‬‏‫** في جزء الإجراءات. |
| ‏‫لا شيء‬ | لا يتطلب نوع الحركة تطبيق قواعد التحقق من الصحة. |

![صفحة حركات المتجر تظهر الحقل "حالة التحقق من الصحة" والزر "أخطاء التحقق من الصحة".](./media/valid-checker-validation-status-errors.png)

لن يتم سحب سوى الحركات التي لها حال تحقق من الصحة **ناجح** إلى كشوف حسابات الحركات. لعرض الحركات التي لها حالة **خطأ**، قم بمراجعة اللوحة **إخفاقات حركات الدفع نقدًا والاستلام فورًا** في مساحة العمل **ماليات المتجر**.

![اللوحات في مساحة العمل ماليات المتجر.](./media/valid-checker-cash-carry-validation-failures.png)

لمزيد من المعلومات حول كيفية إصلاح إخفاقات النقد والتحقق من الصحة، راجع [تحرير ومراجعة حركات الدفع نقدًا والاستلام فورًا وإدارة النقد‬‏‫](edit-cash-trans.md).

## <a name="additional-resources"></a>الموارد الإضافية

[تحرير ومراجعة حركات الدفع نقدًا والاستلام فورًا وإدارة النقد](edit-cash-trans.md)

[!INCLUDE[footer-include](../includes/footer-banner.md)]
