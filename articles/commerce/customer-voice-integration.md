---
title: دمج Customer Voice في صفحات موقع التجارة الإلكترونية
description: يوضح هذا الموضوع كيفيه دمج Microsoft Dynamics 365 Customer Voice في صفحات موقع التجارة الإلكترونية في Dynamics 365 Commerce.
author: samjarawan
ms.date: 05/17/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: samjar
ms.search.validFrom: 2019-10-31
ms.openlocfilehash: 272ec1a59ed45b2d2336dcfea16051d27011360f
ms.sourcegitcommit: 48d094d083c1bd45c3d72f8b666926b48ec7ae35
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 05/18/2022
ms.locfileid: "8767937"
---
# <a name="integrate-customer-voice-into-e-commerce-site-pages"></a>دمج Customer Voice في صفحات موقع التجارة الإلكترونية

[!include [banner](../includes/banner.md)]

يوضح هذا الموضوع كيفيه دمج Microsoft Dynamics 365 Customer Voice في صفحات موقع التجارة الإلكترونية في Dynamics 365 Commerce.

يمكنك دمج [Customer Voice](https://dynamics.microsoft.com/customer-voice/overview/) في موقع التجارة الإلكترونية لجمع وتحليل وتتبع ملاحظات العملاء في الوقت الفعلي. ولبدء عملية الدمج ، يجب عليك إنشاء حساب وتحديد قالب مشروع Customer Voice لنوع الملاحظات التي تريد جمعها.

## <a name="integrate-the-customer-voice-service"></a>دمج خدمة Customer Voice

لإنشاء حساب Customer Voice، انتقل إلى [Customer Voice](https://dynamics.microsoft.com/customer-voice/overview/) ، ثم اتبع المطالبات.

بعد إنشاء حساب Customer Voice وتسجيل الدخول، الخطوة التالية هي تحديد قالب مشروع لنوع الملاحظات التي تريد جمعها.

لتحديد قالب مشروع Customer Voice، اتبع الخطوات التالية.

1. انتقل إلى [صفحة قالب مشروع Customer Voice](https://customervoice.microsoft.com/Pages/ProjectPage.aspx).
1. حدد **الشروع في العمل**.
1. حدد قالب المشروع لنوع الملاحظات التي تريد جمعها، ثم حدد **التالي**.
1. في علامة التبويب **إرسال**، ضمن **اختيار تنسيق التضمين**، حدد تنسيق تضمين. يظهر حقل **التعليمات البرمجية المضمنة** التعليمات البرمجية التي يجب تضمينه في منشئ الموقع في Commerce.

تستخدم الأمثلة الموجودة في هذا الموضوع قالب مشروع **استطلاع العميل الدوري** وتنسيق تضمين **الزر**.

يبين الشكل التوضيحي التالي المقدم كمثال صفحة قالب مشروع **استطلاع العميل الدوري**، حيث تم تحديد خيار تنسيق التضمين **الزر**، وتظهر التعليمة البرمجية المراد تضمينها لهذا الخيار في حقل **التعليمات البرمجية المضمنة**. هناك ثلاثة إجراءات منفصلة مطلوبة لتضمين التعليمات البرمجية المتوفرة في صفحات الموقع، كما هو موضح في الأقسام التالية.

![صفحه استطلاع العميل الدوري في Customer Voice مع تحديد الخيار "الزر".](media/customer-voice-integration-1.png)

### <a name="embed-the-external-script-url"></a>تضمين عنوان URL البرنامج النصي الخارجي

في جميع صفحات الموقع التي يجب ان تتضمن استطلاع Customer Voice، يجب تضمين عنوان URL البرنامج النصي الخارجي الذي يوفره Customer Voice في التعليمة البرمجية المراد تضمينها. أفضل طريقة لتضمين البرنامج النصي في صفحات موقع متعددة هي إنشاء جزء في مُنشئ الموقع يحتوي على عنوان URL البرنامج النصي الخارجي، ثم إضافة الجزء إلى قوالب الصفحة المناسبة. بعد نشر قالب محدّث، ستشبه التعليمات البرمجية للبرنامج النصي الخارجي المضمّن المثال التالي على صفحات الموقع المتأثرة.

```html
<script src=https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/Embed.js type="text/javascript"></script>
```

لمزيد من المعلومات حول الأجزاء، راجع [العمل مع الأجزاء](work-with-fragments.md).

> [!NOTE]
> عليك فقط إضافة عنوان URL إلى الجزء. ستقوم الوحدة النمطية للبرنامج النصي الخارجي بإضافة التعليمات البرمجية الأخرى للبرنامج النصي.

لتضمين عنوان URL البرنامج النصي الخارجي في جزء، اتبع الخطوات التالية.

1. في منشئ الموقع، قم بإنشاء جزء يستند إلى [الوحدة النمطية للبرنامج النصي الخارجي](script-module.md).
1. في الجزء الجديد، حدد الفتحة **البرنامج النصي الخارجي الافتراضي**.
1. في جزء خصائص **البرنامج النصي الخارجي الافتراضي**، في الحقل **مصدر البرنامج النصي**، أدخل عنوان URL البرنامج النصي الخارجي، كما هو موضح في المثال التوضيحي التالي.

    ![عنوان URL البرنامج النصي الخارجي في حقل مصدر البرنامج النصي للجزء الجديد.](media/customer-voice-integration-2.png)

1. حدد **حفظ**، ثم قم بتحديد **إنهاء التحرير**.
1. حدد **نشر** لنشر الجزء.

الجزء الجديد الذي يحتوي على كتلة البرنامج النصي الخارجي المدمج جاهز الآن لإضافته إلى قالب الصفحة المناسب.

### <a name="embed-the-external-style-sheet-code"></a>تضمين التعليمات البرمجية لورقه الأنماط الخارجية

بعد ذلك، في جميع صفحات الموقع التي يجب ان تتضمن استطلاع Customer Voice، يجب تضمين التعليمات البرمجية لورقة الأنماط الخارجية التي يوفرها Customer Voice في التعليمة البرمجية المراد تضمينها. كما جاء في القسم السابق، فإن أفضل طريقة لتضمين التعليمات البرمجية لورقة الأنماط الخارجية على صفحات موقع متعددة هي إنشاء جزء في مُنشئ الموقع يحتوي على التعليمات البرمجية لورقة الأنماط الخارجية، ثم إضافة الجزء إلى قوالب الصفحة المناسبة. ستشبه التعليمات البرمجية لورقة الأنماط الخارجية المضمنة التعليمات البرمجية في المثال التالي.

```typescript
<link rel="stylesheet" type="text/css" href=https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/Embed.css />
```

لتضمين التعليمات البرمجية لورقة الأنماط الخارجية في جزء، اتبع الخطوات التالية.

1. في منشئ الموقع، قم بإنشاء جزء يستند إلى [الوحدة النمطية لعلامات التعريف](metatags-module.md).
1. في الجزء، حدد الفتحة **علامات التعريف الافتراضية**.
1. في جزء خصائص **علامات التعريف الافتراضية**، في الحقل **علامات التعريف**، أدخل التعليمات البرمجية لورقة الأنماط الخارجية، كما هو موضح في المثال التوضيحي التالي.

    ![التعليمات البرمجية لورقة الأنماط الخارجية في حقل علامات التعريف للجزء الجديد.](media/customer-voice-integration-3.png)

1. حدد **حفظ**، ثم قم بتحديد **إنهاء التحرير**.
1. حدد **نشر** لنشر الجزء.

الجزء الجديد الذي يحتوي على التعليمات البرمجية لورقة الأنماط الخارجية جاهز الآن لإضافته إلى قالب الصفحة المناسب.

### <a name="embed-the-inline-script-code"></a>تضمين التعليمات البرمجية للبرنامج النصي المضمن 

بعد ذلك، في جميع صفحات الموقع التي يجب ان تتضمن استطلاع Customer Voice، يجب تضمين التعليمات البرمجية للبرنامج النصي المضمن التي يوفرها Customer Voice في التعليمة البرمجية المراد تضمينها. كما جاء في الأقسام السابقة، فإن أفضل طريقة لتضمين التعليمات البرمجية للبرنامج النصي المضمن على صفحات موقع متعددة هي إنشاء جزء في مُنشئ الموقع يحتوي على التعليمات البرمجية للبرنامج النصي المضمن، ثم إضافة الجزء إلى قوالب الصفحة المناسبة.

في المثال التالي عن التعليمات البرمجية للبرنامج النصي المضمن، **SURVEY\_KEY** هو عنصر نائب. يجب أن تتطابق قيمة **SURVEY\_KEY** مع مفتاح الاستطلاع الفعلي الذي قدمه Customer Voice في التعليمة البرمجية المراد تضمينها. يستدعي السطر الأخير التعليمات البرمجية لعرض زر الاستطلاع بعد ثانية واحدة، للتأكد من أن البرامج النصية لديها وقت كافٍ لتحميلها. بحسب الاستطلاع الذي حددته، قد يتعين عليك أيضًا إضافة بيانات تعريف أخرى أو تحديثها، مثل اسم الشركة.

```html
function renderSurveyButton() {
    var se = new SurveyEmbed("SURVEY_KEY","https://customervoice.microsoft.com/","https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/","true");

    var context = {
        "First Name":"",
        "Last Name": "",
        "locale": "en-us",
        "companyname": "Adventure Works"
    };
    se.renderButton(context);
}

setTimeout(renderSurveyButton, 4000);
```

لتضمين التعليمات البرمجية للبرنامج النصي المضمن في جزء، اتبع الخطوات التالية.

1. في منشئ الموقع، قم بإنشاء جزء يستند إلى [الوحدة النمطية للبرنامج النصي المضمن](script-module.md).
1. في الجزء الجديد، حدد الفتحة **البرنامج النصي المضمن الافتراضي**.
1. في جزء خصائص **البرنامج النصي المضمن الافتراضي**، في الحقل **البرنامج النصي المضمن**، أدخل التعليمات البرمجية للبرنامج النصي المضمن، كما هو موضح في المثال التوضيحي التالي.

    ![التعليمات البرمجية للبرنامج النصي المضمن في حقل البرنامج النصي المضمن للجزء الجديد.](media/customer-voice-integration-4.png)

1. حدد **حفظ**، ثم قم بتحديد **إنهاء التحرير**.
1. حدد **نشر** لنشر الجزء.

الجزء الجديد الذي يحتوي على التعليمات البرمجية للبرنامج النصي المضمن المدمج جاهز الآن لإضافته إلى قالب الصفحة المناسب.

## <a name="add-fragments-to-a-template"></a>إضافة أجزاء إلى قالب

عندما تنتهي من إنشاء الأجزاء التي تحتوي على التعليمات البرمجية المضمنة في Customer Voice، يجب عليك إضافتها إلى قوالب الصفحة المرتبطة بصفحات الموقع التي تريد استخدامها فيها. في المثال التوضيحي التالي، تمت إضافة ثلاثة أجزاء مقدمة كمثال إلى قالب صفحة تفاصيل المنتج (PDP).

![أمثلة عن أجزاء مضافة إلى قالب PDP](media/customer-voice-integration-5.png)

بعد نشر القالب المحدّث، سيظهر استطلاع Customer Voice في كافة الصفحات التي يتم التحكم فيها بواسطة القالب.

لمزيد من المعلومات حول القوالب، راجع [العمل مع القوالب](work-with-templates.md).

## <a name="configure-content-security-policy"></a>تكوين سياسة أمان المحتوى

بشكل افتراضي، لا تسمح سياسة أمان المحتوي (CSP) باستدعاءات لخدمات أخرى الا إذا تم اجراء تكوين إضافي. وبالتالي، بعد نشر القوالب المحدّثة، من المحتمل ان يفشل تحميل الاستطلاع في صفحات الموقع ذات الصلة. لعرض الأخطاء المتعلقة بسياسة أمان المحتوى (CSP)، افتح أدوات المطور الخاصة بمستعرض الويب (F12)، ثم انتقل إلى الصفحة التي تحتوي على الاستطلاع. ستظهر الأخطاء المتعلقة بسياسة أمان المحتوى (CSP) في إخراج وحدة التحكم.

لتكوين سياسة أمان المحتوى (CSP) لإصلاح الأخطاء، اتبع الخطوات التالية.

1. انتقل إلى **إعدادات الموقع \> الملحقات**.
1. على علامة التبويب **سياسة أمان المحتوى**، أضف `https://customervoice.microsoft.com/` إلى  التوجيه **child-src**.
1. أضف `https://customervoice.microsoft.com/` إلى التوجيه **frame-src**.
1. أضف `https://mfpembedcdnmsit.azureedge.net` و **.azureedge.net** إلى التوجيه **img-src**.

لمزيد من المعلومات، راجع [سياسة أمان المحتوى](manage-csp.md).

## <a name="additional-resources"></a>الموارد الإضافية

[الوحدة النمطية للبرنامج النصي الخارجي](script-module.md)

[وحدة علامات التعريف](metatags-module.md)

[الوحدة النمطية للبرنامج النصي المضمن](script-module.md)

[سياسة أمان المحتوى](manage-csp.md)

[العمل باستخدام الأجزاء](work-with-fragments.md)

[العمل مع القوالب](work-with-templates.md)
