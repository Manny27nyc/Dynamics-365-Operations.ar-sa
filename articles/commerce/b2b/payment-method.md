---
title: تكوين طريقة دفع حساب العميل لمواقع التجارة الإلكترونية لمتاجرة عمل-عمل
description: يصف هذا المقال كيفية تكوين طريقة دفع حساب العميل في Microsoft Dynamics 365 Commerce. كما يصف كيفية تأثير الحدود الائتمانية على تسجيل الدفع على الحساب في مواقع ويب التجارة الإلكترونية بين الشركات (B2B).
author: josaw1
ms.date: 04/19/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: josaw
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.search.industry: retail
ms.search.form: RetailOperations
ms.openlocfilehash: b8424920c3a177e01b71fc1c288b7acdd97ef191
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/12/2022
ms.locfileid: "9272007"
---
# <a name="configure-the-customer-account-payment-method-for-b2b-e-commerce-sites"></a>تكوين طريقة دفع حساب العميل لمواقع التجارة الإلكترونية لمتاجرة عمل-عمل

[!include [banner](../../includes/banner.md)]

يصف هذا المقال كيفية تكوين طريقة دفع حساب العميل في Microsoft Dynamics 365 Commerce. كما يصف كيفية تأثير الحدود الائتمانية على تسجيل الدفع على الحساب في مواقع ويب التجارة الإلكترونية بين الشركات (B2B).

يستطيع تجار التجزئة قبول أنواع مختلفة من الدفع مقابل المنتجات والخدمات التي يبيعونها في قناة التجارة الإلكترونية. يجب أن يتم تكوين كل نوع دفع يقبله بائع تجزئة في Dynamics 365 Commerce عند إعداد النظام. يجب اعتماد طريقة الدفع بوسطة حساب العميل (أو "على الحساب")على مواقع ويب التجارة الإلكترونية بين الشركات (B2B). 

## <a name="prerequisites"></a>المتطلبات الأساسية

1. إضافة طريقة دفع حساب العميل في المركز الرئيسي لـ Commerce.
2. اربط طريقة دفع حساب العميل بقناة التجارة الإلكترونية.
3. تأكد من تمكين الخاصية **السماح على الحساب** للعميل في **Retail وCommerce \> العملاء \> كافة العملاء \> افتراضيات الدفع** في Commerce Headquarters.

    > [!NOTE]
    > إذا كان يجب السماح لكافة العملاء بتمكين أسلوب الدفع على الحساب، فيمكنك تعيين الخاصية **السماح على الحساب** إلى **نعم** للعميل الافتراضي للقناه المقترنة بموقع B2B. 

## <a name="enable-the-customer-account-payment-method-in-commerce-site-builder"></a>تمكين طريقة دفع حساب العميل في منشئ موقع Commerce 

لتمكين طريقة دفع حساب العميل في منشئ موقع Commerce، اتبع الخطوات التالية.

1. انتقل إلى **إعدادات الموقع \> الملحقات**.
1. قم بتعيين خاصية **تمكين مدفوعات حساب العميل** إلى **ممكّن لعملاء B2B**. 
1. حدد **حفظ ونشر**.

> [!NOTE]
> تصبح إعدادات الموقع الجديدة سارية المفعول فقط بعد تحديث ملف app.settings.json. لمزيد من المعلومات ، راجع [تحديثات مكتبة SDK والوحدات النمطية](../e-commerce-extensibility/sdk-updates.md).

## <a name="enable-the-customer-account-payment-method-on-the-checkout-page-for-the-b2b-e-commerce-site"></a>تمكين طريقة دفع حساب العميل في صفحة السداد مع الخروج لموقع التجارة الإلكترونية بين الشركات B2B

لتمكين طريقة دفع حساب العميل في صفحة السداد مع الخروج لموقع التجارة الإلكترونية بين الشركات B2B، اتبع هذه الخطوات.

1. في منشئ موقع Commerce، ابحث عن أو حرر صفحة السداد مع الخروج أو الجزء الذي يحتوي على الوحدة النمطية للسداد مع الخروج في موقع التجارة الإلكترونية بين الشركات B2B.
1. في فتحة **حاوية قسم السداد مع الخروج**، حدد **إضافة وحدة نمطية**، ثم أضف الوحدة النمطية **الدفع لحساب العميل**.
1. حدد وضع الوحدة النمطية **الدفع حساب العميل** عن طريق تحديد علامة القطع (**...**)، ثم حدد **التحريك لأعلى** أو **التحريك لأسفل** كما هو مطلوب.
1. حدد **حفظ**، وحدد **إنهاء التحرير** لإيداع الصفحة، ثم حدد **نشر** لنشرها.

## <a name="confirm-that-the-customer-account-payment-method-has-been-enabled-and-published"></a>التأكد من تمكين طريقة الدفع لحساب العميل ونشرها

للتأكد من تمكين طريقة الدفع لحساب العميل ونشرها، اتبع هذه الخطوات.

1. تسجيل الدخول إلى موقع التجارة الإلكترونية.
1. أضف منتجًا إلى عربة التسوق.
1. انتقل إلى صفحة سداد مع الخروج. يجب أن تشاهد طريقة دفع **حساب العميل** الجديدة.

## <a name="work-with-credit-limits"></a>التعامل مع الحدود الائتمانية

عندما يتم تمكين إمكانيات الدفع بواسطة حساب العميل على موقع B2B، تريد المؤسسات عادةً عرض معلومات حول الحدود الائتمانية وأرصدة الحدود الائتمانية أثناء عملية تسجيل الأمر. يتم تحديد حد الائتمان للعميل من خلال خاصية **حد ائتماني** على علامة التبويب السريعة **عمليات التحصيل والائتمان**‬ لسجل العميل في Commerce Headquarters. ومع ذلك، في سيناريوهات B2B، يجب غالبًا فوترة أمر يضعه العميل في حساب المؤسسة التي ينتمي اليها العميل. وبالتالي، يجب تعيين خاصية **حساب الفوترة** على علامة التبويب السريعة **الفاتورة والتسليم** لسجل العميل إلى معرف حساب العميل الخاص بالمؤسسة. وبعد ذلك، عندما يقوم العميل بوضع أمر على موقع B2B، ستتم فوترة الأمر إلى المؤسسة. وسيستخدم موقع B2B أيضًا الحد الائتماني الخاص بالمؤسسة بدلاً من الحد الائتماني الذي تم تحديده في سجل العميل.

يتوقف حساب الحد الائتماني والرصيد الذي يتم عرضه على موقع ويب B2B على إعداد خاصية **نوع الحد الائتماني** في Commerce Headquarters. يتغير موقع هذه الخاصية بالاستناد إلى ما إذا كان قد تم تمكين ميزة **إدارة الائتمان** في مساحة عمل **إدارة الميزات**:

- في حالة تمكين ميزة **إدارة الائتمان**، توجد الخاصية على علامة التبويب السريعة **الحدود الائتمانية** على **عمليات التحصيل والائتمان‬ \> الإعداد \> معلمات الائتمان والتحصيل \> الائتمان**. 
- إذا تم تعطيل ميزة **إدارة الائتمان**، توجد الخاصية تحت **تصنيف الائتمان‏‎** على **الحسابات المدينة‬ \> إعداد \> معلمات الحسابات المدينة‬ \> تصنيف الائتمان**.

القيم التي تدعمها خاصية **نوع الحد الائتماني** هي **بلا** و **رصيد** و **رصيد‏‎ + إيصال التعبئة أو إيصال استلام المنتجات** و **رصيد‏‎ + الكل**. لمزيد من المعلومات حول هذه القيم، راجع [قيم نوع الحد الائتماني](/dynamics365/supply-chain/sales-marketing/credit-limits-customers).

> [!NOTE]
> نوصي بتعيين خاصية **نوع الحد الائتماني** إلى **الرصيد + إيصال التعبئة أو إيصال استلام المنتجات**، بحيث لا تساهم أوامر المبيعات المفتوحة في حساب الأرصدة. وبعد ذلك، إذا قام العملاء بوضع أوامر مستقبلية، فلا حاجة للقلق بشأن تأثير هذه الأوامر على رصيدهم الحالي.

هناك خاصية أخرى تؤثر علي الأمر علي الحساب وهي الخاصية **الحد الائتماني الإلزامي**، الموجودة على علامة التبويب السريعة **عمليات التحصيل والائتمان** لسجل العميل. من خلال تعيين هذه الخاصية إلى **نعم** لعملاء معينين، يمكنك إجبار النظام على فحص حدهم الائتماني حتى لوم تم تعيين خاصية **نوع الحد الائتماني** إلى **بلا** لتحديد عدم وجوب فحص الحد الائتماني لأي عميل.

في الوقت الحالي، يتعذر على عميل يستخدم طريقة الدفع على الحساب الدفع لأكثر من الرصيد الدائن المتبقي لأحد الأوامر. على سبيل المثال، إذا كان الرصيد الدائن المتبقي للعميل هو 1000 دولار، لكن قيمة الأمر تساوي 1200 دولار، فيمكن للعميل دفع 1000 دولار فقط باستخدام طريقة الدفع على الحساب. يجب على العميل عندئذٍ استخدام بعض طرق الدفع الأخرى لدفع الرصيد. في إصدار مستقبلي، سيسمح تكوين Commerce للمستخدمين بالإنفاق خارج حدود الائتمان الخاصة بهم عند تقديم الأوامر.

تتضمن الوحدة النمطية **عمليات التحصيل والائتمان** قدرات جديدة لإدارة الائتمان. لتشغيل هذه القدرات، قم بتمكين ميزة **إدارة الائتمان** في مساحة عمل **إدارة الميزات**. تسمح إحدى هذه القدرات بتعليق أوامر المبيعات بناء على قواعد الحظر. بإمكان مدير الائتمان بعد ذلك إصدار الأوامر أو رفضها بعد القيام بالمزيد من التحليل. ومع ذلك، فإن القدرة على تعليق أوامر المبيعات لا تنطبق على أوامر Commerce، نظرًا لوجود دفعة مسبقة في أغلب الأحيان لدى أوامر المبيعات، ولا تدعم ميزة **إدارة الائتمان** بشكل تام سيناريوهات الدفع المسبق. 

بغض النظر عن تمكين ميزة **إدارة الائتمان**، إذا تجاوز رصيد العميل الحد الائتماني أثناء تنفيذ الأمر، فلن يتم تعليق أوامر المبيعات. بدلاً من ذلك، سينشئ Commerce إما رسالة تحذير أو رسالة خطأ، بناءً على قيمة الحقل **رسالة عند تجاوز الحد الائتماني‬‏‫** على علامة التبويب السريعة **الحدود الائتمانية**.

توجد الخاصية **استثناء من إدارة الائتمان‬‏‫** التي تمنع تعليق أوامر المبيعات في البيانات الرئيسية لأمر المبيعات (**Retail وCommerce \> العملاء \> جميع أوامر المبيعات**). إذا تم تعيين هذه الخاصية إلى **نعم** (القيمة الافتراضية) لأوامر المبيعات في Commerce، فسيتم استبعاد الأوامر من سير عمل التعليق في إدارة الائتمان. على الرغم من أن الخاصية تسمى **استثناء من إدارة الائتمان**، سيستمر استخدام الحد الائتماني المحدد أثناء تنفيذ الأمر. لن يتم تعليق الأوامر.

تم تخطيط القدرة على تعليق أوامر المبيعات في Commerce بالاستناد إلى قواعد الحظر لإصدارات Commerce المستقبلية. وحتى يتم دعم هذه القدرة، إذا كان من الضروري فرض مرور أوامر المبيعات في Commerce عبر مهام سير عمل إدارة الائتمان الجديدة، فعليك تخصيص ملفات XML التالية في حل Visual Studio. في الملفات، قم بتعديل المنطق بحيث يتم تعيين علامة **CredManExcludeSalesOrder** إلى  **نعم**. وبهذه الطريقة، سيتم تعيين الخاصية **استبعاد من إدارة الائتمان** إلى **لا** بشكل افتراضي لأوامر المبيعات في Commerce.

- RetailCreateCustomerOrderExtensions_CredMan_Extension.xml
- RetailCallCenterOrderExtensions_CredMan_Extension.xml

إذا تم تعيين العلامة **CredManExcludeSalesOrder** إلى **لا**، وكان بإمكان عميل B2B الشراء من المتاجر باستخدام تطبيق نقطة البيع (POS)، فقد يفشل ترحيل حركات الدفع نقدًا والاستلام فورًا. على سبيل المثال، هناك قاعدة حظر على نوع الدفع النقدي، واشترى عميل B2B بعض الأصناف في المتجر باستخدام الدفع النقدي. في هذه الحالة، لن تتم فوترة أمر المبيعات الناتج بنجاح لأنه سيخضع للتعليق. وبالتالي، سيفشل الترحيل. لهذا السبب، نوصي بإجراء الاختبار النهائي بعد تطبيق هذا التخصيص.

## <a name="additional-resources"></a>الموارد الإضافية

[إعداد موقع التجارة الإلكترونية بين الشركات](set-up-b2b-site.md)

[إدارة شركاء الأعمال B2B باستخدام التدرجات الهرمية للعملاء](partners-customer-hierarchies.md)

[إدارة مستخدمي شركاء الأعمال على مواقع التجارة الإلكترونية بين الشركات](manage-b2b-users.md)

[تعيين حدود كمية المنتج لمواقع التجارة الإلكترونية بين الشركات B2B](quantity-limits.md)

[تحديثات SDK ومكتبة الوحدات النمطية](../e-commerce-extensibility/sdk-updates.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
