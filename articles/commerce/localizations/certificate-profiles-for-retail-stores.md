---
title: ملفات تعريف الشهادات المعرفة من قِبل المستخدمين لمتاجر البيع بالتجزئة
description: يقدم هذا المقال نظره عامه حول كيفيه استخدام الشهادات في متاجر البيع بالتجزئة.
author: josaw
ms.date: 10/09/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2020-10-09
ms.dyn365.ops.version: 10.0.15
ms.openlocfilehash: 1b40c74efa56a6e18af907e000554b9ab269bb31
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8873019"
---
# <a name="user-defined-certificate-profiles-for-retail-stores"></a>ملفات تعريف الشهادات المعرفة من قِبل المستخدمين لمتاجر البيع بالتجزئة

[!include [banner](../includes/banner.md)]


## <a name="overview"></a>نظرة عامة

يوفر هذا المقال نظرة عامة حول ملفات تعريف الشهادات المتوفرة في Microsoft Dynamics 365 Commerce. تعمل هذه الوظيفة علي توسيع ميزه [أداره قنوات البيع بالتجزئة](../dev-itpro/manage-secrets.md)عن طريق أضافه دعم للشهادات المحلية.

اثناء تشغيل نقطه البيع (POS) في الوضع "غير متصل"، لا يمكن الوصول إلى الشهادات المخزنة في المخزن الرئيسي. يجب استخدام الشهادة المحلية بدلا منها. الإمكانات التالية مدعومة:

- استخدام الشهادات المحلية في سيناريوهات الاحتياطي للمخزن الرئيسي
- استخدام الشهادات المحلية بدون المخزن الرئيسي (علي سبيل المثال، في تثبيت محلي)
- تحديث تدريجي للشهادات، حيث تستخدم بعض المخازن والوحدات الطرفية إصدارا جديدا للشهادة، ولكن بعض المتاجر والوحدات الطرفية الأخرى تستمر في استخدام الإصدار السابق

تمكنك وظيفة ملفات تعريف الشهادات من تحديد الشهادة الافتراضية وتعيين الترتيب الذي يتم من خلاله البحث في الشهادات الموجودة في نفس ملف تعريف الشهادة. توفر هذه الوظيفة أيضا أسلوب اعداد مشابه للشهادات المحلية وشهادات المخزن الرئيسي. يمكنك أضافه إعدادات خاصه بالشركة للشهادات، ولكن يمكن استخدام معرف الشركة المشتركة الفريد لكل شهادة في قنوات التجارة.

### <a name="scenarios"></a>السيناريوهات

تدعم وظيفة ملفات تعريف الشهادات السيناريوهات التالية في قنوات التجارة:

- استخدم الشهادات المحلية في سيناريوهات الاحتياطي للمخزن الرئيسي. فيما يلي بعض الأمثلة عن هذه سيناريوهات الاحتياطي هذه:

    - لا يمكن الوصول إلى مساحة التخزين في المخزن الرئيسي.
    - لم يتم العثور علي شهادة في مساحة التخزين في المخزن الرئيسي.
    - نقطه البيع قيد التشغيل في وضع عدم الاتصال.

- استخدام الشهادات المحلية بدون تخزينها في المخزن الرئيسي (علي سبيل المثال، في تثبيت محلي)
- قم بتحديث تدريجي للشهادات، حيث يتم استخدام إصدار جديد من الشهادة فقط في المتاجر أو علي الوحدات الطرفية التي يكون فيها الإصدار الجديد متاحا بالفعل.
- استخدم نفس الشهادة في العديد من الشركات.

## <a name="set-up-certificate-profiles"></a>إعداد ملفات تعريف الشهادات

يوضح الاجراء التالي كيفيه اعداد ملفات تعريف الشهادات. قبل استخدام ملفات تعريف الشهادات في قنوات التجارة، اتبع الخطوات التالية لتكوين الإعدادات.

1. في مساحة عمل **أداره الميزات**، قم بتشغيل ميزة **ملفات تعريف الشهادات المعرفة من قبل المستخدم لمخازن البيع بالتجزئة**.
2. انتقل إلى **إدارة النظام \> الإعداد \> ملفات تعريف الشهادات**.
3. قم بإنشاء سجل، ثم قم بتعيين حقول **ملفات تعريف الشهادات** و **الاسم** و **الوصف**.

    > [!NOTE]
    > ملف تعريف الشهادة هو معرف فريد لأحدي الشهادات عبر كافة الشركات ومكونات التجارة.

3. في علامة التبويب **الكيانات القانونية**، قم باضافه بند وحدد الكيان القانوني (الشركة) الذي يجب استخدام ملف تعريف الشهادة الحالية له. إذا كان يجب استخدام ملف تعريف الشهادة للعديد من الكيانات القانونية، كرر هذه الخطوة لأضافه بند لكل كيان قانوني إضافي.
4. حدد **الإعدادات** لفتح صفحه **إعدادات ملف تعريف الشهادات**، حيث يمكنك إدخال إعدادات خاصه بالشركة لملف تعريف الشهادات.

### <a name="certificate-profile-settings"></a>إعدادات ملفات تعريف الشهادات

عند تحديد **الإعدادات** لبنود ملف تعريف الشهادات، تظهر صفحه **إعدادات ملف تعريف الشهادة**. تتيح لك هذه الصفحة تحديد الشهادات التي يمكن استخدامها عند استدعاء ملف تعريف الشهادات الحالي في قنوات التجارة. يمكنك أيضا تحديد الترتيب الذي يجب ان يتم البحث فيه عن الشهادات.

> [!NOTE]
> يتم تعيين حقل **الأولوية** تلقائيا. وتمثل القيمة **1** اعلي اولويه. عند أضافه سطر جديد في صفحه **إعدادات ملف تعريف الشهادات**، يتم تعيين الاولويه الخاصة به إلى رقم يكون واحدا أو أكثر من اولويه السطر السابق. لتغيير الاولويه لبند معين، حدد البند، ثم حدد اما **التحرك لاعلي** لزيادة الاولويه أو **التحرك لأسفل** لتقليل الاولويه.

عند أضافه بند جديد إلى صفحه **إعدادات ملف تعريف الشهادة**، قم بتعيين الحقول التالية:

- **نوع الموقع** – حدد الموقع الذي تم تخزين الشهادة فيه. يشتمل هذا الحقل علي قيمتين محتملتين: **الشهادة المحلية** و **المخزن الرئيسي**.
- **شهادة المخزن الرئيسي** -هذا الحقل مطلوب إذا قمت بتعيين **حقل نوع الموقع** إلى **المخزن الرئيسي**. يتم استخدام ذلك لتعيين كلمه سر لشهادة المخزن الرئيسي.

    > [!NOTE]
    > قبل استخدام شهادة المخزن الرئيسي في ملفات تعريف الشهادات، تاكد من تحميل شهادة إلى مساحة تخزين المخازن الرئيسية، ثم اتبع الإرشادات الموجودة في اعداد [عميل Azure Key Vault](../../finance/localizations/setting-up-azure-key-vault-client.md).

- **اسم المتجر** – هذا الحقل اختياري ولا يتوفر الا إذا قمت بتعيين حقل **نوع الموقع** إلى **شهادة محليه**. يتم استخدام ذلك لتحديد اسم المتجر الافتراضي الذي يجب استخدامه للبحث في الشهادات المحلية.
- **موقع المتجر** – هذا الحقل اختياري ولا يتوفر الا إذا قمت بتعيين حقل **نوع الموقع** إلى **شهادة محليه**. يتم استخدام ذلك لتحديد موقع المتجر الافتراضي الذي يجب استخدامه للبحث في الشهادات المحلية.

    > [!NOTE]
    > تتم أضافه اسم المتجر وموقع التخزين الافتراضيين لتبسيط عمليه البحث عن الشهادات المحلية في Commerce Runtime. يتضمن X509StoreProvider قائمه بالمجلدات التي يتم تخزين الشهادات بها. إذا لم يتم تحديد اسم المتجر الافتراضي وموقع المتجر الافتراضي، X509StoreProvider يحاول العثور علي شهادة في المجلدات الأخرى في القائمة الخاصة بها.

- **بصمة الإبهام** – هذا الحقل مطلوب ولا يتوفر الا إذا قمت بتعيين حقل **نوع الموقع** إلى **شهادة محليه**. استخدمه لتحديد بصمه إبهام الشهادة.
- **التعليقات** – هذا الحقل اختياري ويتيح للمستخدمين إدخال الملاحظات.

### <a name="workflow-searching-certificates-in-the-commerce-runtime"></a>سير العمل: البحث في الشهادات في Commerce Runtime

وفيما يلي سير العمل الأساسي الذي يستخدم للبحث عن أحدي الشهادات عند استدعاء ملف تعريف الشهادة في Commerce Runtime.

1. يحدد النظام ما إذا كان ملف تعريف الشهادة يحتوي علي إعدادات خاصه بالشركة للكيان القانوني الحالي.
1. ويحاول النظام العثور علي الشهادة باستخدام القيم الموجودة في صفحة **إعدادات ملف تعريف الشهادة** للبند حيث تم تعيين الحقل **الأولولية**  إلى **1**.

    - إذا تم تعيين حقل **نوع الموقع** إلى **مخزن رئيسي**، سيتم استخدام قيمه الحقل **سر شهادة المخزن الرئيسي** للبحث عن الشهادة في الصفحة **معلمات المخزن الرئيسي**. يتم بعد ذلك البحث عن الشهادة في مساحة تخزين المخزن الرئيسي.
    - إذا تم تعيين الحقل **نوع الموقع** إلى **الشهادة المحلية**، يقوم X509StoreProvider أولا بالبحث عن الشهادة باستخدام اسم المتجر وموقع المتجر الافتراضي، في حاله تحديد هذه المعلمات. ثم يبحث في كافة المجلدات الأخرى الموجودة علي قائمه المجلدات الخاصة به.

1. في حاله عدم العثور علي الشهادة، يتم تكرار العملية للسطر حيث تم إعداد الحقل **الأولولية** على **2**، وهكذا.

> [!NOTE]
> إذا لم يكن لملف تعريف الشهادة إعدادات للكيان القانوني الحالي ، أو في حاله عدم نجاح البحث عن الشهادات لكافة السطور في صفحه **إعدادات ملف تعريف الشهادة**، لا يتم العثور علي الشهادة.

#### <a name="caching-the-results-of-certificate-searches"></a>التخزين المؤقت لنتائج عمليات البحث في الشهادات

تم التخزين المؤقت لنتائج عمليات البحث في الشهادات. يكون وقت انتهاء الصلاحية الافتراضي لذاكره التخزين المؤقت ساعة واحده. ومع ذلك، يمكن تخصيص هذا الوقت وتعيينه إلى الحد الأقصى لقيمه 24 ساعة.

### <a name="gradual-update"></a>تحديث تدريجي

في حاله تقديم إصدار جديد من الشهادة، وعدم امكانيه تحديثها في كافة المتاجر في نفس الوقت، تقوم وظيفة ملفات تعريف الشهادات بتمكين تحديث الشهادة تدريجيا.

1. البحث عن ملف تعريف الشهادة والبند الذي يجب تحديثه ، ثم تحديد **الإعدادات**.
1. قم باضافه بند، وحدد الإعدادات المرتبطة بأحدث إصدار من الشهادة.
1. قم بزيادة قيمه **الاولويه** للسطر الجديد. استخدم الزر **تحريك لاعلي** لتحريك الخط بحيث يكون فوق السطر الخاص بالإصدار السابق لنفس الشهادة.

> [!NOTE]
> في Commerce Runtime، يتم استدعاء الإصدار الجديد من الشهادة أولا. إذا لم يتم تحديث الشهادة بعد ذلك في متجر معين أو في وحده طرفيه معينه، سيتم استدعاء الإصدار السابق.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]