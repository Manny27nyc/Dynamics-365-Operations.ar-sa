---
title: الوحدة النمطية لمحدد المتجر
description: يتناول هذا الموضوع وحدة محدّد المتجر ويصف كيفية إضافتها إلى صفحات الموقع في Microsoft Dynamics 365 Commerce.
author: anupamar-ms
manager: annbe
ms.date: 07/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: ''
ms.author: anupamar
ms.search.validFrom: 2020-02-10
ms.dyn365.ops.version: ''
ms.openlocfilehash: 341312758e0a6da2e918406e09df618e2475811f
ms.sourcegitcommit: 7e976059118938b0089e40bef948029a8c088b38
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 07/09/2021
ms.locfileid: "6479366"
---
# <a name="store-selector-module"></a>الوحدة النمطية لمحدد المتجر

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

يتناول هذا الموضوع وحدة محدّد المتجر ويصف كيفية إضافتها إلى صفحات الموقع في Microsoft Dynamics 365 Commerce.

بإمكان العملاء استخدام الوحدة النمطية لمحدد المتجر لالتقاط منتج في متجر محدد بعد عملية شراء عبر الإنترنت. في الإصدار 10.0.13 من Commerce، تتضمن أيضًا الوحدة النمطية لمحدد المتجر قدرات إضافية يمكنها عرض صفحة **البحث عن متجر** التي تعرض المخازن القريبة.

تسمح الوحدة النمطية لمحدد المتجر للمستخدمين بإدخال موقع (المدينة والولاية والعنوان وغيرها) للبحث عن المتاجر في نصف قطر للبحث. تستخدم الوحدة النمطية، عند فتحها للمرة الأولى، موقع المستعرض الخاص بالعميل للعثور على المتاجر (إذا تم توفير الموافقة).

## <a name="store-selector-module-usage"></a>استخدام الوحدة النمطية لمحدد المتجر

- يمكن استخدام الوحدة النمطية لمحدد المتجر في صفحة تفاصيل المنتج (PDP) لتحديد متجر لالتقاطه.
- يمكن استخدام الوحدة النمطية لمحدد المتجر في صفحة سلة التسوق لتحديد متجر لالتقاطه.
- يمكن استخدام الوحدة النمطية لمحدد المتجر في صفحة مستقله تعرض كافة المتاجر المتوفرة.

## <a name="fulfillment-group-setup-in-commerce-headquarters"></a>إعداد مجموعة الاستيفاء في المركز الرئيسي لـ Commerce

لكي يقوم محدد المتجر بعرض المتاجر المتاحة، يجب إعداد مجموعه الاستيفاء في المركز الرئيسي لـ Commerce‬. لمزيد من المعلومات، راجع [إعداد مجموعات الاستيفاء‬](customer-orders-overview.md#set-up-fulfillment-groups).

بالاضافه إلى ذلك، لكل متجر في مجموعة الاستيفاء، يجب تحديد خطي الطول والعرض لموقع المتجر في المركز الرئيسي.

لإدخال قيم خطي الطول والعرض لموقع المتجر في المركز الرئيسي لـ Commerce، اتبع الخطوات التالية.

1. انتقل إلى **إدارة المخزون \> إعداد \> تصنيف المخزون**.
1. حدد موقع الصنف في الجزء الأيسر.
1. على علامة التبويب السريعة **العناوين**، حدد **متقدم**.

    ![أمثلة عن تفاصيل المتجر في المركز الرئيسي.](./media/Store-address.png)

1. في جزء الإجراءات، حدد **تحرير**.
1. على علامة التبويب السريعة **عام**، أدخل قيم **خط الطول** و **خط العرض**.

    ![مثال عن إعداد خطي الطول والعرض لمتجر في المركز الرئيسي.](./media/Store-latitude-longitude.png)

1. في جزء الإجراءات، حدد **حفظ**. 

## <a name="bing-maps-integration"></a>تكامل خرائط Bing

تتكامل الوحدة النمطية لمحدد المتجر مع [واجهات برمجة تطبيقات REST لخرائط Bing (APIs)](/bingmaps/rest-services/) لاستخدام ميزات الترميز الجغرافي والاقتراح التلقائي في Bing. يلزم إدخال مفتاح API لخرائط Bing ويجب إضافته إلى صفحة المعلمات المشتركة في مركز Commerce الرئيسي.‬ يتم استخدام واجهة API للترميز الجغرافي لتحويل موقع إلى قيم خط الطول و خط العرض. يتم استخدام التكامل مع واجهة API للاقتراح التلقائي لعرض اقتراحات البحث عندما يقوم المستخدمون بإدخال مواقع في حقل البحث.

بالنسبة إلى REST API للاقتراح التلقائي، يجب أن تتأكد من أن عناوين URL التالية مسموحة وفق سياسة أمان محتوى الموقع (CSP) الخاص بك. يتم إجراء هذا الإعداد في منشئ مواقع Commerce، عن طريق إضافة عناوين URL مسموح بها إلى توجيهات CSP متعددة للموقع (على سبيل المثال، **img-src**). لمزيد من المعلومات، راجع [سياسة أمان المحتوى](manage-csp.md). 

- إلى التوجيه **connect-src**، أضف **&#42;.bing.com**.
- إلى التوجيه **img-src**، أضف **&#42;.virtualearth.net**.
- إلى التوجيه **script-src**، **أضف &#42;.bing.com, &#42;.virtualearth.net**.
- إلى التوجيه **script style-src**، أضف **&#42;.bing.com**.

## <a name="pickup-in-store-mode"></a>الالتقاط في وضع المتجر

تدعم الوحدة النمطية لمحدد المتجر وضع **الالتقاط في المتجر** الذي يعرض قائمة بالمتاجر التي يكون فيها المنتج متوفرًا للالتقاط. كما تعرض ساعات المتجر ومخزون المنتجات لكل متجر في القائمة. تتطلب الوحدة النمطية لمحدد المتجر سياق منتج لتقديم توافر المنتج والسماح للمستخدم بإضافة المنتج إلى سله التسوق، إذا تم تعيين وضع تسليم المنتج إلى **التقاط** في المتجر المحدد. لمزيد من المعلومات، راجع [إعدادات المخزون](inventory-settings.md). 

يمكن إضافة وحدة محدد المتجر إلى وحدة مربع الشراء في صفحة تفاصيل المنتج (PDP) لعرض المتاجر التي يكون فيها المنتج متوفرًا للالتقاط. ويمكن إضافته أيضًا إلى وحدة سلة. في هذه الحالة، تعرض الوحدة النمطية لمحدد المتجر خيارات الالتقاط لكل عنصر من عناصر البنود في سلة التسوق. يمكن أيضًا إضافة الوحدة النمطية لمحدد المتجر إلى صفحات أو وحدات أخرى من خلال الملحقات والتخصيصات.

لكي يعمل هذا السيناريو، يجب تكوين المنتجات بحيث يتم استخدام وضع التسليم **التقاط**. وإلا، فلن تظهر الوحدة في صفحات المنتجات. للحصول على مزيد من المعلومات حول كيفية تكوين وضع التسليم، راجع [إعداد أوضاع التسليم](/dynamicsax-2012/appuser-itpro/set-up-modes-of-delivery).

تظهر الصورة التالية مثالاً على وحدة محدد المتجر المستخدمة في صفحة تفاصيل المنتج (PDP)

![مثال عن الوحدة النمطية لمحدد المتجر المستخدمة على PDP.](./media/BOPIS.PNG)

> [!NOTE]
> في الإصدار 10.0.16 والإصدارات الأحدث، يمكن تمكين ميزة جديدة تتيح للمؤسسة تحديد خيارات أوضاع استلام التقاط متعددة للعملاء.  إذا تم تمكين هذه الميزة، فسيتم تحسين محدد المتجر والوحدات النمطية الأخرى للتجارة الإلكترونية للسماح للمتسوق بالاختيار من بين خيارات تسليم التقاط متعددة محتملة إذا تم تكوينها.  لمعرفه المزيد حول هذه الميزة، راجع [هذه الوثائق](./multiple-pickup-modes.md). 

## <a name="find-stores-mode"></a>وضع البحث عن المتاجر

تدعم أيضًا الوحدة النمطية لمحدد المتجر وضع **البحث عن المتاجر**. يمكن استخدام هذا الوضع لإنشاء صفحة مواقع المتجر التي تعرض المتاجر المتوفرة ومعلومات عنها. في هذا الوضع، تعمل الوحدة النمطية لمحدد المتجر بدون سياق المنتج ويمكن استخدامها كوحدة نمطية مستقلة في أي صفحة موقع. علاوةً على ذلك، إذا تم تشغيل الإعدادات ذات الصلة للوحدة النمطية، يمكن للمستخدمين تحديد متجر ليكون متجرهم المفضل. عند تحديد متجر كمتجر مفضل لأحد المستخدمين، يتم الاحتفاظ بمعرف المتجر في ملف تعريف ارتباط المستعرض. وبالتالي، يجب على المستخدم قبول رسالة الموافقة على ملف تعريف الارتباط.

يبين الرسم التوضيحي التالي مثالاً على الوحدة النمطية لمحدد المتجر التي يتم استخدامها مع الوحدة النمطية للخريطة في صفحة مواقع المتجر.

![مثال عن الوحدة النمطية لمحدد المتجر والوحدة النمطية للخريطة على صفحة مواقع المتجر.](./media/ecommerce-Storelocator.PNG)

## <a name="render-a-map"></a>عرض خريطة

يمكن استخدام الوحدة النمطية لمحدد المتجر مع الوحدة النمطية للخريطة لعرض مواقع التخزين على الخريطة. لمزيد من المعلومات حول الوحدة النمطية للخريطة، راجع [الوحدة النمطية للخريطة‬](map-module.md).

## <a name="store-selector-module-properties"></a>خصائص وحدة محدِّد المتجر

| اسم الخاصية | قيمة | ‏‏الوصف |
|---------------|-------|-------------|
| العنوان | النص | عنوان الوحدة النمطية. |
| الوضع | **البحث عن متاجر** أو **التقاط في المتجر** | يعرض الوضع **البحث عن متاجر** المتاجر المتوفرة. يسمح الوضع **التقاط في المتجر** للمستخدمين تحديد متجر للالتقاط. |
| نمط | **مربع حوار** أو **مضمن** | يمكن عرض الوحدة النمطية بشكل مضمن أو في مربع حوار |
| تعيين كمتجر مفضل | **صحيح** أم **خطأ** | عند تعيين هذه الخاصية إلى **صواب**، بإمكان المستخدمين تعيين متجر مفضل. تتطلب هذه الميزة قبول المستخدمين لرسالة الموافقة على ملف تعريف الارتباط. |
| إظهار جميع المتاجر | **صحيح** أم **خطأ** | عند تعيين هذه الخاصية إلى **صواب**، يستطيع المستخدمون تجاوز خاصية **نصف قطر البحث** وعرض جميع المتاجر. |
| خيارات الاقتراح التلقائي: الحد الأقصى للنتائج | رقم | تحدد هذه الخاصية الحد الأقصى لعدد نتائج الاقتراح التلقائي التي يمكن عرضها من خلال واجهة API للاقتراح التلقائي في Bing. |
| نصف قطر البحث | رقم | تحدد هذه الخاصية نصف قطر البحث للمتاجر، بالأميال. إذا لم يتم تحديد قيمة، يتم استخدام نصف قطر البحث الافتراضي، 50 ميلاً. |
| شروط الخدمة | URL |  تحدد هذه الخاصية عنوان URL لشروط الخدمة المطلوبة لاستخدام خدمة خرائط Bing. |

## <a name="site-settings"></a>إعدادات الموقع

تراعي الوحدة النمطية لمحدد المتجر [إعدادات منتج إلى السلة](add-cart-settings.md). بعد إضافة أحد الأصناف إلى سلة التسوق من الوحدة النمطية لمحدد المتجر، سيشاهد مستخدمو الموقع مهام سير العمل المكونة المناسبة.

## <a name="add-a-store-selector-module-to-a-page"></a>إضافة وحدة محدِّد متجر إلى صفحة

بالنسبة إلى وضع **الالتقاط في المتجر**، يمكن استخدام الوحدة النمطية فقط على PDF وصفحات سلة التسوق. يجب عليك تعيين الوضع إلى **الالتقاط في المتجر** في جزء خصائص الوحدة النمطية.

- للحصول على معلومات حول كيفية إضافة وحدة محدِّد المتجر إلى وحدة مربع شراء، راجع [وحدة مربع الشراء](add-buy-box.md). 
- للحصول على معلومات حول كيفية إضافة وحدة محدِّد المتجر إلى وحدة السلة، راجع [وحدة السلة](add-cart-module.md)

لتكوين الوحدة النمطية لمحدد المتجر لإظهار المتاجر المتاحة لصفحة مواقع المتجر، كما في الشكل التوضيحي الذي ظهر في وقت سابقًا في هذا الموضوع، اتبع الخطوات التالية.

1. انتقل إلى **القوالب**، ثم حدد **جديد** لإنشاء قالب جديد.
1. في مربع الحوار **قالب جديد**، تحت **اسم القالب**، أدخل **قالب التسويق**، ثم حدد **موافق**.
1. حدد **حفظ**، وحدد **إنهاء التحرير** لإيداع القالب، ثم حدد **نشر** لنشره.
1. انتقل إلى **الصفحات**، ثم حدد **جديد** لإنشاء صفحة جديدة.
1. في مربع الحوار **اختيار قالب**، حدد القالب **قالب التسويق**. ضمن **اسم الصفحة**، أدخل **مواقع الصفحة**، ثم حدد **موافق‏‎**.
1. في الفتحة **الرئيسية** للصفحة الجديدة، حدد علامة القطع (**...**)، ثم حدد **إضافة وحدة‬‏‫**.
1. في مربع الحوار **إضافة وحدة**، حدد وحدة ‬‏‫**الحاوية‬**، ثم حدد **موافق**.
1. في فتحة **الحاوية‬‬‏‫**، حدد علامة القطع (**...**)، ثم حدد **إضافة وحدة**.
1. في مربع الحوار **إضافة وحدة**، حدد وحدة ‬‏‫**حاوية مع عمودين‬**، ثم حدد **موافق**.
1. في جزء خصائص الوحدة النمطية، قم بتعيين قيمة **العرض** إلى **ملء الحاوية**.
1. عيّن قيمة **تكوين عمود منفذ عرض صغير جدًا‬** إلى **100%**.
1. عيّن قيمة **تكوين عمود منفذ عرض صغير‬** إلى **100%**.
1. عيّن قيمة **تكوين عمود منفذ عرض متوسط‬** إلى **‎33% 67%**.
1. عيّن قيمة **تكوين عمود منفذ عرض كبير‬** إلى **‎33% 67%**.
1. في فتحة **حاوية مع عمودين‬‬‏‫‬‬‏‫**، حدد علامة القطع (**...**)، ثم حدد **إضافة وحدة**.
1. في مربع الحوار **إضافة وحدة**، حدد وحدة ‬‏‫**محدد المتجر‬**، ثم حدد **موافق**.
1. في جزء خصائص الوحدة النمطية، قم بتعيين قيمة **الوضع** إلى **البحث عن متاجر**.
1. قم بتعيين قيمة **نصف قطر البحث** بالأميال.
1. قم بتعيين الخصائص الأخرى، مثل **تعيين كمتجر مفضل** و **إظهار جميع المتاجر** و **تمكين الاقتراح التلقائي**، وفق احتياجاتك.
1. في فتحة **حاوية مع عمودين‬‬‏‫‬‬‏‫**، حدد علامة القطع (**...**)، ثم حدد **إضافة وحدة**.
1. في مربع الحوار **إضافة وحدة**، حدد وحدة **الخريطة‬‏‎**، ثم حدد **موافق‏‎**.
1. في جزء خصائص الوحدة النمطية، قم بتعيين الخصائص الإضافية المطلوبة.
1. حدد **حفظ**، وحدد **إنهاء التحرير** لإيداع الصفحة، ثم حدد **نشر** لنشرها.
 
## <a name="additional-resources"></a>الموارد الإضافية

[نظرة عامة حول مكتبة الوحدات النمطية](starter-kit-overview.md)

[الوحدة النمطية لصندوق الشراء](add-buy-box.md)

[الوحدة النمطية لعربة التسوق](add-cart-module.md)

[جولة سريعة في صفحة تفاصيل المنتج (PDP)](quick-tour-pdp.md)

[جولة سريعة حول سلة التسوق والسداد مع الخروج](quick-tour-cart-checkout.md)

[إعداد أوضاع التسليم](/dynamicsax-2012/appuser-itpro/set-up-modes-of-delivery)

[إدارة خرائط Bing لمؤسستك](dev-itpro/manage-bing-maps.md)

[واجهات REST API لخرائط Bing](/bingmaps/rest-services/)

[وحدة الخرائط](map-module.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
