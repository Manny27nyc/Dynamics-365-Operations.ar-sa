---
title: وحدة بطاقة الهدايا
description: يتناول هذا الموضوع وحدات بطاقة الهدايا ويصف كيفية إضافتها إلى صفحات الموقع في Microsoft Dynamics 365 Commerce.
author: anupamar-ms
ms.date: 04/29/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: ''
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: 8db7e597241f1fd552f6b960c2b57b0ba83da949
ms.sourcegitcommit: efde05c758b2e02960760d875569d780d77d5550
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/29/2021
ms.locfileid: "5962753"
---
# <a name="gift-card-module"></a>الوحدة النمطية لبطاقة الهدايا

[!include [banner](includes/banner.md)]

يتناول هذا الموضوع وحدات بطاقة الهدايا ويصف كيفية إضافتها إلى صفحات الموقع في Microsoft Dynamics 365 Commerce.

يمكن استخدام وحدات بطاقات الهدايا في وحدات السداد مع الخروج لقبول بطاقات الهدايا، وهي عبارة عن طريقة دفع شائعة الاستخدام في حركات التجارة الإلكترونية. تدعم وحدة بطاقة الهدايا بطاقات هدايا Dynamics 365 وSVS وGivex. يتم استرداد بطاقات الهدايا من SVS وGivex من خلال موفر الدفع Adyen. لمزيد من المعلومات جول دعم بطاقات الهدايا الخارجية مثل SVS وGivex، راجع [دعم بطاقات الهدايا الخارجية](./dev-itpro/gift-card.md)

> [!NOTE]
> يتوفر دعم استرداد بطاقات الهدايا SVS وGivex اثناء سير عمل السداد مع الخروج في Dynamics 365 Commerce الإصدار 10.0.11. 

هناك وحدتان لبطاقة الهدايا:

- **بطاقة الهدايا** - يمكن استخدام هذه الوحدة على صفحة السداد مع الخروج‬ لاسترداد بطاقة الهدايا كطريقة دفع. 
- **فحص رصيد بطاقة الهدايا** - يمكن استخدام هذه الوحدة على أي صفحة لفحص الرصيد على بطاقة الهدايا. تتوفر هذه الوحدة في الإصدار 10.0.14 من Commerce والإصدارات اللاحقة.

> [!NOTE]
> يتوفر دعم الوحدة النمطية فحص رصيد بطاقة الهدايا‬‏‫ في Dynamics 365 Commerce الإصدار 10.0.14.

تعرض الصورة التالية مثالاً عن وحدة بطاقة هدايا في صفحة السداد مع الخروج.

![مثال عن وحدة بطاقة هدايا](./media/ecommerce-giftcard.PNG)

## <a name="module-properties"></a>خصائص الوحدة النمطية

- **إظهار حقول** - تحدد هذه الخاصية الحقول التي يجب عرضها لبطاقات الهدايا بالإضافة إلى رقم بطاقة الهدايا، الذي يظهر دائمًا بشكل افتراضي. على سبيل المثال، تدعم بعض بطاقات الهدايا رقم تعريف شخصي (PIN) ويدعم البعض الآخر عرض رمز PIN وتاريخ انتهاء الصلاحية. بدلاً من ذلك،،يمكن تعيين هذه الخاصية إلى "بلا"، مما يؤدي إلى عرض رقم بطاقة الهدايا فقط ومن دون حقول إضافية.

القيم المدعومة:
-   رمز PIN
-   تاريخ انتهاء الصلاحية
-   رمز PIN وتاريخ انتهاء الصلاحية 
-   بلا‬‬

## <a name="site-settings-for-gift-card-modules"></a>إعدادات الموقع لوحدات بطاقة الهدايا

في منشئ موقع Commerce، ضمن **إعدادات الموقع \> Extensions**، هناك إعداد لوحدة بطاقة هدايا يسمى **نوع بطاقة الهدايا المدعومة**. يدعم هذا الإعداد ثلاث قيم:
- **بطاقة هدايا Dynamics 365** - عند تطبيق هذا الإعداد، تسمح وحدة بطاقة الهدايا باسترداد بطاقات هدايا Dynamics 365 فقط. هذا الإعداد مدعوم فقط للمستخدمين الذين سجلوا دخولهم في موقع التجارة الإلكترونية.
- **بطاقات هدايا SVS وGivex** - عند تطبيق هذا الإعداد، تسمح وحدة بطاقة الهدايا باسترداد بطاقات هدايا SVS وGivex فقط. هذا الإعداد مدعوم للمستخدمين الذين سجلوا دخولهم في موقع التجارة الإلكترونية بالإضافة إلى المستخدمين المجهولي الهوية.
- **بطاقات هدايا Dynamics 365 وSVS وGivex** - عند تطبيق هذا الإعداد، تسمح وحدة بطاقة الهدايا باسترداد بطاقات هدايا Dynamics 365 وSVS وGivex. هذا الإعداد مدعوم فقط للمستخدمين الذين سجلوا دخولهم في موقع التجارة الإلكترونية.

> [!IMPORTANT]
> تتوفر هذه الإعدادات في Dynamics 365 Commerce الإصدار 10.0.11، وهي مطلوبة فقط إذا احتجت إلى دعم بطاقات الهدايا SVS أو Givex. إذا كنت تقوم بالتحديث من إصدار قديم من Dynamics 365 Commerce، فيجب عليك تحديث ملف appsettings.json يدويًا. للحصول على تعليمات حول تحديث ملف appsettings.json، راجع [تحديثات SDK ومكتبة الوحدات النمطية](e-commerce-extensibility/sdk-updates.md#update-the-appsettingsjson-file). 

## <a name="extend-internal-gift-cards-for-use-in-e-commerce-storefronts"></a>توسيع بطاقات الهدايا الداخلية لاستخدامها في واجهات متاجر التجارة الإلكترونية

بشكل افتراضي ، لم يتم تحسين بطاقات الهدايا الداخلية للاستخدام في واجهات متاجر التجارة الإلكترونية. لذلك ، قبل السماح باستخدام بطاقات الهدايا الداخلية للدفع ، يجب عليك تكوينها بملحقات تساعد في جعلها أكثر أمانًا. في ما يلي مناطق بطاقات الهدايا التي يجب عليك تمديدها قبل السماح باستخدام بطاقات الهدايا الداخلية في الإنتاج:

- **رقم بطاقة الهدايا** - يتم استخدام التسلسلات الرقمية لإنشاء أرقام بطاقات الهدايا لبطاقات الهدايا الداخلية. نظرًا لأنه يمكن توقع تسلسل الأرقام بسهولة ، يجب عليك تمديد إنشاء أرقام بطاقات الهدايا بحيث يتم استخدام سلاسل عشوائية وآمنة من الناحية المشفرة لأرقام بطاقات الهدايا التي تم إصدارها.
- **GetBalance** – يتم استخدام واجهة برمجة تطبيقات **GetBalance** للبحث عن أرصدة بطاقات الهدايا. بشكل افتراضي ، تكون واجهة برمجة التطبيقات هذه عامة. إذا لم يكن رقم التعريف الشخصي مطلوبًا للبحث عن أرصدة بطاقات الهدايا ، فهناك خطر أن تستخدم هجمات القوة الغاشمة واجهة برمجة تطبيقات **GetBalance** لمحاولة البحث عن أرقام بطاقات الهدايا التي تحتوي على أرصدة. من خلال تنفيذ كل من متطلبات PIN لبطاقات الهدايا الداخلية وتقييد واجهة برمجة التطبيقات ، يمكنك المساعدة في التخفيف من المخاطر.
- **PIN** – افتراضيًا ، لا تدعم بطاقات الهدايا الداخلية أرقام التعريف الشخصية. يجب توسيع بطاقات الهدايا الداخلية بحيث يكون رقم التعريف الشخصي مطلوبا للبحث عن الارصده. يمكن استخدام هذه الوظيفة أيضا لتامين بطاقات الهدايا بعد المحاولات المتتالية غير الصحيحة لإدخال رقم التعريف الشخصي (PIN).

## <a name="enable-gift-card-payments-for-guest-checkout"></a>تمكين مدفوعات بطاقة الهدايا لسحب الضيف

بشكل افتراضي ، لا يتم تمكين مدفوعات بطاقات الهدايا لسداد الضيف (مجهول). لتمكينها ، اتبع هذه الخطوات.

1. في إدارة Commerce، انتقل إلى **Retail وCommerce \> إعداد القنوات \> إعداد نقطة البيع\> نقطة البيع \> عمليات نقطة البيع**.
1. حدد باستمرار (أو انقر بزر الماوس الأيمن) على رأس الشبكة ، ثم حدد **إدراج الأعمدة**.
1. في مربع الحوار **إدراج الأعمدة**، حدد خانة الاختيار **AllowAnonymousAccess**.
1. حدد **تحديث**.
1. بالنسبة للعمليات **520** (رصيد بطاقة الهدايا) و **214**، قم بتعيين قيمة **AllowAnonymousAccess** إلى **1**.
1. حدد **حفظ**.
1. قم بتشغيل وظيفة مجدول **1090** لمزامنة التغييرات لقاعدة بيانات القناة. 

## <a name="add-a-gift-card-module-to-a-page"></a>إضافة وحدة بطاقة هدايا إلى صفحة

للحصول على إرشادات حول كيفية إضافة وحدة بطاقة هدايا إلى صفحة السداد مع الخروج‬ وتعيين الخصائص المطلوبة، راجع [وحدة السداد مع الخروج](add-checkout-module.md).

## <a name="additional-resources"></a>الموارد الإضافية

[الوحدة النمطية لعربة التسوق](add-cart-module.md)

[وحدة أيقونة عربة التسوق](cart-icon-module.md)

[الوحدة النمطية للسداد مع الخروج](add-checkout-module.md)

[الوحدة النمطية للدفع](payment-module.md)

[الوحدة النمطية لعنوان الشحن](ship-address-module.md)

[الوحدة النمطية لخيارات التسليم](delivery-options-module.md)

[الوحدة النمطية لمعلومات الانتقاء](pickup-info-module.md)

[الوحدة النمطية لتفاصيل الأوامر](order-confirmation-module.md)

[دعم بطاقات الهدايا الخارجية](./dev-itpro/gift-card.md)

[تحديثات SDK ومكتبة الوحدات النمطية](e-commerce-extensibility/sdk-updates.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
