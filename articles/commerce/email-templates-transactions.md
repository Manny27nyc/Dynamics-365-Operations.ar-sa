---
title: إنشاء قوالب بريد إلكتروني لأحداث الحركات
description: يوضح هذا الموضوع كيفية إنشاء قوالب بريد إلكتروني وتحميلها وتكوينها لأحداث الحركات في Microsoft Dynamics 365 Commerce.
author: bicyclingfool
manager: annbe
ms.date: 06/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: stuharg
ms.search.validFrom: 2020-01-20
ms.dyn365.ops.version: Release 10.0.8
ms.openlocfilehash: ea484bfc1e9b293c53d7293c50630c4955000131
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/13/2020
ms.locfileid: "4409804"
---
# <a name="create-email-templates-for-transactional-events"></a>إنشاء قوالب بريد إلكتروني لأحداث الحركات

[!include [banner](includes/banner.md)]

يوضح هذا الموضوع كيفية إنشاء قوالب بريد إلكتروني وتحميلها وتكوينها لأحداث الحركات في Microsoft Dynamics 365 Commerce.

## <a name="overview"></a>نظرة عامة

يوفر Dynamics 365 Commerce حلاً جاهزًا لإرسال رسائل بريد إلكتروني والتي تقوم بتنبيه العملاء حول أحداث الحركات (على سبيل المثال، عند تقديم طلب ما أو عندما يصبح الأمر جاهزًا للالتقاط أو عندما يتم شحن الأمر). يصف هذا الموضوع الخطوات الخاصة بإنشاء قوالب البريد الإلكتروني المستخدمة لإرسال رسائل بريد إلكتروني للحركات وتحميلها وتكوينها.

## <a name="create-an-email-template"></a>إنشاء قالب بريد إلكتروني

قبل أن تتمكن من تعيين حدث حركة معين إلى قالب بريد إلكتروني، يجب عليك إنشاء القالب.

لإنشاء قالب بريد إلكتروني، اتبع هذه الخطوات.

1. في Commerce headquarters، انتقل إلى **قوالب البريد الإلكتروني للمؤسسة** ضمن **Retail and Commerce \> إعداد Headquarters \> قوالب البريد الإلكتروني للمؤسسة** أو **إدارة المؤسسة \> إعداد \> قوالب البريد الإلكتروني للمؤسسة**.
1. حدد **جديد**.
1. ضمن **عام**، قم بتعيين الحقول التالية:

    - **معرف البريد الإلكتروني** – معرف البريد الإلكتروني هو المعرف الفريد للقالب، وهو القيمة التي تظهر عند تحديد قالب لتعيينه إلى حدث.
    - **وصف البريد الإلكتروني** – يمكنك استخدام هذا الحقل الاختياري لتوفير وصف للقالب. تظهر القيمة التي تدخلها في Commerce Headquarters فقط.
    - **اسم المرسل** – يظهر الاسم الذي تقوم بإدخاله في الحقل "من" الخاص بمعظم عملاء البريد الإلكتروني.
    - **البريد الإلكتروني للمرسل** – أدخل عنوان البريد الإلكتروني الذي يجب استخدامه لرسائل البريد الإلكتروني التي يتم إرسالها باستخدام هذا القالب.
    - **كود اللغة الافتراضية** – يحدد هذا الحقل الإصدار المترجم من البريد الإلكتروني الذي يتم إرساله افتراضيًا، في حالة عدم توفير لغة بواسطة القناة التي تقوم باستدعاء هذا القالب.

1. ضمن **محتوي رسالة البريد الإلكتروني**، حدد **جديد**.
1. في حقل **اللغة**، ادخل اللغة لقالب البريد الإلكتروني. يمكنك إضافة المزيد من اللغات والقوالب المترجمة لاحقًا.
1. في حقل **الموضوع**، أدخل موضوع البريد الإلكتروني الذي يجب أن يظهر في حقل الموضوع الخاص بالبريد الإلكتروني.
1. حدد **تحرير** لتحميل قالب البريد الإلكتروني الخاص بك.

## <a name="create-an-email-message-body-by-using-html"></a>إنشاء نص رسالة بريد إلكتروني باستخدام HTML

يتم تكوين نص رسالة البريد الإلكتروني الخاصة بك بتنسيق HTML. يمكنك استخدام أي تخطيط، ونمط، وعلامة تجارية يسمح بها HTML أوراق الأنماط المتتالية المدمجة (CSS). يمكنك أيضًا استخدام الصور، إذا قمت باستضافتها على نقطة نهاية ويب متوفرة بشكل عام. لإضافة صورة، أدخل عنوان URL الخاص بالصورة في سمة **src** الخاصة بعلامة **&lt;img&gt;** لـ HTML.

> [!NOTE]
> يفرض عملاء البريد الإلكتروني قيودًا على المخطط والنمط قد تتطلب تعديلات على HTML وCSS التي تستخدمها لنص الرسالة. نوصيك بالتعرف على أفضل الممارسات الخاصة بإنشاء HTML الذي يدعمه معظم عملاء البريد الإلكتروني المشهورين.

## <a name="add-placeholders-to-the-email-message-body"></a>إضافة عناصر نائبة إلى نص رسالة البريد الإلكتروني

يمكن أن يحتوي بريدك الإلكتروني على عناصر نائبة يتم استبدالها بقيم خاصة بالعميل وقيم خاصة بالحركات عند إنشاء البريد الإلكتروني. تكون العناصر النائبة دائمًا محاطة بعلامات النسبة المئوية (%) ويتم إدراجها مباشره في مستند HTML.

فيما يلي مثال على ذلك.

```html
<p>
    Hello %customername%,<br />
    Order number %salesid%, can be picked up from the <b>%pickupstorename%</b> store.
</p>
```

### <a name="order-placeholders-sales-order-level"></a>العناصر النائبة للأمر (مستوى أمر المبيعات)

تقوم العناصر النائبة التالية باسترداد وإظهار البيانات التي يتم تحديدها في مستوى أمر المبيعات (على عكس مستوى بند المبيعات).

| اسم العنصر النائب    | قيمة العنصر النائب                                                |
|---------------------|------------------------------------------------------------------|
| customername        | اسم العميل الذي قام بتقديم الأمر.                   |
| salesid             | معرف المبيعات للأمر.                                       |
| deliveryaddress     | عنوان التسليم الخاص بالأوامر المشحونة.                         |
| customeraddress     | عنوان العميل.                                     |
| deliverydate        | تاريخ التسليم.                                               |
| shipdate            | تاريخ الشحن.                                                   |
| modeofdelivery      | وضع التسليم الخاص بالأمر.                                  |
| التكاليف             | إجمالي المصاريف الخاصة بالأمر.                                 |
| ضريبة                 | إجمالي الضرائب الخاصة بالأمر.                                     |
| الإجمالي               | المبلغ الإجمالي الخاص بالأمر.                                  |
| ordernetamount      | المبلغ الإجمالي للأمر، مطروحًا منه إجمالي الضريبة.             |
| خصم            | إجمالي الخصم الخاص بالأمر.                                |
| storename           | اسم المتجر الذي تم فيه تقديم الأمر.                |
| storeaddress        | عنوان المتجر الذي قام بتقديم الأمر.                  |
| storeopenfrom       | وقت فتح المتجر الذي قام بتقديم الأمر.             |
| storeopento         | وقت إغلاق المتجر الذي قام بتقديم الأمر.             |
| pickupstorename     | اسم المتجر الذي سيتم منه التقاط الأمر.         |
| pickupstoreaddress  | عنوان المتجر الذي سيتم منه التقاط الأمر.      |
| pickupopenstorefrom | وقت فتح المتجر الذي سيتم منه التقاط الأمر. |
| pickupopenstoreto   | وقت إغلاق المتجر الذي سيتم منه التقاط الأمر. |

### <a name="order-line-placeholders-sales-line-level"></a>العناصر النائبة لبنود الأمر (مستوى بند المبيعات)

تسترد العناصر النائبة التالية وتعرض البيانات الخاصة بالمنتجات الفردية (البنود) في أمر المبيعات.

| اسم العنصر النائب               | قيمة العنصر النائب |
|--------------------------------|-------------------|
| productid                      | معرف المنتج الخاص بالبند. |
| lineproductname                | اسم المنتج. |
| lineproductdescription         | وصف المنتج. |
| linequantity                   | عدد الوحدات التي تم طلبها للبند، بالإضافة إلى وحدة القياس (على سبيل المثال، **ea** أو **زوج**). |
| lineunit                       | وحدة القياس للبند. |
| linequantity_withoutunit       | عدد الوحدات التي تم طلبها للبند، بدون وحدة القياس. |
| linequantitypicked             | عند استخدام حدث **PickOrder**، يتم التقاط عدد الوحدات. خلاف ذلك، **0** (صفر). |
| linequantitypicked_withoutunit | عند استخدام حدث **PickOrder**، يتم التقاط عدد الوحدات، بدون وحدة القياس. خلاف ذلك، **0** (صفر). |
| linequantitypacked             | عند استخدام أحداث **PackOrder** و **أمر جاهز للالتقاط**، يتم التقاط عدد الوحدات. خلاف ذلك، **0** (صفر). |
| linequantitypacked_withoutuom  | عند استخدام أحداث **PackOrder** و **أمر جاهز للالتقاط**، يتم التقاط عدد الوحدة، بدون وحدة القياس. خلاف ذلك، **0** (صفر). |
| linequantityshipped            | دائمًا **0**، باستثناء عند استخدام أحداث خاصة، كما هو موضح في الصف التالي. |
| linequantityshipped_withoutuom | عند استخدام حدث **ShipOrder**، يتم التقاط عدد الوحدات، بدون وحدة القياس. خلاف ذلك، **0** (صفر). |
| lineprice                      | سعر الوحدة الفردية. |
| linenetamount                  | يتم تطبيق سعر البند بعد عدد الوحدات والخصم. |
| linediscount                   | الخصم لوحدة فردية. |
| lineshipdate                   | تاريخ الشحن للبند. |
| linedeliverydate               | تاريخ التسليم للبند. |
| linedeliverymode               | وضع التسليم للبند. |
| linedeliveryaddress            | عنوان التسليم للبند. |
| giftcardnumber                 | رقم بطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. |
| giftcardbalance                | رصيد بطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. |
| giftcardmessage                | رسالة بطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. |
| giftcardpin                    | رقم التعريف الشخصي (PIN) لبطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. (هذا العنصر النائب خاص ببطاقات الهدايا الخارجية.) |
| giftcardexpiration             | تاريخ انتهاء الصلاحية لبطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. (هذا العنصر النائب خاص ببطاقات الهدايا الخارجية.) |
| giftcardrecipientname          | اسم مستلم بطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. |
| giftcardbuyername              | اسم مشتري بطاقة الهدايا، للمنتجات الخاصة بنوع بطاقة الهدايا. |

### <a name="format-of-order-line-placeholders-in-the-email-message-body"></a>تنسيق العناصر النائبة لبند الأمر في نص رسالة البريد الإلكتروني

عند إنشاء HTML لبنود الأمر الفردية في نص رسالة البريد الإلكتروني، قم بإحاطة الكتلة المكررة من HTML والعناصر النائبة الخاصة بالبنود بالعناصر النائبة التالية التي يتم وضعها داخل علامات تعليق HTML.

```html
<!--%tablebegin.salesline%-->

(Insert the repeating block of HTML and placeholders for individual lines here.)

<!--%tableend.salesline%-->
```

فيما يلي مثال على ذلك.

```HTML
<table>
    <tr>
        <td>Product name</td>
        <td>Quantity</td>
        <td>Price</td>
    </tr>
    <!--%tablebegin.salesline%-->
    <tr>
        <td>%lineproductname%</td>
        <td>%linequantity_withoutunit%</td>
        <td>%lineprice%</td>
    </tr>
    <!--%tableend.salesline%-->
</table>
```

## <a name="create-a-template-for-emailed-receipts"></a>إنشاء قالب للإيصالات المرسلة بالبريد الإلكتروني

يمكن إرسال الإيصالات بالبريد الإلكتروني للعملاء الذين يقومون بإجراء عمليات شراء من نقطة البيع بالتجزئة (POS). بشكل عام، تكون خطوات إنشاء قالب إيصال البريد الإلكتروني هي نفس خطوات إنشاء القوالب لأحداث الحركات الأخرى. مع ذلك، بالتغييرات التالية مطلوبة:

- يجب أن يكون معرف البريد الإلكتروني لقالب البريد الإلكتروني **emailRecpt**.
- يتم إدراج نص الإيصال في البريد الإلكتروني باستخدام العنصر النائب **%message%**. للتأكد من أنه تم عرض نص الإيصال بشكل صحيح، قم بإحاطة العنصر النائب **%message%** بعلامات **&lt;pre&gt;** و **&lt;/pre&gt;** لـ HTML.
- يتم تحويل فواصل الأسطر في HTML لرأس وتذييل البريد الإلكتروني إلى علامات **&lt;br /&gt;** في HTML بحيث يتم عرض نص الإيصال بشكل صحيح. لحذف المساحة العمودية غير المرغوب فيها في رسائل البريد الإلكتروني الخاصة بالإيصال، قم بإزالة فواصل الأسطر من أي مكان في HTML لا تكون فيه المساحة الرأسية مطلوبة.

للحصول على مزيد من المعلومات حول كيفية تكوين إيصالات البريد الإلكتروني، راجع [إعداد إيصالات البريد الإلكتروني](https://docs.microsoft.com/dynamicsax-2012/appuser-itpro/set-up-email-receipts).

## <a name="upload-the-email-html"></a>تحميل HTML للبريد الإلكتروني

بعد إنشاء واختبار HTML لنص الرسالة الخاصة بك، يجب أن يتم تحميله إلى Commerce Headquarters. لا يمكن تصدير HTML الخاص بالبريد الإلكتروني حاليًا. لذلك، يجب الاحتفاظ بالنسخة الرئيسية من HTML خارج Commerce Headquarters.

لتحميل HTML لقالب بريد إلكتروني جديد أو محرر، اتبع الخطوات التالية.

1. في Commerce headquarters، انتقل إلى **Retail and Commerce \> إعداد Headquarters \> قوالب البريد الإلكتروني للمؤسسة**.
1. حدد صف اللغة التي تريد إضافة أو استبدال HTML لها. بدلا من ذلك، حدد **جديد** لإنشاء صف للغة جديدة.
1. حدد **تحرير**.
1. في مربع الحوار الذي يظهر، حدد **استعراض**. قم بالاستعراض بحثا عن مستند HTML الذي تريد تحميله، وحدده، ثم حدد **فتح**.
1. ثم حدد **تحميل**.
1. بعد ظهور HTML بالبريد الإلكتروني الخاص بك في نافذة المعاينة، حدد **موافق**.
1. تأكد من تحديد خانة الاختيار **يتضمن نص** للصف.

إذا كنت قد قمت بالفعل بتكوين Commerce Headquarters لإرسال البريد الإلكتروني، سيتم إرسال بريد إلكتروني جديد أو محدث خاص بك إلى كافة العملاء الذين ينفذون حركة تستدعي الحدث الذي تم تعيينه إلى القالب.

للحصول على مزيد من المعلومات حول كيفية تكوين رسائل البريد الإلكتروني في Dynamics 365 Commerce، راجع [تكوين وإرسال البريد الإلكتروني](../fin-ops-core/fin-ops/organization-administration/configure-email.md).

## <a name="additional-resources"></a>الموارد الإضافية 

[إنشاء ملف تعريف الإخطار بالبريد الإلكتروني](email-notification-profiles.md)

[تكوين وإرسال البريد الإلكتروني](../fin-ops-core/fin-ops/organization-administration/configure-email.md)

[إعداد إيصالات بالبريد الإلكتروني](https://docs.microsoft.com/dynamicsax-2012/appuser-itpro/set-up-email-receipts)

[إرسال إيصالات البريد الإلكتروني من Modern POS](email-receipts.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]