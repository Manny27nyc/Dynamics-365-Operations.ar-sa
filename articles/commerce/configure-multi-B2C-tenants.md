---
title: تكوين عدة مستأجرين B2C في بيئة Commerce
description: يوضح هذا الموضوع متى وكيفية إعداد عدة مستأجري متاجرة بين عمل ومستهلك (B2C) لكل قناة Microsoft Azure Active Directory (Azure AD) لمصادقة المستخدم في بيئة Dynamics 365 Commerce مخصصة.
author: BrianShook
ms.date: 03/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: brshoo
ms.search.validFrom: 2020-02-12
ms.dyn365.ops.version: ''
ms.openlocfilehash: 4e50855368a3fa86c38c756492fc7e6cd518f497
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 03/31/2021
ms.locfileid: "5796089"
---
# <a name="configure-multiple-b2c-tenants-in-a-commerce-environment"></a>تكوين عدة مستأجرين B2C في بيئة Commerce

[!include [banner](includes/banner.md)]

يوضح هذا الموضوع متى وكيفية إعداد عدة مستأجري متاجرة بين عمل ومستهلك (B2C) لكل قناة Microsoft Azure Active Directory (Azure AD) لمصادقة المستخدم في بيئة Dynamics 365 Commerce مخصصة.

يستخدم Dynamics 365 Commerce خدمة الهوية عبر السحابة Azure AD B2C لدعم بيانات اعتماد المستخدم وتدفقات المصادقة. بإمكان المستخدمين استخدام تدفقات المصادقة للتسجيل، وتسجيل الدخول، وإعادة تعيين كلمه المرور. يقوم Azure AD B2C بتخزين معلومات المصادقة الحساسة للمستخدم، مثل اسم المستخدم وكلمه المرور الخاصة به. ويكون سجل المستخدمين فريدًا لكل مستأجر B2C، ويستخدم إما بيانات اعتماد اسم المستخدم (عنوان البريد إلكتروني) أو بيانات اعتماد موفر الهوية الاجتماعية.

في معظم الحالات، يتم استخدام مستأجر Azure AD B2C في بيئة Commerce. بعد ذلك، يستطيع عملاء Commerce إنشاء مواقع متعددة ونشرها في بيئة Commerce نفسها، كما سيتم استخدام بيانات اعتماد العميل نفسها عبر هذه المواقع. لكن، إذا كان يجب معاملة المواقع في البيئة كعلامات تجارية مختلفة، وإذا كانت تظهر للمستخدمين كأعمال منفصلة، يمكن تكوين مستأجر B2C للقناة المستخدمة لفصل الموقع/العلامة التجارية.

## <a name="considerations-when-multiple-b2c-tenants-are-set-up-per-channel"></a>أمور يجب مراعاتها عند إعداد عدة مستأجرين B2C لكل قناة

في أغلب الأحيان، عندما يتم التعامل مع كل قناة أو موقع على أنه عمل منفصل، فان أفضل خيار بالنسبة لتدفقات مصادقه المستخدم في Commerce هو استخدام كيانات قانونيه منفصلة. ومع ذلك، إذا كنت ترغب في الاحتفاظ بكل قناة/موقع في نفس البيئة والكيان القانوني، ولكنك تريد أن يكون لديك مصادقه مستخدم منفصلة لكل موقع، فمن المهم مراعاة النقاط التالية قبل المتابعة:

- سيحصل المستخدمون على بيانات الاعتماد المميزة الخاصة بهم لكل قناة/موقع.

    بإمكان الشخص نفسه امتلاك حسابين منفصلين لكل قناة/موقع، لأن كل حساب سيكون إدخالاً فريدًا في مستأجر B2C منفصل.

- في بيئة Microsoft Dynamics، سيتم إرجاع سجلات عميل منفصلة لعمليات البحث العمومية عن السجلات.

    إذا استخدم المستخدم نفس عنوان البريد الإلكتروني عبر القنوات/المواقع، فإن عمليات البحث العمومية ستؤدي إلى إرجاع نتائج لكل قناة/موقع. (سيتم إظهار مؤشر القناة.)

- يمكن استخدام دفتر العناوين للمساعدة في تجميع المستخدمين، بحيث يمكن تعقبهم لكل قناة.
- قد يزداد عدد سجلات العملاء لكل قناة، وقد تؤثر هذه الزيادة على أداء عمليات البحث العمومية عن العملاء.
- يجب أن يتم تعيين مستأجري B2C إلى قناة بعناية، للمساعدة في منع الحالات التي يقوم فيها العملاء بالتسجيل للحصول على مستأجر غير صحيح. وإلا، يمكن حدوث التباس أو مشاكل في التعقب.

يبين الرسم التوضيحي التالي مستأجري B2C متعددين في بيئة Commerce.

![مستأجرو B2C متعددون في بيئة Commerce](media/MultiB2C_In_Environment.png)

إذا قررت أن أعمالك تتطلب مستأجري B2C متميزين لكل قناة في بيئة Commerce نفسها، فأكمل الإجراءات الموجودة في الأقسام التالية لطلب هذه الميزة.

## <a name="configure-b2c-tenants-in-your-environment"></a>تكوين مستأجري B2C في بيئتك

لتكوين مستأجري B2C في بيئتك، أكمل الإجراءات ذات الصلة في هذا القسم.

### <a name="add-an-azure-ad-b2c-tenant"></a>إضافة مستأجر Azure AD B2C

لإضافة مستأجر Azure AD B2C إلى بيئتك، اتبع هذه الخطوات.

1. قم بتسجيل الدخول إلى منشئ موقع Commerce لبيئتك كمسؤول نظام. لتكوين مستأجري Azure AD B2C، يجب أن تكون مسؤول نظام لبيئة Commerce.
1. في جزء التنقل الأيسر، حدد **إعدادات المستأجر** لتوسيعه.
1. حدد **إعدادات B2C**، ثم حدد **إدارة**.
1. حدد **إضافة تطبيق B2C**، ثم أدخل المعلومات التالية:

    - **اسم التطبيق**: أدخل الاسم الذي ينبغي استخدامه للتطبيق في سياق إدارته في Commerce. نوصي باستخدام اسم التطبيق الذي اخترته عند إعداد تطبيق Azure AD B2C في مدخل Azure. وبهذه الطريقة، يمكنك المساعدة على تقليل الالتباس عند إدارة مستأجري B2C في Commerce.
    - **اسم المستأجر**: أدخل اسم مستأجر B2C كما يظهر في مدخل Azure.
    - **معرف سياسة نسيان كلمة المرور**: أدخل معرف السياسة (اسم السياسة في مدخل Azure).
    - **معرف سياسة التسجيل وتسجيل الدخول**: أدخل معرف السياسة (اسم السياسة في مدخل Azure).
    - **GUID‎ العميل**: أدخل معرف مستأجر Azure AD B2C كما يظهر في مدخل Azure (وليس معرف التطبيق لمستأجر B2C).
    - **تحرير معرف سياسة ملف التعريف**: أدخل معرف السياسة (اسم السياسة في مدخل Azure).

1. عند الانتهاء من إدخال هذه المعلومات، حدد **موافق** لحفظ التغييرات. يجب أن يظهر مستأجر Azure AD B2C الجديد في القائمة ضمن **إدارة تطبيقات B2C**.

> [!NOTE]
> يجب ترك حقول مثل **النطاق**، و **معرف السياسة غير التفاعلية**، و **معرف العميل غير التفاعلي**، و **المجال المخصص لتسجيل الدخول**، و **معرف سياسة التسجيل** فارغة إلا إذا طلب منك فريق Dynamics 365 Commerce تعيينها.


### <a name="manage-or-delete-an-azure-ad-b2c-tenant"></a>إدارة مستأجر Azure AD B2C أو حذفه

1. قم بتسجيل الدخول إلى منشئ موقع Commerce لبيئتك كمسؤول نظام. لتكوين مستأجري Azure AD B2C، يجب أن تكون مسؤول نظام لبيئة Commerce.
1. في جزء التنقل الأيسر، حدد **إعدادات المستأجر** لتوسيعه.
1. حدد **إعدادات B2C**، ثم حدد **إدارة**.
1. لتحرير مستأجر B2C، حدد رمز قلم الرصاص المجاور له. لحذف مستأجر B2C، حدد رمز سلة المهملات المجاور له.
1. حدد **حفظ**، ثم حدد **نشر** لتنشيط التغييرات.

> [!WARNING]
> عند تكوين مستأجر B2C لموقع مباشر/منشور، ربما قام المستخدمون بالتسجيل باستخدام الحسابات الموجودة على المستأجر. إذا حذفت مستأجر تم تكوينه في قائمة **إعدادات مستأجر \> B2C**، فأنت تقوم بإزالة اقتران مستأجر B2C هذا من المواقع المقترنة بأي قنوات للمستأجر. في هذه الحالة، قد يتعذر على المستخدمين لديك تسجيل الدخول إلى حساباتهم. لذلك، توخى الانتباه الشديد عند حذف مستأجر تم تكوينه.
>
> عند حذف مستأجر تم تكوينه، سيستمر الاحتفاظ بمستأجر B2C والسجلات، ولكن سيتم تغيير تكوين نظام Commerce لذلك المستأجر أو إزالته. سيقوم المستخدمون الذين يحاولون التسجيل في الموقع أو تسجيل الدخول إليه بإنشاء سجل حساب جديد في مستأجر B2C الافتراضي أو المقترن حديثًا والذي تم تكوينه لقناة الموقع.

## <a name="configure-your-channel-with-a-b2c-tenant"></a>تكوين قناتك مع مستأجر B2C

1. قم بتسجيل الدخول إلى منشئ موقع Commerce لبيئتك كمسؤول نظام. لتكوين مستأجري Azure AD B2C، يجب أن تكون مسؤول نظام لبيئة Commerce.
1. في جزء التنقل الأيسر، حدد **إعدادات الموقع** لتوسيعه.
1. حدد **القنوات**، ثم حدد القناة المطلوب تكوينها.
1. في جزء الخصائص الموجود على اليمين، في الحقل **تحديد تطبيق B2C**، حدد مستأجر Azure AD B2C الذي تم تكوينه لاستخدامه في هذه القناة.
1. في شريط الأوامر ، حدد **حفظ ونشر** للالتزام بالتكوين الجديد أو المحدث.

> [!WARNING]
> إذا قمت بتغيير تطبيق B2C الذي تم تعيينه للقناة، فإنك تقوم بإزالة المراجع الحالية التي تم تأسيسها لأي مستخدمين قاموا بالتسجيل في البيئة. في هذه الحالة، لن تتوفر أي بيانات اعتماد مقترنة بتطبيق B2C المعين حاليًا للمستخدمين. لذلك، قم بتغيير تكوين قناة Azure AD B2C فقط إذا كنت تقوم بإعداد القناة لأول مرة، ولم يتمكن أي مستخدم من التسجيل. وإلا، فقد يضطر المستخدمون إلى التسجيل مرة أخرى لتأسيس سجل في مستأجر Azure AD B2C الجديد.
## <a name="additional-resources"></a>الموارد الإضافية

[تكوين اسم مجالك](configure-your-domain-name.md)

[نشر مستأجر التجارة الإلكترونية الجديد](deploy-ecommerce-site.md)

[إنشاء موقع تجارة إلكترونية](create-ecommerce-site.md)

[إقران موقع Dynamics 365 Commerce بقناة عبر الإنترنت](associate-site-online-store.md)

[إدارة ملفات robots.txt](manage-robots-txt-files.md)

[تحميل عناوين URL لإعادة التوجيه‬ بشكل مجمع](upload-bulk-redirects.md)

[إعداد مستأجر B2C في Commerce](set-up-B2C-tenant.md)

[إعداد صفحات مخصصة لعمليات تسجيل دخول المستخدمين](custom-pages-user-logins.md)

[إضافة الدعم إلى شبكة تسليم المحتوى (CDN)](add-cdn-support.md)

[تمكين اكتشاف المتجر استنادًا إلى الموقع](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
