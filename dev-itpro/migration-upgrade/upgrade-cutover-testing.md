---
title: "اختبار الترحيل الكلي أثناء الترقية"
description: "يشرح هذا المقال كيفية اختبار المهام التي تحدث بعد إيقاف تشغيل AX 2012 ولكن قبل تشغيل Dynamics 365 for Finance and Operations, Enterprise edition."
author: tariqbell
manager: AnnBe
ms.date: 05/29/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Developer, IT Pro
ms.reviewer: margoc
ms.search.scope: Operations, UnifiedOperations, Platform
ms.search.region: Global
ms.author: tabell
ms.search.validFrom: 2017-06-16
ms.dyn365.ops.version: Platform update 8
ms.translationtype: Human Translation
ms.sourcegitcommit: 6816e3820ab77c71bbf9bde4a068375448331671
ms.openlocfilehash: 711ad5cc3aafacf209704349effb4e08019205ac
ms.contentlocale: ar-sa
ms.lasthandoff: 06/15/2017

---

# <a name="upgrade-cutover-testing"></a>اختبار الترحيل الكلي أثناء الترقية

[!include[banner](../includes/banner.md)]

[!include[upgrade banner](../includes/upgrade-banner.md)]

*الترحيل الكلي* عبارة عن مصطلح نستخدمه للعملية الأخيرة المتعلقة بالحصول على نظام جديد مباشر. تتكون عملية الترحيل الكلي هذه من المهام التي تحدث بعد إيقاف تشغيل Microsoft Dynamics AX 2012 ولكن قبل تشغيل Microsoft Dynamics 365 for Finance and Operations, Enterprise edition. الغرض من اختبار الترحيل الكلي أثناء الترقية هو ممارسة عملية الترحيل الكلي لتمكين جميع المعنيين من الحصول على تجربة سلسة أثناء الترحيل الكلي الفعلي وصولاً إلى مرحلة التشغيل المباشر.

هناك حالتان رئيسيتان لتدفق العمل أثناء الترحيل الكلي:

- **تدفق العمل التقني** - يتضمن تدفق العمل هذا عملية تنفيذ ترقية البيانات. ستفرض أعمالك حدًا على مقدار وقت التوقف عن العمل المسموح به. أثناء وقت التوقف عن العمل هذا، لن يتوفر AX 2012 كما أن Finance and Operations لن يكون متوفرًا. قد يحتاج تدفق العمل هذا إلى ضبط عملية ترقية البيانات للوفاء بحد وقت التوقف عن العمل في الشركة.
- **تدفق العمل الوظيفي** - يتضمن تدفق العمل هذا مهام التكوين التي يتم تنفيذها بعد اكتمال عملية ترقية البيانات. يجب توثيق كافة هذه المهام وتحديد كميتها، ويجب أن يتم تعيين أحد الموارد، نظرًا لوجوب احتواء تدفق العمل الوظيفي وتدفق العمل التقني ضمن الحد الموضوع على وقت التوقف عن العمل في الشركة.

يعرض الرسم التوضيحي التالي العملية الكاملة للترحيل الكلي للانتقال إلى مرحلة التشغيل المباشر كما ستحدث في بيئة الإنتاج.

![عملية الترحيل الكلي](./media/cutover_1.png)

تختلف عملية الترحيل الكلي هذه عن عملية ترقية بيانات أساسية في بيئة وضع الحماية بالطرق التالية:

- لا يتم نسخ قاعدة بيانات AX 2012 ولكن يتم إجراء نسخ احتياطي لها فقط، وبعد ذلك يتم تعديل قاعدة البيانات الأصلية. يعتبر هذا الأسلوب أسرع ويوفر برنامج النسخ الاحتياطي العودة إلى الحالة السابقة، إذا كانت هذه العودة مطلوبة.
- لأن بيئة الإنتاج في Finance and Operations قامت بتقييد الوصول، فإن المهام التي كانت تنفذ في السابق على مثيل وضع الحماية لخادم كائن التطبيق (AOS) بات الآن تنفذ بواسطة فريق Microsoft DSE. تتضمن هذه المهام تنزيل واستيراد الملف bacpac، وتشغيل حزمة MajorversionDataUpgrade.zip.
- لقد أضفنا المهام التالية:

    - تنفيذ اختبار الدخان.
    - إكمال مهام إعداد التطبيق. قد تكون هذه الخطوة كبيرة الحجم، استنادًا إلى الوظيفة التي يتم استخدامها. أثناء تنفيذ هذه الخطوة، يقوم فريق العمل بتكوين الأداء الوظيفي للتطبيق الجديد لكي يكون جاهزًا للاستخدام في النظام الذي تمت ترقيته.
    - السماح بعودة المستخدمين. إعلام قاعدة المستخدمين بأن عملية الترقية قد اكتملت وبأنه باستطاعتهم استخدام النظام مرة أخرى.

## <a name="technical-workstream"></a>تدفق العمل التقني

يتضمن تدفق العمل التقني مختلف أعضاء الفريق التقني: مسؤول قاعدة البيانات (DBA) ومسؤول نظام AX 2012 ومسؤولي الخوادم والمطورين الملمين باستخدام AX 2012 وFinance and Operations. سوف يشرح هذا الموضوع المهام والأدوار المرتبطة بها.

أثناء اختبار الترحيل الكلي، يركز الفريق التقني على اختبار الأداء والموثوقية في عملية ترقية البيانات، للتأكد من أنها تتماشى مع الحد الموضوع على توقف العمل في الشركة. تشتمل هذه العملية على الكثير من عناصر الأجهزة والبرامج. بعض هذه العناصر محلي، في حين يوجد البعض الآخر في سحابة Microsoft. بالإضافة إلى ذلك، يشارك في هذه العملية عناصر كثيرة من التعليمات البرمجية المخصصة للتطبيقات والتعليمات البرمجية القياسية. نتيجة هذا الاختبار يجب أن تكون الثقة في عملية الترحيل الكلي لبيئتك.

### <a name="turn-off-the-ax-2012-aos-instances"></a>إيقاف تشغيل مثيلات AX 2012 AOS

تحتاج هذه المهمة إلى مسؤول النظام AX 2012 ومسؤولي الخادم.

يجب التحقق من صحة المناطق التالية:

- **الوظائف الدفعية قيد التشغيل في وقت الترحيل الكلي** - وظيفة دفعية يستغرق تشغيلها وقتًا طويلاً وبدأ تشغيلها سوف تمنع النظام من التوقف. يجب عليك التخطيط مسبقًا، لكي تتمكن من إيقاف مثيلات AOS في اللحظة المطلوبة. قد تحتاج إلى جدولة دفعات بحيث تكتمل قبل وقت قليل من إيقاف تشغيل AX 2012.
- **الأنظمة المتكاملة** - قد يكون لديك أنظمة أخرى متكاملة مع بيئة AX 2012. يجب أن تأخذ هذه الأنظمة في الاعتبار في خطتك لإيقاف تشغيل AX 2012. على سبيل المثال، قد تحتاج إلى إيقاف تشغيل الأنظمة المتكاملة قبل وقت قليل من إيقاف تشغيل AX 2012 بحد ذاته، لتمكين اكتمال أية حركات تتجاوز العدد المتبقي. تختلف متطلبات الأنظمة المتكاملة على نطاق واسع من شركة إلى أخرى. لذلك، يجب على فريق الخبراء لديك التخطيط لهذا السيناريو بشكل مستقل.

### <a name="create-a-backup-of-the-ax-2012-database"></a>إنشاء نسخة احتياطية لقاعدة بيانات AX 2012

تتضمن هذه المهمة DBA. سيتم استخدام النسخة الاحتياطية إذا كانت العودة إلى الحالة السابقة مطلوبة. والسابقة أيضًا كنقطة مرجعية سيتم الاحتفاظ بها لفترة وتعرض حالة النظام أثناء الترحيل الكلي.

يجب التحقق من صحة المناطق التالية:

- الحصول على التوقيت الملموس لعملية النسخ الاحتياطي.
- ضبط خيارات النسخ الاحتياطي التي يتم استخدامها (على سبيل المثال، الضغط مقابل عدم الضغط)، للمساعدة في ضمان إجراء النسخ الاحتياطي في أسرع وقت ممكن.

### <a name="export-the-database-to-bacpac"></a>تصدير قاعدة البيانات إلى bacpac

تتضمن هذه المهمة DBA. مخرجات هذه المهمة هي ملف التصدير الذي سيتم تحميله إلى Microsoft Azure للنظام الجديد.

يجب التحقق من صحة المناطق التالية:

- الحصول على التوقيت الملموس لعملية النسخ الاحتياطي.
- تحسين عملية التصدير للمساعدة في ضمان أسرع تجربة ممكنة. قد يتطلب تحسين الأداء المهام التالية:

    - قياس موارد النظام أثناء التصدير، مثل وحدة المعالجة المركزية وإدخال/إخراج القرص والذاكرة.
    - إذا تم العثور على مشاكل في الموارد، فيجب إنشاء خطة لتقليلها. بشكل عام، ستقوم بتقليل هذه المشكلات عن طريق تعيين عدد أكبر من الموارد المطلوبة.

### <a name="upload-the-bacpac-file-to-azure-storage"></a>تحميل ملف bacpac إلى مساحة تخزين Azure

تتضمن هذه المهمة DBA أو مسؤولي الخادم. أثناء هذه المهمة، يتم نقل ملف bacpac إلى Azure.

يجب التحقق من صحة المناطق التالية:

- حدد الجهاز الذي سيتم استخدامه لعمليات التحميل، وتأكد من أن أداة استكشاف مساحة تخزين Azure تم تكوينها وأصبحت جاهزة للاستخدام.
- الحصول على التوقيت الملموس لعملية التحميل عن طريق قياسها عدة مرات. ستكون أوقات التحميل متفاوتة، استنادًا إلى سرعة اتصال الإنترنت والموقع الجغرافي لمركز بيانات Azure بالنسبة إلى موقعك.

### <a name="download-and-import-the-bacpac-file-to-the-azure-sql-database"></a>تنزيل واستيراد ملف bacpac إلى قاعدة بيانات Azure SQL

عند حدوث هذه المهمة في مرحلة التشغيل المباشر، سيتم تنفيذها بواسطة فريق Microsoft DSE. ومع ذلك، أثناء اختبار الترحيل الكلي، سوف تتضمن DBA. نتيجة هذه المهمة هي ملف التصدير الذي سيتم تحميله إلى Azure للنظام الجديد.

يجب التحقق من صحة المناطق التالية:

- الحصول على التوقيت الملموس لعملية الاستيراد.
- تحسين عملية التصدير للمساعدة في ضمان أسرع تجربة ممكنة. قد يتطلب تحسين الأداء المهام التالية:

    - قياس موارد النظام أثناء التصدير. فيما يلي بعض الأمثلة:

        - **على جهاز AOS:** وحدة المعالجة المركزية وإدخال/إخراج القرص والذاكرة
        - **على مثيل قاعدة بيانات SQL Azure:** سرعة نقل قاعدة بيانات SQL (DTU). يمكنك مراقبة Azure SQL DTU من Microsoft SQL Server Management Studio على جهاز AOS بالنظر إلى طريقة عرض النظام sys.dm_resource_stats.

    - إذا تم العثور على مشاكل في الموارد، فيجب إنشاء خطة لتقليلها. بشكل عام، ستقوم بتقليل هذه المشكلات عن طريق تعيين عدد أكبر من الموارد المطلوبة. نظراً لأن هذا الجهاز مستضاف من قبل Microsoft، يجب إرسال طلب إلى Microsoft لزيادة الموارد إذا حددت وجود مشكلة فيها.

### <a name="run-the-majorversiondataupgradezip-package"></a>تشغيل حزمة MajorVersiondataUpgrade.zi

عند حدوث هذه المهمة في مرحلة التشغيل المباشر، سيتم تنفيذها بواسطة فريق Microsoft DSE. ومع ذلك، أثناء اختبار الترحيل الكلي، سوف تتضمن المطورين. أثناء هذه المهمة، يتم تحويل بنية قاعدة البيانات القديمة إلى بنية النظام الجديد.

يتم تشغيل عملية مزامنة قاعدة البيانات كجزء من هذه المهمة. قد تستغرق مزامنة قاعدة البيانات وقتًا طويلاً في بعض الحالات، مثلاً عندما يتغير فهرس مرتب على جدول، لأن هذه العملية عملية مكلفة في SQL.

نحن ننصح بشدة أن تقوم أولاً بتنفيذ عملية التحليل والتصحيح في بيئة تطوير. في بيئة وضع الحماية، تعتبر خيارات التصحيح والتحليل أكثر تقييدًا. الهدف هو أن يكون لديك القليل من المشاكل أو لا مشاكل ينبغي معالجتها عندما تقوم باختبار الترحيل الكلي.

يجب التحقق من صحة المناطق التالية:

- الحصول على التوقيت الملموس لعملية الاستيراد.
- تحسين العملية للمساعدة في ضمان أسرع تجربة. قد يتطلب تحسين الأداء المهام التالية:

    - مراقبة أداء البرامج النصية الفردية للترقية من خلال جدول ReleaseUpdateScriptsExecution.
    - ضبط البرامج النصية لتحقيق الأداء الأمثل. قد تتطلب هذه المهمة تخصيص التعليمات البرمجية X + + في البرنامج النصي لتحسينه لمجموعة بياناتك.
    - مراقبة Azure SQL DTU باستخدام مراقبة Microsoft Dynamics Lifecycle Services (LCS) أو طريقة عرض النظام sys.dm_resources_stats في Management Studio. إذا وصلت الموارد إلى نقطة لا يمكن عندها حدوث أي تحسن، فقد يتعين عليك طلب مستوى أعلى من قاعدة البيانات من فريق Microsoft DSE.

### <a name="roll-back-to-ax-2012"></a>العودة إلى AX 2012

الهدف من هذه المهمة هو استعادة قاعدة البيانات باستخدام النسخ الاحتياطي الذي تم إجراؤه عند إيقاف تشغيل AX 2012، ثم إعادة تشغيل AX 2012. قد يتعين أيضًا استعادة حالة الأنظمة المتكاملة. ومع ذلك، لأن الأنظمة المتكاملة تختلف من شركة إلى أخرى، يجب أن تخطط لهذا السيناريو بشكل مستقل، استنادًا إلى ظروفك الخاصة. على الرغم من أنه من غير المحتمل أن تحتاج إلى العودة إلى الحالة السابق، غير أنه من الضروري أن يكون لديك عملية تم اختبارها إذا ما احتجت إليها.

## <a name="functional-workstream"></a>تدفق العمل الوظيفي

بعد ترقية البيانات، ستحتاج إلى مهام تكوين متعددة في البيئة الجديدة. الهدف من تدفق العمل هذا هو توثيق وتحديد كمية كافة مهام التكوين، وتعيين مورد لكل مهمة، للمساعدة في ضمان تنفيذ هذه المهام معًا مع تدفق العمل التقني أثناء الإطار الزمني للتوقف عن العمل.

بشكل عام، تتضمن المهام الوظيفية تغيير قيم محددات نظام معينة أو بيانات التكوين الأخرى. يتم تعريف هذه المهام من خلال مسار الاختبار الوظيفي الكامل، وهو عبارة عن ونشاط منفصل عن اختبار الترحيل الكلي. عندما يتم التعرف على مهمة من هذا النوع، يجب مراجعتها مع المورد الوظيفي والمطور لديك.

قد تحتاج التغييرات الكبيرة إلى كتابة برنامج نصي مخصص جديد لترقية البيانات لتحديث البيانات أثناء عملية ترقية البيانات. ومع ذلك، باستطاعة المورد الوظيفي تشغيل تغييرات أصغر حجمًا من خلال النظام الجديد بعد ترقية البيانات.

يجب اختبار التغييرات الكبيرة التي تحتوي على برامج نصية جديدة لترقية البيانات. لذلك، يجب تشغيل تكرار إضافي واحد أو أكثر لحزمة MajorVersionDataUpgrade.zip. من الضروري أن تزن تكلفة تشغيل الحزمة مرة أخرى مقارنة بتكلفة إدخال البيانات يدويًا.

لكل من التغييرات اليدوية، يجب إضافة مهمة إلى مستند خطة الترحيل الكلي. يجب أن تظهر هذه المهمة التفاصيل التالية:

-   ما هي المهمة، وما يجب القيام به؟
-   من يجب عليه القيام بذلك؟
-   ما فترة الوقت التي يستغرقها التنفيذ؟

